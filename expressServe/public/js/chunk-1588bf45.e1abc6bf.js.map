{"version":3,"sources":["webpack:///./src/pages/index.vue?302a","webpack:///./src/pages/index.vue","webpack:///./node_modules/zrender/lib/svg/core.js","webpack:///./node_modules/zrender/lib/core/arrayDiff.js","webpack:///./node_modules/zrender/lib/svg/graphic.js","webpack:///./node_modules/zrender/lib/svg/helper/Definable.js","webpack:///./node_modules/zrender/lib/svg/helper/GradientManager.js","webpack:///./node_modules/zrender/lib/svg/helper/PatternManager.js","webpack:///./node_modules/zrender/lib/svg/helper/ClippathManager.js","webpack:///./node_modules/zrender/lib/svg/helper/ShadowManager.js","webpack:///./node_modules/zrender/lib/svg/Painter.js","webpack:///./node_modules/echarts/lib/renderer/installSVGRenderer.js","webpack:///./node_modules/echarts/lib/chart/bar/BaseBarSeries.js","webpack:///./node_modules/echarts/lib/chart/bar/BarSeries.js","webpack:///./node_modules/echarts/lib/chart/bar/BarView.js","webpack:///./node_modules/echarts/lib/chart/bar/install.js","webpack:///./node_modules/echarts/lib/chart/pie/pieLayout.js","webpack:///./node_modules/echarts/lib/processor/dataFilter.js","webpack:///./node_modules/echarts/lib/chart/pie/labelLayout.js","webpack:///./node_modules/echarts/lib/chart/helper/pieHelper.js","webpack:///./node_modules/echarts/lib/chart/pie/PieView.js","webpack:///./node_modules/echarts/lib/chart/pie/PieSeries.js","webpack:///./node_modules/echarts/lib/chart/pie/install.js","webpack:///./node_modules/echarts/lib/chart/radar/radarLayout.js","webpack:///./node_modules/echarts/lib/chart/radar/backwardCompat.js","webpack:///./node_modules/echarts/lib/chart/radar/RadarView.js","webpack:///./node_modules/echarts/lib/chart/radar/RadarSeries.js","webpack:///./node_modules/echarts/lib/coord/radar/RadarModel.js","webpack:///./node_modules/echarts/lib/component/radar/RadarView.js","webpack:///./node_modules/echarts/lib/coord/radar/IndicatorAxis.js","webpack:///./node_modules/echarts/lib/coord/radar/Radar.js","webpack:///./node_modules/echarts/lib/component/radar/install.js","webpack:///./node_modules/echarts/lib/chart/radar/install.js","webpack:///./node_modules/echarts/lib/component/helper/MapDraw.js","webpack:///./node_modules/echarts/lib/chart/map/MapView.js","webpack:///./node_modules/echarts/lib/chart/map/MapSeries.js","webpack:///./node_modules/echarts/lib/chart/map/mapDataStatistic.js","webpack:///./node_modules/echarts/lib/chart/map/mapSymbolLayout.js","webpack:///./node_modules/echarts/lib/coord/geo/Geo.js","webpack:///./node_modules/echarts/lib/coord/geo/geoCreator.js","webpack:///./node_modules/echarts/lib/coord/geo/GeoModel.js","webpack:///./node_modules/echarts/lib/component/geo/GeoView.js","webpack:///./node_modules/echarts/lib/component/geo/install.js","webpack:///./node_modules/echarts/lib/chart/map/install.js","webpack:///./node_modules/echarts/lib/chart/tree/layoutHelper.js","webpack:///./node_modules/echarts/lib/chart/tree/TreeView.js","webpack:///./node_modules/echarts/lib/data/Tree.js","webpack:///./node_modules/echarts/lib/chart/tree/TreeSeries.js","webpack:///./node_modules/echarts/lib/chart/tree/traversalHelper.js","webpack:///./node_modules/echarts/lib/chart/tree/treeLayout.js","webpack:///./node_modules/echarts/lib/chart/tree/treeVisual.js","webpack:///./node_modules/echarts/lib/chart/tree/treeAction.js","webpack:///./node_modules/echarts/lib/chart/tree/install.js","webpack:///./node_modules/echarts/lib/chart/helper/treeHelper.js","webpack:///./node_modules/echarts/lib/chart/treemap/treemapAction.js","webpack:///./node_modules/echarts/lib/chart/helper/enableAriaDecalForTree.js","webpack:///./node_modules/echarts/lib/chart/treemap/TreemapSeries.js","webpack:///./node_modules/echarts/lib/chart/treemap/Breadcrumb.js","webpack:///./node_modules/echarts/lib/util/animation.js","webpack:///./node_modules/echarts/lib/chart/treemap/TreemapView.js","webpack:///./node_modules/echarts/lib/chart/treemap/treemapVisual.js","webpack:///./node_modules/echarts/lib/chart/treemap/treemapLayout.js","webpack:///./node_modules/echarts/lib/chart/treemap/install.js","webpack:///./node_modules/echarts/lib/chart/funnel/FunnelView.js","webpack:///./node_modules/echarts/lib/chart/funnel/FunnelSeries.js","webpack:///./node_modules/echarts/lib/chart/funnel/funnelLayout.js","webpack:///./node_modules/echarts/lib/chart/funnel/install.js","webpack:///./node_modules/echarts/lib/chart/parallel/ParallelView.js","webpack:///./node_modules/echarts/lib/chart/parallel/ParallelSeries.js","webpack:///./node_modules/echarts/lib/chart/parallel/parallelVisual.js","webpack:///./node_modules/echarts/lib/coord/parallel/parallelPreprocessor.js","webpack:///./node_modules/echarts/lib/component/parallel/ParallelView.js","webpack:///./node_modules/echarts/lib/coord/parallel/ParallelModel.js","webpack:///./node_modules/echarts/lib/coord/parallel/ParallelAxis.js","webpack:///./node_modules/echarts/lib/coord/parallel/Parallel.js","webpack:///./node_modules/echarts/lib/coord/parallel/parallelCreator.js","webpack:///./node_modules/echarts/lib/coord/parallel/AxisModel.js","webpack:///./node_modules/echarts/lib/component/axis/ParallelAxisView.js","webpack:///./node_modules/echarts/lib/component/axis/parallelAxisAction.js","webpack:///./node_modules/echarts/lib/component/parallel/install.js","webpack:///./node_modules/echarts/lib/chart/parallel/install.js","webpack:///./node_modules/echarts/lib/chart/sankey/SankeyView.js","webpack:///./node_modules/echarts/lib/chart/sankey/SankeySeries.js","webpack:///./node_modules/echarts/lib/chart/sankey/sankeyLayout.js","webpack:///./node_modules/echarts/lib/chart/sankey/sankeyVisual.js","webpack:///./node_modules/echarts/lib/chart/sankey/install.js","webpack:///./node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","webpack:///./node_modules/echarts/lib/chart/boxplot/BoxplotSeries.js","webpack:///./node_modules/echarts/lib/chart/boxplot/BoxplotView.js","webpack:///./node_modules/echarts/lib/chart/boxplot/boxplotVisual.js","webpack:///./node_modules/echarts/lib/chart/boxplot/boxplotLayout.js","webpack:///./node_modules/echarts/lib/chart/boxplot/prepareBoxplotData.js","webpack:///./node_modules/echarts/lib/chart/boxplot/boxplotTransform.js","webpack:///./node_modules/echarts/lib/chart/boxplot/install.js","webpack:///./node_modules/echarts/lib/chart/candlestick/CandlestickView.js","webpack:///./node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","webpack:///./node_modules/echarts/lib/chart/candlestick/preprocessor.js","webpack:///./node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","webpack:///./node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","webpack:///./node_modules/echarts/lib/chart/candlestick/install.js","webpack:///./node_modules/echarts/lib/chart/helper/EffectLine.js","webpack:///./node_modules/echarts/lib/chart/helper/Polyline.js","webpack:///./node_modules/echarts/lib/chart/helper/EffectPolyline.js","webpack:///./node_modules/echarts/lib/chart/helper/LargeLineDraw.js","webpack:///./node_modules/echarts/lib/chart/lines/linesLayout.js","webpack:///./node_modules/echarts/lib/chart/lines/LinesView.js","webpack:///./node_modules/echarts/lib/chart/lines/LinesSeries.js","webpack:///./node_modules/echarts/lib/chart/lines/linesVisual.js","webpack:///./node_modules/echarts/lib/chart/lines/install.js","webpack:///./node_modules/echarts/lib/chart/bar/PictorialBarView.js","webpack:///./node_modules/echarts/lib/chart/bar/PictorialBarSeries.js","webpack:///./node_modules/echarts/lib/chart/bar/installPictorialBar.js","webpack:///./node_modules/echarts/lib/chart/themeRiver/ThemeRiverView.js","webpack:///./node_modules/echarts/lib/chart/themeRiver/ThemeRiverSeries.js","webpack:///./node_modules/echarts/lib/chart/themeRiver/themeRiverLayout.js","webpack:///./node_modules/echarts/lib/chart/themeRiver/install.js","webpack:///./node_modules/echarts/lib/chart/sunburst/SunburstPiece.js","webpack:///./node_modules/echarts/lib/chart/sunburst/sunburstAction.js","webpack:///./node_modules/echarts/lib/chart/sunburst/SunburstView.js","webpack:///./node_modules/echarts/lib/chart/sunburst/SunburstSeries.js","webpack:///./node_modules/echarts/lib/chart/sunburst/sunburstLayout.js","webpack:///./node_modules/echarts/lib/chart/sunburst/sunburstVisual.js","webpack:///./node_modules/echarts/lib/chart/sunburst/install.js","webpack:///./node_modules/echarts/lib/coord/single/singleAxisHelper.js","webpack:///./node_modules/echarts/lib/component/axis/SingleAxisView.js","webpack:///./node_modules/echarts/lib/coord/single/AxisModel.js","webpack:///./node_modules/echarts/lib/coord/single/SingleAxis.js","webpack:///./node_modules/echarts/lib/coord/single/Single.js","webpack:///./node_modules/echarts/lib/coord/single/singleCreator.js","webpack:///./node_modules/echarts/lib/component/axisPointer/SingleAxisPointer.js","webpack:///./node_modules/echarts/lib/component/singleAxis/install.js","webpack:///./node_modules/echarts/lib/component/graphic/install.js","webpack:///./node_modules/echarts/lib/component/brush/preprocessor.js","webpack:///./node_modules/echarts/lib/component/brush/selector.js","webpack:///./node_modules/echarts/lib/component/brush/visualEncoding.js","webpack:///./node_modules/echarts/lib/component/brush/BrushView.js","webpack:///./node_modules/echarts/lib/component/brush/BrushModel.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/Brush.js","webpack:///./node_modules/echarts/lib/component/brush/install.js","webpack:///./node_modules/echarts/lib/component/marker/checkMarkerInSeries.js","webpack:///./node_modules/echarts/lib/component/marker/MarkerModel.js","webpack:///./node_modules/echarts/lib/component/marker/MarkPointModel.js","webpack:///./node_modules/echarts/lib/component/marker/markerHelper.js","webpack:///./node_modules/echarts/lib/component/marker/MarkerView.js","webpack:///./node_modules/echarts/lib/component/marker/MarkPointView.js","webpack:///./node_modules/echarts/lib/component/marker/installMarkPoint.js","webpack:///./node_modules/echarts/lib/component/marker/MarkLineModel.js","webpack:///./node_modules/echarts/lib/component/marker/MarkLineView.js","webpack:///./node_modules/echarts/lib/component/marker/installMarkLine.js","webpack:///./node_modules/echarts/lib/component/marker/MarkAreaModel.js","webpack:///./node_modules/echarts/lib/component/marker/MarkAreaView.js","webpack:///./node_modules/echarts/lib/component/marker/installMarkArea.js","webpack:///./node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/roams.js","webpack:///./node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomInside.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSlider.js","webpack:///./node_modules/echarts/lib/component/dataZoom/install.js","webpack:///./node_modules/echarts/lib/visual/aria.js","webpack:///./node_modules/echarts/lib/component/aria/preprocessor.js","webpack:///./node_modules/echarts/lib/component/aria/install.js","webpack:///./node_modules/echarts/lib/util/conditionalExpression.js","webpack:///./node_modules/echarts/lib/component/transform/filterTransform.js","webpack:///./node_modules/echarts/lib/component/transform/sortTransform.js","webpack:///./node_modules/echarts/lib/component/transform/install.js","webpack:///./node_modules/echarts/index.js","webpack:///./src/pages/index.vue?ca72"],"names":["class","ref","style","createElement","name","document","createElementNS","oldArr","newArr","equals","a","b","slice","newLen","length","oldLen","editLength","maxEditLength","bestPath","newPos","components","oldPos","extractCommon","indices","i","push","count","added","removed","execEditLength","diagonalPath","basePath","addPath","removePath","undefined","canAdd","canRemove","clonePath","pushComponent","buildValues","ret","commonCount","last","componentPos","componentLen","component","path","arrayDiff","equal","NONE","mathRound","Math","round","mathSin","sin","mathCos","cos","PI","PI2","degree","EPSILON","round3","val","round4","isAroundZero","pathHasFill","fill","pathHasStroke","stroke","setTransform","svgEl","m","attr","el","key","type","setAttribute","attrXLink","setAttributeNS","attrXML","bindStyle","opacity","fillOpacity","strokeWidth","lineWidth","strokeScale_1","strokeNoScale","getLineScale","strokeFirst","strokeOpacity","lineDash","lineDashOffset","rawVal","join","lineCap","lineJoin","miterLimit","SVGPathRebuilder","prototype","reset","this","_d","_str","moveTo","x","y","_add","lineTo","bezierCurveTo","x2","y2","x3","y3","quadraticCurveTo","arc","cx","cy","r","startAngle","endAngle","anticlockwise","ellipse","rx","ry","psi","firstCmd","dTheta","clockwise","dThetaPositive","abs","isCircle","unifiedTheta","large","x0","y0","isNaN","rect","w","h","closePath","cmd","c","d","e","f","g","arguments","_invalid","generateStr","getStr","svgPath","brush","__svgEl","createPathProxy","shapeChanged","beginPath","buildPath","shape","pathUpdated","pathVersion","getVersion","elExt","svgPathBuilder","__svgPathBuilder","__svgPathVersion","strokePercent","rebuildPath","transform","svgImage","image","HTMLImageElement","src","HTMLCanvasElement","toDataURL","dw","width","dh","height","__imageSrc","TEXT_ALIGN_TO_ANCHOR","left","right","center","middle","adjustTextY","lineHeight","textBaseline","svgText","text","textSvgEl","font","textSvgElStyle","textContent","textAlign","MARK_UNUSED","MARK_USED","Definable","zrId","svgRoot","tagNames","markLabel","domName","nextId","_domName","_zrId","_svgRoot","_tagNames","_markLabel","getDefs","isForceCreating","defs","getElementsByTagName","defs_1","insertBefore","firstChild","contains","children","doUpdate","target","onUpdate","dom","add","addDom","parentNode","appendChild","removeDom","removeChild","getDoms","doms","tagName","tags","markAllUnused","that","markDomUsed","markDomUnused","isDomUnused","removeUnused","_this","getSvgProxy","displayable","Path","TSpan","getSvgElement","isLinearGradient","value","isRadialGradient","isGradient","_super","GradientManager","call","addWithoutUpdate","svgElement","that_1","fillOrStroke","gradient","__dom","markUsed","id","getAttribute","updateDom","update","global","innerHTML","colors","colorStops","len","stop_1","offset","color","indexOf","hex","isPattern","patternDomMap","WeakMap","PatternManager","pattern","get","patternDom","SVGElement","svgWidth","svgHeight","img","prevImage","imageSrc","hostEl","dirty","createdImage","rotation","scaleX","scaleY","set","generateClipPathsKey","clipPaths","clipPath","hasClipPath","__clipPaths","ClippathManager","_refGroups","_keyDuplicateCount","_getClipPathGroup","prevDisplayable","keyDuplicateCount","clipPathKey","clipGroup","parentEl","clipPathEl","_dom","svgProxy","pathEl","newRefGroupsMap","group","ShadowManager","_shadowDomMap","_shadowDomPool","_getFromPool","shadowDom","pop","domChild","hasShadow","shadowKey","getShadowKey","_shadowDom","remove","filter","globalScale","getGlobalScale","offsetX","shadowOffsetX","offsetY","shadowOffsetY","blur","shadowBlur","shadowColor","stdDx","stdDy","stdDeviation","shadowDomsPool","toFixed","parseInt10","parseInt","checkParentAvailable","parent","child","insertAfter","prevSibling","nextSibling","prepend","removeFromMyParent","SVGPainter","root","storage","opts","refreshHover","createMethodNotSupport","pathToImage","configLayer","_opts","util","svgDom","cssText","bgRoot","_gradientManager","_patternManager","_clipPathManager","_shadowManager","viewport","_svgDom","_backgroundRoot","_viewport","resize","_visibleList","getType","getViewportRoot","getSvgDom","getSvgRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","refresh","list","getDisplayList","_paintList","setBackgroundColor","backgroundColor","_backgroundNode","bgNode","getWidth","getHeight","createSVGElement","tag","paintOne","gradientManager","patternManager","clipPathManager","shadowManager","visibleList","listLen","newVisibleList","invisible","__dirty","prevSvgElement","topPrevSvgElement","currentClipGroup","diff","item","k","display","_getSize","_width","_height","viewportStyle","whIdx","wh","cwh","plt","prb","parseFloat","stl","defaultView","getComputedStyle","dispose","clear","viewportNode","outerHTML","html","encodeURIComponent","replace","method","install","registers","registerPainter","BaseBarSeriesModel","apply","getInitialData","option","ecModel","createListFromArray","getSource","useEncodeDefaulter","getMarkerPosition","coordSys","coordinateSystem","pt","dataToPoint","clampData","data","getData","getLayout","size","offsetIndex","getBaseAxis","isHorizontal","NaN","defaultOption","zlevel","z","legendHoverLink","barMinHeight","barMinAngle","largeThreshold","progressive","progressiveChunkMode","Series","registerClass","BaseBarSeries","BarSeriesModel","createInvertedIndices","getProgressive","getProgressiveThreshold","progressiveThreshold","brushSelector","dataIndex","selectors","getItemLayout","dependencies","clip","roundCap","showBackground","backgroundStyle","borderColor","borderWidth","borderType","borderRadius","select","itemStyle","realtimeSort","BarSeries","_eventPos","mathMax","max","mathMin","min","getClipArea","coord","coordSysClipArea","getArea","baseAxis","onBand","expandWidth","BarView","_isFirstFrame","render","seriesModel","api","payload","_model","_removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","_updateLargeClip","incrementalRender","params","_incrementalRenderLarge","isLargeDraw","pipelineContext","isHorizontalOrRadial","oldData","_data","dim","animationModel","isAnimationEnabled","realtimeSortCfg","shouldRealtimeSort","_enableRealtimeSort","needsClip","removeClipPath","drawBackground","backgroundModel","getModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","bgEl","createBackgroundEl","useStyle","getItemStyle","setShape","itemModel","getItemModel","layout","hasValue","isClipped","elementCreator","model","updateStyle","updateRealtimeAnimation","setItemGraphicEl","ignore","newIndex","oldIndex","createBackgroundShape","getItemGraphicEl","execute","bgGroup","_backgroundGroup","Group","removeAll","createLarge","_removeBackground","setClipPath","_dispatchInitSort","orderMapping_1","idx","_onRendered","_updateSortWithinSameData","getZr","on","_dataSort","orderMapping","info","each","mapDimension","ordinalNumber","dataIdx","mappedValue","sort","ordinalNumbers","_isOrderChangedWithinSameData","scale","ordinalDataDim","lastValue","Number","MAX_VALUE","tickNum","getOrdinalMeta","categories","rawIdx","rawIndexOf","getRawOrdinalNumber","MIN_VALUE","indexOfRawIndex","_isOrderDifferentInView","orderInfo","extent","getExtent","tickMax","sortInfo","dispatchAction","componentType","axisId","index","sortResult","otherAxis","animation","duration","off","eachItemGraphicEl","Chart","cartesian2d","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","xClipped","yClipped","polar","signR","r0","tmp","clipped","axisModel","isUpdate","Rect","z2","__dataIndex","rectShape","animateProperty","isRadial","ShapeClass","Sector","sector","sectorShape","animateTarget","realtimeSortOption","getOtherAxis","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","isPolar","getItemVisual","cursorStyle","getShallow","labelPositionOutside","labelStatesModels","labelFetcher","labelDataIndex","defaultText","inheritColor","defaultOpacity","defaultOutsidePosition","label","getTextContent","getRawValue","emphasisModel","states","state","rawLayout","LagePathShape","LargePath","getDefaultShape","ctx","points","startPoint","__startPoint","baseDimIdx","__baseDimIdx","incremental","largeDataIndices","barWidth","backgroundStartPoint","silent","__largeDataIndices","__barWidth","setLargeBackgroundStyle","setLargeStyle","seriesIndex","largePathUpdateDataIndex","throttle","event","largePath","largePathFindDataIndex","valueDimIdx","barWidthHalf","startValueVal","pointerBaseVal","pointerValueVal","baseLowerBound","baseUpperBound","ii","barBaseVal","barValueVal","globalStyle","getVisual","coordLayout","ElementClz","registerChartView","registerSeriesModel","registerLayout","PRIORITY","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","registerProcessor","PROCESSOR","STATISTIC","dataSample","registerAction","eachComponent","mainType","query","componentModel","axis","setCategorySortInfo","RADIAN","getViewRect","getBoxLayoutParams","pieLayout","seriesType","eachSeriesByType","valueDim","viewRect","radius","minAngle","validDataCount","sum","getSum","unitRadian","roseType","stillShowZeroSum","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","dir","setLayout","angle","setItemLayout","angle_1","layout_1","layout_2","dataFilter","legendModels","findComponents","filterSelf","getName","isSelected","adjustSingleSide","viewWidth","viewHeight","viewLeft","viewTop","farthestX","position","labelAlignTo","dx","linePoints","recalculateX","recalculateXOnSemiToAlignOnEllipseCurve","semi","rB","rB2","dy","rA","rA2","sqrt","len2","items","topSemi","maxY","bottomSemi","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","isAlignToEdge","realTextWidth","targetTextWidth","labelDistance","edgeDistance","bleedMargin","dist","pieLabelLayout","hasLabelRotate","minShowLabelRadian","setNotShow","isLabelShown","labelLine","getTextGuideLine","labelModel","labelPosition","labelLineModel","labelLineLen","labelLineLen2","textX","textY","midAngle","nx","ny","labelRotate","isLabelInside","x1","y1","rotate","setStyle","verticalAlign","align","selectState","textRect","getBoundingRect","clone","applyTransform","getComputedTransform","margin","minTurnAngle","maxSurfaceAngle","surfaceNormal","Point","setTextConfig","inside","notShowLabel","__hostTarget","textGuideLineConfig","anchor","getSectorCornerRadius","cornerRadius","innerCornerRadius","PiePiece","setTextContent","updateData","firstCreate","hostModel","animationType","graphic","_updateLabel","ensureState","labelText","visualColor","visualOpacity","getFormattedLabel","removeTextGuideLine","polyline","setTextGuideLine","PieView","ignoreLabelLineUpdate","init","sectorGroup","_sectorGroup","s","piePiece","newIdx","oldIdx","containPoint","point","itemLayout","PieSeriesModel","useColorPaletteOnData","legendVisualProvider","LegendVisualProvider","getRawData","_defaultLabelLine","mergeOption","createListSimply","coordDimensions","encodeDefaulter","getDataParams","valueList","percent","$vars","labelLineNormalOpt","labelLineEmphasisOpt","emphasis","show","minShowLabelAngle","selectedOffset","percentPrecision","top","bottom","overflow","alignTo","distanceToLabelLine","length2","smooth","lineStyle","labelLayout","hideOverlap","scaleSize","avoidLabelOverlap","animationDuration","animationTypeUpdate","animationEasingUpdate","animationDurationUpdate","animationEasing","PieSeries","radarLayout","axes","getIndicatorAxes","axisIndex","isValidPoint","getValueMissingPoint","firstPoint","radarBackwardCompat","polarOptArr","polarNotRadar_1","polarOpt","indicator","radar","series","seriesOpt","polarIndex","radarIndex","normalizeSymbolSize","symbolSize","RadarView","createSymbol","symbolType","symbolPath","symbolRotate","updateSymbols","oldPoints","newPoints","symbolGroup","isInit","__dimIdx","setPosition","getInitialPoints","polygon","itemGroup","childAt","getLineStyle","areaStyleModel","polygonIgnore","isEmpty","parentModel","stateName","stateModel","stateIgnore","getAreaStyle","decal","itemHoverStyle","eachChild","pathStyle","setColor","pathEmphasisState","dimensions","labelDimIndex","RadarSeriesModel","hasSymbolVisual","generateCoord","generateCoordCount","Infinity","formatTooltip","multipleSeries","dataType","indicatorAxes","nameToDisplay","markerColor","header","sortBlocks","blocks","markerType","sortParam","getTooltipPosition","data_1","values","getValues","coordToPoint","dataToCoord","RadarSeries","valueAxisDefault","axisDefault","defaultsShow","opt","RadarModel","optionUpdated","boundaryGap","splitNumber","axisLine","axisTick","axisLabel","nameTextStyle","showName","nameFormatter","nameGap","triggerEvent","indicatorModels","indicatorOpt","iNameTextStyle","innerIndicatorOpt","nameLocation","indName","Model","componentIndex","_indicatorModels","getIndicatorModels","axisName","axisNameGap","splitLine","splitArea","Component","axisBuilderAttrs","radarModel","_buildAxes","_buildSplitLineAndArea","axisBuilders","indicatorAxis","axisBuilder","AxisBuilder","labelDirection","tickDirection","nameDirection","getGroup","splitLineModel","splitAreaModel","lineStyleModel","showSplitLine","showSplitArea","splitLineColors","splitAreaColors","splitLineColorsArr","splitAreaColorsArr","splitLines","splitAreas","ticksRadius","getTicksCoords","colorIndex","getColorIndex","realSplitNumber_1","axesTicksPoints","ticksCoords","tickCoord","prevPoints","j","concat","reverse","areaStyle","areaOrLine","areaOrLineColorList","IndicatorAxis","radiusExtent","Axis","Radar","_indicatorAxes","indicatorModel","Interval","indicatorIndex","pointToData","closestAxis","radian","atan2","minRadianDiff","closestAxisIdx","coordToData","viewSize","number","setExtent","radarSeries","getComponent","unionExtentFromData","increaseInterval","interval","exp10","pow","floor","log","LN10","rawExtent","fixedMin","fixedMax","getInterval","setInterval","isFinite","nicedSplitNumber","getTicks","ceil","convertToPixel","finder","console","warn","convertFromPixel","pixel","create","radarList","registerCoordinateSystem","registerComponentModel","registerComponentView","registerVisual","setItemVisual","setVisual","registerPreprocessor","OPTION_STYLE_ENABLED_TAGS","OPTION_STYLE_ENABLED_TAG_MAP","STATE_TRIGGER_TAG_MAP","LABEL_HOST_MAP","mapLabelRaw","getFixedItemStyle","areaColor","MapDraw","uid","_controller","RoamController","_controllerHost","_regionsGroup","_svgGroup","draw","mapOrGeoModel","fromView","isGeo","subType","mapSeries","getHostGeoModel","geo","regionsGroup","transformInfo","getTransformInfo","transformInfoRaw","raw","transformInfoRoam","roam","isFirstDraw","isVisualEncodedByVisualMap","viewBuildCtx","resourceType","_buildGeoJSON","_buildSVG","_updateController","_updateMapSelectHandler","nameMap","_regionsGroupByName","transformPoint","regions","region","regionName","regionModel","getRegionModel","indexOfName","regionGroup","hasRegionGroup","compoundPath","segmentIgnoreThreshold","paths","resetEventTriggerForRegion","resetTooltipForRegion","resetStateTriggerForRegion","geometries","geometry","exterior","interiors","interior","points_1","applyOptionStyleForRegion","Displayable","culling","centerPt","getCenter","resetLabelForRegion","mapName","map","_svgResourceChanged","_freeSVG","_useSVG","svgDispatcherMap","_svgDispatcherMap","focusSelf","_svgGraphicRecord","named","namedItem","svgNodeTagLower","z2EmphasisLift","namedFrom","focus_1","els","_enableBlurEntireSVG","blurStyle","opacity_1","traverse","isGroup","findHighDownDispatchers","geoModel","regionsGroupByName","_svgMapName","resource","geoSourceManager","getGeoResource","svgGraphic","useGraphic","freeGraphic","controller","controllerHost","zoomLimit","zoom","getZoom","enable","makeActionBase","action","_mouseDownFlag","roamHelper","originX","originY","setPointerChecker","resetForLabelLayout","mapDraw","normalStyleModel","emphasisStyleModel","blurStyleModel","selectStyleModel","normalStyle","emphasisStyle","selectStyle","labelXY","isDataNaN","showLabel","specifiedTextOpt","normal","textEl","textConfig","disableLabelAnimation","removeTextContent","removeTextConfig","eventTrigger","eventData","geoIndex","itemName","itemTooltipOption","highDownSilentOnTouch","focus","MapView","mapModel","from","_mapDraw","seriesId","needsDrawMap","_renderSymbols","originalData","originalDataIndex","circle","fullData","mainSeries","name_1","fullIndex_1","onHoverStateChange","toState","MapSeries","seriesGroup","getRegion","dataNameMap","toAppendNames","name_2","geoSource","load","getMapType","nameProperty","appendValues","seriesNames","otherIndex","noHeader","setZoom","setCenter","getLegendIcon","symbol","itemWidth","itemHeight","symbolKeepAspect","layoutMode","aspectScale","showLegendSymbol","boundingCoords","scaleLimit","selectedMode","dataStatistics","datas","statisticType","mapKey","result","mapDataStatistic","seriesGroups","hostGeoModel","seriesList","setData","cloneShallow","mapSymbolLayout","processedMapType","mapType","mapSymbolOffsets","subMapSeries","GEO_DEFAULT_PARAMS","invertLongitute","Geo","_nameCoordMap","source","defaultParmas","_regionsMap","regionsMap","_invertLongitute","boundingRect","setBoundingRect","_transformTo","rawTransformable","_rawTransformable","calculateTransform","BoundingRect","rawParent","decomposeTransform","_updateTransform","getRegionByCoord","contain","addGeoCoord","geoCoord","getGeoCoord","noRoam","out","View","getCoordSys","getReferringComponents","models","resizeGeo","leftTop","rightBottom","centerOption","sizeOption","aspect","useCenterAndSize","boxLayoutOption","setViewRect","setGeoCoords","GeoCreator","geoList","eachSeries","mapModelGroupBySeries","nameMapList","singleMapSeries","getFilledRegions","originRegionArr","regionsArr","geoCreator","GeoModel","mergeDefaultAndTheme","selectedMap","_optionModelMap","optionModelMap","regionOpt","selected","status","formatter","unSelect","toggleSelected","GeoView","focusBlurEnabled","_api","_handleRegionClick","updateSelectStatus","current","geoId","node","enterSelect","leaveSelect","makeAction","actionInfo","allSelected","names","v","res","inRoot","hierNode","defaultAncestor","ancestor","prelim","modifier","change","shift","thread","nodes","isExpand","n","firstWalk","separation","siblings","subtreeW","executeShifts","midPoint","apportion","secondWalk","nodeX","cb","defaultSeparation","radialCoordinate","rad","subtreeV","nodeOutRight","nodeInRight","nodeOutLeft","nodeInLeft","sumOutRight","sumInRight","sumOutLeft","sumInLeft","nextRight","nextLeft","moveSubtree","nextAncestor","wl","wr","node1","node2","TreeEdgeShape","parentPoint","childPoints","TreePath","getDefaultStyle","childLen","firstChildPos","lastChildPos","orient","forkDim","otherDim","forkPosition","tmpPoint","TreeView","_mainGroup","layoutInfo","_updateViewCoordSys","symbolNeedsDraw","updateNode","symbolEl","_nodeScaleRatio","_updateNodeAndLinkScale","bbox","oldMin","_min","oldMax","_max","viewCoordSys","updateLabelLayout","nodeScale","_getNodeGlobalScale","setSymbolScale","nodeScaleRatio","groupZoom","roamZoom","tree","getNodeByDataIndex","symbolInnerColor","virtualRoot","sourceSymbolEl","sourceLayout","sourceOldLayout","__oldX","__oldY","rawX","__radialOldRawX","rawY","__radialOldRawY","targetLayout","Symbol","useNameLabel","__radialRawX","__radialRawY","getSymbolPath","realRoot","rootLayout","length_1","isLeft","textPosition","normalLabelModel","labelRotateRadian","origin","focusDataIndices","getAncestorsIndices","getDescendantIndices","drawEdge","__edge","hoverState","edgeShape","getOrient","curvature","edgeForkPosition","edge","getEdgeShape","childLayout","removeAnimationOpt","easing","removeOpt","fadeOut","fadeLabel","sourceEdge","layoutOpt","cpx1","cpy1","cpx2","cpy2","radialCoor1","radialCoor2","radialCoor3","radialCoor4","TreeNode","hostTree","depth","viewChildren","isRemoved","eachNode","options","context","order","suppressVisitSub","updateDepthAndHeight","getNodeById","getId","getAncestors","includeSelf","ancestors","currNode","childNode","getValue","dimension","getDimension","merge","getLevelModel","levelModels","getRawIndex","isAncestorOf","isDescendantOf","Tree","_nodes","rawIndex","clearLayouts","clearItemLayouts","createTree","dataRoot","beforeLink","listData","dimMax","buildHierarchy","dataNode","addChild","dimensionsInfo","createDimensions","dimensionsCount","List","initData","linkList","mainData","struct","structAttr","TreeSeriesModel","ignoreStyleOnData","leaves","leavesModel","nodeData","wrapMethod","treeDepth","expandAndCollapse","expandTreeDepth","initialTreeDepth","getRawDataItem","collapsed","noValue","curveness","TreeSeries","eachAfter","callback","next","eachBefore","treeLayout","commonLayout","left_1","right_1","bottom_1","delta","tx_1","kx_1","ky_1","coorX_1","coorY_1","finalCoor","orient_1","treeVisual","existsStyle","ensureUniqueItemVisual","installTreeAction","retrieveTargetInfo","validPayloadTypes","targetNode","targetNodeId","getPathToRoot","aboveViewRoot","viewRoot","viewPath","wrapTreePathInfo","treePathInfo","nodeDataIndex","noop","actionTypes","installTreemapAction","handleRootToNode","types","targetInfo","originViewRoot","getViewRoot","direction","resetViewRoot","enableAriaDecalForTree","decalPaletteScope","TreemapSeriesModel","preventUsingHoverLayer","completeTreeValue","levels","designatedVisualItemStyle","designatedVisualModel","setDefault","levelDefine","levelModel","setLayoutInfo","mapIdToIndex","idIndexMap","_idIndexMap","_idIndexMapCount","_viewRoot","enableAriaDecal","clipWindow","squareRatio","leafDepth","drillDownIcon","zoomToNodeRatio","nodeClick","breadcrumb","emptyItemWidth","textStyle","distance","padding","upperLabel","colorAlpha","colorSaturation","gapWidth","borderColorSaturation","ellipsis","visualDimension","visualMin","visualMax","colorMappingBy","visibleMin","childrenVisibleMin","childValue","thisValue","globalColorList","globalDecalList","hasColorDefine","hasDecalDefine","modelColor","modelDecal","level0","TreemapSeries","TEXT_PADDING","ITEM_GAP","ARRAY_LENGTH","Breadcrumb","containerGroup","onSelect","thisGroup","textStyleModel","layoutParam","pos","box","totalWidth","renderList","_prepare","_renderContent","getTextRect","lastX","availableSize","itemNode","makeItemPoints","getTextColor","getFont","onclick","packEventData","head","tail","splice","componentSubType","seriesName","selfType","AnimationWrap","_storage","_elExistsMap","delay","finished","_finishedCallback","start","checkTerminate","animateTo","setToFinal","done","aborted","createWrap","DRAG_THRESHOLD","PATH_LABEL_NOAMAL","PATH_UPPERLABEL_NORMAL","Z2_BASE","Z2_BG","Z2_CONTENT","getStateItemStyle","makeStyleMapper","getItemStyleNormal","inner","TreemapView","_state","createStorage","payloadType","_oldTree","thisStorage","reRoot","rootNodeGroup","nodeGroup","_giveContainerGroup","renderResult","_doRender","renderFinally","_doAnimation","_resetController","_renderBreadcrumb","_containerGroup","_initEvents","thisTree","oldTree","lastsForAnimation","oldStorage","willInvisibleEls","doRenderNode","thisNode","oldNode","parentGroup","dualTravel","willDeleteEls","clearStorage","thisViewChildren","oldViewChildren","sameTree","getKey","processNode","DataDiffer","store","storageName","delEls","willDelete","durationOption","easingOption","animationWrap","innerStore","nodeWidth","nodeHeight","targetX","targetY","oldX","oldY","oldShape","fadein","_onPan","_onZoom","_clearController","rootRect","mouseX","mouseY","matrix","findTarget","isLeafRoot","_rootToNode","_zoomToNode","link","linkTarget","_breadcrumb","background","transformCoordToLocal","content","thisLayout","nodeModel","isInView","thisWidth","thisHeight","thisInvisible","thisRawIndex","oldRawIndex","upperHeight","isParent","itemStyleNormalModel","itemStyleEmphasisModel","itemStyleBlurModel","itemStyleSelectModel","giveGraphic","markRedraw","isAboveViewRoot","bg","renderBackground","upperLabelHeight","blurScope","focusOrIndices","renderContent","useUpperLabel","ecData","processInvisible","visualBorderColor","upperLabelWidth","prepareText","contentWidth","contentHeight","nodeStyle","element","rectEl","upperLabelRect","isShow","textPadding","layoutRect","disableLabelLayout","beforeUpdate","truncateMinChar","lineOverflow","addDrillDownIcon","textEmphasisState","getState","iconChar","Ctor","lasts","prepareAnimationWhenHasOld","calculateZ2","prepareAnimationWhenNoOld","lastCfg","parentOldX","parentOldY","parentOldBg","z2InLevel","ITEM_STYLE_NORMAL","travelTree","designatedVisual","viewRootAncestors","nodeLayout","thisNodeColor","nodeItemStyleModel","visuals","buildVisuals","calculateColor","calculateBorderColor","mapping_1","buildVisualMapping","childVisual","mapVisual","visualName","getValueVisualDefine","rangeVisual","getRangeVisual","dataExtent","visual","range","mappingMethod","loop","mapping","VisualMapping","drColorMappingBy","childVisuals","mappingType","mapValueToVisual","retrieveValue","PATH_BORDER_WIDTH","PATH_GAP_WIDTH","PATH_UPPER_LABEL_SHOW","PATH_UPPER_LABEL_HEIGHT","ecWidth","ecHeight","seriesOption","containerWidth","containerHeight","viewAbovePath","rootSize","estimateRootSize","sort_1","viewRootLayout_1","area","squarify","treeRoot","calculateRootPosition","prunning","hideChildren","halfGapWidth","getUpperLabelHeight","layoutOffset","layoutOffsetUpper","totalArea","initChildren","rowFixedLength","best","row","score","worst","orderBy","overLeafDepth","statistic","filterByThreshold","orderedChildren","deletePoint","ratio","areaMax","areaMin","squareArea","flush","idx0WhenH","idx1WhenH","xy","rowOtherLength","rowLen","step","wh1","remain","modWH","wh0","defaultSize","viewArea","currNodeValue","defaultPosition","targetCenter","clipRect","nodeInViewAbovePath","intersect","childClipRect","treemapVisual","treemapLayout","opacityAccessPath","FunnelPiece","local","insideStroke","outsideFill","FunnelView","funnelPiece","piece","FunnelSeriesModel","minSize","maxSize","gap","funnelAlign","FunnelSeries","getSortedIndices","valueArr","mapArray","isAscending","funnelLayout","sizeExtent","itemSize","getLinePoints","val_1","nextIdx","end","DEFAULT_SMOOTH","ParallelView","_dataGroup","_initialized","dataGroup","seriesScope","makeSeriesScope","newDataIndex","line","addEl","updateElCommon","oldDataIndex","createLinePoints","createGridClipShape","setTimeout","taskParams","parallelModel","getRect","dimName","isEmptyValue","getAxis","axisType","ParallelSeriesModel","visualStyleAccessPath","visualDrawType","makeDefaultEncode","getRawIndicesByActiveState","activeState","eachActiveState","theActiveState","parallelIndex","inactiveOpacity","activeOpacity","encodeDefine","axisDim","dataDimIndex","convertDimNameToNumber","ParallelSeries","parallelVisual","opacityMap","active","inactive","progress","hasItemOption","itemOpacity","parallelPreprocessor","createParallelIfNeeded","mergeAxisOptionFromParallel","parallel","hasParallelSeries","parallelAxis","axisOption","parallelOption","parallelAxisDefault","CLICK_THRESHOLD","_handlers","handlers","handler","eventName","_throttledDispatchExpand","_dispatchExpand","mousedown","checkTrigger","_mouseDownPoint","mouseup","mouseDownPoint","getSlidedAxisExpandWindow","behavior","axisExpandWindow","mousemove","debounceNextCall","view","triggerOn","ParallelModel","newOption","thisOption","_initDimensions","setAxisExpand","hasOwnProperty","parallelAxisIndex","axisModels","queryComponents","axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandRate","axisExpandDebounce","axisExpandSlideTriggerArea","axisExpandTriggerOn","ParallelAxis","coordExtent","mathFloor","mathCeil","Parallel","_axesMap","_axesLayout","_init","axisHelper","isCategory","inverse","_updateAxesFromSeries","_makeLayoutInfo","axisBase","layoutBase","pixelDimIndex","pAxis","pLayout","axisLength","layoutLength","_rect","_layoutAxes","winSize","layoutExtent","axisCount","restrict","axisCollapseWidth","winInnerIndices","axisExpandWindow0Pos","axisExtent","posInfo","layoutAxisWithExpand","layoutAxisWithoutExpand","positionTable","horizontal","vertical","rotationTable","axisNameAvailableWidth","axisLabelShow","nameTruncateMaxWidth","axisCoordToPoint","axesMap","dataDimensions","hasActiveSet","hasAxisBrushed","lenj","getActiveState","axisLayout","getAxisLayout","pointCoord","triggerArea","useJump","sliderMove","winSize2","createParallelCoordSys","coordSysList","parallelCoordSysCreator","ParallelAxisModel","activeIntervals","getAreaSelectStyle","setActiveIntervals","intervals","elementList","ParallelAxisView","_brushController","BrushController","_onBrush","fromAxisAreaSelect","oldAxisGroup","_axisGroup","coordSysModel","getCoordSysModel","areaSelectStyle","areaWidth","builderOpt","strokeContainThreshold","_refreshBrushController","extentLen","extra","mount","enableGlobalPan","setPanels","panelId","brushHelper","isTargetByCursor","getLinearBrushOtherExtent","enableBrush","brushType","brushStyle","removeOnClick","updateCovers","getCoverInfoList","eventParam","coverInfoList","areas","coverInfo","realtime","isEnd","parallelAxisId","installParallelActions","parallelAxisModel","defaultAxisOption","axisModelCreator","BRUSH","SankeyPathShape","SankeyPath","highlight","downplay","SankeyView","_focusAdjacencyDisabled","sankeyView","graph","getGraph","edgeData","eachEdge","curve","edgeModel","n1Layout","node1Model","dragX1","dragY1","n2Layout","node2Model","dragX2","dragY2","edgeLayout","sy","ty","sourceColor","targetColor","getAdjacentDataIndices","dragX","dragY","drift","localX","localY","ondragend","draggable","cursor","SankeySeriesModel","links","edges","createGraphFromNodeEdge","nodeDepth","getEdgeByIndex","setNodePosition","localPosition","dataItem","getEdgeData","rawDataOpt","edgeValue","edgeName","getNodeByIndex","nodeValue","nodeGap","layoutIterations","fontSize","nodeAlign","SankeySeries","sankeyLayout","computeNodeValues","filteredNodes","iterations","layoutSankey","computeNodeBreadths","computeNodeDepths","computeEdgeDepths","value1","outEdges","getEdgeValue","value2","inEdges","nodeRawValue","remainEdges","indegreeArr","zeroIndegrees","nextTargetNode","maxNodeDepth","hostGraph","isItemDepth","edgeIdx","indexEdge","nodeIndex","Error","maxDepth","adjustNodeWithNodeAlign","kx","scaleNodeBreadths","isNodeDepth","nextSourceNode","remainNodes","skNodeHeight","moveSinksRight","nodesByBreadth","prepareNodesByBreadth","initializeNodeDepth","resolveCollisions","alpha","relaxRightToLeft","relaxLeftToRight","keyAttr","groupResult","keys","buckets","minKy","ky","nodeDy","edgeDy","nodeDyAttr","weightedTarget","centerTarget","nodeY","weightedSource","centerSource","array","sankeyVisual","minValue_1","maxValue_1","mapValueToColor","customColor","WhiskerBoxCommonMixin","ordinalMeta","addOrdinal","xAxisModel","yAxisModel","xAxisType","yAxisType","coordDims","baseAxisDimIndex","baseAxisDim","_baseAxisDim","otherAxisDim","baseAxisType","otherAxisType","newOptionData_1","newItem","unshift","defaultValueDimensions","otherDims","tooltip","dimsDef","BoxplotSeriesModel","defaultTooltip","boxWidth","BoxplotSeries","BoxplotView","constDim","createNormalBox","updateNormalBoxData","BoxPathShape","BoxPath","ends","transInit","updateMethod","initBaseline","boxplotVisual","boxplotLayout","groupSeriesByAxis","groupItem","seriesModels","calculateBase","layoutSingleSeries","boxOffsetList","boxWidthList","axisList","bandWidth","seriesCount","boundList","getBandWidth","maxDataCount_1","boxWidthBound","availableWidth","boxGap","base","halfWidth","cDimIdx","vDimIdx","cDim","vDims","mapDimensionsAll","axisDimVal","median","getPoint","end1","end2","end4","end5","addBodyEnd","layEndLine","p","point1","point2","endCenter","to","prepareBoxplotData","rawData","boxData","outliers","boundIQR","useExtreme","ascList","Q1","Q2","Q3","bound","low","high","itemNameFormatter","outlier","boxplotTransform","upstream","sourceFormat","errMsg","config","registerTransform","SKIP_PROPS","CandlestickView","_incrementalRenderNormal","isSimpleBox","clipArea","isNormalBoxClipped","setBoxCommon","NormalBoxPathShape","NormalBoxPath","__simpleBox","LargeBoxPathShape","LargeBoxPath","__sign","largePoints","elP","elN","sign","CandlestickSeriesModel","getShadowDim","brushRect","color0","borderColor0","barMaxWidth","barMinWidth","CandlestickSeries","candlestickPreprocessor","seriesItem","positiveBorderColorQuery","negativeBorderColorQuery","positiveColorQuery","negativeColorQuery","candlestickVisual","plan","createRenderPlanner","performRawSeries","getColor","getBorderColor","isSeriesFiltered","isLargeRender","LargeArr","Float32Array","Array","candlestickLayout","candleWidth","calculateCandleWidth","openDim","closeDim","lowestDim","highestDim","largeProgress","normalProgress","openVal","closeVal","lowestVal","highestVal","ocLow","ocHigh","ocLowPoint","ocHighPoint","lowestPoint","highestPoint","subPixelOptimizePoint","getSign","makeBrushRect","pmin","pmax","tmpIn","tmpOut","EffectLine","lineData","createLine","_updateEffectSymbol","Line","effectModel","_symbolType","_symbolScale","_updateEffectAnimation","self","period","constantSpeed","delayExpr","_updateAnimationPoints","_getLineLength","_period","_loop","stopAnimation","delayNum","__t","animator","animate","when","during","_updateSymbolPosition","__p1","__cp1","__p2","p1","p2","cp1","t","lastPos","quadraticAt","quadraticDerivativeAt","tx","__lastT","updateLayout","Polyline","_createPolyline","_updateCommonStl","hoverLineStyle","emphasisLineStyle","lineEmphasisState","EffectPolyline","_lastFrame","_lastFramePercent","_points","accLenArr","_offsets","_length","offsets","frame","lastFrame","p0","LargeLinesPathShape","segs","LargeLinesPath","findDataIndex","quadratic","LargeLineDraw","isPersistent","_incremental","lineEl","rectHover","_setCommon","incrementalPrepareUpdate","_clearIncremental","IncrementalDisplayable","incrementalUpdate","addDisplayable","__startIndex","isIncremental","ecData_1","clearDisplaybles","linesLayout","isPolyline","isLarge","lineCoords","segCount","totalCoordsCount","getLineCoordsCount","getLineCoords","pts","LinesView","lineDraw","_updateLineDraw","trailLength","zr","isSvg","painter","getLayer","_lastZlevel","motionBlur","_showEffect","lastFrameAlpha","_finished","_clearLayer","_lineDraw","updateTransform","progressiveRender","hasEffect","_hasEffet","_isPolyline","LineDraw","Uint32Arr","Uint32Array","Float64Arr","Float64Array","compatEc2","itemOpt","coords","fromName","toName","LinesSeriesModel","_processFlatCoordsArray","_flatCoords","flatCoords","_flatCoordsOffset","flatCoordsOffset","appendData","_getCoordsFromItemModel","startOffset","coordsOffsetAndLenStorage","coordsStorage","coordsCursor","offsetCursor","dataCount","buffer","dimIndex","nameArr","preventIncremental","xAxisIndex","yAxisIndex","effect","LinesSeries","normalize","linesVisual","dataEach","BAR_BORDER_WIDTH_QUERY","LAYOUT_ATTRS","posDesc","pathForLineWidth","PictorialBarView","cartesian","coordSysRect","master","ecSize","coordSysExtent","categoryDim","symbolMeta","getSymbolMeta","bar","createBar","updateCommon","pictorialShapeStr","getShapeStr","__pictorialShapeStr","updateBar","__pictorialSymbolMeta","removeBar","symbolRepeat","symbolClip","symbolPosition","symbolPatternSize","symbolRepeatDirection","hoverScale","prepareBarLength","prepareSymbolSize","boundingLength","pxSign","prepareLineWidth","symbolScale","symbolOffset","prepareLayoutInfo","valueLineWidth","repeatCutLength","outputSymbolMeta","symbolBoundingData","valueAxis","zeroPx","toGlobalCoord","pxSignIdx","symbolBoundingExtent","convertToCoordOnAxis","parse","parsedSymbolSize","categorySize","unitLength","pathLen","absBoundingLength","symbolMargin","hasEndGap","lastIndexOf","symbolMarginNumeric","uLenWithMargin","endFix","repeatSpecified","repeatTimes","toIntTimes","mDiff","sizeFix","pathPosition","bundlePosition","barRectShape","clipShape","createPath","createOrUpdateRepeatSymbols","bundle","__pictorialBundle","unit","eachPath","__pictorialAnimationIndex","__pictorialRepeatTimes","updateAttr","makeTarget","createOrUpdateSingleSymbol","mainPath","__pictorialMainPath","createOrUpdateBarRect","barRect","__pictorialBarRect","createOrUpdateClip","__pictorialClipPath","getAnimationDelayParams","labelRect","pathes","immediateAttrs","animationAttrs","emphasisState","barPositionOutside","times","roundedTimes","PictorialBarSeriesModel","defaultSymbol","stack","barGap","PictorialBarSeries","ThemeRiverView","_layers","layersSeries","getLayerSeries","keyGetter","dataDiffer","_layersSeries","newLayersGroups","process","oldLayersGroups","points0","points1","textLayout","layerGroup","stackedOnPoints","stackedOnSmooth","smoothConstraint","labelEl","DATA_NAME_INDEX","ThemeRiverSeriesModel","fixData","rawDataLength","timeValueKeys","layerData","dataList","layerNum","timeValue","singleAxisModel","filterData","nameList","dimensionsDefine","single","lenCount","indexArr","timeDim","layerSeries","index1","index2","getAxisTooltipData","nestestValue","minDist","nearestIdx","pointNum","theValue","dataIndices","singleAxisIndex","ThemeRiverSeries","themeRiverLayout","doThemeRiverLayout","baseY0","layerPoints","singleLayer","computeBaseline","baseLine","layerIndex","sums","temp","l","DEFAULT_SECTOR_Z","DEFAULT_TEXT_Z","SunburstPiece","_seriesModel","_ecModel","itemStyleModel","labelMinAngle","isNormalShown","getLabelAttr","stateAttr","labelStateModel","isNormal","isShown","sectorState","labelColor","labelPadding","rotateType","dirtyStyle","ROOT_TO_NODE_ACTION","HIGHLIGHT_ACTION","UNHIGHLIGHT_ACTION","installSunburstAction","handleHighlight","SunburstView","newRoot","renderLabelForZeroData","newChildren","oldChildren","_oldChildren","newNode","removeNode","renderRollUp","virtualPiece","targetFound","SunburstSeriesModel","SunburstSeries","sunburstLayout","rootDepth","renderRollupNode","rPerLevel","renderNode","rStart","rEnd","siblingAngle_1","sortOrder","sortTargets","isAsc_1","sunburstVisual","paletteScope","pickColor","treeHeight","getColorFromPalette","axisPosition","rectBound","positionMap","directionMap","labelInside","labelRotation","selfBuilderAttrs","SingleAxisView","axisPointerClass","axisElementBuilders","AxisView","axisView","axisGroup","isBlank","lineColors","gridRect","lineCount","tickModel","subPixelOptimize","SingleAxisModel","SingleAxis","clamp","Single","axisPointerEnabled","_axis","_adjustAxis","_updateAxisTransform","coordBase","extentSum","toLocalCoord","getAxes","getTooltipAxes","baseAxes","otherAxes","singleModel","singles","singleCreator","XY","WH","SingleAxisPointer","makeElOption","elOption","axisPointerModel","otherExtent","getGlobalExtent","getPointDimIndex","pixelValue","axisPointerType","elStyle","viewHelper","pointerOption","pointerShapeBuilder","graphicKey","pointer","getHandleTransform","labelMargin","updateHandleTransform","currPosition","cursorOtherValue","cursorPoint","tooltipOption","BaseAxisPointer","targetShape","shadow","span","SingleView","registerAxisPointerClass","_nonShapeGraphicElements","preprocessor","graphicOption","elements","GraphicComponentModel","preventAutoZ","newList","existList","flattenedList","_flatten","mappingResult","elOptionsToUpdate","_elOptionsToUpdate","resultItem","newElOption","setKeyInfoToNewElOption","mergeNewElOptionToExist","setLayoutInfoToExist","$action","optionList","parentOption","useElOptionsToUpdate","GraphicComponentView","_elMap","graphicModel","_lastGraphicModel","_updateElements","_relocate","elMap","rootGroup","elExisting","parentId","targetElParent","elType","elOptionStyle","hv","textVerticalAlign","textContentOption","convertResult","elOptionCleaned","getCleanedElOption","createEl","removeEl","textContentExisting","elInner","__ecGraphicWidthOption","__ecGraphicHeightOption","setEventData","elOptions","apiWidth","apiHeight","isParentRoot","parentElInner","__ecGraphicWidth","__ecGraphicHeight","containerInfo","boundingMode","bounding","graphicType","Clz","__ecGraphicId","existElParent","removeKey","isSetLoc","obj","props","isSet","prop","existElOption","existing","keyInfo","newElParentOption","newElOptCopy","ignoreSize","existItem","existingGroupOpt","newGroupOpt","DEFAULT_TOOLBOX_BTNS","brushPreprocessor","isNew","brushComponents","brushComponentSpecifiedBtns","brushOpt","tbs","toolbox","feature","toolboxFeature","toolboxBrush","brushTypes","removeDuplicate","arr","flag","makeBrushCommonSelectorForSeries","selector","lineX","getLineSelectors","lineY","xyIndex","inLineRange","layoutRange","STATE_LIST","DISPATCH_METHOD","DISPATCH_FLAG","layoutCovers","brushModel","brushTargetManager","BrushTargetManager","setInputRanges","brushVisual","throttleType","throttleDelay","brushSelected","setBrushOption","brushOption","brushIndex","thisBrushSelected","brushId","brushName","brushLink","linkedSeriesMap","selectedDataIndexForLink","rangeInfoBySeries","hasBrushExists","builder","boundingRectBuilders","selectableArea","visualMappings","visualSolution","mappingOption","linkOthers","brushed","rangeInfoList","stepAParallel","stepAOthers","brushModelNotControll","controlSeries","checkInRange","seriesBrushSelected","getValueState","doDispatch","fn","isDisposed","batch","seriesIndices","getBoundingRectFromMinMax","minMax","rg","BrushView","updateVisual","updateView","$from","makePanelOpts","modelId","setOutputRanges","DEFAULT_OUT_OF_BRUSH_COLOR","BrushModel","inBrush","outOfBrush","liftZ","setAreas","generateBrushOption","brushMode","transformable","ICON_TYPES","BrushFeature","featureModel","isBrushed","_brushType","_brushMode","setIconStatus","getIcons","availableIcons","icons","command","getDefaultOption","icon","keep","title","getLocale","Brush","checkMarkerInSeries","seriesOpts","seriesOptArr","fillLabel","MarkerModel","createdBySelf","_mergeOption","env","hostSeries","__hostSeries","newOpt","markerOpt","markerModel","createMarkerModelFromSeries","noName","getMarkerModelFromSeries","MarkPointModel","masterMarkerModel","trigger","hasXOrY","hasXAndY","markerTypeCalculatorWithExtent","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","stacked","calcDataDim","getCalculationInfo","numCalculate","indicesOfNearest","coordArrValue","precision","markerTypeCalculator","average","dataTransform","dims","axisInfo","getAxisInfo","coordInfo","baseDataDim","valueDataDim","xAxis","radiusAxis","yAxis","angleAxis","valueIndex","dataDimToCoordDim","dataDim","dimItem","getDimensionInfo","coordDim","containData","sum_1","count_1","getMedian","MarkerView","markerGroupMap","renderSeries","markKeep","drawGroup","blurSeries","seriesModelList","updateMarkerLayout","mpData","xPx","yPx","MarkPointView","markPointModel","mpModel","seriesData","symbolDrawMap","symbolDraw","SymbolDraw","createList","dataParams","dataModel","coordDimsInfos","dataOpt","markPoint","MarkLineModel","markLineTransform","mlModel","itemArray","mlType","baseIndex","mlFrom","mlTo","normalizedItem","isInifinity","ifMarkLineHasOnlyDim","fromCoord","toCoord","otherDimIndex","markLineFilter","updateSingleMarkerEndLayout","isFrom","MarkLineView","markLineModel","mlData_1","fromData_1","toData_1","lineDrawMap","mlData","fromData","toData","updateDataVisualAndLayout","fromSymbolKeepAspect","fromSymbolOffset","fromSymbolRotate","fromSymbolSize","fromSymbol","toSymbolKeepAspect","toSymbolOffset","toSymbolRotate","toSymbolSize","toSymbol","optData","dimValueGetter","markLine","MarkAreaModel","markAreaTransform","maModel","lt","rb","ltCoord","rbCoord","ifMarkAreaHasOnlyDim","markAreaFilter","getSingleMarkerEndPoint","dimPermutations","MarkAreaView","markAreaModel","areaData_1","areaGroupMap","polygonGroup","areaData","xAxisScale","yAxisScale","xAxisExtent","yAxisExtent","xPointExtent","yPointExtent","overlapped","allClipped","markArea","InsideZoomModel","DataZoomModel","disabled","zoomLock","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","setViewInfoToCoordSysRecord","dataZoomModel","getRange","coordSysRecordMap","coordSysRecord","dzInfo","dataZoomInfoMap","disposeCoordSysRecordIfNeeded","coordSysKeyArr","coordSysKey","dzUid","disposeCoordSysRecord","createCoordSysRecord","containsPoint","isAvailableBehavior","dzReferCoordSysInfo","dataZoomId","mergeControllerParams","controlType","prefix","typePriority","dataZoomInfo","oneType","installDataZoomRoamProcessor","FILTER","apiInner","dzReferCoordSysWrap","infoList","dzCoordSysInfo","coordSysUid","firstDzInfo","firstDzKey","controllerParams","InsideZoomView","noTarget","getPercentRange","pan","getRangeHandlers","scrollMove","DataZoomView","coordSysInfo","coordSysMainType","lastRange","directionInfo","getDirectionInfo","percentPoint","signal","pixelStart","pixelLength","minMaxSpan","findRepresentativeAxisProxy","getMinMaxSpan","minSpan","maxSpan","makeMover","newX","newY","scrollDelta","getPercentDelta","percentDelta","grid","oldPoint","newPoint","getRadiusAxis","angleExtent","getAngleAxis","pointToCoord","singleAxis","installCommon","SliderZoomModel","dataBackground","selectedDataBackground","fillerColor","handleIcon","handleSize","handleStyle","moveHandleSize","moveHandleIcon","moveHandleStyle","showDetail","showDataShadow","brushSelect","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","_displayables","_onBrushEnd","_orient","_buildView","_updateView","_brushing","_resetLocation","_resetInterval","barGroup","sliderGroup","_renderBackground","_renderHandle","_renderDataShadow","_positionGroup","showMoveHandle","coordRect","_findCoordRect","positionInfo","layoutParams","_location","_size","location","targetAxisModel","getFirstTargetAxisModel","otherAxisInverse","_dataShadowInfo","_getViewExtent","clickPanel","_onClickPanel","_onBrushStart","_prepareDataShadowInfo","dataShadowSegs","otherDataExtent","otherOffset","lastIsEmpty","otherShadowExtent","thisShadowExtent","areaPoints","thisCoord","stride","otherCoord","createDataShadowGroup","isSelectedArea","eachTargetAxis","getAxisProxy","getTargetSeriesModels","thisAxis","getOtherDim","thisDim","displayables","handles","handleLabels","filler","handleIndex","iconStr","getCursor","_onDragMove","_onDragEnd","onmouseover","_showDataInfo","onmouseout","bRect","_handleHeight","_handleWidth","handleColor","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandle","iconSize","moveZoneExpandSize","moveZone","enterEmphasis","leaveEmphasis","ondragstart","_range","viewExtent","_handleEnds","_updateInterval","handleEnds","viewExtend","percentExtent","nonRealtime","displaybles","handleInterval","handle","handleHeight","segIntervals","segGroup","getClipPath","_updateDataInfo","labelTexts","axisProxy","getAxisModel","dataInterval","calculateDataWindow","valueWindow","getDataValueWindow","_formatLabel","orderedHandleEnds","setLabel","barTransform","textPoint","labelFormatter","labelPrecision","getPixelPrecision","valueStr","getLabel","showOrHide","_dragging","getLocalTransform","vertex","changed","_dispatchZoomAction","localPoint","_brushStart","_brushStartTime","Date","brushShape","brushEndTime","_updateBrushRect","brushStart","endPoint","coordSysInfoList","DEFAULT_OPTION","enabled","ariaVisual","ariaModel","getLocaleModel","setDecal","decalModel","useDecal","paletteScopeGroupByType_1","decalScope","scope","eachRawSeries","dataAll_1","idxMap_1","decalScope_1","dataCount_1","paletteDecal","specifiedDecal","mergeDecal","getSeriesCount","resultDecal","labelLocale","ariaLabel","seriesCnt","maxDataCnt","maxSeriesCnt","displaySeriesCnt","getTitle","withTitle","seriesLabels_1","seriesLabel","withName","getSeriesTypeName","partialLabel","displayCnt","dataLabels","dataLabel","middleSeparator_1","endSeparator_1","separatorModel","middleSeparator","endSeparator","str","keyValues","RegExp","ariaPreprocessor","aria","ARIA","RELATIONAL_EXPRESSION_OP_ALIAS_MAP","RegExpEvaluator","rVal","condValue","_condVal","evaluate","lVal","test","ConstConditionInternal","AndConditionInternal","OrConditionInternal","NotConditionInternal","RelationalConditionInternal","needParse","valueParser","tarValRaw","valueGetterParam","tarValParsed","subCondList","parseOption","exprOption","getters","cond","isObjectNotArray","and","parseAndOrOption","or","not","parseNotOption","parseRelationalOption","op","subOptionArr","subOption","prepareGetValue","exprKeys","parserName","parser","keyRaw","valueGetterAttrMap","condValueRaw","condValueParsed","evaluator","ConditionalExpressionParsed","_cond","parseConditionalExpression","filterTransform","rawItem","condition","dimLoose","dimInfo","dimIdx","param","retrieveValueFromItem","resultData","sortTransform","orderExprList","orderDefList","orderExpr","incomparable","errMsg_1","errMsg_2","comparator","item0","item1","orderDef","val0","val1","mounted","initTopology","methods","router","Topology","$refs","topology","setOption","topologyOpition","window","addEventListener","nodeIdx","__scopeId"],"mappings":"kHAAA,W,sICCOA,MAAM,W,GACJC,IAAI,WAAWC,MAAA,kD,wEADtB,eAEM,MAFN,EAEM,CADJ,eAA2E,MAA3E,EAA2E,e,gDCFxE,SAASC,EAAcC,GAC1B,OAAOC,SAASC,gBAAgB,6BAA8BF,G,oDCDlE,SAAS,EAAKG,EAAQC,EAAQC,GACrBA,IACDA,EAAS,SAAUC,EAAGC,GAClB,OAAOD,IAAMC,IAGrBJ,EAASA,EAAOK,QAChBJ,EAASA,EAAOI,QAChB,IAAIC,EAASL,EAAOM,OAChBC,EAASR,EAAOO,OAChBE,EAAa,EACbC,EAAgBJ,EAASE,EACzBG,EAAW,CAAC,CAAEC,QAAS,EAAGC,WAAY,KACtCC,EAASC,EAAcJ,EAAS,GAAIV,EAAQD,EAAQ,EAAGE,GAC3D,GAAIS,EAAS,GAAGC,OAAS,GAAKN,GAAUQ,EAAS,GAAKN,EAAQ,CAE1D,IADA,IAAIQ,EAAU,GACLC,EAAI,EAAGA,EAAIhB,EAAOM,OAAQU,IAC/BD,EAAQE,KAAKD,GAEjB,MAAO,CAAC,CACAD,QAASA,EACTG,MAAOlB,EAAOM,OACda,OAAO,EACPC,SAAS,IAGrB,SAASC,IACL,IAAK,IAAIC,GAAgB,EAAId,EAAYc,GAAgBd,EAAYc,GAAgB,EAAG,CACpF,IAAIC,EACAC,EAAUd,EAASY,EAAe,GAClCG,EAAaf,EAASY,EAAe,GACrCT,GAAUY,EAAaA,EAAWd,OAAS,GAAKW,EAChDE,IACAd,EAASY,EAAe,QAAKI,GAEjC,IAAIC,EAASH,GAAWA,EAAQb,OAAS,EAAIN,EACzCuB,EAAYH,GAAc,GAAKZ,GAAUA,EAASN,EACtD,GAAKoB,GAAWC,EAAhB,CAcA,IAVKD,GAAWC,GAAaJ,EAAQb,OAASc,EAAWd,QACrDY,EAAWM,EAAUJ,GACrBK,EAAcP,EAASX,YAAY,GAAO,KAG1CW,EAAWC,EACXD,EAASZ,SACTmB,EAAcP,EAASX,YAAY,GAAM,IAE7CC,EAASC,EAAcS,EAAUvB,EAAQD,EAAQuB,EAAcrB,GAC3DsB,EAASZ,OAAS,GAAKN,GAAUQ,EAAS,GAAKN,EAC/C,OAAOwB,EAAYR,EAASX,YAG5BF,EAASY,GAAgBC,OAjBzBb,EAASY,QAAgBI,EAoBjClB,IAEJ,MAAOA,GAAcC,EAAe,CAChC,IAAIuB,EAAMX,IACV,GAAIW,EACA,OAAOA,GAInB,SAASlB,EAAcS,EAAUvB,EAAQD,EAAQuB,EAAcrB,GAC3D,IAAII,EAASL,EAAOM,OAChBC,EAASR,EAAOO,OAChBK,EAASY,EAASZ,OAClBE,EAASF,EAASW,EAClBW,EAAc,EAClB,MAAOtB,EAAS,EAAIN,GAAUQ,EAAS,EAAIN,GAAUN,EAAOD,EAAOW,EAAS,GAAIZ,EAAOc,EAAS,IAC5FF,IACAE,IACAoB,IAWJ,OATIA,GACAV,EAASX,WAAWK,KAAK,CACrBC,MAAOe,EACPd,OAAO,EACPC,SAAS,EACTL,QAAS,KAGjBQ,EAASZ,OAASA,EACXE,EAEX,SAASiB,EAAclB,EAAYO,EAAOC,GACtC,IAAIc,EAAOtB,EAAWA,EAAWN,OAAS,GACtC4B,GAAQA,EAAKf,QAAUA,GAASe,EAAKd,UAAYA,EACjDR,EAAWA,EAAWN,OAAS,GAAK,CAChCY,MAAOgB,EAAKhB,MAAQ,EACpBC,MAAOA,EACPC,QAASA,EACTL,QAAS,IAIbH,EAAWK,KAAK,CACZC,MAAO,EACPC,MAAOA,EACPC,QAASA,EACTL,QAAS,KAIrB,SAASgB,EAAYnB,GAKjB,IAJA,IAAIuB,EAAe,EACfC,EAAexB,EAAWN,OAC1BK,EAAS,EACTE,EAAS,EACNsB,EAAeC,EAAcD,IAAgB,CAChD,IAAIE,EAAYzB,EAAWuB,GAC3B,GAAKE,EAAUjB,QAWV,CACD,IAASJ,EAAIH,EAAQG,EAAIH,EAASwB,EAAUnB,MAAOF,IAC/CqB,EAAUtB,QAAQE,KAAKD,GAE3BH,GAAUwB,EAAUnB,UAfA,CAEpB,IADA,IAAIH,EAAU,GACLC,EAAIL,EAAQK,EAAIL,EAAS0B,EAAUnB,MAAOF,IAC/CD,EAAQE,KAAKD,GAEjBqB,EAAUtB,QAAUA,EACpBJ,GAAU0B,EAAUnB,MACfmB,EAAUlB,QACXN,GAAUwB,EAAUnB,QAUhC,OAAON,EAEX,SAASiB,EAAUS,GACf,MAAO,CAAE3B,OAAQ2B,EAAK3B,OAAQC,WAAY0B,EAAK1B,WAAWR,MAAM,IAErD,SAASmC,EAAUxC,EAAQC,EAAQwC,GAC9C,OAAO,EAAKzC,EAAQC,EAAQwC,G,wCCtI5BC,EAAO,OACPC,EAAYC,KAAKC,MACjBC,EAAUF,KAAKG,IACfC,EAAUJ,KAAKK,IACfC,EAAKN,KAAKM,GACVC,EAAgB,EAAVP,KAAKM,GACXE,EAAS,IAAMF,EACfG,EAAU,KACd,SAASC,EAAOC,GACZ,OAAOZ,EAAgB,IAANY,GAAa,IAElC,SAASC,EAAOD,GACZ,OAAOZ,EAAgB,IAANY,GAAa,IAElC,SAASE,EAAaF,GAClB,OAAOA,EAAMF,GAAWE,GAAOF,EAEnC,SAASK,EAAY/D,GACjB,IAAIgE,EAAOhE,EAAMgE,KACjB,OAAe,MAARA,GAAgBA,IAASjB,EAEpC,SAASkB,EAAcjE,GACnB,IAAIkE,EAASlE,EAAMkE,OACnB,OAAiB,MAAVA,GAAkBA,IAAWnB,EAExC,SAASoB,EAAaC,EAAOC,GACrBA,GACAC,EAAKF,EAAO,YAAa,UACnBT,EAAOU,EAAE,IAAM,IACfV,EAAOU,EAAE,IAAM,IACfV,EAAOU,EAAE,IAAM,IACfV,EAAOU,EAAE,IAAM,IACfR,EAAOQ,EAAE,IAAM,IACfR,EAAOQ,EAAE,IACT,KAGd,SAASC,EAAKC,EAAIC,EAAKZ,KACdA,GAAoB,WAAbA,EAAIa,MAAkC,WAAbb,EAAIa,OACrCF,EAAGG,aAAaF,EAAKZ,GAG7B,SAASe,EAAUJ,EAAIC,EAAKZ,GACxBW,EAAGK,eAAe,+BAAgCJ,EAAKZ,GAE3D,SAASiB,EAAQN,EAAIC,EAAKZ,GACtBW,EAAGK,eAAe,uCAAwCJ,EAAKZ,GAEnE,SAASkB,EAAUV,EAAOpE,EAAOuE,GAC7B,IAAIQ,EAA2B,MAAjB/E,EAAM+E,QAAkB,EAAI/E,EAAM+E,QAChD,GAAIR,aAAc,OACdH,EAAMpE,MAAM+E,QAAUA,EAAU,OADpC,CAIA,GAAIhB,EAAY/D,GAAQ,CACpB,IAAIgE,EAAOhE,EAAMgE,KACjBA,EAAgB,gBAATA,EAAyBjB,EAAOiB,EACvCM,EAAKF,EAAO,OAAQJ,GACpBM,EAAKF,EAAO,gBAAsC,MAArBpE,EAAMgF,YAAsBhF,EAAMgF,YAAcD,EAAUA,GAAW,SAGlGT,EAAKF,EAAO,OAAQrB,GAExB,GAAIkB,EAAcjE,GAAQ,CACtB,IAAIkE,EAASlE,EAAMkE,OACnBA,EAAoB,gBAAXA,EAA2BnB,EAAOmB,EAC3CI,EAAKF,EAAO,SAAUF,GACtB,IAAIe,EAAcjF,EAAMkF,UACpBC,EAAgBnF,EAAMoF,cACpBb,EAAGc,eACH,EACNf,EAAKF,EAAO,gBAAiBe,EAAgBF,EAAcE,EAAgB,GAAK,IAChFb,EAAKF,EAAO,cAAepE,EAAMsF,YAAc,SAAW,QAC1DhB,EAAKF,EAAO,kBAA0C,MAAvBpE,EAAMuF,cAAwBvF,EAAMuF,cAAgBR,EAAUA,GAAW,IACxG,IAAIS,EAAWxF,EAAMwF,UAAYP,EAAc,GAAK,eAAkBjF,EAAMwF,SAAUP,GACtF,GAAIO,EAAU,CACV,IAAIC,EAAiBzF,EAAMyF,eACvBN,GAAmC,IAAlBA,IACjBK,EAAW,iBAAIA,GAAU,SAAUE,GAC/B,OAAOA,EAASP,KAEhBM,IACAA,GAAkBN,EAClBM,EAAiBzC,EAAUyC,KAGnCnB,EAAKF,EAAO,mBAAoBoB,EAASG,KAAK,MAC9CrB,EAAKF,EAAO,qBAAsBqB,GAAkB,GAAK,SAGzDnB,EAAKF,EAAO,mBAAoB,IAEpCpE,EAAM4F,SAAWtB,EAAKF,EAAO,iBAAkBpE,EAAM4F,SACrD5F,EAAM6F,UAAYvB,EAAKF,EAAO,kBAAmBpE,EAAM6F,UACvD7F,EAAM8F,YAAcxB,EAAKF,EAAO,oBAAqBpE,EAAM8F,WAAa,SAGxExB,EAAKF,EAAO,SAAUrB,IAG9B,IAAIgD,EAAoB,WACpB,SAASA,KA0FT,OAxFAA,EAAiBC,UAAUC,MAAQ,WAC/BC,KAAKC,GAAK,GACVD,KAAKE,KAAO,IAEhBL,EAAiBC,UAAUK,OAAS,SAAUC,EAAGC,GAC7CL,KAAKM,KAAK,IAAKF,EAAGC,IAEtBR,EAAiBC,UAAUS,OAAS,SAAUH,EAAGC,GAC7CL,KAAKM,KAAK,IAAKF,EAAGC,IAEtBR,EAAiBC,UAAUU,cAAgB,SAAUJ,EAAGC,EAAGI,EAAIC,EAAIC,EAAIC,GACnEZ,KAAKM,KAAK,IAAKF,EAAGC,EAAGI,EAAIC,EAAIC,EAAIC,IAErCf,EAAiBC,UAAUe,iBAAmB,SAAUT,EAAGC,EAAGI,EAAIC,GAC9DV,KAAKM,KAAK,IAAKF,EAAGC,EAAGI,EAAIC,IAE7Bb,EAAiBC,UAAUgB,IAAM,SAAUC,EAAIC,EAAIC,EAAGC,EAAYC,EAAUC,GACxEpB,KAAKqB,QAAQN,EAAIC,EAAIC,EAAGA,EAAG,EAAGC,EAAYC,EAAUC,IAExDvB,EAAiBC,UAAUuB,QAAU,SAAUN,EAAIC,EAAIM,EAAIC,EAAIC,EAAKN,EAAYC,EAAUC,GACtF,IAAIK,EAA8B,IAAnBzB,KAAKC,GAAGvF,OACnBgH,EAASP,EAAWD,EACpBS,GAAaP,EACbQ,EAAiB7E,KAAK8E,IAAIH,GAC1BI,EAAWlE,EAAagE,EAAiBtE,KACrCqE,EAAYD,GAAUpE,GAAOoE,GAAUpE,GAC3CyE,EAAeL,EAAS,EAAIA,EAASpE,EAAOoE,EAASpE,EAAMA,EAC3D0E,GAAQ,EAERA,IADAF,IAGKlE,EAAagE,IAITG,GAAgB1E,MAAUsE,EAEvC,IAAIM,EAAKtE,EAAOoD,EAAKO,EAAKnE,EAAQ+D,IAC9BgB,EAAKvE,EAAOqD,EAAKO,EAAKtE,EAAQiE,IAC9BY,IAEIJ,EADAC,EACSrE,EAAM,KAGC,KAANA,EAEd0E,GAAQ,EACJP,GACAzB,KAAKC,GAAG5E,KAAK,IAAK4G,EAAIC,IAG9B,IAAI9B,EAAIzC,EAAOoD,EAAKO,EAAKnE,EAAQ+D,EAAaQ,IAC1CrB,EAAI1C,EAAOqD,EAAKO,EAAKtE,EAAQiE,EAAaQ,IAC9C,GAAIS,MAAMF,IAAOE,MAAMD,IAAOC,MAAMb,IAAOa,MAAMZ,IAAOY,MAAMX,IAAQW,MAAM5E,IAAW4E,MAAM/B,IAAM+B,MAAM9B,GACrG,MAAO,GAEXL,KAAKC,GAAG5E,KAAK,IAAKsC,EAAO2D,GAAK3D,EAAO4D,GAAKzE,EAAU0E,EAAMjE,IAAUyE,GAAQL,EAAWvB,EAAGC,IAE9FR,EAAiBC,UAAUsC,KAAO,SAAUhC,EAAGC,EAAGgC,EAAGC,GACjDtC,KAAKM,KAAK,IAAKF,EAAGC,GAClBL,KAAKM,KAAK,IAAKF,EAAIiC,EAAGhC,GACtBL,KAAKM,KAAK,IAAKF,EAAIiC,EAAGhC,EAAIiC,GAC1BtC,KAAKM,KAAK,IAAKF,EAAGC,EAAIiC,GACtBtC,KAAKM,KAAK,IAAKF,EAAGC,IAEtBR,EAAiBC,UAAUyC,UAAY,WAC/BvC,KAAKC,GAAGvF,OAAS,GACjBsF,KAAKM,KAAK,MAGlBT,EAAiBC,UAAUQ,KAAO,SAAUkC,EAAKlI,EAAGC,EAAGkI,EAAGC,EAAGC,EAAGC,EAAGC,EAAGP,GAClEtC,KAAKC,GAAG5E,KAAKmH,GACb,IAAK,IAAIpH,EAAI,EAAGA,EAAI0H,UAAUpI,OAAQU,IAAK,CACvC,IAAIsC,EAAMoF,UAAU1H,GACpB,GAAI+G,MAAMzE,GAEN,YADAsC,KAAK+C,UAAW,GAGpB/C,KAAKC,GAAG5E,KAAKsC,EAAOD,MAG5BmC,EAAiBC,UAAUkD,YAAc,WACrChD,KAAKE,KAAOF,KAAK+C,SAAW,GAAK/C,KAAKC,GAAGR,KAAK,KAC9CO,KAAKC,GAAK,IAEdJ,EAAiBC,UAAUmD,OAAS,WAChC,OAAOjD,KAAKE,MAETL,EA3FY,GA6FnBqD,EAAU,CACVC,MAAO,SAAU9E,GACb,IAAIvE,EAAQuE,EAAGvE,MACXoE,EAAQG,EAAG+E,QACVlF,IACDA,EAAQnE,EAAc,QACtBsE,EAAG+E,QAAUlF,GAEZG,EAAG3B,MACJ2B,EAAGgF,kBAEP,IAAI3G,EAAO2B,EAAG3B,KACV2B,EAAGiF,iBACH5G,EAAK6G,YACLlF,EAAGmF,UAAU9G,EAAM2B,EAAGoF,OACtBpF,EAAGqF,eAEP,IAAIC,EAAcjH,EAAKkH,aACnBC,EAAQxF,EACRyF,EAAiBD,EAAME,kBACvBF,EAAMG,mBAAqBL,IAAgBG,GAAkBzF,EAAGvE,MAAMmK,cAAgB,KACjFH,IACDA,EAAiBD,EAAME,iBAAmB,IAAIlE,GAElDiE,EAAe/D,QACfrD,EAAKwH,YAAYJ,EAAgBzF,EAAGvE,MAAMmK,eAC1CH,EAAed,cACfa,EAAMG,iBAAmBL,GAE7BvF,EAAKF,EAAO,IAAK4F,EAAeb,UAChCrE,EAAUV,EAAOpE,EAAOuE,GACxBJ,EAAaC,EAAOG,EAAG8F,aAI3BC,EAAW,CACXjB,MAAO,SAAU9E,GACb,IAAIvE,EAAQuE,EAAGvE,MACXuK,EAAQvK,EAAMuK,MAOlB,GANIA,aAAiBC,iBACjBD,EAAQA,EAAME,IAETF,aAAiBG,oBACtBH,EAAQA,EAAMI,aAEbJ,EAAL,CAGA,IAAIjE,EAAItG,EAAMsG,GAAK,EACfC,EAAIvG,EAAMuG,GAAK,EACfqE,EAAK5K,EAAM6K,MACXC,EAAK9K,EAAM+K,OACX3G,EAAQG,EAAG+E,QACVlF,IACDA,EAAQnE,EAAc,SACtBsE,EAAG+E,QAAUlF,GAEbmG,IAAUhG,EAAGyG,aACbrG,EAAUP,EAAO,OAAQmG,GACzBhG,EAAGyG,WAAaT,GAEpBjG,EAAKF,EAAO,QAASwG,EAAK,IAC1BtG,EAAKF,EAAO,SAAU0G,EAAK,IAC3BxG,EAAKF,EAAO,IAAKkC,EAAI,IACrBhC,EAAKF,EAAO,IAAKmC,EAAI,IACrBzB,EAAUV,EAAOpE,EAAOuE,GACxBJ,EAAaC,EAAOG,EAAG8F,cAI3BY,EAAuB,CACvBC,KAAM,QACNC,MAAO,MACPC,OAAQ,SACRC,OAAQ,UAEZ,SAASC,EAAY/E,EAAGgF,EAAYC,GAOhC,MANqB,QAAjBA,EACAjF,GAAKgF,EAAa,EAEI,WAAjBC,IACLjF,GAAKgF,EAAa,GAEfhF,EAEX,IAAIkF,EAAU,CACVpC,MAAO,SAAU9E,GACb,IAAIvE,EAAQuE,EAAGvE,MACX0L,EAAO1L,EAAM0L,KAEjB,GADQ,MAARA,IAAiBA,GAAQ,IACpBA,IAAQrD,MAAMrI,EAAMsG,KAAM+B,MAAMrI,EAAMuG,GAA3C,CAGA,IAAIoF,EAAYpH,EAAG+E,QACdqC,IACDA,EAAY1L,EAAc,QAC1B4E,EAAQ8G,EAAW,YAAa,YAChCpH,EAAG+E,QAAUqC,GAEjB,IAAIC,EAAO5L,EAAM4L,MAAQ,OACrBC,EAAiBF,EAAU3L,MAC/B6L,EAAeD,KAAOA,EACtBD,EAAUG,YAAcJ,EACxB5G,EAAU6G,EAAW3L,EAAOuE,GAC5BJ,EAAawH,EAAWpH,EAAG8F,WAC3B,IAAI/D,EAAItG,EAAMsG,GAAK,EACfC,EAAI+E,EAAYtL,EAAMuG,GAAK,EAAG,eAAcqF,GAAO5L,EAAMwL,cACzDO,EAAYd,EAAqBjL,EAAM+L,YACpC/L,EAAM+L,UACbzH,EAAKqH,EAAW,oBAAqB,WACrCrH,EAAKqH,EAAW,cAAeI,GAC/BzH,EAAKqH,EAAW,IAAKrF,EAAI,IACzBhC,EAAKqH,EAAW,IAAKpF,EAAI,OChT7ByF,EAAc,IACdC,EAAY,IACZ,EAAa,WACb,SAASC,EAAUC,EAAMC,EAASC,EAAUC,EAAWC,GACnDrG,KAAKsG,OAAS,EACdtG,KAAKuG,SAAW,OAChBvG,KAAKjG,cAAgBA,EACrBiG,KAAKwG,MAAQP,EACbjG,KAAKyG,SAAWP,EAChBlG,KAAK0G,UAAgC,kBAAbP,EAAwB,CAACA,GAAYA,EAC7DnG,KAAK2G,WAAaP,EACdC,IACArG,KAAKuG,SAAWF,GAgIxB,OA7HAL,EAAUlG,UAAU8G,QAAU,SAAUC,GACpC,IAAIX,EAAUlG,KAAKyG,SACfK,EAAO9G,KAAKyG,SAASM,qBAAqB,QAC9C,GAAoB,IAAhBD,EAAKpM,OAAc,CACnB,GAAImM,EAAiB,CACjB,IAAIG,EAASd,EAAQe,aAAajH,KAAKjG,cAAc,QAASmM,EAAQgB,YAetE,OAdKF,EAAOG,WACRH,EAAOG,SAAW,SAAU9I,GACxB,IAAI+I,EAAWJ,EAAOI,SACtB,IAAKA,EACD,OAAO,EAEX,IAAK,IAAIhM,EAAIgM,EAAS1M,OAAS,EAAGU,GAAK,IAAKA,EACxC,GAAIgM,EAAShM,KAAOiD,EAChB,OAAO,EAGf,OAAO,IAGR2I,EAGP,OAAO,KAIX,OAAOF,EAAK,IAGpBd,EAAUlG,UAAUuH,SAAW,SAAUC,EAAQC,GAC7C,GAAKD,EAAL,CAGA,IAAIR,EAAO9G,KAAK4G,SAAQ,GACxB,GAAIU,EAAOtH,KAAKuG,WAAaO,EAAKK,SAASG,EAAOtH,KAAKuG,WAC3B,oBAAbgB,GACPA,EAASD,OAGZ,CACD,IAAIE,EAAMxH,KAAKyH,IAAIH,GACfE,IACAF,EAAOtH,KAAKuG,UAAYiB,MAIpCxB,EAAUlG,UAAU2H,IAAM,SAAUH,GAChC,OAAO,MAEXtB,EAAUlG,UAAU4H,OAAS,SAAUF,GACnC,IAAIV,EAAO9G,KAAK4G,SAAQ,GACpBY,EAAIG,aAAeb,GACnBA,EAAKc,YAAYJ,IAGzBxB,EAAUlG,UAAU+H,UAAY,SAAUP,GACtC,IAAIR,EAAO9G,KAAK4G,SAAQ,GACpBE,GAAQQ,EAAOtH,KAAKuG,YACpBO,EAAKgB,YAAYR,EAAOtH,KAAKuG,WAC7Be,EAAOtH,KAAKuG,UAAY,OAGhCP,EAAUlG,UAAUiI,QAAU,WAC1B,IAAIjB,EAAO9G,KAAK4G,SAAQ,GACxB,IAAKE,EACD,MAAO,GAEX,IAAIkB,EAAO,GAOX,OANA,UAAYhI,KAAK0G,WAAW,SAAUuB,GAElC,IADA,IAAIC,EAAOpB,EAAKC,qBAAqBkB,GAC5B7M,EAAI,EAAGA,EAAI8M,EAAKxN,OAAQU,IAC7B4M,EAAK3M,KAAK6M,EAAK9M,OAGhB4M,GAEXhC,EAAUlG,UAAUqI,cAAgB,WAChC,IAAIH,EAAOhI,KAAK+H,UACZK,EAAOpI,KACX,UAAYgI,GAAM,SAAUR,GACxBA,EAAIY,EAAKzB,YAAcb,MAG/BE,EAAUlG,UAAUuI,YAAc,SAAUb,GACxCA,IAAQA,EAAIxH,KAAK2G,YAAcZ,IAGnCC,EAAUlG,UAAUwI,cAAgB,SAAUd,GAC1CA,IAAQA,EAAIxH,KAAK2G,YAAcb,IAGnCE,EAAUlG,UAAUyI,YAAc,SAAUf,GACxC,OAAOA,GAAOA,EAAIxH,KAAK2G,cAAgBZ,GAE3CC,EAAUlG,UAAU0I,aAAe,WAC/B,IAAIC,EAAQzI,KACR8G,EAAO9G,KAAK4G,SAAQ,GACxB,GAAKE,EAAL,CAGA,IAAIkB,EAAOhI,KAAK+H,UAChB,UAAYC,GAAM,SAAUR,GACpBiB,EAAMF,YAAYf,IAClBV,EAAKgB,YAAYN,QAI7BxB,EAAUlG,UAAU4I,YAAc,SAAUC,GACxC,OAAIA,aAAuBC,EAAA,KAChB1F,EAEFyF,aAAuB,OACrBvE,EAEFuE,aAAuBE,EAAA,KACrBtD,EAGArC,GAGf8C,EAAUlG,UAAUgJ,cAAgB,SAAUH,GAC1C,OAAOA,EAAYvF,SAEhB4C,EA1IK,GA4ID,I,aChJf,SAAS+C,GAAiBC,GACtB,MAAsB,WAAfA,EAAMzK,KAEjB,SAAS0K,GAAiBD,GACtB,MAAsB,WAAfA,EAAMzK,KAEjB,SAAS2K,GAAWF,GAChB,OAAOA,IAAyB,WAAfA,EAAMzK,MACD,WAAfyK,EAAMzK,MAEjB,IAAI,GAAmB,SAAU4K,GAE7B,SAASC,EAAgBnD,EAAMC,GAC3B,OAAOiD,EAAOE,KAAKrJ,KAAMiG,EAAMC,EAAS,CAAC,iBAAkB,kBAAmB,wBAA0BlG,KAyH5G,OA3HA,eAAUoJ,EAAiBD,GAI3BC,EAAgBtJ,UAAUwJ,iBAAmB,SAAUC,EAAYZ,GAC/D,GAAIA,GAAeA,EAAY7O,MAAO,CAClC,IAAI0P,EAASxJ,KACb,UAAY,CAAC,OAAQ,WAAW,SAAUyJ,GACtC,IAAIT,EAAQL,EAAY7O,MAAM2P,GAC9B,GAAIP,GAAWF,GAAQ,CACnB,IAAIU,EAAWV,EACXlC,EAAO0C,EAAO5C,SAAQ,GACtBY,OAAM,EACNkC,EAASC,OACTnC,EAAMkC,EAASC,MACV7C,EAAKK,SAASuC,EAASC,QACxBH,EAAO9B,OAAOF,IAIlBA,EAAMgC,EAAO/B,IAAIiC,GAErBF,EAAOI,SAASjB,GAChB,IAAIkB,EAAKrC,EAAIsC,aAAa,MAC1BP,EAAW/K,aAAaiL,EAAc,QAAUI,EAAK,WAKrET,EAAgBtJ,UAAU2H,IAAM,SAAUiC,GACtC,IAAIlC,EACJ,GAAIuB,GAAiBW,GACjBlC,EAAMxH,KAAKjG,cAAc,sBAExB,KAAIkP,GAAiBS,GAKtB,OADA,cAAgB,0BACT,KAJPlC,EAAMxH,KAAKjG,cAAc,kBAW7B,OALA2P,EAASG,GAAKH,EAASG,IAAM7J,KAAKsG,SAClCkB,EAAIhJ,aAAa,KAAM,KAAOwB,KAAKwG,MAC7B,aAAekD,EAASG,IAC9B7J,KAAK+J,UAAUL,EAAUlC,GACzBxH,KAAK0H,OAAOF,GACLA,GAEX4B,EAAgBtJ,UAAUkK,OAAS,SAAUN,GACzC,GAAKR,GAAWQ,GAAhB,CAGA,IAAItB,EAAOpI,KACXA,KAAKqH,SAASqC,GAAU,WACpB,IAAIlC,EAAMkC,EAASC,MACnB,GAAKnC,EAAL,CAGA,IAAIS,EAAUT,EAAIS,QACd1J,EAAOmL,EAASnL,KACP,WAATA,GAAiC,mBAAZ0J,GACT,WAAT1J,GAAiC,mBAAZ0J,EACxBG,EAAK2B,UAAUL,EAAUA,EAASC,QAGlCvB,EAAKP,UAAU6B,GACftB,EAAKX,IAAIiC,UAIrBN,EAAgBtJ,UAAUiK,UAAY,SAAUL,EAAUlC,GACtD,GAAIuB,GAAiBW,GACjBlC,EAAIhJ,aAAa,KAAMkL,EAAStJ,EAAI,IACpCoH,EAAIhJ,aAAa,KAAMkL,EAASrJ,EAAI,IACpCmH,EAAIhJ,aAAa,KAAMkL,EAASjJ,GAAK,IACrC+G,EAAIhJ,aAAa,KAAMkL,EAAShJ,GAAK,QAEpC,KAAIuI,GAAiBS,GAOtB,YADA,cAAgB,0BALhBlC,EAAIhJ,aAAa,KAAMkL,EAAStJ,EAAI,IACpCoH,EAAIhJ,aAAa,KAAMkL,EAASrJ,EAAI,IACpCmH,EAAIhJ,aAAa,IAAKkL,EAASzI,EAAI,IAMnCyI,EAASO,OACTzC,EAAIhJ,aAAa,gBAAiB,kBAGlCgJ,EAAIhJ,aAAa,gBAAiB,qBAEtCgJ,EAAI0C,UAAY,GAEhB,IADA,IAAIC,EAAST,EAASU,WACbhP,EAAI,EAAGiP,EAAMF,EAAOzP,OAAQU,EAAIiP,IAAOjP,EAAG,CAC/C,IAAIkP,EAAStK,KAAKjG,cAAc,QAChCuQ,EAAO9L,aAAa,SAA6B,IAAnB2L,EAAO/O,GAAGmP,OAAe,KACvD,IAAIC,EAAQL,EAAO/O,GAAGoP,MACtB,GAAIA,EAAMC,QAAQ,SAAW,EAAG,CAC5B,IAAI5L,EAAU,YAAgB2L,GAAO,GACjCE,EAAM,YAAgBF,GAC1BF,EAAO9L,aAAa,aAAc,IAAMkM,GACxCJ,EAAO9L,aAAa,eAAgBK,EAAU,SAG9CyL,EAAO9L,aAAa,aAAc2L,EAAO/O,GAAGoP,OAEhDhD,EAAII,YAAY0C,GAEpBZ,EAASC,MAAQnC,GAErB4B,EAAgBtJ,UAAU8J,SAAW,SAAUjB,GAC3C,GAAIA,EAAY7O,MAAO,CACnB,IAAI4P,EAAWf,EAAY7O,MAAMgE,KAC7B4L,GAAYA,EAASC,OACrBR,EAAOrJ,UAAUuI,YAAYgB,KAAKrJ,KAAM0J,EAASC,OAErDD,EAAWf,EAAY7O,MAAMkE,OACzB0L,GAAYA,EAASC,OACrBR,EAAOrJ,UAAUuI,YAAYgB,KAAKrJ,KAAM0J,EAASC,SAItDP,EA5HW,CA6HpB,GACa,M,0BCvIf,SAASuB,GAAU3B,GACf,OAAOA,MAAYA,EAAM3E,SAAW2E,EAAMO,YAE9C,IAAIqB,GAAgB,IAAIC,GAAA,KACpB,GAAkB,SAAU1B,GAE5B,SAAS2B,EAAe7E,EAAMC,GAC1B,OAAOiD,EAAOE,KAAKrJ,KAAMiG,EAAMC,EAAS,CAAC,WAAY,uBAAyBlG,KA4HlF,OA9HA,eAAU8K,EAAgB3B,GAI1B2B,EAAehL,UAAUwJ,iBAAmB,SAAUC,EAAYZ,GAC9D,GAAIA,GAAeA,EAAY7O,MAAO,CAClC,IAAI0P,EAASxJ,KACb,UAAY,CAAC,OAAQ,WAAW,SAAUyJ,GACtC,IAAIsB,EAAUpC,EAAY7O,MAAM2P,GAChC,GAAIkB,GAAUI,GAAU,CACpB,IAAIjE,EAAO0C,EAAO5C,SAAQ,GACtBY,EAAMoD,GAAcI,IAAID,GACxBvD,EACKV,EAAKK,SAASK,IACfgC,EAAO9B,OAAOF,GAIlBA,EAAMgC,EAAO/B,IAAIsD,GAErBvB,EAAOI,SAASjB,GAChB,IAAIkB,EAAKrC,EAAIsC,aAAa,MAC1BP,EAAW/K,aAAaiL,EAAc,QAAUI,EAAK,WAKrEiB,EAAehL,UAAU2H,IAAM,SAAUsD,GACrC,GAAKJ,GAAUI,GAAf,CAGA,IAAIvD,EAAMxH,KAAKjG,cAAc,WAS7B,OARAgR,EAAQlB,GAAmB,MAAdkB,EAAQlB,GAAa7J,KAAKsG,SAAWyE,EAAQlB,GAC1DrC,EAAIhJ,aAAa,KAAM,KAAOwB,KAAKwG,MAC7B,YAAcuE,EAAQlB,IAC5BrC,EAAIhJ,aAAa,IAAK,KACtBgJ,EAAIhJ,aAAa,IAAK,KACtBgJ,EAAIhJ,aAAa,eAAgB,kBACjCwB,KAAK+J,UAAUgB,EAASvD,GACxBxH,KAAK0H,OAAOF,GACLA,IAEXsD,EAAehL,UAAUkK,OAAS,SAAUe,GACxC,GAAKJ,GAAUI,GAAf,CAGA,IAAI3C,EAAOpI,KACXA,KAAKqH,SAAS0D,GAAS,WACnB,IAAIvD,EAAMoD,GAAcI,IAAID,GAC5B3C,EAAK2B,UAAUgB,EAASvD,QAGhCsD,EAAehL,UAAUiK,UAAY,SAAUgB,EAASE,GACpD,IAAI1B,EAAawB,EAAQxB,WACzB,GAAIA,aAAsB2B,WAClB3B,EAAW5B,aAAesD,IAC1BA,EAAWf,UAAY,GACvBe,EAAWrD,YAAY2B,GACvB0B,EAAWzM,aAAa,QAASuM,EAAQI,SAAW,IACpDF,EAAWzM,aAAa,SAAUuM,EAAQK,UAAY,SAGzD,CACD,IAAIC,OAAM,EACNC,EAAYL,EAAWlE,qBAAqB,SAChD,GAAIuE,EAAU5Q,OAAQ,CAClB,IAAIqQ,EAAQ1G,MAKR,YADA4G,EAAWnD,YAAYwD,EAAU,IAHjCD,EAAMC,EAAU,QAOfP,EAAQ1G,QACbgH,EAAMrL,KAAKjG,cAAc,UAE7B,GAAIsR,EAAK,CACL,IAAIE,OAAW,EAUf,GAT6B,kBAAlBR,EAAQ1G,MACfkH,EAAWR,EAAQ1G,MAEd0G,EAAQ1G,iBAAiBC,iBAC9BiH,EAAWR,EAAQ1G,MAAME,IAEpBwG,EAAQ1G,iBAAiBG,oBAC9B+G,EAAWR,EAAQ1G,MAAMI,aAEzB8G,EAAU,CACVF,EAAI7M,aAAa,OAAQ+M,GACzBF,EAAI7M,aAAa,IAAK,KACtB6M,EAAI7M,aAAa,IAAK,KACtB,IAAIgN,EAAS,CACTC,MAAO,cAEPC,EAAe,gBAAoBH,EAAUF,EAAKG,GAAQ,SAAUH,GACpEJ,EAAWzM,aAAa,QAAS6M,EAAI1G,MAAQ,IAC7CsG,EAAWzM,aAAa,SAAU6M,EAAIxG,OAAS,OAE/C6G,GAAgBA,EAAa/G,OAAS+G,EAAa7G,SACnDoG,EAAWzM,aAAa,QAASkN,EAAa/G,MAAQ,IACtDsG,EAAWzM,aAAa,SAAUkN,EAAa7G,OAAS,KAE5DoG,EAAWrD,YAAYyD,KAInC,IAAIjL,EAAI2K,EAAQ3K,GAAK,EACjBC,EAAI0K,EAAQ1K,GAAK,EACjBsL,GAAYZ,EAAQY,UAAY,GAAK5O,KAAKM,GAAK,IAC/CuO,EAASb,EAAQa,QAAU,EAC3BC,EAASd,EAAQc,QAAU,EAC3B1H,EAAY,aAAe/D,EAAI,KAAOC,EAAI,YAAcsL,EAAW,WAAaC,EAAS,KAAOC,EAAS,IAC7GZ,EAAWzM,aAAa,mBAAoB2F,GAC5CyG,GAAckB,IAAIf,EAASE,IAE/BH,EAAehL,UAAU8J,SAAW,SAAUjB,GACtCA,EAAY7O,QACR6Q,GAAUhC,EAAY7O,MAAMgE,OAC5BqL,EAAOrJ,UAAUuI,YAAYgB,KAAKrJ,KAAM4K,GAAcI,IAAIrC,EAAY7O,MAAMgE,OAE5E6M,GAAUhC,EAAY7O,MAAMkE,SAC5BmL,EAAOrJ,UAAUuI,YAAYgB,KAAKrJ,KAAM4K,GAAcI,IAAIrC,EAAY7O,MAAMkE,WAIjF8M,EA/HU,CAgInB,GACa,M,aCtIf,SAASiB,GAAqBC,GAC1B,IAAI1N,EAAM,GACV,GAAI0N,EACA,IAAK,IAAI5Q,EAAI,EAAGA,EAAI4Q,EAAUtR,OAAQU,IAAK,CACvC,IAAI6Q,EAAWD,EAAU5Q,GACzBkD,EAAIjD,KAAK4Q,EAASpC,IAG1B,OAAOvL,EAAImB,KAAK,KAEb,SAASyM,GAAYvD,GACxB,IAAIqD,EAAYrD,EAAYwD,YAC5B,OAAOH,GAAaA,EAAUtR,OAAS,EAE3C,IAAI,GAAmB,SAAUyO,GAE7B,SAASiD,EAAgBnG,EAAMC,GAC3B,IAAIuC,EAAQU,EAAOE,KAAKrJ,KAAMiG,EAAMC,EAAS,WAAY,wBAA0BlG,KAGnF,OAFAyI,EAAM4D,WAAa,GACnB5D,EAAM6D,mBAAqB,GACpB7D,EAgGX,OArGA,eAAU2D,EAAiBjD,GAO3BiD,EAAgBtM,UAAUqI,cAAgB,WAEtC,IAAK,IAAI7J,KADT6K,EAAOrJ,UAAUqI,cAAckB,KAAKrJ,MACpBA,KAAKqM,WACjBrM,KAAKsI,cAActI,KAAKqM,WAAW/N,IAEvC0B,KAAKsM,mBAAqB,IAE9BF,EAAgBtM,UAAUyM,kBAAoB,SAAU5D,EAAa6D,GACjE,GAAKN,GAAYvD,GAAjB,CAGA,IAAIqD,EAAYrD,EAAYwD,YACxBM,EAAoBzM,KAAKsM,mBACzBI,EAAcX,GAAqBC,GAMvC,OALI,gBAAkBA,EAAWQ,GAAmBA,EAAgBL,eAChEM,EAAkBC,GAAeD,EAAkBC,IAAgB,EACnED,EAAkBC,KAAiBA,GAAe,IAAMD,EAAkBC,IAC1ED,EAAkBC,MAEf1M,KAAKqM,WAAWK,KACf1M,KAAKqM,WAAWK,GAAe1M,KAAKjG,cAAc,QAE9DqS,EAAgBtM,UAAUkK,OAAS,SAAUrB,EAAa6D,GACtD,IAAIG,EAAY3M,KAAKuM,kBAAkB5D,EAAa6D,GAKpD,OAJIG,IACA3M,KAAKqI,YAAYsE,GACjB3M,KAAK+J,UAAU4C,EAAWhE,EAAYwD,cAEnCQ,GAGXP,EAAgBtM,UAAUiK,UAAY,SAAU6C,EAAUZ,GACtD,GAAIA,GAAaA,EAAUtR,OAAS,EAAG,CACnC,IAAIoM,EAAO9G,KAAK4G,SAAQ,GACpBqF,EAAWD,EAAU,GACrBa,OAAa,EACbhD,OAAK,EACLoC,EAASa,MACTjD,EAAKoC,EAASa,KAAKhD,aAAa,MAChC+C,EAAaZ,EAASa,KACjBhG,EAAKK,SAAS0F,IACf/F,EAAKc,YAAYiF,KAIrBhD,EAAK,KAAO7J,KAAKwG,MAAQ,SAAWxG,KAAKsG,SACvCtG,KAAKsG,OACPuG,EAAa7M,KAAKjG,cAAc,YAChC8S,EAAWrO,aAAa,KAAMqL,GAC9B/C,EAAKc,YAAYiF,GACjBZ,EAASa,KAAOD,GAEpB,IAAIE,EAAW/M,KAAK0I,YAAYuD,GAChCc,EAAS5J,MAAM8I,GACf,IAAIe,EAAShN,KAAK8I,cAAcmD,GAChCY,EAAW3C,UAAY,GACvB2C,EAAWjF,YAAYoF,GACvBJ,EAASpO,aAAa,YAAa,QAAUqL,EAAK,KAC9CmC,EAAUtR,OAAS,GACnBsF,KAAK+J,UAAU8C,EAAYb,EAAUxR,MAAM,SAI3CoS,GACAA,EAASpO,aAAa,YAAa,SAK/C4N,EAAgBtM,UAAU8J,SAAW,SAAUjB,GAC3C,IAAIF,EAAQzI,KACR2I,EAAYwD,aACZ,UAAYxD,EAAYwD,aAAa,SAAUF,GACvCA,EAASa,MACT3D,EAAOrJ,UAAUuI,YAAYgB,KAAKZ,EAAOwD,EAASa,UAMlEV,EAAgBtM,UAAU0I,aAAe,WACrCW,EAAOrJ,UAAU0I,aAAaa,KAAKrJ,MACnC,IAAIiN,EAAkB,GACtB,IAAK,IAAI3O,KAAO0B,KAAKqM,WAAY,CAC7B,IAAIa,EAAQlN,KAAKqM,WAAW/N,GACvB0B,KAAKuI,YAAY2E,GAGbA,EAAMvF,YACXuF,EAAMvF,WAAWG,YAAYoF,GAH7BD,EAAgB3O,GAAO4O,EAM/BlN,KAAKqM,WAAaY,GAEfb,EAtGW,CAuGpB,GACa,MCxHX,GAAiB,SAAUjD,GAE3B,SAASgE,EAAclH,EAAMC,GACzB,IAAIuC,EAAQU,EAAOE,KAAKrJ,KAAMiG,EAAMC,EAAS,CAAC,UAAW,oBAAqB,eAAiBlG,KAG/F,OAFAyI,EAAM2E,cAAgB,GACtB3E,EAAM4E,eAAiB,GAChB5E,EA0EX,OA/EA,eAAU0E,EAAehE,GAOzBgE,EAAcrN,UAAUwN,aAAe,WACnC,IAAIC,EAAYvN,KAAKqN,eAAeG,MACpC,IAAKD,EAAW,CACZA,EAAYvN,KAAKjG,cAAc,UAC/BwT,EAAU/O,aAAa,KAAM,KAAOwB,KAAKwG,MAAQ,WAAaxG,KAAKsG,UACnE,IAAImH,EAAWzN,KAAKjG,cAAc,gBAClCwT,EAAU3F,YAAY6F,GACtBzN,KAAK0H,OAAO6F,GAEhB,OAAOA,GAEXJ,EAAcrN,UAAUkK,OAAS,SAAUT,EAAYZ,GACnD,IAAI7O,EAAQ6O,EAAY7O,MACxB,GAAI4T,GAAU5T,GAAQ,CAClB,IAAI6T,EAAYC,GAAajF,GACzB4E,EAAY5E,EAAYkF,WAAa7N,KAAKoN,cAAcO,GACvDJ,IACDA,EAAYvN,KAAKsN,eACjBtN,KAAKoN,cAAcO,GAAaJ,GAEpCvN,KAAK+J,UAAUR,EAAYZ,EAAa4E,QAGxCvN,KAAK8N,OAAOvE,EAAYZ,IAGhCwE,EAAcrN,UAAUgO,OAAS,SAAUvE,EAAYZ,GACrB,MAA1BA,EAAYkF,aACZlF,EAAYkF,WAAa,KACzBtE,EAAWzP,MAAMiU,OAAS,KAGlCZ,EAAcrN,UAAUiK,UAAY,SAAUR,EAAYZ,EAAa4E,GACnE,IAAIE,EAAWF,EAAUnG,SAAS,GAC9BtN,EAAQ6O,EAAY7O,MACpBkU,EAAcrF,EAAYsF,iBAC1BrC,EAASoC,EAAY,GACrBnC,EAASmC,EAAY,GACzB,GAAKpC,GAAWC,EAAhB,CAGA,IAAIqC,EAAUpU,EAAMqU,eAAiB,EACjCC,EAAUtU,EAAMuU,eAAiB,EACjCC,EAAOxU,EAAMyU,WACb/D,EAAQ1Q,EAAM0U,YAClBf,EAASjP,aAAa,KAAM0P,EAAUtC,EAAS,IAC/C6B,EAASjP,aAAa,KAAM4P,EAAUvC,EAAS,IAC/C4B,EAASjP,aAAa,cAAegM,GACrC,IAAIiE,EAAQH,EAAO,EAAI1C,EACnB8C,EAAQJ,EAAO,EAAIzC,EACnB8C,EAAeF,EAAQ,IAAMC,EACjCjB,EAASjP,aAAa,eAAgBmQ,GACtCpB,EAAU/O,aAAa,IAAK,SAC5B+O,EAAU/O,aAAa,IAAK,SAC5B+O,EAAU/O,aAAa,QAAS,QAChC+O,EAAU/O,aAAa,SAAU,QACjCmK,EAAYkF,WAAaN,EACzB,IAAI1D,EAAK0D,EAAUzD,aAAa,MAChCP,EAAWzP,MAAMiU,OAAS,QAAUlE,EAAK,MAE7CsD,EAAcrN,UAAU0I,aAAe,WACnC,IAAI1B,EAAO9G,KAAK4G,SAAQ,GACxB,GAAKE,EAAL,CAGA,IAAI8H,EAAiB5O,KAAKqN,eAC1B,IAAK,IAAI/O,KAAO0B,KAAKoN,cAAe,CAChC,IAAI5F,EAAMxH,KAAKoN,cAAc9O,GAC7BsQ,EAAevT,KAAKmM,GAExBxH,KAAKoN,cAAgB,KAElBD,EAhFS,CAiFlB,GACa,MACf,SAASO,GAAU5T,GACf,OAAOA,IACCA,EAAMyU,YAAczU,EAAMqU,eAAiBrU,EAAMuU,eAE7D,SAAST,GAAajF,GAClB,IAAI7O,EAAQ6O,EAAY7O,MACpBkU,EAAcrF,EAAYsF,iBAC9B,MAAO,CACHnU,EAAM0U,aACL1U,EAAMyU,YAAc,GAAGM,QAAQ,IAC/B/U,EAAMqU,eAAiB,GAAGU,QAAQ,IAClC/U,EAAMuU,eAAiB,GAAGQ,QAAQ,GACnCb,EAAY,GACZA,EAAY,IACdvO,KAAK,KCxFX,SAASqP,GAAWpR,GAChB,OAAOqR,SAASrR,EAAK,IAEzB,SAASgL,GAAYrK,GACjB,OAAIA,aAAcuK,EAAA,KACP1F,EAEF7E,aAAc,OACZ+F,EAEF/F,aAAcwK,EAAA,KACZtD,EAGArC,EAGf,SAAS8L,GAAqBC,EAAQC,GAClC,OAAOA,GAASD,GAAUC,EAAMvH,aAAesH,EAEnD,SAASE,GAAYF,EAAQC,EAAOE,GAChC,GAAIJ,GAAqBC,EAAQC,IAAUE,EAAa,CACpD,IAAIC,EAAcD,EAAYC,YAC9BA,EAAcJ,EAAOhI,aAAaiI,EAAOG,GACnCJ,EAAOrH,YAAYsH,IAGjC,SAASI,GAAQL,EAAQC,GACrB,GAAIF,GAAqBC,EAAQC,GAAQ,CACrC,IAAIhI,EAAa+H,EAAO/H,WACxBA,EAAa+H,EAAOhI,aAAaiI,EAAOhI,GAClC+H,EAAOrH,YAAYsH,IAGjC,SAAS,GAAOD,EAAQC,GAChBA,GAASD,GAAUC,EAAMvH,aAAesH,GACxCA,EAAOnH,YAAYoH,GAG3B,SAASK,GAAmBL,GACpBA,GAASA,EAAMvH,YACfuH,EAAMvH,WAAWG,YAAYoH,GAGrC,SAASpG,GAAcH,GACnB,OAAOA,EAAYvF,QAEvB,IAAI,GAAc,WACd,SAASoM,EAAWC,EAAMC,EAASC,EAAM1J,GACrCjG,KAAKzB,KAAO,MACZyB,KAAK4P,aAAeC,GAAuB,gBAC3C7P,KAAK8P,YAAcD,GAAuB,eAC1C7P,KAAK+P,YAAcF,GAAuB,eAC1C7P,KAAKyP,KAAOA,EACZzP,KAAK0P,QAAUA,EACf1P,KAAKgQ,MAAQL,EAAOM,EAAA,UAAY,GAAIN,GAAQ,IAC5C,IAAIO,EAASnW,EAAc,OAC3BmW,EAAOxR,eAAe,gCAAiC,QAAS,8BAChEwR,EAAOxR,eAAe,gCAAiC,cAAe,gCACtEwR,EAAO1R,aAAa,UAAW,OAC/B0R,EAAO1R,aAAa,cAAe,QACnC0R,EAAOpW,MAAMqW,QAAU,mDACvB,IAAIC,EAASrW,EAAc,KAC3BmW,EAAOtI,YAAYwI,GACnB,IAAIlK,EAAUnM,EAAc,KAC5BmW,EAAOtI,YAAY1B,GACnBlG,KAAKqQ,iBAAmB,IAAI,GAAgBpK,EAAMC,GAClDlG,KAAKsQ,gBAAkB,IAAI,GAAerK,EAAMC,GAChDlG,KAAKuQ,iBAAmB,IAAI,GAAgBtK,EAAMC,GAClDlG,KAAKwQ,eAAiB,IAAI,GAAcvK,EAAMC,GAC9C,IAAIuK,EAAWxW,SAASF,cAAc,OACtC0W,EAAS3W,MAAMqW,QAAU,oCACzBnQ,KAAK0Q,QAAUR,EACflQ,KAAKyG,SAAWP,EAChBlG,KAAK2Q,gBAAkBP,EACvBpQ,KAAK4Q,UAAYH,EACjBhB,EAAK7H,YAAY6I,GACjBA,EAAS7I,YAAYsI,GACrBlQ,KAAK6Q,OAAOlB,EAAKhL,MAAOgL,EAAK9K,QAC7B7E,KAAK8Q,aAAe,GAiNxB,OA/MAtB,EAAW1P,UAAUiR,QAAU,WAC3B,MAAO,OAEXvB,EAAW1P,UAAUkR,gBAAkB,WACnC,OAAOhR,KAAK4Q,WAEhBpB,EAAW1P,UAAUmR,UAAY,WAC7B,OAAOjR,KAAK0Q,SAEhBlB,EAAW1P,UAAUoR,WAAa,WAC9B,OAAOlR,KAAKyG,UAEhB+I,EAAW1P,UAAUqR,sBAAwB,WACzC,IAAIC,EAAepR,KAAKgR,kBACxB,GAAII,EACA,MAAO,CACHC,WAAYD,EAAaC,YAAc,EACvCC,UAAWF,EAAaE,WAAa,IAIjD9B,EAAW1P,UAAUyR,QAAU,WAC3B,IAAIC,EAAOxR,KAAK0P,QAAQ+B,gBAAe,GACvCzR,KAAK0R,WAAWF,IAEpBhC,EAAW1P,UAAU6R,mBAAqB,SAAUC,GAC5C5R,KAAK2Q,iBAAmB3Q,KAAK6R,iBAC7B7R,KAAK2Q,gBAAgB7I,YAAY9H,KAAK6R,iBAE1C,IAAIC,EAAS/X,EAAc,QAC3B+X,EAAOtT,aAAa,QAASwB,KAAK+R,YAClCD,EAAOtT,aAAa,SAAUwB,KAAKgS,aACnCF,EAAOtT,aAAa,IAAK,GACzBsT,EAAOtT,aAAa,IAAK,GACzBsT,EAAOtT,aAAa,KAAM,GAC1BsT,EAAOhY,MAAMgE,KAAO8T,EACpB5R,KAAK2Q,gBAAgB/I,YAAYkK,GACjC9R,KAAK6R,gBAAkBC,GAE3BtC,EAAW1P,UAAUmS,iBAAmB,SAAUC,GAC9C,OAAOnY,EAAcmY,IAEzB1C,EAAW1P,UAAUqS,SAAW,SAAU9T,GACtC,IAAI0O,EAAWrE,GAAYrK,GAE3B,OADA0O,GAAYA,EAAS5J,MAAM9E,GACpByK,GAAczK,IAEzBmR,EAAW1P,UAAU4R,WAAa,SAAUF,GACxC,IAAIY,EAAkBpS,KAAKqQ,iBACvBgC,EAAiBrS,KAAKsQ,gBACtBgC,EAAkBtS,KAAKuQ,iBACvBgC,EAAgBvS,KAAKwQ,eACzB4B,EAAgBjK,gBAChBkK,EAAelK,gBACfmK,EAAgBnK,gBAChBoK,EAAcpK,gBAKd,IAJA,IAAIjC,EAAUlG,KAAKyG,SACf+L,EAAcxS,KAAK8Q,aACnB2B,EAAUjB,EAAK9W,OACfgY,EAAiB,GACZtX,EAAI,EAAGA,EAAIqX,EAASrX,IAAK,CAC9B,IAAIuN,EAAc6I,EAAKpW,GACnB2R,EAAWrE,GAAYC,GACvBY,EAAaT,GAAcH,GAC1BA,EAAYgK,aACThK,EAAYiK,SAAYrJ,IACxBwD,GAAYA,EAAS5J,MAAMwF,GAC3BY,EAAaT,GAAcH,GACvBY,GAAcZ,EAAY7O,QAC1BsY,EAAgBpI,OAAOrB,EAAY7O,MAAMgE,MACzCsU,EAAgBpI,OAAOrB,EAAY7O,MAAMkE,QACzCqU,EAAerI,OAAOrB,EAAY7O,MAAMgE,MACxCuU,EAAerI,OAAOrB,EAAY7O,MAAMkE,QACxCuU,EAAcvI,OAAOT,EAAYZ,IAErCA,EAAYiK,QAAU,GAEtBrJ,GACAmJ,EAAerX,KAAKsN,IAIhC,IACIkK,EACAC,EAYAtG,EACAuG,EAfAC,EAAOrW,EAAU6V,EAAaE,GAGlC,IAAStX,EAAI,EAAGA,EAAI4X,EAAKtY,OAAQU,IAAK,CAClC,IAAI6X,EAAOD,EAAK5X,GAChB,GAAI6X,EAAKzX,QACL,IAAK,IAAI0X,EAAI,EAAGA,EAAID,EAAK3X,MAAO4X,IAAK,CAC7BvK,EAAc6J,EAAYS,EAAK9X,QAAQ+X,IACvC3J,EAAaT,GAAcH,GAC/BuD,GAAYvD,GAAe4G,GAAmBhG,GACxC,GAAOrD,EAASqD,IAMlC,IAASnO,EAAI,EAAGA,EAAI4X,EAAKtY,OAAQU,IAAK,CAC9B6X,EAAOD,EAAK5X,GAChB,IAAI6X,EAAKzX,QAGT,IAAS0X,EAAI,EAAGA,EAAID,EAAK3X,MAAO4X,IAAK,CAC7BvK,EAAc+J,EAAeO,EAAK9X,QAAQ+X,IAA9C,IACIvG,EAAY2F,EAAgBtI,OAAOrB,EAAa6D,GAChDG,IAAcoG,IACdF,EAAiBC,EACbnG,IACAkG,EAAiB1D,GAAYjJ,EAASyG,EAAWkG,GAC3CvD,GAAQpJ,EAASyG,GACvBmG,EAAoBnG,EACpBkG,EAAiB,MAErBE,EAAmBpG,GAEnBpD,EAAaT,GAAcH,GAC/BkK,EACM1D,GAAY4D,GAAoB7M,EAASqD,EAAYsJ,GACrDvD,GAAQyD,GAAoB7M,EAASqD,GAC3CsJ,EAAiBtJ,GAAcsJ,EAC1BE,IACDD,EAAoBD,GAExBT,EAAgBxI,SAASjB,GACzByJ,EAAgB9I,iBAAiBC,EAAYZ,GAC7C0J,EAAezI,SAASjB,GACxB0J,EAAe/I,iBAAiBC,EAAYZ,GAC5C2J,EAAgB1I,SAASjB,GACzB6D,EAAkB7D,GAG1ByJ,EAAgB5J,eAChB6J,EAAe7J,eACf8J,EAAgB9J,eAChB+J,EAAc/J,eACdxI,KAAK8Q,aAAe4B,GAExBlD,EAAW1P,UAAU+Q,OAAS,SAAUlM,EAAOE,GAC3C,IAAI4L,EAAWzQ,KAAK4Q,UACpBH,EAAS3W,MAAMqZ,QAAU,OACzB,IAAIxD,EAAO3P,KAAKgQ,MAMhB,GALS,MAATrL,IAAkBgL,EAAKhL,MAAQA,GACrB,MAAVE,IAAmB8K,EAAK9K,OAASA,GACjCF,EAAQ3E,KAAKoT,SAAS,GACtBvO,EAAS7E,KAAKoT,SAAS,GACvB3C,EAAS3W,MAAMqZ,QAAU,GACrBnT,KAAKqT,SAAW1O,GAAS3E,KAAKsT,UAAYzO,EAAQ,CAClD7E,KAAKqT,OAAS1O,EACd3E,KAAKsT,QAAUzO,EACf,IAAI0O,EAAgB9C,EAAS3W,MAC7ByZ,EAAc5O,MAAQA,EAAQ,KAC9B4O,EAAc1O,OAASA,EAAS,KAChC,IAAIqB,EAAUlG,KAAK0Q,QACnBxK,EAAQ1H,aAAa,QAASmG,EAAQ,IACtCuB,EAAQ1H,aAAa,SAAUqG,EAAS,IAExC7E,KAAK6R,kBACL7R,KAAK6R,gBAAgBrT,aAAa,QAASmG,GAC3C3E,KAAK6R,gBAAgBrT,aAAa,SAAUqG,KAGpD2K,EAAW1P,UAAUiS,SAAW,WAC5B,OAAO/R,KAAKqT,QAEhB7D,EAAW1P,UAAUkS,UAAY,WAC7B,OAAOhS,KAAKsT,SAEhB9D,EAAW1P,UAAUsT,SAAW,SAAUI,GACtC,IAAI7D,EAAO3P,KAAKgQ,MACZyD,EAAK,CAAC,QAAS,UAAUD,GACzBE,EAAM,CAAC,cAAe,gBAAgBF,GACtCG,EAAM,CAAC,cAAe,cAAcH,GACpCI,EAAM,CAAC,eAAgB,iBAAiBJ,GAC5C,GAAgB,MAAZ7D,EAAK8D,IAA4B,SAAb9D,EAAK8D,GACzB,OAAOI,WAAWlE,EAAK8D,IAE3B,IAAIhE,EAAOzP,KAAKyP,KACZqE,EAAM7Z,SAAS8Z,YAAYC,iBAAiBvE,GAChD,OAASA,EAAKiE,IAAQ5E,GAAWgF,EAAIL,KAAQ3E,GAAWW,EAAK3V,MAAM2Z,MAC5D3E,GAAWgF,EAAIH,KAAS,IACxB7E,GAAWgF,EAAIF,KAAS,GAAM,GAEzCpE,EAAW1P,UAAUmU,QAAU,WAC3BjU,KAAKyP,KAAKvF,UAAY,GACtBlK,KAAKyG,SACCzG,KAAK2Q,gBACD3Q,KAAK0Q,QACD1Q,KAAK6R,gBACD7R,KAAK4Q,UACD5Q,KAAK0P,QACD,MAE9BF,EAAW1P,UAAUoU,MAAQ,WACzB,IAAIC,EAAenU,KAAK4Q,UACpBuD,GAAgBA,EAAaxM,YAC7BwM,EAAaxM,WAAWG,YAAYqM,IAG5C3E,EAAW1P,UAAU2E,UAAY,WAC7BzE,KAAKuR,UACL,IAAIrB,EAASlQ,KAAK0Q,QACd0D,EAAYlE,EAAOkE,YACflE,EAAOvI,YAAcuI,EAAOvI,YAAYuC,UAC5CmK,EAAOC,mBAAmBF,EAAUG,QAAQ,MAAO,WACvD,MAAO,oCAAsCF,GAE1C7E,EAjPM,GAmPjB,SAASK,GAAuB2E,GAC5B,OAAO,WACHvE,EAAA,YAAc,2CAA6CuE,EAAS,MAG7D,UCtQR,SAASC,GAAQC,GACtBA,EAAUC,gBAAgB,MAAO,I,kFCE/B,GAEJ,SAAUxL,GAGR,SAASyL,IACP,IAAInM,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOqW,EAAmBrW,KACzBkK,EA4CT,OAlDA,gBAAUmM,EAAoBzL,GAS9ByL,EAAmB9U,UAAUgV,eAAiB,SAAUC,EAAQC,GAC9D,OAAO,OAAAC,GAAA,MAAoBjV,KAAKkV,YAAalV,KAAM,CACjDmV,oBAAoB,KAIxBP,EAAmB9U,UAAUsV,kBAAoB,SAAUpM,GACzD,IAAIqM,EAAWrV,KAAKsV,iBAEpB,GAAID,EAAU,CAEZ,IAAIE,EAAKF,EAASG,YAAYH,EAASI,UAAUzM,IAC7C0M,EAAO1V,KAAK2V,UACZpL,EAASmL,EAAKE,UAAU,UACxBC,EAAOH,EAAKE,UAAU,QACtBE,EAAcT,EAASU,cAAcC,eAAiB,EAAI,EAE9D,OADAT,EAAGO,IAAgBvL,EAASsL,EAAO,EAC5BN,EAGT,MAAO,CAACU,IAAKA,MAGfrB,EAAmBrW,KAAO,sBAC1BqW,EAAmBsB,cAAgB,CACjCC,OAAQ,EACRC,EAAG,EACHd,iBAAkB,cAClBe,iBAAiB,EAKjBC,aAAc,EACdC,YAAa,EAEbvU,OAAO,EACPwU,eAAgB,IAChBC,YAAa,IACbC,qBAAsB,OAEjB9B,EAnDT,CAoDE+B,GAAA,MAEFA,GAAA,KAAYC,cAAc,IACX,IAAAC,GAAA,G,aCxDX,GAEJ,SAAU1N,GAGR,SAAS2N,IACP,IAAIrO,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOuY,EAAevY,KACrBkK,EAkET,OAxEA,gBAAUqO,EAAgB3N,GAS1B2N,EAAehX,UAAUgV,eAAiB,WACxC,OAAO,OAAAG,GAAA,MAAoBjV,KAAKkV,YAAalV,KAAM,CACjDmV,oBAAoB,EACpB4B,wBAAyB/W,KAAKgL,IAAI,gBAAgB,IAAS,QAQ/D8L,EAAehX,UAAUkX,eAAiB,WAExC,QAAOhX,KAAKgL,IAAI,UAAWhL,KAAKgL,IAAI,gBAOtC8L,EAAehX,UAAUmX,wBAA0B,WAEjD,IAAIC,EAAuBlX,KAAKgL,IAAI,wBAChCwL,EAAiBxW,KAAKgL,IAAI,kBAM9B,OAJIwL,EAAiBU,IACnBA,EAAuBV,GAGlBU,GAGTJ,EAAehX,UAAUqX,cAAgB,SAAUC,EAAW1B,EAAM2B,GAClE,OAAOA,EAAUjV,KAAKsT,EAAK4B,cAAcF,KAG3CN,EAAevY,KAAO,aACtBuY,EAAeS,aAAe,CAAC,OAAQ,SACvCT,EAAeZ,cAAgB,gBAAqBW,GAAmBX,cAAe,CAGpFsB,MAAM,EACNC,UAAU,EACVC,gBAAgB,EAChBC,gBAAiB,CACfnN,MAAO,2BACPoN,YAAa,KACbC,YAAa,EACbC,WAAY,QACZC,aAAc,EACdxJ,WAAY,EACZC,YAAa,KACbL,cAAe,EACfE,cAAe,EACfxP,QAAS,GAEXmZ,OAAQ,CACNC,UAAW,CACTL,YAAa,YAGjBM,cAAc,IAETpB,EAzET,CA0EED,IAEasB,GAAA,G,yKCpEXC,GAAY,CAAC,EAAG,GAChBC,GAAUtb,KAAKub,IACfC,GAAUxb,KAAKyb,IAEnB,SAASC,GAAYC,EAAOhD,GAC1B,IAAIiD,EAAmBD,EAAME,SAAWF,EAAME,UAE9C,GAAI,gBAAuBF,EAAO,eAAgB,CAChD,IAAIG,EAAWH,EAAM3C,cAIrB,GAAsB,aAAlB8C,EAASta,OAAwBsa,EAASC,OAAQ,CACpD,IAAIC,EAAcrD,EAAKE,UAAU,aAE7BiD,EAAS7C,gBACX2C,EAAiBvY,GAAK2Y,EACtBJ,EAAiBhU,OAAuB,EAAdoU,IAE1BJ,EAAiBtY,GAAK0Y,EACtBJ,EAAiB9T,QAAwB,EAAdkU,IAKjC,OAAOJ,EAGT,IAAI,GAEJ,SAAUxP,GAGR,SAAS6P,IACP,IAAIvQ,EAAQU,EAAOE,KAAKrJ,OAASA,KAIjC,OAFAyI,EAAMlK,KAAOya,EAAQza,KACrBkK,EAAMwQ,eAAgB,EACfxQ,EAyaT,OAhbA,gBAAUuQ,EAAS7P,GAUnB6P,EAAQlZ,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,EAAKC,GAC9DrZ,KAAKsZ,OAASH,EAEdnZ,KAAKuZ,0BAA0BH,GAE/BpZ,KAAKwZ,gBAAgBL,GAErB,IAAIM,EAAuBN,EAAYnO,IAAI,qBAEd,gBAAzByO,GAAmE,UAAzBA,KAC5CzZ,KAAK0Z,aAAe1Z,KAAK2Z,aAAaR,EAAanE,EAASoE,GAAOpZ,KAAK4Z,cAAcT,EAAanE,EAASoE,EAAKC,KAMrHL,EAAQlZ,UAAU+Z,yBAA2B,SAAUV,GACrDnZ,KAAK8Z,SAEL9Z,KAAKwZ,gBAAgBL,GAIrBnZ,KAAK+Z,iBAAiBZ,IAGxBH,EAAQlZ,UAAUka,kBAAoB,SAAUC,EAAQd,GAEtDnZ,KAAKka,wBAAwBD,EAAQd,IAGvCH,EAAQlZ,UAAU0Z,gBAAkB,SAAUL,GAC5C,IAAIgB,EAAchB,EAAYiB,gBAAgBpY,MAErB,MAArBhC,KAAK0Z,cAAwBS,IAAgBna,KAAK0Z,eACpD1Z,KAAK0Z,aAAeS,EAEpBna,KAAK8Z,WAITd,EAAQlZ,UAAU8Z,cAAgB,SAAUT,EAAanE,EAASoE,EAAKC,GACrE,IAKIgB,EALAnN,EAAQlN,KAAKkN,MACbwI,EAAOyD,EAAYxD,UACnB2E,EAAUta,KAAKua,MACf7B,EAAQS,EAAY7D,iBACpBuD,EAAWH,EAAM3C,cAGF,gBAAf2C,EAAMna,KACR8b,EAAuBxB,EAAS7C,eACR,UAAf0C,EAAMna,OACf8b,EAAwC,UAAjBxB,EAAS2B,KAGlC,IAAIC,EAAiBtB,EAAYuB,qBAAuBvB,EAAc,KAClEwB,EAAkBC,GAAmBzB,EAAaT,GAElDiC,GACF3a,KAAK6a,oBAAoBF,EAAiBjF,EAAM0D,GAGlD,IAAI0B,EAAY3B,EAAYnO,IAAI,QAAQ,IAAS2P,EAC7ChC,EAAmBF,GAAYC,EAAOhD,GAE1CxI,EAAM6N,iBAGN,IAAItD,EAAW0B,EAAYnO,IAAI,YAAY,GACvCgQ,EAAiB7B,EAAYnO,IAAI,kBAAkB,GACnDiQ,EAAkB9B,EAAY+B,SAAS,mBACvCC,EAAkBF,EAAgBjQ,IAAI,iBAAmB,EACzDoQ,EAAQ,GACRC,EAAWrb,KAAKsb,eAChBC,EAAalC,GAAWA,EAAQkC,WAChCC,EAAgBnC,GAA4B,oBAAjBA,EAAQ9a,KAEvC,SAASkd,EAAiBrE,GACxB,IAAIsE,EAAW9F,GAAU8C,EAAMna,MAAMmX,EAAM0B,GACvCuE,EAAOC,GAAmBlD,EAAO2B,EAAsBqB,GAQ3D,OAPAC,EAAKE,SAASZ,EAAgBa,gBAEX,gBAAfpD,EAAMna,MACRod,EAAKI,SAAS,IAAKZ,GAGrBC,EAAMhE,GAAauE,EACZA,EAITjG,EAAK1C,KAAKsH,GAAS7S,KAAI,SAAU2P,GAC/B,IAAI4E,EAAYtG,EAAKuG,aAAa7E,GAC9B8E,EAAStG,GAAU8C,EAAMna,MAAMmX,EAAM0B,EAAW4E,GAOpD,GALIhB,GACFS,EAAiBrE,GAId1B,EAAKyG,SAAS/E,GAAnB,CAIA,IAAIgF,GAAY,EAEZtB,IAGFsB,EAAY5E,GAAKkB,EAAMna,MAAMoa,EAAkBuD,IAGjD,IAAI7d,EAAKge,GAAe3D,EAAMna,MAAM4a,EAAazD,EAAM0B,EAAW8E,EAAQ7B,EAAsBI,EAAgB5B,EAASyD,OAAO,EAAO7E,GACvI8E,GAAYle,EAAIqX,EAAM0B,EAAW4E,EAAWE,EAAQ/C,EAAakB,EAAqC,UAAf3B,EAAMna,MAEzFgd,EACFld,EAAGD,KAAK,CACNqF,MAAOyY,IAEAvB,EACT6B,GAAwB7B,EAAiBF,EAAgBpc,EAAI6d,EAAQ9E,EAAWiD,GAAsB,GAAO,GAE7G,wBAAUhc,EAAI,CACZoF,MAAOyY,GACN/C,EAAa/B,GAGlB1B,EAAK+G,iBAAiBrF,EAAW/Y,GACjC6O,EAAMzF,IAAIpJ,GACVA,EAAGqe,OAASN,MACXpS,QAAO,SAAU2S,EAAUC,GAC5B,IAAIZ,EAAYtG,EAAKuG,aAAaU,GAC9BT,EAAStG,GAAU8C,EAAMna,MAAMmX,EAAMiH,EAAUX,GAEnD,GAAIhB,EAAgB,CAClB,IAAIW,OAAO,EAEa,IAApBN,EAAS3gB,OACXihB,EAAOF,EAAiBmB,IAExBjB,EAAON,EAASuB,GAChBjB,EAAKE,SAASZ,EAAgBa,gBAEX,gBAAfpD,EAAMna,MACRod,EAAKI,SAAS,IAAKZ,GAGrBC,EAAMuB,GAAYhB,GAGpB,IAAID,EAAW9F,GAAU8C,EAAMna,MAAMmX,EAAMiH,GACvClZ,EAAQoZ,GAAsBxC,EAAsBqB,EAAUhD,GAClE,0BAAYiD,EAAM,CAChBlY,MAAOA,GACNgX,EAAgBkC,GAGrB,IAAIte,EAAKic,EAAQwC,iBAAiBF,GAElC,IAAKlH,EAAKyG,SAASQ,GAGjB,OAFAzP,EAAMY,OAAOzP,QACbA,EAAK,MAIP,IAAI+d,GAAY,EAEZtB,IACFsB,EAAY5E,GAAKkB,EAAMna,MAAMoa,EAAkBuD,GAE3CE,GACFlP,EAAMY,OAAOzP,IAIZA,IACHA,EAAKge,GAAe3D,EAAMna,MAAM4a,EAAazD,EAAMiH,EAAUT,EAAQ7B,EAAsBI,EAAgB5B,EAASyD,QAASje,EAAIoZ,IAK9H+D,GACHe,GAAYle,EAAIqX,EAAMiH,EAAUX,EAAWE,EAAQ/C,EAAakB,EAAqC,UAAf3B,EAAMna,MAG1Fgd,EACFld,EAAGD,KAAK,CACNqF,MAAOyY,IAEAvB,EACT6B,GAAwB7B,EAAiBF,EAAgBpc,EAAI6d,EAAQS,EAAUtC,GAAsB,EAAMmB,GAE3G,0BAAYnd,EAAI,CACdoF,MAAOyY,GACN/C,EAAawD,EAAU,MAG5BjH,EAAK+G,iBAAiBE,EAAUte,GAChCA,EAAGqe,OAASN,EACZlP,EAAMzF,IAAIpJ,MACTyP,QAAO,SAAUsJ,GAClB,IAAI/Y,EAAKic,EAAQwC,iBAAiB1F,GAClC/Y,GAAM,uCAAyBA,EAAI8a,EAAa/B,MAC/C2F,UACH,IAAIC,EAAUhd,KAAKid,mBAAqBjd,KAAKid,iBAAmB,IAAIC,GAAA,MACpEF,EAAQG,YAER,IAAK,IAAI/hB,EAAI,EAAGA,EAAIggB,EAAM1gB,SAAUU,EAClC4hB,EAAQvV,IAAI2T,EAAMhgB,IAGpB8R,EAAMzF,IAAIuV,GACVhd,KAAKsb,eAAiBF,EACtBpb,KAAKua,MAAQ7E,GAGfsD,EAAQlZ,UAAU6Z,aAAe,SAAUR,EAAanE,EAASoE,GAC/DpZ,KAAK8Z,SAELsD,GAAYjE,EAAanZ,KAAKkN,OAE9BlN,KAAK+Z,iBAAiBZ,IAGxBH,EAAQlZ,UAAUoa,wBAA0B,SAAUD,EAAQd,GAC5DnZ,KAAKqd,oBAELD,GAAYjE,EAAanZ,KAAKkN,OAAO,IAGvC8L,EAAQlZ,UAAUia,iBAAmB,SAAUZ,GAE7C,IAAIlN,EAAWkN,EAAYnO,IAAI,QAAQ,GAAQ,gBAAemO,EAAY7D,kBAAkB,EAAO6D,GAAe,KAE9GlN,EACFjM,KAAKkN,MAAMoQ,YAAYrR,GAEvBjM,KAAKkN,MAAM6N,kBAIf/B,EAAQlZ,UAAU+a,oBAAsB,SAAUF,EAAiBjF,EAAM0D,GACvE,IAAI3Q,EAAQzI,KAGZ,GAAK0V,EAAKpa,QAAV,CAIA,IAAIud,EAAW8B,EAAgB9B,SAE/B,GAAI7Y,KAAKiZ,cACPjZ,KAAKud,kBAAkB7H,EAAMiF,EAAiBvB,GAE9CpZ,KAAKiZ,eAAgB,MAChB,CACL,IAAIuE,EAAiB,SAAUC,GAC7B,IAAIpf,EAAKqX,EAAKoH,iBAAiBW,GAE/B,GAAIpf,EAAI,CACN,IAAIoF,EAAQpF,EAAGoF,MAEf,OAAQoV,EAAS7C,eAEfjZ,KAAK8E,IAAI4B,EAAMoB,QAAU9H,KAAK8E,IAAI4B,EAAMkB,SAAW,EAErD,OAAO,GAIX3E,KAAK0d,YAAc,WACjBjV,EAAMkV,0BAA0BjI,EAAM8H,EAAgB3E,EAAUO,IAGlEA,EAAIwE,QAAQC,GAAG,WAAY7d,KAAK0d,gBAIpC1E,EAAQlZ,UAAUge,UAAY,SAAUpI,EAAMmD,EAAUkF,GACtD,IAAIC,EAAO,GAcX,OAbAtI,EAAKuI,KAAKvI,EAAKwI,aAAarF,EAAS2B,MAAM,SAAU2D,EAAeC,GAClE,IAAIC,EAAcN,EAAaK,GAC/BC,EAA6B,MAAfA,EAAsBpI,IAAMoI,EAC1CL,EAAK3iB,KAAK,CACR+b,UAAWgH,EACXC,YAAaA,EACbF,cAAeA,OAGnBH,EAAKM,MAAK,SAAUhkB,EAAGC,GAErB,OAAOA,EAAE8jB,YAAc/jB,EAAE+jB,eAEpB,CACLE,eAAgB,iBAAIP,GAAM,SAAU/K,GAClC,OAAOA,EAAKkL,mBAKlBnF,EAAQlZ,UAAU0e,8BAAgC,SAAU9I,EAAMqI,EAAclF,GAK9E,IAJA,IAAI4F,EAAQ5F,EAAS4F,MACjBC,EAAiBhJ,EAAKwI,aAAarF,EAAS2B,KAC5CmE,EAAYC,OAAOC,UAEdC,EAAU,EAAGzU,EAAMoU,EAAMM,iBAAiBC,WAAWtkB,OAAQokB,EAAUzU,IAAOyU,EAAS,CAC9F,IAAIG,EAASvJ,EAAKwJ,WAAWR,EAAgBD,EAAMU,oBAAoBL,IACnE9V,EAAQiW,EAAS,EACnBL,OAAOQ,UACPrB,EAAarI,EAAK2J,gBAAgBJ,IAEpC,GAAIjW,EAAQ2V,EACV,OAAO,EAGTA,EAAY3V,EAGd,OAAO,GASTgQ,EAAQlZ,UAAUwf,wBAA0B,SAAUC,EAAW1G,GAM/D,IALA,IAAI4F,EAAQ5F,EAAS4F,MACjBe,EAASf,EAAMgB,YACfX,EAAU/hB,KAAKub,IAAI,EAAGkH,EAAO,IAC7BE,EAAU3iB,KAAKyb,IAAIgH,EAAO,GAAIf,EAAMM,iBAAiBC,WAAWtkB,OAAS,GAEtEokB,GAAWY,IAAWZ,EAC3B,GAAIS,EAAUhB,eAAeO,KAAaL,EAAMU,oBAAoBL,GAClE,OAAO,GAKb9F,EAAQlZ,UAAU6d,0BAA4B,SAAUjI,EAAMqI,EAAclF,EAAUO,GACpF,GAAKpZ,KAAKwe,8BAA8B9I,EAAMqI,EAAclF,GAA5D,CAIA,IAAI8G,EAAW3f,KAAK8d,UAAUpI,EAAMmD,EAAUkF,GAE1C/d,KAAKsf,wBAAwBK,EAAU9G,KACzC7Y,KAAKuZ,0BAA0BH,GAE/BA,EAAIwG,eAAe,CACjBrhB,KAAM,kBACNshB,cAAehH,EAAS2B,IAAM,OAC9BsF,OAAQjH,EAASkH,MACjBJ,SAAUA,OAKhB3G,EAAQlZ,UAAUyd,kBAAoB,SAAU7H,EAAMiF,EAAiBvB,GACrE,IAAIP,EAAW8B,EAAgB9B,SAE3BmH,EAAahgB,KAAK8d,UAAUpI,EAAMmD,GAAU,SAAUuF,GACxD,OAAO1I,EAAK1K,IAAI0K,EAAKwI,aAAavD,EAAgBsF,UAAUzF,KAAM4D,MAGpEhF,EAAIwG,eAAe,CACjBrhB,KAAM,kBACNshB,cAAehH,EAAS2B,IAAM,OAC9Be,YAAY,EACZuE,OAAQjH,EAASkH,MACjBJ,SAAUK,EACVE,UAAW,CAGTC,SAAU,MAKhBnH,EAAQlZ,UAAUgO,OAAS,SAAUkH,EAASoE,GAC5CpZ,KAAK8Z,OAAO9Z,KAAKsZ,QAEjBtZ,KAAKuZ,0BAA0BH,IAGjCJ,EAAQlZ,UAAUmU,QAAU,SAAUe,EAASoE,GAC7CpZ,KAAKuZ,0BAA0BH,IAGjCJ,EAAQlZ,UAAUyZ,0BAA4B,SAAUH,GAClDpZ,KAAK0d,cACPtE,EAAIwE,QAAQwC,IAAI,WAAYpgB,KAAK0d,aACjC1d,KAAK0d,YAAc,OAIvB1E,EAAQlZ,UAAUga,OAAS,SAAUwC,GACnC,IAAIpP,EAAQlN,KAAKkN,MACbwI,EAAO1V,KAAKua,MAEZ+B,GAASA,EAAM5B,sBAAwBhF,IAAS1V,KAAK0Z,cACvD1Z,KAAKqd,oBAELrd,KAAKsb,eAAiB,GACtB5F,EAAK2K,mBAAkB,SAAUhiB,GAC/B,uCAAyBA,EAAIie,EAAO,gBAAUje,GAAI+Y,eAGpDlK,EAAMiQ,YAGRnd,KAAKua,MAAQ,KACbva,KAAKiZ,eAAgB,GAGvBD,EAAQlZ,UAAUud,kBAAoB,WACpCrd,KAAKkN,MAAMY,OAAO9N,KAAKid,kBACvBjd,KAAKid,iBAAmB,MAG1BjE,EAAQza,KAAO,MACRya,EAjbT,CAkbEsH,GAAA,MAEE9I,GAAO,CACT+I,YAAa,SAAUC,EAAsBtE,GAC3C,IAAIuE,EAAYvE,EAAOvX,MAAQ,GAAK,EAAI,EACpC+b,EAAaxE,EAAOrX,OAAS,GAAK,EAAI,EAEtC4b,EAAY,IACdvE,EAAO9b,GAAK8b,EAAOvX,MACnBuX,EAAOvX,OAASuX,EAAOvX,OAGrB+b,EAAa,IACfxE,EAAO7b,GAAK6b,EAAOrX,OACnBqX,EAAOrX,QAAUqX,EAAOrX,QAG1B,IAAI8b,EAAaH,EAAqBpgB,EAAIogB,EAAqB7b,MAC3Dic,EAAaJ,EAAqBngB,EAAImgB,EAAqB3b,OAC3DzE,EAAIiY,GAAQ6D,EAAO9b,EAAGogB,EAAqBpgB,GAC3CK,EAAK8X,GAAQ2D,EAAO9b,EAAI8b,EAAOvX,MAAOgc,GACtCtgB,EAAIgY,GAAQ6D,EAAO7b,EAAGmgB,EAAqBngB,GAC3CK,EAAK6X,GAAQ2D,EAAO7b,EAAI6b,EAAOrX,OAAQ+b,GACvCC,EAAWpgB,EAAKL,EAChB0gB,EAAWpgB,EAAKL,EAoBpB,OAfA6b,EAAO9b,EAAIygB,GAAYzgB,EAAIugB,EAAalgB,EAAKL,EAC7C8b,EAAO7b,EAAIygB,GAAYzgB,EAAIugB,EAAalgB,EAAKL,EAC7C6b,EAAOvX,MAAQkc,EAAW,EAAIpgB,EAAKL,EACnC8b,EAAOrX,OAASic,EAAW,EAAIpgB,EAAKL,EAEhCogB,EAAY,IACdvE,EAAO9b,GAAK8b,EAAOvX,MACnBuX,EAAOvX,OAASuX,EAAOvX,OAGrB+b,EAAa,IACfxE,EAAO7b,GAAK6b,EAAOrX,OACnBqX,EAAOrX,QAAUqX,EAAOrX,QAGnBgc,GAAYC,GAErBC,MAAO,SAAUpI,EAAkBuD,GACjC,IAAI8E,EAAQ9E,EAAO+E,IAAM/E,EAAOjb,EAAI,GAAK,EAEzC,GAAI+f,EAAQ,EAAG,CACb,IAAIE,EAAMhF,EAAOjb,EACjBib,EAAOjb,EAAIib,EAAO+E,GAClB/E,EAAO+E,GAAKC,EAGd,IAAIjgB,EAAIsX,GAAQ2D,EAAOjb,EAAG0X,EAAiB1X,GACvCggB,EAAK5I,GAAQ6D,EAAO+E,GAAItI,EAAiBsI,IAC7C/E,EAAOjb,EAAIA,EACXib,EAAO+E,GAAKA,EACZ,IAAIE,EAAUlgB,EAAIggB,EAAK,EAEvB,GAAID,EAAQ,EAAG,CACTE,EAAMhF,EAAOjb,EACjBib,EAAOjb,EAAIib,EAAO+E,GAClB/E,EAAO+E,GAAKC,EAGd,OAAOC,IAGP9E,GAAiB,CACnBkE,YAAa,SAAUpH,EAAazD,EAAMiH,EAAUT,EAAQlG,EAAcyE,EAAgB2G,EAAWC,EAAU5J,GAC7G,IAAIrV,EAAO,IAAIkf,GAAA,KAAK,CAClB7d,MAAO,oBAAO,GAAIyY,GAClBqF,GAAI,IAKN,GAHAnf,EAAKof,YAAc7E,EACnBva,EAAKpI,KAAO,OAERygB,EAAgB,CAClB,IAAIgH,EAAYrf,EAAKqB,MACjBie,EAAkB1L,EAAe,SAAW,QAChDyL,EAAUC,GAAmB,EAG/B,OAAOtf,GAET2e,MAAO,SAAU5H,EAAazD,EAAMiH,EAAUT,EAAQyF,EAAUlH,EAAgB2G,EAAWC,EAAU5J,GAKnG,IAAI9V,EAAYua,EAAOhb,WAAagb,EAAO/a,SACvCygB,GAAcD,GAAYlK,EAAW,QAAUoK,GAAA,KAC/CC,EAAS,IAAIF,EAAW,CAC1Bne,MAAO,sBAAS,CACd9B,UAAWA,GACVua,GACHqF,GAAI,IAIN,GAFAO,EAAO9nB,KAAO,OAEVygB,EAAgB,CAClB,IAAIsH,EAAcD,EAAOre,MACrBie,EAAkBC,EAAW,IAAM,WACnCK,EAAgB,GACpBD,EAAYL,GAAmBC,EAAW,EAAIzF,EAAOhb,WACrD8gB,EAAcN,GAAmBxF,EAAOwF,IACvCL,EAAW,kBAAc,iBAAWS,EAAQ,CAC3Cre,MAAOue,GAENvH,GAGL,OAAOqH,IAIX,SAASlH,GAAmBzB,EAAa9D,GACvC,IAAI4M,EAAqB9I,EAAYnO,IAAI,gBAAgB,GACrD6N,EAAWxD,EAASU,cAcxB,GAAIkM,GAAwC,aAAlBpJ,EAASta,MAAyC,gBAAlB8W,EAAS9W,KACjE,MAAO,CACLsa,SAAUA,EACVoH,UAAW5K,EAAS6M,aAAarJ,IAKvC,SAAS2D,GAAwB7B,EAAiBwH,EAAsB9jB,EAAI6d,EAAQS,EAAU3G,EAAcqL,EAAU7F,GACpH,IAAI4G,EACAC,EAEArM,GACFqM,EAAa,CACXjiB,EAAG8b,EAAO9b,EACVuE,MAAOuX,EAAOvX,OAEhByd,EAAe,CACb/hB,EAAG6b,EAAO7b,EACVwE,OAAQqX,EAAOrX,UAGjBwd,EAAa,CACXhiB,EAAG6b,EAAO7b,EACVwE,OAAQqX,EAAOrX,QAEjBud,EAAe,CACbhiB,EAAG8b,EAAO9b,EACVuE,MAAOuX,EAAOvX,QAIb6W,IAGF6F,EAAW,kBAAc,iBAAWhjB,EAAI,CACvCoF,MAAO2e,GACND,EAAsBxF,EAAU,MAGrC,IAAI2F,EAAqBH,EAAuBxH,EAAgB9B,SAASyD,MAAQ,MAChF+E,EAAW,kBAAc,iBAAWhjB,EAAI,CACvCoF,MAAO4e,GACNC,EAAoB3F,GAGzB,IAAI/G,GAAY,CAGd2K,YAAa,SAAU7K,EAAM0B,EAAW4E,GACtC,IAAIE,EAASxG,EAAK4B,cAAcF,GAC5BmL,EAAiBvG,EAAYwG,GAAaxG,EAAWE,GAAU,EAE/DuG,EAAQvG,EAAOvX,MAAQ,EAAI,GAAK,EAChC+d,EAAQxG,EAAOrX,OAAS,EAAI,GAAK,EACrC,MAAO,CACLzE,EAAG8b,EAAO9b,EAAIqiB,EAAQF,EAAiB,EACvCliB,EAAG6b,EAAO7b,EAAIqiB,EAAQH,EAAiB,EACvC5d,MAAOuX,EAAOvX,MAAQ8d,EAAQF,EAC9B1d,OAAQqX,EAAOrX,OAAS6d,EAAQH,IAGpCxB,MAAO,SAAUrL,EAAM0B,EAAW4E,GAChC,IAAIE,EAASxG,EAAK4B,cAAcF,GAChC,MAAO,CACLrW,GAAImb,EAAOnb,GACXC,GAAIkb,EAAOlb,GACXigB,GAAI/E,EAAO+E,GACXhgB,EAAGib,EAAOjb,EACVC,WAAYgb,EAAOhb,WACnBC,SAAU+a,EAAO/a,YAKvB,SAASwhB,GAAczG,GACrB,OAA4B,MAArBA,EAAOhb,YAAyC,MAAnBgb,EAAO/a,UAAoB+a,EAAOhb,aAAegb,EAAO/a,SAG9F,SAASob,GAAYle,EAAIqX,EAAM0B,EAAW4E,EAAWE,EAAQ/C,EAAanD,EAAc4M,GACtF,IAAI9oB,EAAQ4b,EAAKmN,cAAczL,EAAW,SAErCwL,GACHvkB,EAAG0d,SAAS,IAAKC,EAAUhR,IAAI,CAAC,YAAa,kBAAoB,GAGnE3M,EAAGwd,SAAS/hB,GACZ,IAAIgpB,EAAc9G,EAAU+G,WAAW,UAGvC,GAFAD,GAAezkB,EAAGD,KAAK,SAAU0kB,IAE5BF,EAAS,CACZ,IAAII,EAAuBhN,EAAekG,EAAOrX,OAAS,EAAI,SAAW,MAAQqX,EAAOvX,MAAQ,EAAI,OAAS,QACzGse,EAAoB,gBAAqBjH,GAC7C,gBAAc3d,EAAI4kB,EAAmB,CACnCC,aAAc/J,EACdgK,eAAgB/L,EAChBgM,YAAa,gBAAgBjK,EAAYxD,UAAWyB,GACpDiM,aAAcvpB,EAAMgE,KACpBwlB,eAAgBxpB,EAAM+E,QACtB0kB,uBAAwBP,IAE1B,IAAIQ,EAAQnlB,EAAGolB,iBACf,gBAAuBD,EAAOP,EAAmB9J,EAAYuK,YAAYtM,IAAY,SAAUpO,GAC7F,OAAO,gBAA4B0M,EAAM1M,MAI7C,IAAI2a,EAAgB3H,EAAUd,SAAS,CAAC,aACxC,gBAAoB7c,EAAIslB,EAAc3Y,IAAI,SAAU2Y,EAAc3Y,IAAI,cACtE,gBAAyB3M,EAAI2d,GAEzB2G,GAAczG,KAChB7d,EAAGvE,MAAMgE,KAAO,OAChBO,EAAGvE,MAAMkE,OAAS,OAClB,kBAAKK,EAAGulB,QAAQ,SAAUC,GACpBA,EAAM/pB,QACR+pB,EAAM/pB,MAAMgE,KAAO+lB,EAAM/pB,MAAMkE,OAAS,YAOhD,SAASwkB,GAAaxG,EAAW8H,GAE/B,IAAIlM,EAAcoE,EAAUhR,IAAI,CAAC,YAAa,gBAE9C,IAAK4M,GAA+B,SAAhBA,EAClB,OAAO,EAGT,IAAI5Y,EAAYgd,EAAUhR,IAAI,CAAC,YAAa,iBAAmB,EAE3DrG,EAAQxC,MAAM2hB,EAAUnf,OAASia,OAAOC,UAAY9hB,KAAK8E,IAAIiiB,EAAUnf,OACvEE,EAAS1C,MAAM2hB,EAAUjf,QAAU+Z,OAAOC,UAAY9hB,KAAK8E,IAAIiiB,EAAUjf,QAC7E,OAAO9H,KAAKyb,IAAIxZ,EAAW2F,EAAOE,GAGpC,IAAIkf,GAEJ,WACE,SAASA,KAET,OAAOA,EAHT,GAMI,GAEJ,SAAU5a,GAGR,SAAS6a,EAAUrU,GACjB,IAAIlH,EAAQU,EAAOE,KAAKrJ,KAAM2P,IAAS3P,KAGvC,OADAyI,EAAMlK,KAAO,WACNkK,EAuBT,OA7BA,gBAAUub,EAAW7a,GAWrB6a,EAAUlkB,UAAUmkB,gBAAkB,WACpC,OAAO,IAAIF,IAGbC,EAAUlkB,UAAU0D,UAAY,SAAU0gB,EAAKzgB,GAO7C,IAJA,IAAI0gB,EAAS1gB,EAAM0gB,OACfC,EAAapkB,KAAKqkB,aAClBC,EAAatkB,KAAKukB,aAEbnpB,EAAI,EAAGA,EAAI+oB,EAAOzpB,OAAQU,GAAK,EACtCgpB,EAAWE,GAAcH,EAAO/oB,EAAIkpB,GACpCJ,EAAI/jB,OAAOikB,EAAW,GAAIA,EAAW,IACrCF,EAAI3jB,OAAO4jB,EAAO/oB,GAAI+oB,EAAO/oB,EAAI,KAI9B4oB,EA9BT,CA+BEpb,EAAA,MAEF,SAASwU,GAAYjE,EAAajM,EAAOsX,GAEvC,IAAI9O,EAAOyD,EAAYxD,UACnByO,EAAa,GACbE,EAAa5O,EAAKE,UAAU,uBAAyB,EAAI,EAC7DwO,EAAW,EAAIE,GAAc5O,EAAKE,UAAU,kBAC5C,IAAI6O,EAAmB/O,EAAKE,UAAU,oBAClC8O,EAAWhP,EAAKE,UAAU,YAC1BqF,EAAkB9B,EAAY+B,SAAS,mBACvCF,EAAiB7B,EAAYnO,IAAI,kBAAkB,GAEvD,GAAIgQ,EAAgB,CAClB,IAAImJ,EAASzO,EAAKE,UAAU,yBACxB+O,EAAuB,GAC3BA,EAAqB,EAAIL,GAAc5O,EAAKE,UAAU,mBACtD,IAAI+F,EAAO,IAAI,GAAU,CACvBlY,MAAO,CACL0gB,OAAQA,GAEVK,cAAeA,EACfI,QAAQ,EACRrD,GAAI,IAEN5F,EAAK0I,aAAeM,EACpBhJ,EAAK4I,aAAeD,EACpB3I,EAAKkJ,mBAAqBJ,EAC1B9I,EAAKmJ,WAAaJ,EAClBK,GAAwBpJ,EAAMV,EAAiBvF,GAC/CxI,EAAMzF,IAAIkU,GAGZ,IAAItd,EAAK,IAAI,GAAU,CACrBoF,MAAO,CACL0gB,OAAQzO,EAAKE,UAAU,gBAEzB4O,cAAeA,IAEjBnmB,EAAGgmB,aAAeD,EAClB/lB,EAAGkmB,aAAeD,EAClBjmB,EAAGwmB,mBAAqBJ,EACxBpmB,EAAGymB,WAAaJ,EAChBxX,EAAMzF,IAAIpJ,GACV2mB,GAAc3mB,EAAI8a,EAAazD,GAE/B,gBAAUrX,GAAI4mB,YAAc9L,EAAY8L,YAEnC9L,EAAYnO,IAAI,YACnB3M,EAAGwf,GAAG,YAAaqH,IACnB7mB,EAAGwf,GAAG,YAAaqH,KAKvB,IAAIA,GAA2B,OAAAC,GAAA,OAAS,SAAUC,GAChD,IAAIC,EAAYrlB,KACZoX,EAAYkO,GAAuBD,EAAWD,EAAMlX,QAASkX,EAAMhX,SACvE,gBAAUiX,GAAWjO,UAAYA,GAAa,EAAIA,EAAY,OAC7D,IAAI,GAEP,SAASkO,GAAuBD,EAAWjlB,EAAGC,GAC5C,IAAIikB,EAAae,EAAUd,aACvBgB,EAAc,EAAIjB,EAClBH,EAASkB,EAAU5hB,MAAM0gB,OACzBM,EAAmBY,EAAUR,mBAC7BW,EAAezoB,KAAK8E,IAAIwjB,EAAUP,WAAa,GAC/CW,EAAgBJ,EAAUhB,aAAakB,GAC3CnN,GAAU,GAAKhY,EACfgY,GAAU,GAAK/X,EAMf,IALA,IAAIqlB,EAAiBtN,GAAUkM,GAC3BqB,EAAkBvN,GAAU,EAAIkM,GAChCsB,EAAiBF,EAAiBF,EAClCK,EAAiBH,EAAiBF,EAE7BpqB,EAAI,EAAGiP,EAAM8Z,EAAOzpB,OAAS,EAAGU,EAAIiP,EAAKjP,IAAK,CACrD,IAAI0qB,EAAS,EAAJ1qB,EACL2qB,EAAa5B,EAAO2B,EAAKxB,GACzB0B,EAAc7B,EAAO2B,EAAKP,GAE9B,GAAIQ,GAAcH,GAAkBG,GAAcF,IAAmBJ,GAAiBO,EAAcL,GAAmBF,GAAiBE,GAAmBK,EAAcL,GAAmBK,GAAeL,GAAmBF,GAC5N,OAAOhB,EAAiBrpB,GAI5B,OAAQ,EAGV,SAAS4pB,GAAc3mB,EAAI8a,EAAazD,GACtC,IAAIuQ,EAAcvQ,EAAKwQ,UAAU,SACjC7nB,EAAGwd,SAAS,oBAAO,GAAIoK,IAEvB5nB,EAAGvE,MAAMgE,KAAO,KAChBO,EAAGvE,MAAMkE,OAASioB,EAAYnoB,KAC9BO,EAAGvE,MAAMkF,UAAY0W,EAAKE,UAAU,YAGtC,SAASmP,GAAwB1mB,EAAI4c,EAAiBvF,GACpD,IAAIkC,EAAcqD,EAAgBjQ,IAAI,gBAAkBiQ,EAAgBjQ,IAAI,SACxEiN,EAAYgD,EAAgBa,eAChCzd,EAAGwd,SAAS5D,GACZ5Z,EAAGvE,MAAMgE,KAAO,KAChBO,EAAGvE,MAAMkE,OAAS4Z,EAClBvZ,EAAGvE,MAAMkF,UAAY0W,EAAKE,UAAU,YAGtC,SAASiH,GAAsBxC,EAAsB6B,EAAQxD,GAC3D,GAAI,gBAAuBA,EAAO,eAAgB,CAChD,IAAI+I,EAAYvF,EACZiK,EAAczN,EAAME,UACxB,MAAO,CACLxY,EAAGia,EAAuBoH,EAAUrhB,EAAI+lB,EAAY/lB,EACpDC,EAAGga,EAAuB8L,EAAY9lB,EAAIohB,EAAUphB,EACpDsE,MAAO0V,EAAuBoH,EAAU9c,MAAQwhB,EAAYxhB,MAC5DE,OAAQwV,EAAuB8L,EAAYthB,OAAS4c,EAAU5c,QAG5DshB,EAAczN,EAAME,UAAxB,IACImJ,EAAc7F,EAClB,MAAO,CACLnb,GAAIolB,EAAYplB,GAChBC,GAAImlB,EAAYnlB,GAChBigB,GAAI5G,EAAuB8L,EAAYlF,GAAKc,EAAYd,GACxDhgB,EAAGoZ,EAAuB8L,EAAYllB,EAAI8gB,EAAY9gB,EACtDC,WAAYmZ,EAAuB0H,EAAY7gB,WAAa,EAC5DC,SAAUkZ,EAAuB0H,EAAY5gB,SAAqB,EAAVpE,KAAKM,IAKnE,SAASue,GAAmBlD,EAAO2B,EAAsB6B,GACvD,IAAIkK,EAA4B,UAAf1N,EAAMna,KAAmBsjB,GAAA,KAASP,GAAA,KACnD,OAAO,IAAI8E,EAAW,CACpB3iB,MAAOoZ,GAAsBxC,EAAsB6B,EAAQxD,GAC3DkM,QAAQ,EACRrD,GAAI,IAIO,UC95BR,SAAS,GAAQ7M,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoBnO,IAC9BzD,EAAU6R,eAAe7R,EAAU8R,SAASC,OAAOC,OAAQ,WAAa,QAAQ,QAGhFhS,EAAU6R,eAAe7R,EAAU8R,SAASC,OAAOE,mBAAoB,SAEvEjS,EAAUkS,kBAAkBlS,EAAU8R,SAASK,UAAUC,UAAW,OAAAC,GAAA,MAAW,QAW/ErS,EAAUsS,eAAe,CACvBzoB,KAAM,kBACN6mB,MAAO,kBACPpb,OAAQ,WACP,SAAUqP,EAASrE,GACpB,IAAI6K,EAAgBxG,EAAQwG,eAAiB,SAC7C7K,EAAQiS,cAAc,CACpBC,SAAUrH,EACVsH,MAAO9N,IACN,SAAU+N,GACP/N,EAAQsG,UACVyH,EAAeC,KAAKC,oBAAoBjO,EAAQsG,gB,2CChCpD,GAAgB,EAAV5iB,KAAKM,GACXkqB,GAASxqB,KAAKM,GAAK,IAEvB,SAASmqB,GAAYrO,EAAaC,GAChC,OAAO,QAAqBD,EAAYsO,qBAAsB,CAC5D9iB,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,cAID,SAAS0V,GAAUC,EAAY3S,EAASoE,GACrDpE,EAAQ4S,iBAAiBD,GAAY,SAAUxO,GAC7C,IAAIzD,EAAOyD,EAAYxD,UACnBkS,EAAWnS,EAAKwI,aAAa,SAC7B4J,EAAWN,GAAYrO,EAAaC,GACpClU,EAASiU,EAAYnO,IAAI,UACzB+c,EAAS5O,EAAYnO,IAAI,UAExB,aAAe+c,KAClBA,EAAS,CAAC,EAAGA,IAGV,aAAe7iB,KAClBA,EAAS,CAACA,EAAQA,IAGpB,IAAIP,EAAQ,gBAAamjB,EAASnjB,MAAOyU,EAAIrH,YACzClN,EAAS,gBAAaijB,EAASjjB,OAAQuU,EAAIpH,aAC3C6D,EAAO9Y,KAAKyb,IAAI7T,EAAOE,GACvB9D,EAAK,gBAAamE,EAAO,GAAIP,GAASmjB,EAAS1nB,EAC/CY,EAAK,gBAAakE,EAAO,GAAIL,GAAUijB,EAASznB,EAChD4gB,EAAK,gBAAa8G,EAAO,GAAIlS,EAAO,GACpC5U,EAAI,gBAAa8mB,EAAO,GAAIlS,EAAO,GACnC3U,GAAciY,EAAYnO,IAAI,cAAgBuc,GAC9CS,EAAW7O,EAAYnO,IAAI,YAAcuc,GACzCU,EAAiB,EACrBvS,EAAKuI,KAAK4J,GAAU,SAAU7e,IAC3B7G,MAAM6G,IAAUif,OAEnB,IAAIC,EAAMxS,EAAKyS,OAAON,GAElBO,EAAarrB,KAAKM,IAAM6qB,GAAOD,GAAkB,EACjDtmB,EAAYwX,EAAYnO,IAAI,aAC5Bqd,EAAWlP,EAAYnO,IAAI,YAC3Bsd,EAAmBnP,EAAYnO,IAAI,oBAEnCwU,EAAS9J,EAAK6S,cAAcV,GAChCrI,EAAO,GAAK,EAEZ,IAAIgJ,EAAY,GACZC,EAA6B,EAC7BC,EAAexnB,EACfynB,EAAMhnB,EAAY,GAAK,EAmD3B,GAlDA+T,EAAKkT,UAAU,CACbd,SAAUA,EACV7mB,EAAGA,IAELyU,EAAKuI,KAAK4J,GAAU,SAAU7e,EAAOyU,GACnC,IAAIoL,EAEJ,GAAI1mB,MAAM6G,GACR0M,EAAKoT,cAAcrL,EAAK,CACtBoL,MAAO5S,IACP/U,WAAY+U,IACZ9U,SAAU8U,IACVtU,UAAWA,EACXZ,GAAIA,EACJC,GAAIA,EACJigB,GAAIA,EACJhgB,EAAGonB,EAAWpS,IAAMhV,QATxB,CAgBE4nB,EADe,SAAbR,EACc,IAARH,GAAaI,EAAmBF,EAAapf,EAAQof,EAErD,GAAMH,EAGZY,EAAQb,GACVa,EAAQb,EACRQ,GAAaR,GAEbS,GAA8Bzf,EAGhC,IAAI7H,EAAWunB,EAAeC,EAAME,EACpCnT,EAAKoT,cAAcrL,EAAK,CACtBoL,MAAOA,EACP3nB,WAAYwnB,EACZvnB,SAAUA,EACVQ,UAAWA,EACXZ,GAAIA,EACJC,GAAIA,EACJigB,GAAIA,EACJhgB,EAAGonB,EAAW,gBAAUrf,EAAOwW,EAAQ,CAACyB,EAAIhgB,IAAMA,IAEpDynB,EAAevnB,MAIbqnB,EAAY,IAAOP,EAGrB,GAAIO,GAAa,KAAM,CACrB,IAAIO,EAAU,GAAMd,EACpBvS,EAAKuI,KAAK4J,GAAU,SAAU7e,EAAOyU,GACnC,IAAKtb,MAAM6G,GAAQ,CACjB,IAAIggB,EAAWtT,EAAK4B,cAAcmG,GAClCuL,EAASH,MAAQE,EACjBC,EAAS9nB,WAAaA,EAAaynB,EAAMlL,EAAMsL,EAC/CC,EAAS7nB,SAAWD,EAAaynB,GAAOlL,EAAM,GAAKsL,WAIvDX,EAAaI,EAAYC,EACzBC,EAAexnB,EACfwU,EAAKuI,KAAK4J,GAAU,SAAU7e,EAAOyU,GACnC,IAAKtb,MAAM6G,GAAQ,CACjB,IAAIigB,EAAWvT,EAAK4B,cAAcmG,GAC9BoL,EAAQI,EAASJ,QAAUb,EAAWA,EAAWhf,EAAQof,EAC7Da,EAAS/nB,WAAawnB,EACtBO,EAAS9nB,SAAWunB,EAAeC,EAAME,EACzCH,GAAgBC,EAAME,SChInB,SAASK,GAAWvB,GACjC,MAAO,CACLA,WAAYA,EACZ5nB,MAAO,SAAUoZ,EAAanE,GAC5B,IAAImU,EAAenU,EAAQoU,eAAe,CACxClC,SAAU,WAGZ,GAAKiC,GAAiBA,EAAazuB,OAAnC,CAIA,IAAIgb,EAAOyD,EAAYxD,UACvBD,EAAK2T,YAAW,SAAU5L,GAGxB,IAFA,IAAIzjB,EAAO0b,EAAK4T,QAAQ7L,GAEfriB,EAAI,EAAGA,EAAI+tB,EAAazuB,OAAQU,IAEvC,IAAK+tB,EAAa/tB,GAAGmuB,WAAWvvB,GAC9B,OAAO,EAIX,OAAO,Q,qECjBX,GAAS+C,KAAKM,GAAK,IAEvB,SAASmsB,GAAiBhY,EAAMzQ,EAAIC,EAAIC,EAAG0nB,EAAKc,EAAWC,EAAYC,EAAUC,EAASC,GACxF,KAAIrY,EAAK9W,OAAS,GAAlB,CA8DA,IAFA,IAAI2P,EAAMmH,EAAK9W,OAENU,EAAI,EAAGA,EAAIiP,EAAKjP,IACvB,GAAyB,UAArBoW,EAAKpW,GAAG0uB,UAAiD,cAAzBtY,EAAKpW,GAAG2uB,aAA8B,CACxE,IAAIC,EAAKxY,EAAKpW,GAAGooB,MAAMpjB,EAAIypB,EAC3BrY,EAAKpW,GAAG6uB,WAAW,GAAG,IAAMD,EAC5BxY,EAAKpW,GAAGooB,MAAMpjB,EAAIypB,EAIlB,gBAAerY,EAAMoY,EAASA,EAAUF,IAC1CQ,EAAa1Y,GAjEf,SAAS2Y,EAAwCC,GAI/C,IAHA,IAAIC,EAAKD,EAAKC,GACVC,EAAMD,EAAKA,EAENjvB,EAAI,EAAGA,EAAIgvB,EAAK5Y,KAAK9W,OAAQU,IAAK,CACzC,IAAI6X,EAAOmX,EAAK5Y,KAAKpW,GACjBmvB,EAAKxtB,KAAK8E,IAAIoR,EAAKuQ,MAAMnjB,EAAIW,GAE7BwpB,EAAKvpB,EAAIgS,EAAK5I,IACdogB,EAAMD,EAAKA,EAEXR,EAAKjtB,KAAK2tB,MAAM,EAAI3tB,KAAK8E,IAAI0oB,EAAKA,EAAKD,IAAQG,GACnDxX,EAAKuQ,MAAMpjB,EAAIW,GAAMipB,EAAK/W,EAAK0X,MAAQhC,GAK3C,SAASuB,EAAaU,GAWpB,IATA,IAAIC,EAAU,CACZrZ,KAAM,GACNsZ,KAAM,GAEJC,EAAa,CACfvZ,KAAM,GACNsZ,KAAM,GAGC1vB,EAAI,EAAGA,EAAIwvB,EAAMlwB,OAAQU,IAChC,GAA8B,SAA1BwvB,EAAMxvB,GAAG2uB,aAAb,CAIA,IAAI9W,EAAO2X,EAAMxvB,GACbgvB,EAAOnX,EAAKuQ,MAAMnjB,EAAIW,EAAK+pB,EAAaF,EACxCN,EAAKxtB,KAAK8E,IAAIoR,EAAKuQ,MAAMnjB,EAAIW,GAEjC,GAAIupB,EAAKH,EAAKU,KAAM,CAClB,IAAId,EAAK/W,EAAKuQ,MAAMpjB,EAAIW,EAAKkS,EAAK0X,KAAOhC,EAErC6B,EAAKvpB,EAAIgS,EAAK5I,IAEdggB,EAAKttB,KAAK8E,IAAImoB,GAAMQ,EAAKztB,KAAK2tB,KAAKH,EAAKA,GAAM,EAAIP,EAAKA,EAAKQ,EAAKA,IAAOA,EAC5EJ,EAAKC,GAAKA,EACVD,EAAKU,KAAOP,EAGdH,EAAK5Y,KAAKnW,KAAK4X,GAGjBkX,EAAwCU,GACxCV,EAAwCY,IAkB5C,SAASC,GAAaC,EAAiBlqB,EAAIC,EAAIC,EAAGwoB,EAAWC,EAAYC,EAAUC,GAMjF,IALA,IAAIsB,EAAW,GACXC,EAAY,GACZC,EAAYxM,OAAOC,UACnBwM,GAAczM,OAAOC,UAEhBzjB,EAAI,EAAGA,EAAI6vB,EAAgBvwB,OAAQU,IAAK,CAC/C,IAAIooB,EAAQyH,EAAgB7vB,GAAGooB,MAE3B8H,GAAiBL,EAAgB7vB,MAIjCooB,EAAMpjB,EAAIW,GACZqqB,EAAYruB,KAAKyb,IAAI4S,EAAW5H,EAAMpjB,GACtC8qB,EAAS7vB,KAAK4vB,EAAgB7vB,MAE9BiwB,EAAatuB,KAAKub,IAAI+S,EAAY7H,EAAMpjB,GACxC+qB,EAAU9vB,KAAK4vB,EAAgB7vB,MAInCouB,GAAiB2B,EAAWpqB,EAAIC,EAAIC,EAAG,EAAGwoB,EAAWC,EAAYC,EAAUC,EAASyB,GACpF7B,GAAiB0B,EAAUnqB,EAAIC,EAAIC,GAAI,EAAGwoB,EAAWC,EAAYC,EAAUC,EAASwB,GAEpF,IAAShwB,EAAI,EAAGA,EAAI6vB,EAAgBvwB,OAAQU,IAAK,CAC/C,IAAI8gB,EAAS+O,EAAgB7vB,GACzBooB,EAAQtH,EAAOsH,MAEnB,IAAI8H,GAAiBpP,GAArB,CAIA,IAAI+N,EAAa/N,EAAO+N,WAExB,GAAIA,EAAY,CACd,IAAIsB,EAAwC,SAAxBrP,EAAO6N,aACvByB,EAAgBtP,EAAO9Z,KAAKuC,MAC5B8mB,OAAkB,EAIlBA,EAFAF,EACE/H,EAAMpjB,EAAIW,EACMkpB,EAAW,GAAG,GAAK/N,EAAOwP,cAAgB/B,EAAWzN,EAAOyP,aAE5DhC,EAAWF,EAAYvN,EAAOyP,aAAe1B,EAAW,GAAG,GAAK/N,EAAOwP,cAGvFlI,EAAMpjB,EAAIW,EACMyiB,EAAMpjB,EAAIupB,EAAWzN,EAAO0P,YAE5BjC,EAAWF,EAAYjG,EAAMpjB,EAAI8b,EAAO0P,YAI1DH,EAAkBvP,EAAO9Z,KAAKuC,QAGhCuX,EAAOsH,MAAM1pB,MAAM6K,MAAQ8mB,EAEC,SAAxBvP,EAAO6N,eACTyB,EAAgBC,IAIpB,IAAII,EAAO5B,EAAW,GAAG,GAAKA,EAAW,GAAG,GAExCsB,EACE/H,EAAMpjB,EAAIW,EACZkpB,EAAW,GAAG,GAAKN,EAAWzN,EAAOyP,aAAeH,EAAgBtP,EAAOwP,cAE3EzB,EAAW,GAAG,GAAKN,EAAWF,EAAYvN,EAAOyP,aAAeH,EAAgBtP,EAAOwP,eAGrFlI,EAAMpjB,EAAIW,EACZkpB,EAAW,GAAG,GAAKzG,EAAMpjB,EAAI8b,EAAOwP,cAEpCzB,EAAW,GAAG,GAAKzG,EAAMpjB,EAAI8b,EAAOwP,cAGtCzB,EAAW,GAAG,GAAKA,EAAW,GAAG,GAAK4B,GAGxC5B,EAAW,GAAG,GAAKA,EAAW,GAAG,GAAKzG,EAAMnjB,KAKlD,SAASirB,GAAiBvJ,GAExB,MAAgC,WAAzBA,EAAY+H,SAGN,SAASgC,GAAe3S,GACrC,IAEIpY,EACAC,EAHA0U,EAAOyD,EAAYxD,UACnBsV,EAAkB,GAGlBc,GAAiB,EACjBC,GAAsB7S,EAAYnO,IAAI,sBAAwB,GAAK,GACnE8c,EAAWpS,EAAKE,UAAU,YAC1B3U,EAAIyU,EAAKE,UAAU,KACnB6T,EAAY3B,EAASnjB,MACrBglB,EAAW7B,EAAS1nB,EACpBwpB,EAAU9B,EAASznB,EACnBqpB,EAAa5B,EAASjjB,OAE1B,SAASonB,EAAW5tB,GAClBA,EAAGqe,QAAS,EAGd,SAASwP,EAAa1I,GACpB,IAAKA,EAAM9G,OACT,OAAO,EAGT,IAAK,IAAIpe,KAAOklB,EAAMI,OACpB,IAAiC,IAA7BJ,EAAMI,OAAOtlB,GAAKoe,OACpB,OAAO,EAIX,OAAO,EAGThH,EAAKuI,MAAK,SAAUR,GAClB,IAAIqE,EAASpM,EAAKoH,iBAAiBW,GAC/BsE,EAAcD,EAAOre,MACrB+f,EAAQ1B,EAAO2B,iBACf0I,EAAYrK,EAAOsK,mBACnBpQ,EAAYtG,EAAKuG,aAAawB,GAC9B4O,EAAarQ,EAAUd,SAAS,SAEhCoR,EAAgBD,EAAWrhB,IAAI,aAAegR,EAAUhR,IAAI,CAAC,WAAY,QAAS,aAClF0gB,EAAgBW,EAAWrhB,IAAI,uBAC/B+e,EAAesC,EAAWrhB,IAAI,WAC9B2gB,EAAe,gBAAaU,EAAWrhB,IAAI,gBAAiBye,GAC5DmC,EAAcS,EAAWrhB,IAAI,eAC7BuhB,EAAiBvQ,EAAUd,SAAS,aACpCsR,EAAeD,EAAevhB,IAAI,UACtCwhB,EAAe,gBAAaA,EAAc/C,GAC1C,IAAIgD,EAAgBF,EAAevhB,IAAI,WAGvC,GAFAyhB,EAAgB,gBAAaA,EAAehD,GAExC1sB,KAAK8E,IAAIkgB,EAAY5gB,SAAW4gB,EAAY7gB,YAAc8qB,EAG5D,OAFA,kBAAKxI,EAAMI,OAAQqI,QACnBzI,EAAM9G,QAAS,GAIjB,GAAKwP,EAAa1I,GAAlB,CAIA,IAGIkJ,EACAC,EACA1C,EACApkB,EANA+mB,GAAY7K,EAAY7gB,WAAa6gB,EAAY5gB,UAAY,EAC7D0rB,EAAK9vB,KAAKK,IAAIwvB,GACdE,EAAK/vB,KAAKG,IAAI0vB,GAKlB7rB,EAAKghB,EAAYhhB,GACjBC,EAAK+gB,EAAY/gB,GACjB,IAiCI+rB,EAjCAC,EAAkC,WAAlBV,GAAgD,UAAlBA,EAElD,GAAsB,WAAlBA,EACFI,EAAQ3K,EAAYhhB,GACpB4rB,EAAQ5K,EAAY/gB,GACpB6E,EAAY,aACP,CACL,IAAIonB,GAAMD,GAAiBjL,EAAY9gB,EAAI8gB,EAAYd,IAAM,EAAI4L,EAAK9K,EAAY9gB,EAAI4rB,GAAM9rB,EACxFmsB,GAAMF,GAAiBjL,EAAY9gB,EAAI8gB,EAAYd,IAAM,EAAI6L,EAAK/K,EAAY9gB,EAAI6rB,GAAM9rB,EAI5F,GAHA0rB,EAAQO,EAAU,EAALJ,EACbF,EAAQO,EAAU,EAALJ,GAERE,EAAe,CAElB,IAAIvsB,EAAKwsB,EAAKJ,GAAML,EAAevrB,EAAI8gB,EAAY9gB,GAC/CP,EAAKwsB,EAAKJ,GAAMN,EAAevrB,EAAI8gB,EAAY9gB,GAC/CN,EAAKF,GAAMosB,EAAK,GAAK,EAAI,GAAKJ,EAC9B7rB,EAAKF,EAIPgsB,EAFmB,SAAjB3C,EAEM8C,EAAK,EAAIlD,EAAWgC,EAAehC,EAAWF,EAAYkC,EAE1DhrB,GAAMksB,EAAK,GAAKnB,EAAgBA,GAG1CiB,EAAQ/rB,EACRqpB,EAAa,CAAC,CAACgD,EAAIC,GAAK,CAACzsB,EAAIC,GAAK,CAACC,EAAIC,IAGzCiF,EAAYmnB,EAAgB,SAA4B,SAAjBjD,EAA0B8C,EAAK,EAAI,QAAU,OAASA,EAAK,EAAI,OAAS,QAIjH,IAAIM,EAASd,EAAWrhB,IAAI,UAgB5B,GAbE+hB,EADoB,kBAAXI,EACKA,GAAUpwB,KAAKM,GAAK,KAEpB8vB,EAASN,EAAK,GAAKD,EAAW7vB,KAAKM,IAAMuvB,EAAW,EAGpEb,IAAmBgB,EACnBvJ,EAAMpjB,EAAIssB,EACVlJ,EAAMnjB,EAAIssB,EACVnJ,EAAM7X,SAAWohB,EACjBvJ,EAAM4J,SAAS,CACbC,cAAe,WAGZL,EAwBE,CACLxJ,EAAM4J,SAAS,CACbE,MAAOznB,IAET,IAAI0nB,EAAc/J,EAAMI,OAAO5L,OAE3BuV,IACFA,EAAYntB,GAAKojB,EAAMpjB,EACvBmtB,EAAYltB,GAAKmjB,EAAMnjB,OAhCP,CAClB,IAAImtB,EAAWhK,EAAMiK,kBAAkBC,QACvCF,EAASG,eAAenK,EAAMoK,wBAE9B,IAAIC,GAAUrK,EAAM1pB,MAAM+zB,QAAU,GAAK,IACzCL,EAASntB,GAAKwtB,EAAS,EACvBL,EAAS3oB,QAAUgpB,EACnB5C,EAAgB5vB,KAAK,CACnBmoB,MAAOA,EACP2I,UAAWA,EACXrC,SAAUwC,EACVjiB,IAAKmiB,EACL7B,KAAM8B,EACNqB,aAAcvB,EAAevhB,IAAI,gBACjC+iB,gBAAiBxB,EAAevhB,IAAI,mBACpCgjB,cAAe,IAAIC,GAAA,KAAMpB,EAAIC,GAC7B7C,WAAYA,EACZpkB,UAAWA,EACX6lB,cAAeA,EACf3B,aAAcA,EACd4B,aAAcA,EACdC,YAAaA,EACbxpB,KAAMorB,IAcV1L,EAAOoM,cAAc,CACnBC,OAAQnB,SAIPjB,GAAkB5S,EAAYnO,IAAI,sBACrCggB,GAAaC,EAAiBlqB,EAAIC,EAAIC,EAAGwoB,EAAWC,EAAYC,EAAUC,GAG5E,IAAK,IAAIxuB,EAAI,EAAGA,EAAI6vB,EAAgBvwB,OAAQU,IAAK,CAC/C,IAAI8gB,EAAS+O,EAAgB7vB,GACzBooB,EAAQtH,EAAOsH,MACf2I,EAAYjQ,EAAOiQ,UACnBiC,EAAejsB,MAAMqhB,EAAMpjB,IAAM+B,MAAMqhB,EAAMnjB,GAEjD,GAAImjB,EAAO,CACTA,EAAM4J,SAAS,CACbE,MAAOpR,EAAOrW,YAGZuoB,IACF,kBAAK5K,EAAMI,OAAQqI,GACnBzI,EAAM9G,QAAS,GAGjB,IAAI6Q,EAAc/J,EAAMI,OAAO5L,OAE3BuV,IACFA,EAAYntB,GAAKojB,EAAMpjB,EACvBmtB,EAAYltB,GAAKmjB,EAAMnjB,GAI3B,GAAI8rB,EAAW,CACb,IAAIlC,EAAa/N,EAAO+N,WAEpBmE,IAAiBnE,GACnB,kBAAKkC,EAAUvI,OAAQqI,GACvBE,EAAUzP,QAAS,IAEnB,gBAAeuN,EAAY/N,EAAO4R,cAClC,gBAAkB7D,EAAY/N,EAAO8R,cAAe9R,EAAO6R,iBAC3D5B,EAAUpQ,SAAS,CACjBoI,OAAQ8F,IAGVzG,EAAM6K,aAAaC,oBAAsB,CACvCC,OAAQ,IAAIN,GAAA,KAAMhE,EAAW,GAAG,GAAIA,EAAW,GAAG,QCzXrD,SAASuE,GAAsBlS,EAAO7Y,GAC3C,IAAIgrB,EAAenS,EAAMtR,IAAI,gBAE7B,OAAoB,MAAhByjB,EACK,MAGJ,qBAAQA,KACXA,EAAe,CAACA,EAAcA,IAGzB,CACLC,kBAAmB,eAAaD,EAAa,GAAIhrB,EAAMwd,IACvDwN,aAAc,eAAaA,EAAa,GAAIhrB,EAAMxC,KCFtD,IAAI,GAEJ,SAAUkI,GAGR,SAASwlB,EAASjZ,EAAM+H,EAAKvc,GAC3B,IAAIuH,EAAQU,EAAOE,KAAKrJ,OAASA,KAEjCyI,EAAM8Y,GAAK,EACX,IAAI/b,EAAO,IAAI,QAMf,OAJAiD,EAAMmmB,eAAeppB,GAErBiD,EAAMomB,WAAWnZ,EAAM+H,EAAKvc,GAAY,GAEjCuH,EA2IT,OAvJA,gBAAUkmB,EAAUxlB,GAepBwlB,EAAS7uB,UAAU+uB,WAAa,SAAUnZ,EAAM+H,EAAKvc,EAAY4tB,GAC/D,IAAIhN,EAAS9hB,KACTmZ,EAAczD,EAAKqZ,UACnB/S,EAAYtG,EAAKuG,aAAawB,GAC9BkG,EAAgB3H,EAAUd,SAAS,YACnCgB,EAASxG,EAAK4B,cAAcmG,GAC5BsE,EAAc,oBAAOyM,GAAsBxS,EAAUd,SAAS,aAAcgB,IAAW,GAAIA,GAE/F,GAAI/Z,MAAM4f,EAAY7gB,YAEpB4gB,EAAO/F,SAASgG,OAFlB,CAMA,GAAI+M,EAAa,CACfhN,EAAO/F,SAASgG,GAChB,IAAIiN,EAAgB7V,EAAY4J,WAAW,iBAErB,UAAlBiM,GACFlN,EAAOre,MAAMxC,EAAIib,EAAO+E,GACxBgO,GAAA,aAAkBnN,EAAQ,CACxBre,MAAO,CACLxC,EAAGib,EAAOjb,IAEXkY,EAAasE,IAGI,MAAdvc,GACF4gB,EAAO/F,SAAS,CACd7a,WAAYA,EACZC,SAAUD,IAEZ+tB,GAAA,aAAkBnN,EAAQ,CACxBre,MAAO,CACLvC,WAAYgb,EAAOhb,WACnBC,SAAU+a,EAAO/a,WAElBgY,EAAasE,KAEhBqE,EAAOre,MAAMtC,SAAW+a,EAAOhb,WAC/B+tB,GAAA,eAAoBnN,EAAQ,CAC1Bre,MAAO,CACLtC,SAAU+a,EAAO/a,WAElBgY,EAAasE,SAKtBwR,GAAA,eAAoBnN,EAAQ,CAC1Bre,MAAOse,GACN5I,EAAasE,GAGlBqE,EAAOjG,SAASnG,EAAKmN,cAAcpF,EAAK,UACxC,gBAAyBqE,EAAQ9F,GACjC,IAAI4Q,GAAY1Q,EAAOhb,WAAagb,EAAO/a,UAAY,EACnDoJ,EAAS4O,EAAYnO,IAAI,kBACzBgf,EAAKjtB,KAAKK,IAAIwvB,GAAYriB,EAC1BggB,EAAKxtB,KAAKG,IAAI0vB,GAAYriB,EAC1BuY,EAAc9G,EAAU+G,WAAW,UACvCD,GAAehB,EAAO1jB,KAAK,SAAU0kB,GAErC9iB,KAAKkvB,aAAa/V,EAAazD,EAAM+H,GAErCqE,EAAOqN,YAAY,YAAY1rB,MAAQ,gBAAS,CAC9CxC,EAAGib,EAAOjb,GAAK0iB,EAAc3Y,IAAI,UAAW2Y,EAAc3Y,IAAI,cAAoB,IACjFwjB,GAAsB7K,EAAczI,SAAS,aAAcgB,IAC9D,oBAAO4F,EAAOqN,YAAY,UAAW,CACnC/uB,EAAG4pB,EACH3pB,EAAGkqB,EACH9mB,MAAO+qB,GAAsBxS,EAAUd,SAAS,CAAC,SAAU,cAAegB,KAE5E,oBAAO4F,EAAOqN,YAAY,QAAS,CACjC1rB,MAAO+qB,GAAsBxS,EAAUd,SAAS,CAAC,OAAQ,cAAegB,KAE1E,IAAIiQ,EAAYrK,EAAOsK,mBACnBgD,EAAYtN,EAAO2B,iBACvB0I,GAAa,oBAAOA,EAAUgD,YAAY,UAAW,CACnD/uB,EAAG4pB,EACH3pB,EAAGkqB,IAGL,oBAAO6E,EAAUD,YAAY,UAAW,CACtC/uB,EAAG4pB,EACH3pB,EAAGkqB,IAEL,gBAAoBvqB,KAAM2jB,EAAc3Y,IAAI,SAAU2Y,EAAc3Y,IAAI,gBAG1E2jB,EAAS7uB,UAAUovB,aAAe,SAAU/V,EAAazD,EAAM+H,GAC7D,IAAIqE,EAAS9hB,KACTgc,EAAYtG,EAAKuG,aAAawB,GAC9B8O,EAAiBvQ,EAAUd,SAAS,aACpCphB,EAAQ4b,EAAKmN,cAAcpF,EAAK,SAChC4R,EAAcv1B,GAASA,EAAMgE,KAC7BwxB,EAAgBx1B,GAASA,EAAM+E,QACnC,gBAAcijB,EAAQ,gBAAqB9F,GAAY,CACrDkH,aAAcxN,EAAKqZ,UACnB5L,eAAgB1F,EAChB4F,aAAcgM,EACd/L,eAAgBgM,EAChBlM,YAAajK,EAAYoW,kBAAkB9R,EAAK,WAAa/H,EAAK4T,QAAQ7L,KAE5E,IAAI2R,EAAYtN,EAAO2B,iBAEvB3B,EAAOoM,cAAc,CAEnBpE,SAAU,KACVne,SAAU,OAIZyjB,EAAUhxB,KAAK,CACbmjB,GAAI,KAEN,IAAI+K,EAAgBnT,EAAYnO,IAAI,CAAC,QAAS,aAE9C,GAAsB,YAAlBshB,GAAiD,UAAlBA,EACjCxK,EAAO0N,0BACF,CACL,IAAIC,EAAWzvB,KAAKosB,mBAEfqD,IACHA,EAAW,IAAI,QACfzvB,KAAK0vB,iBAAiBD,IAIxB,gBAAkBzvB,KAAM,gBAAyBgc,GAAY,CAC3Dhe,OAAQqxB,EACRxwB,QAAS,uBAAU0tB,EAAevhB,IAAI,CAAC,YAAa,YAAaskB,EAAe,OAK/EX,EAxJT,CAyJE,SAGE,GAEJ,SAAUxlB,GAGR,SAASwmB,IACP,IAAIlnB,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMmnB,uBAAwB,EACvBnnB,EA8DT,OApEA,gBAAUknB,EAASxmB,GASnBwmB,EAAQ7vB,UAAU+vB,KAAO,WACvB,IAAIC,EAAc,IAAI,QACtB9vB,KAAK+vB,aAAeD,GAGtBH,EAAQ7vB,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,EAAKC,GAC9D,IAGInY,EAHAwU,EAAOyD,EAAYxD,UACnB2E,EAAUta,KAAKua,MACfrN,EAAQlN,KAAKkN,MAGjB,IAAKoN,GAAW5E,EAAKpa,QAAU,EAAG,CAGhC,IAFA,IAAImI,EAAQiS,EAAK4B,cAAc,GAEtB0Y,EAAI,EAAG7tB,MAAMsB,GAASA,EAAMvC,aAAe8uB,EAAIta,EAAKpa,UAAW00B,EACtEvsB,EAAQiS,EAAK4B,cAAc0Y,GAGzBvsB,IACFvC,EAAauC,EAAMvC,YAIvBwU,EAAK1C,KAAKsH,GAAS7S,KAAI,SAAUgW,GAC/B,IAAIwS,EAAW,IAAI,GAASva,EAAM+H,EAAKvc,GACvCwU,EAAK+G,iBAAiBgB,EAAKwS,GAC3B/iB,EAAMzF,IAAIwoB,MACTjmB,QAAO,SAAUkmB,EAAQC,GAC1B,IAAIF,EAAW3V,EAAQwC,iBAAiBqT,GACxCF,EAASpB,WAAWnZ,EAAMwa,EAAQhvB,GAClC+uB,EAAS7P,IAAI,SACblT,EAAMzF,IAAIwoB,GACVva,EAAK+G,iBAAiByT,EAAQD,MAC7BniB,QAAO,SAAU2P,GAClB,IAAIwS,EAAW3V,EAAQwC,iBAAiBW,GACxCwR,GAAA,4BAAiCgB,EAAU9W,EAAasE,MACvDV,UACH,GAAY5D,GAEmC,cAA3CA,EAAYnO,IAAI,yBAClBhL,KAAKua,MAAQ7E,IAIjBia,EAAQ7vB,UAAUmU,QAAU,aAE5B0b,EAAQ7vB,UAAUswB,aAAe,SAAUC,EAAOlX,GAChD,IAAIzD,EAAOyD,EAAYxD,UACnB2a,EAAa5a,EAAK4B,cAAc,GAEpC,GAAIgZ,EAAY,CACd,IAAItG,EAAKqG,EAAM,GAAKC,EAAWvvB,GAC3BwpB,EAAK8F,EAAM,GAAKC,EAAWtvB,GAC3B+mB,EAAShrB,KAAK2tB,KAAKV,EAAKA,EAAKO,EAAKA,GACtC,OAAOxC,GAAUuI,EAAWrvB,GAAK8mB,GAAUuI,EAAWrP,KAI1D0O,EAAQpxB,KAAO,MACRoxB,EArET,CAsEErP,GAAA,MAEa,M,oDC5OX,GAEJ,SAAUnX,GAGR,SAASonB,IACP,IAAI9nB,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAM+nB,uBAAwB,EACvB/nB,EA4JT,OAlKA,gBAAU8nB,EAAgBpnB,GAa1BonB,EAAezwB,UAAU+vB,KAAO,SAAU9a,GACxC5L,EAAOrJ,UAAU+vB,KAAKhb,MAAM7U,KAAM8C,WAIlC9C,KAAKywB,qBAAuB,IAAIC,GAAA,KAAqB,UAAY1wB,KAAK2V,QAAS3V,MAAO,UAAYA,KAAK2wB,WAAY3wB,OAEnHA,KAAK4wB,kBAAkB7b,IAOzBwb,EAAezwB,UAAU+wB,YAAc,WACrC1nB,EAAOrJ,UAAU+wB,YAAYhc,MAAM7U,KAAM8C,YAO3CytB,EAAezwB,UAAUgV,eAAiB,WACxC,OAAO,OAAAgc,GAAA,MAAiB9wB,KAAM,CAC5B+wB,gBAAiB,CAAC,SAClBC,gBAAiB,WAAa,QAA8BhxB,SAQhEuwB,EAAezwB,UAAUmxB,cAAgB,SAAU7Z,GACjD,IAAI1B,EAAO1V,KAAK2V,UAEZsE,EAAS9Q,EAAOrJ,UAAUmxB,cAAc5nB,KAAKrJ,KAAMoX,GAGnD8Z,EAAY,GAMhB,OALAxb,EAAKuI,KAAKvI,EAAKwI,aAAa,UAAU,SAAUlV,GAC9CkoB,EAAU71B,KAAK2N,MAEjBiR,EAAOkX,QAAU,gBAAwBD,EAAW9Z,EAAW1B,EAAKqZ,UAAU/jB,IAAI,qBAClFiP,EAAOmX,MAAM/1B,KAAK,WACX4e,GAGTsW,EAAezwB,UAAU8wB,kBAAoB,SAAU7b,GAErD,QAA0BA,EAAQ,YAAa,CAAC,SAChD,IAAIsc,EAAqBtc,EAAOoX,UAC5BmF,EAAuBvc,EAAOwc,SAASpF,UAE3CkF,EAAmBG,KAAOH,EAAmBG,MAAQzc,EAAOyO,MAAMgO,KAClEF,EAAqBE,KAAOF,EAAqBE,MAAQzc,EAAOwc,SAAS/N,MAAMgO,MAGjFjB,EAAehyB,KAAO,aACtBgyB,EAAera,cAAgB,CAC7BC,OAAQ,EACRC,EAAG,EACHC,iBAAiB,EAEjBnR,OAAQ,CAAC,MAAO,OAChB6iB,OAAQ,CAAC,EAAG,OAEZpmB,WAAW,EACXT,WAAY,GAEZ8mB,SAAU,EAGVyJ,kBAAmB,EAEnBC,eAAgB,GAKhBC,iBAAkB,EAElBrJ,kBAAkB,EAElBtjB,KAAM,EACN4sB,IAAK,EACL3sB,MAAO,EACP4sB,OAAQ,EACRltB,MAAO,KACPE,OAAQ,KACR2e,MAAO,CAGL2J,OAAQ,EACRqE,MAAM,EACNM,SAAU,WAEVhI,SAAU,QAEViI,QAAS,OAGTpG,aAAc,MAEdC,YAAa,GAEboG,oBAAqB,GAMvB7F,UAAW,CACTqF,MAAM,EAEN92B,OAAQ,GAERu3B,QAAS,GACTC,QAAQ,EACRpE,aAAc,GACdC,gBAAiB,GACjBoE,UAAW,CAETxtB,MAAO,EACPpG,KAAM,UAGV0Z,UAAW,CACTJ,YAAa,GAEfua,YAAa,CAEXC,aAAa,GAEfd,SAAU,CACR9S,OAAO,EACP6T,UAAW,GAGbC,mBAAmB,EAEnBvD,cAAe,YACfwD,kBAAmB,IAEnBC,oBAAqB,aACrBC,sBAAuB,aACvBC,wBAAyB,IACzBC,gBAAiB,cAEZrC,EAnKT,CAoKE5Z,GAAA,MAEakc,GAAA,GC3KR,SAAS,GAAQne,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoBuM,IAC9B,gBAA6B,MAAOne,EAAUsS,gBAC9CtS,EAAU6R,eAAe,mBAAMmB,GAAW,QAC1ChT,EAAUkS,kBAAkBsC,GAAW,Q,iBCV1B,SAAS4J,GAAY9d,GAClCA,EAAQ4S,iBAAiB,SAAS,SAAUzO,GAC1C,IAAIzD,EAAOyD,EAAYxD,UACnBwO,EAAS,GACT9O,EAAW8D,EAAY7D,iBAE3B,GAAKD,EAAL,CAIA,IAAI0d,EAAO1d,EAAS2d,mBACpB,UAAYD,GAAM,SAAU1L,EAAM4L,GAChCvd,EAAKuI,KAAKvI,EAAKwI,aAAa6U,EAAKE,GAAWzY,MAAM,SAAU9c,EAAK0Z,GAC/D+M,EAAO/M,GAAa+M,EAAO/M,IAAc,GACzC,IAAIiZ,EAAQhb,EAASG,YAAY9X,EAAKu1B,GACtC9O,EAAO/M,GAAW6b,GAAaC,GAAa7C,GAASA,EAAQ8C,GAAqB9d,SAItFK,EAAKuI,MAAK,SAAUR,GAIlB,IAAI2V,EAAa,UAAYjP,EAAO1G,IAAM,SAAU4S,GAClD,OAAO6C,GAAa7C,OAChB8C,GAAqB9d,GAE3B8O,EAAO1G,GAAKpiB,KAAK+3B,EAAW54B,SAC5Bkb,EAAKoT,cAAcrL,EAAK0G,EAAO1G,WAKrC,SAASyV,GAAa7C,GACpB,OAAQluB,MAAMkuB,EAAM,MAAQluB,MAAMkuB,EAAM,IAG1C,SAAS8C,GAAqB9d,GAG5B,MAAO,CAACA,EAAStU,GAAIsU,EAASrU,ICtCjB,SAASqyB,GAAoBte,GAC1C,IAAIue,EAAcve,EAAOgM,MAEzB,GAAIuS,EAAa,CACV,aAAeA,KAClBA,EAAc,CAACA,IAGjB,IAAIC,EAAkB,GACtB,UAAYD,GAAa,SAAUE,EAAU/V,GACvC+V,EAASC,WACPD,EAASj1B,OAASi1B,EAAS/vB,QAC7B+vB,EAAS/vB,MAAQ+vB,EAASj1B,MAG5BwW,EAAO2e,MAAQ3e,EAAO2e,OAAS,GAE1B,aAAe3e,EAAO2e,SACzB3e,EAAO2e,MAAQ,CAAC3e,EAAO2e,QAGzB3e,EAAO2e,MAAMr4B,KAAKm4B,IAElBD,EAAgBl4B,KAAKm4B,MAGzBze,EAAOgM,MAAQwS,EAGjB,UAAYxe,EAAO4e,QAAQ,SAAUC,GAC/BA,GAAgC,UAAnBA,EAAUr1B,MAAoBq1B,EAAUC,aACvDD,EAAUE,WAAaF,EAAUC,e,8BCzBvC,SAASE,GAAoBC,GAK3B,OAJK,aAAeA,KAClBA,EAAa,EAAEA,GAAaA,IAGvBA,EAGT,IAAI,GAEJ,SAAU7qB,GAGR,SAAS8qB,IACP,IAAIxrB,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO01B,EAAU11B,KAChBkK,EAoLT,OA1LA,gBAAUwrB,EAAW9qB,GASrB8qB,EAAUn0B,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAC3D,IAAI2H,EAAQ5H,EAAY7D,iBACpBpI,EAAQlN,KAAKkN,MACbwI,EAAOyD,EAAYxD,UACnB2E,EAAUta,KAAKua,MAEnB,SAAS2Z,EAAaxe,EAAM+H,GAC1B,IAAI0W,EAAaze,EAAKmN,cAAcpF,EAAK,WAAa,SAEtD,GAAmB,SAAf0W,EAAJ,CAIA,IAAIH,EAAaD,GAAoBre,EAAKmN,cAAcpF,EAAK,eACzD2W,EAAa,QAAwBD,GAAa,GAAI,EAAG,EAAG,GAC5DE,EAAe3e,EAAKmN,cAAcpF,EAAK,iBAAmB,EAU9D,OATA2W,EAAWh2B,KAAK,CACdtE,MAAO,CACLoF,eAAe,GAEjBqiB,GAAI,IACJ3V,OAAQooB,EAAW,GAAK,EACxBnoB,OAAQmoB,EAAW,GAAK,EACxBroB,SAAU0oB,EAAet3B,KAAKM,GAAK,KAAO,IAErC+2B,GAGT,SAASE,EAAcC,EAAWC,EAAWC,EAAa/e,EAAM+H,EAAKiX,GAEnED,EAAYtX,YAEZ,IAAK,IAAI/hB,EAAI,EAAGA,EAAIo5B,EAAU95B,OAAS,EAAGU,IAAK,CAC7C,IAAIg5B,EAAaF,EAAaxe,EAAM+H,GAEhC2W,IACFA,EAAWO,SAAWv5B,EAElBm5B,EAAUn5B,IACZg5B,EAAWQ,YAAYL,EAAUn5B,IACjC6zB,GAAQyF,EAAS,YAAc,eAAeN,EAAY,CACxDh0B,EAAGo0B,EAAUp5B,GAAG,GAChBiF,EAAGm0B,EAAUp5B,GAAG,IACf+d,EAAasE,IAEhB2W,EAAWQ,YAAYJ,EAAUp5B,IAGnCq5B,EAAYhtB,IAAI2sB,KAKtB,SAASS,EAAiB1Q,GACxB,OAAO,SAAWA,GAAQ,SAAU5O,GAClC,MAAO,CAACwL,EAAMhgB,GAAIggB,EAAM/f,OAI5B0U,EAAK1C,KAAKsH,GAAS7S,KAAI,SAAUgW,GAC/B,IAAI0G,EAASzO,EAAK4B,cAAcmG,GAEhC,GAAK0G,EAAL,CAIA,IAAI2Q,EAAU,IAAI,QACdrF,EAAW,IAAI,QACfnoB,EAAS,CACX7D,MAAO,CACL0gB,OAAQA,IAGZ2Q,EAAQrxB,MAAM0gB,OAAS0Q,EAAiB1Q,GACxCsL,EAAShsB,MAAM0gB,OAAS0Q,EAAiB1Q,GACzC8K,GAAA,aAAkB6F,EAASxtB,EAAQ6R,EAAasE,GAChDwR,GAAA,aAAkBQ,EAAUnoB,EAAQ6R,EAAasE,GACjD,IAAIsX,EAAY,IAAI,QAChBN,EAAc,IAAI,QACtBM,EAAUttB,IAAIgoB,GACdsF,EAAUttB,IAAIqtB,GACdC,EAAUttB,IAAIgtB,GACdH,EAAc7E,EAAShsB,MAAM0gB,OAAQA,EAAQsQ,EAAa/e,EAAM+H,GAAK,GACrE/H,EAAK+G,iBAAiBgB,EAAKsX,OAC1B/qB,QAAO,SAAUkmB,EAAQC,GAC1B,IAAI4E,EAAYza,EAAQwC,iBAAiBqT,GACrCV,EAAWsF,EAAUC,QAAQ,GAC7BF,EAAUC,EAAUC,QAAQ,GAC5BP,EAAcM,EAAUC,QAAQ,GAChC1tB,EAAS,CACX7D,MAAO,CACL0gB,OAAQzO,EAAK4B,cAAc4Y,KAI1B5oB,EAAO7D,MAAM0gB,SAIlBmQ,EAAc7E,EAAShsB,MAAM0gB,OAAQ7c,EAAO7D,MAAM0gB,OAAQsQ,EAAa/e,EAAMwa,GAAQ,GACrFjB,GAAA,eAAoBQ,EAAUnoB,EAAQ6R,GACtC8V,GAAA,eAAoB6F,EAASxtB,EAAQ6R,GACrCzD,EAAK+G,iBAAiByT,EAAQ6E,OAC7BjnB,QAAO,SAAU2P,GAClBvQ,EAAMY,OAAOwM,EAAQwC,iBAAiBW,OACrCV,UACHrH,EAAK2K,mBAAkB,SAAU0U,EAAWtX,GAC1C,IAAIzB,EAAYtG,EAAKuG,aAAawB,GAC9BgS,EAAWsF,EAAUC,QAAQ,GAC7BF,EAAUC,EAAUC,QAAQ,GAC5BP,EAAcM,EAAUC,QAAQ,GAEhC/c,EAAYvC,EAAKmN,cAAcpF,EAAK,SACpCjT,EAAQyN,EAAUna,KACtBoP,EAAMzF,IAAIstB,GACVtF,EAAS5T,SAAS,cAAgBG,EAAUd,SAAS,aAAa+Z,eAAgB,CAChFn3B,KAAM,OACNE,OAAQwM,KAEV,gBAAyBilB,EAAUzT,EAAW,aAC9C,gBAAyB8Y,EAAS9Y,EAAW,aAC7C,IAAIkZ,EAAiBlZ,EAAUd,SAAS,aACpCia,EAAgBD,EAAeE,WAAaF,EAAeG,YAAYD,UAC3EN,EAAQpY,OAASyY,EACjB,UAAY,CAAC,WAAY,SAAU,SAAS,SAAUG,GACpD,IAAIC,EAAavZ,EAAUd,SAAS,CAACoa,EAAW,cAC5CE,EAAcD,EAAWH,WAAaG,EAAWF,YAAYD,UAEjEN,EAAQ3F,YAAYmG,GAAW5Y,OAAS8Y,GAAeL,KAEzDL,EAAQjZ,SAAS,cAAgBqZ,EAAeO,eAAgB,CAC9D33B,KAAM0M,EACN3L,QAAS,GACT62B,MAAOzd,EAAUyd,SAEnB,IAAI/R,EAAgB3H,EAAUd,SAAS,YACnCya,EAAiBhS,EAAczI,SAAS,aAAaY,eACzD2Y,EAAYmB,WAAU,SAAUxB,GAC9B,GAAIA,aAAsB,OAAS,CACjC,IAAIyB,EAAYzB,EAAWt6B,MAC3Bs6B,EAAWvY,SAAS,YAAc,CAEhCxX,MAAOwxB,EAAUxxB,MACjBjE,EAAGy1B,EAAUz1B,EACbC,EAAGw1B,EAAUx1B,EACbsE,MAAOkxB,EAAUlxB,MACjBE,OAAQgxB,EAAUhxB,QACjBoT,SAEHmc,EAAWvY,SAAS5D,GACpBmc,EAAW0B,SAAStrB,GAGtB,IAAIurB,EAAoB3B,EAAWjF,YAAY,YAC/C4G,EAAkBj8B,MAAQ,WAAa67B,GACvC,IAAIvS,EAAc1N,EAAK1K,IAAI0K,EAAKsgB,WAAW5B,EAAWO,UAAWlX,IACjD,MAAf2F,GAAuBjhB,MAAMihB,MAAkBA,EAAc,IAC9D,gBAAcgR,EAAY,gBAAqBpY,GAAY,CACzDkH,aAAcxN,EAAKqZ,UACnB5L,eAAgB1F,EAChBwY,cAAe7B,EAAWO,SAC1BvR,YAAaA,EACbC,aAAc7Y,EACd8Y,eAAgBrL,EAAUpZ,aAG9B,gBAAoBk2B,EAAWpR,EAAc3Y,IAAI,SAAU2Y,EAAc3Y,IAAI,iBAE/EhL,KAAKua,MAAQ7E,GAGfue,EAAUn0B,UAAUgO,OAAS,WAC3B9N,KAAKkN,MAAMiQ,YACXnd,KAAKua,MAAQ,MAGf0Z,EAAU11B,KAAO,QACV01B,EA3LT,CA4LE3T,GAAA,MAEa,M,aC1MX,GAEJ,SAAUnX,GAGR,SAAS+sB,IACP,IAAIztB,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAKhE,OAHAyI,EAAMlK,KAAO23B,EAAiB33B,KAC9BkK,EAAM+nB,uBAAwB,EAC9B/nB,EAAM0tB,iBAAkB,EACjB1tB,EAgFT,OAxFA,gBAAUytB,EAAkB/sB,GAY5B+sB,EAAiBp2B,UAAU+vB,KAAO,SAAU9a,GAC1C5L,EAAOrJ,UAAU+vB,KAAKhb,MAAM7U,KAAM8C,WAIlC9C,KAAKywB,qBAAuB,IAAIC,GAAA,KAAqB,UAAY1wB,KAAK2V,QAAS3V,MAAO,UAAYA,KAAK2wB,WAAY3wB,QAGrHk2B,EAAiBp2B,UAAUgV,eAAiB,SAAUC,EAAQC,GAC5D,OAAO,OAAA8b,GAAA,MAAiB9wB,KAAM,CAC5Bo2B,cAAe,aACfC,mBAAoBC,OAIxBJ,EAAiBp2B,UAAUy2B,cAAgB,SAAUnf,EAAWof,EAAgBC,GAC9E,IAAI/gB,EAAO1V,KAAK2V,UACZN,EAAWrV,KAAKsV,iBAChBohB,EAAgBrhB,EAAS2d,mBACzBh5B,EAAOgG,KAAK2V,UAAU2T,QAAQlS,GAC9Buf,EAAyB,KAAT38B,EAAcgG,KAAKhG,KAAOA,EAC1C48B,EAAc,gBAAoC52B,KAAMoX,GAC5D,OAAO,gBAAoB,UAAW,CACpCyf,OAAQF,EACRG,YAAY,EACZC,OAAQ,SAAWL,GAAe,SAAUrP,GAC1C,IAAI3pB,EAAMgY,EAAK1K,IAAI0K,EAAKwI,aAAamJ,EAAK7M,KAAMpD,GAChD,OAAO,gBAAoB,YAAa,CACtC4f,WAAY,UACZJ,YAAaA,EACb58B,KAAMqtB,EAAKrtB,KACXgP,MAAOtL,EACPu5B,UAAWv5B,UAMnBw4B,EAAiBp2B,UAAUo3B,mBAAqB,SAAU9f,GACxD,GAAiB,MAAbA,EAOF,IANA,IAAI+f,EAASn3B,KAAK2V,UACdN,EAAWrV,KAAKsV,iBAChB8hB,EAASD,EAAOE,UAAU,SAAWhiB,EAAS2gB,YAAY,SAAUxb,GACtE,OAAO2c,EAAOjZ,aAAa1D,MACzBpD,GAEKhc,EAAI,EAAGiP,EAAM+sB,EAAO18B,OAAQU,EAAIiP,EAAKjP,IAC5C,IAAK+G,MAAMi1B,EAAOh8B,IAAK,CACrB,IAAIs7B,EAAgBrhB,EAAS2d,mBAC7B,OAAO3d,EAASiiB,aAAaZ,EAAct7B,GAAGm8B,YAAYH,EAAOh8B,IAAKA,KAM9E86B,EAAiB33B,KAAO,eACxB23B,EAAiB3e,aAAe,CAAC,SACjC2e,EAAiBhgB,cAAgB,CAC/BC,OAAQ,EACRC,EAAG,EACHd,iBAAkB,QAClBe,iBAAiB,EACjByd,WAAY,EACZ3B,UAAW,CACTxtB,MAAO,EACPpG,KAAM,SAERilB,MAAO,CACLsG,SAAU,OAKZkK,WAAY,GAGPkC,EAzFT,CA0FEvf,GAAA,MAEa6gB,GAAA,G,oDC/FXC,GAAmBC,GAAA,KAAY1uB,MAEnC,SAAS2uB,GAAaC,EAAKpG,GACzB,OAAO,cAAgB,CACrBA,KAAMA,GACLoG,GAGL,IAAI,GAEJ,SAAUzuB,GAGR,SAAS0uB,IACP,IAAIpvB,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOs5B,EAAWt5B,KACjBkK,EA0GT,OAhHA,gBAAUovB,EAAY1uB,GAStB0uB,EAAW/3B,UAAUg4B,cAAgB,WACnC,IAAIC,EAAc/3B,KAAKgL,IAAI,eACvBgtB,EAAch4B,KAAKgL,IAAI,eACvByT,EAAQze,KAAKgL,IAAI,SACjBitB,EAAWj4B,KAAKgL,IAAI,YACpBktB,EAAWl4B,KAAKgL,IAAI,YAEpBmtB,EAAYn4B,KAAKgL,IAAI,aACrBotB,EAAgBp4B,KAAKgL,IAAI,YACzBqtB,EAAWr4B,KAAKgL,IAAI,CAAC,WAAY,SACjCstB,EAAgBt4B,KAAKgL,IAAI,CAAC,WAAY,cACtCutB,EAAUv4B,KAAKgL,IAAI,eACnBwtB,EAAex4B,KAAKgL,IAAI,gBACxBytB,EAAkB,SAAWz4B,KAAKgL,IAAI,cAAgB,IAAI,SAAU0tB,GAE9C,MAApBA,EAAapgB,KAAeogB,EAAapgB,IAAM,IAAMogB,EAAalgB,IACpEkgB,EAAalgB,IAAM,EACU,MAApBkgB,EAAalgB,KAAekgB,EAAalgB,IAAM,IAAMkgB,EAAapgB,MAC3EogB,EAAapgB,IAAM,GAGrB,IAAIqgB,EAAiBP,EAEK,MAAtBM,EAAaluB,QACfmuB,EAAiB,cAAgB,CAC/BnuB,MAAOkuB,EAAaluB,OACnB4tB,IAIL,IAAIQ,EAAoB,WAAa,WAAaF,GAAe,CAC/DX,YAAaA,EACbC,YAAaA,EACbvZ,MAAOA,EACPwZ,SAAUA,EACVC,SAAUA,EAEVC,UAAWA,EAEXn+B,KAAM0+B,EAAalzB,KACnBqzB,aAAc,MACdN,QAASA,EAETH,cAAeO,EACfH,aAAcA,IACb,GAMH,GAJKH,IACHO,EAAkB5+B,KAAO,IAGE,kBAAlBs+B,EAA4B,CACrC,IAAIQ,EAAUF,EAAkB5+B,KAChC4+B,EAAkB5+B,KAAOs+B,EAAc/jB,QAAQ,UAAsB,MAAXukB,EAAkBA,EAAU,QACpD,oBAAlBR,IAChBM,EAAkB5+B,KAAOs+B,EAAcM,EAAkB5+B,KAAM4+B,IAGjE,IAAItc,EAAQ,IAAIyc,GAAA,KAAMH,EAAmB,KAAM54B,KAAKgV,SAKpD,OAJA,WAAasH,EAAO,QAAqBxc,WAEzCwc,EAAM4K,SAAW,QACjB5K,EAAM0c,eAAiBh5B,KAAKg5B,eACrB1c,IACNtc,MACHA,KAAKi5B,iBAAmBR,GAG1BZ,EAAW/3B,UAAUo5B,mBAAqB,WACxC,OAAOl5B,KAAKi5B,kBAGdpB,EAAWt5B,KAAO,QAClBs5B,EAAW3hB,cAAgB,CACzBC,OAAQ,EACRC,EAAG,EACHlR,OAAQ,CAAC,MAAO,OAChB6iB,OAAQ,MACR7mB,WAAY,GACZi4B,SAAU,CACR3H,MAAM,GAIRuG,YAAa,CAAC,EAAG,GACjBC,YAAa,EACboB,YAAa,GACb3a,OAAO,EAEPhb,MAAO,UACPw0B,SAAU,WAAa,CACrB9F,UAAW,CACT3nB,MAAO,SAERitB,GAAiBQ,UACpBE,UAAWR,GAAaF,GAAiBU,WAAW,GACpDD,SAAUP,GAAaF,GAAiBS,UAAU,GAElDmB,UAAW1B,GAAaF,GAAiB4B,WAAW,GACpDC,UAAW3B,GAAaF,GAAiB6B,WAAW,GAEpD7F,UAAW,IAENoE,EAjHT,CAkHE0B,GAAA,MAEa,M,oDC/HXC,GAAmB,CAAC,WAAY,gBAAiB,YAEjD,GAEJ,SAAUrwB,GAGR,SAAS8qB,IACP,IAAIxrB,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO01B,EAAU11B,KAChBkK,EAkKT,OAxKA,gBAAUwrB,EAAW9qB,GASrB8qB,EAAUn0B,UAAUoZ,OAAS,SAAUugB,EAAYzkB,EAASoE,GAC1D,IAAIlM,EAAQlN,KAAKkN,MACjBA,EAAMiQ,YAENnd,KAAK05B,WAAWD,GAEhBz5B,KAAK25B,uBAAuBF,IAG9BxF,EAAUn0B,UAAU45B,WAAa,SAAUD,GACzC,IAAI/F,EAAQ+F,EAAWnkB,iBACnBohB,EAAgBhD,EAAMV,mBACtB4G,EAAe,SAAWlD,GAAe,SAAUmD,GACrD,IAAIC,EAAc,IAAIC,GAAA,KAAYF,EAAcvd,MAAO,CACrDwN,SAAU,CAAC4J,EAAM3yB,GAAI2yB,EAAM1yB,IAC3B2K,SAAUkuB,EAAchR,MACxBmR,gBAAiB,EACjBC,eAAgB,EAChBC,cAAe,IAEjB,OAAOJ,KAET,UAAYF,GAAc,SAAUE,GAClC,UAAYN,GAAkBM,EAAYryB,IAAKqyB,GAC/C95B,KAAKkN,MAAMzF,IAAIqyB,EAAYK,cAC1Bn6B,OAGLi0B,EAAUn0B,UAAU65B,uBAAyB,SAAUF,GACrD,IAAI/F,EAAQ+F,EAAWnkB,iBACnBohB,EAAgBhD,EAAMV,mBAE1B,GAAK0D,EAAch8B,OAAnB,CAIA,IAAI+I,EAAQg2B,EAAWzuB,IAAI,SACvBovB,EAAiBX,EAAWve,SAAS,aACrCmf,EAAiBZ,EAAWve,SAAS,aACrCof,EAAiBF,EAAelf,SAAS,aACzCga,EAAiBmF,EAAenf,SAAS,aACzCqf,EAAgBH,EAAepvB,IAAI,QACnCwvB,EAAgBH,EAAervB,IAAI,QACnCyvB,EAAkBH,EAAetvB,IAAI,SACrC0vB,EAAkBxF,EAAelqB,IAAI,SACrC2vB,EAAqB,aAAeF,GAAmBA,EAAkB,CAACA,GAC1EG,EAAqB,aAAeF,GAAmBA,EAAkB,CAACA,GAC1EG,EAAa,GACbC,EAAa,GAQjB,GAAc,WAAVr3B,EAKF,IAJA,IAAIs3B,EAAcrE,EAAc,GAAGsE,iBAC/Bj6B,EAAK2yB,EAAM3yB,GACXC,EAAK0yB,EAAM1yB,GAEN5F,EAAI,EAAGA,EAAI2/B,EAAYrgC,OAAQU,IAAK,CAC3C,GAAIm/B,EAAe,CACjB,IAAIU,EAAaC,EAAcL,EAAYF,EAAoBv/B,GAC/Dy/B,EAAWI,GAAY5/B,KAAK,IAAI,QAAe,CAC7CoI,MAAO,CACL1C,GAAIA,EACJC,GAAIA,EACJC,EAAG85B,EAAY3/B,GAAGsd,UAKxB,GAAI8hB,GAAiBp/B,EAAI2/B,EAAYrgC,OAAS,EAAG,CAC3CugC,EAAaC,EAAcJ,EAAYF,EAAoBx/B,GAC/D0/B,EAAWG,GAAY5/B,KAAK,IAAI,QAAa,CAC3CoI,MAAO,CACL1C,GAAIA,EACJC,GAAIA,EACJigB,GAAI8Z,EAAY3/B,GAAGsd,MACnBzX,EAAG85B,EAAY3/B,EAAI,GAAGsd,eAO5B,KAAIyiB,EACAC,EAAkB,SAAW1E,GAAe,SAAUmD,EAAepc,GACvE,IAAI4d,EAAcxB,EAAcmB,iBAEhC,OADAG,EAAyC,MAArBA,EAA4BE,EAAY3gC,OAAS,EAAIqC,KAAKyb,IAAI6iB,EAAY3gC,OAAS,EAAGygC,GACnG,SAAWE,GAAa,SAAUC,GACvC,OAAO5H,EAAM4D,aAAagE,EAAU5iB,MAAO+E,SAG3C8d,EAAa,GAEjB,IAASngC,EAAI,EAAGA,GAAK+/B,EAAmB//B,IAAK,CAG3C,IAFA,IAAI+oB,EAAS,GAEJqX,EAAI,EAAGA,EAAI9E,EAAch8B,OAAQ8gC,IACxCrX,EAAO9oB,KAAK+/B,EAAgBI,GAAGpgC,IAYjC,GARI+oB,EAAO,IACTA,EAAO9oB,KAAK8oB,EAAO,GAAG3pB,SAOpB+/B,EAAe,CACbU,EAAaC,EAAcL,EAAYF,EAAoBv/B,GAC/Dy/B,EAAWI,GAAY5/B,KAAK,IAAI,QAAiB,CAC/CoI,MAAO,CACL0gB,OAAQA,MAKd,GAAIqW,GAAiBe,EAAY,CAC3BN,EAAaC,EAAcJ,EAAYF,EAAoBx/B,EAAI,GACnE0/B,EAAWG,GAAY5/B,KAAK,IAAI,QAAgB,CAC9CoI,MAAO,CACL0gB,OAAQA,EAAOsX,OAAOF,OAK5BA,EAAapX,EAAO3pB,QAAQkhC,WAIlC,IAAIvJ,EAAYmI,EAAerF,eAC3B0G,EAAYzG,EAAeO,eAE/B,UAAYqF,GAAY,SAAUA,EAAYrd,GAC5Czd,KAAKkN,MAAMzF,IAAIwnB,GAAA,aAAkB6L,EAAY,CAC3ChhC,MAAO,cAAgB,CACrBkE,OAAQ,OACRF,KAAM88B,EAAmBnd,EAAMmd,EAAmBlgC,SACjDihC,GACH/W,QAAQ,OAET5kB,MACH,UAAY66B,GAAY,SAAUA,EAAYpd,GAC5Czd,KAAKkN,MAAMzF,IAAIwnB,GAAA,aAAkB4L,EAAY,CAC3C/gC,MAAO,cAAgB,CACrBgE,KAAM,OACNE,OAAQ28B,EAAmBld,EAAMkd,EAAmBjgC,SACnDy3B,GACHvN,QAAQ,OAET5kB,MAzGH,SAASk7B,EAAcU,EAAYC,EAAqBpe,GACtD,IAAIwd,EAAaxd,EAAMoe,EAAoBnhC,OAE3C,OADAkhC,EAAWX,GAAcW,EAAWX,IAAe,GAC5CA,IAyGXhH,EAAU11B,KAAO,QACV01B,EAzKT,CA0KE,SAEa,M,aClLX,GAEJ,SAAU9qB,GAGR,SAAS2yB,EAActhB,EAAKiE,EAAOsd,GACjC,IAAItzB,EAAQU,EAAOE,KAAKrJ,KAAMwa,EAAKiE,EAAOsd,IAAiB/7B,KAK3D,OAHAyI,EAAMlK,KAAO,QACbkK,EAAMogB,MAAQ,EACdpgB,EAAMzO,KAAO,GACNyO,EAGT,OAXA,gBAAUqzB,EAAe3yB,GAWlB2yB,EAZT,CAaEE,GAAA,MAEa,M,uCCZX,GAEJ,WACE,SAASC,EAAMxC,EAAYzkB,EAASoE,GAKlCpZ,KAAKg2B,WAAa,GAClBh2B,KAAKsZ,OAASmgB,EACdz5B,KAAKk8B,eAAiB,iBAAIzC,EAAWP,sBAAsB,SAAUiD,EAAgB1e,GACnF,IAAIjD,EAAM,aAAeiD,EACrBoc,EAAgB,IAAI,GAAcrf,EAAK,IAAI4hB,GAAA,MAO/C,OALAvC,EAAc7/B,KAAOmiC,EAAenxB,IAAI,QAExC6uB,EAAcvd,MAAQ6f,EACtBA,EAAe9U,KAAOwS,EACtB75B,KAAKg2B,WAAW36B,KAAKmf,GACdqf,IACN75B,MACHA,KAAK6Q,OAAO4oB,EAAYrgB,GAmM1B,OAhMA6iB,EAAMn8B,UAAUkzB,iBAAmB,WACjC,OAAOhzB,KAAKk8B,gBAGdD,EAAMn8B,UAAU0V,YAAc,SAAUxM,EAAOqzB,GAC7C,IAAIxC,EAAgB75B,KAAKk8B,eAAeG,GACxC,OAAOr8B,KAAKs3B,aAAauC,EAActC,YAAYvuB,GAAQqzB,IAI7DJ,EAAMn8B,UAAUw3B,aAAe,SAAU5e,EAAO2jB,GAC9C,IAAIxC,EAAgB75B,KAAKk8B,eAAeG,GACpCxT,EAAQgR,EAAchR,MACtBzoB,EAAIJ,KAAKe,GAAK2X,EAAQ3b,KAAKK,IAAIyrB,GAC/BxoB,EAAIL,KAAKgB,GAAK0X,EAAQ3b,KAAKG,IAAI2rB,GACnC,MAAO,CAACzoB,EAAGC,IAGb47B,EAAMn8B,UAAUw8B,YAAc,SAAU/mB,GACtC,IAAIyU,EAAKzU,EAAG,GAAKvV,KAAKe,GAClBwpB,EAAKhV,EAAG,GAAKvV,KAAKgB,GAClB+mB,EAAShrB,KAAK2tB,KAAKV,EAAKA,EAAKO,EAAKA,GACtCP,GAAMjC,EACNwC,GAAMxC,EAQN,IAPA,IAIIwU,EAJAC,EAASz/B,KAAK0/B,OAAOlS,EAAIP,GAGzB0S,EAAgBpG,IAEhBqG,GAAkB,EAEbvhC,EAAI,EAAGA,EAAI4E,KAAKk8B,eAAexhC,OAAQU,IAAK,CACnD,IAAIy+B,EAAgB75B,KAAKk8B,eAAe9gC,GACpC4X,EAAOjW,KAAK8E,IAAI26B,EAAS3C,EAAchR,OAEvC7V,EAAO0pB,IACTH,EAAc1C,EACd8C,EAAiBvhC,EACjBshC,EAAgB1pB,GAIpB,MAAO,CAAC2pB,IAAkBJ,GAAeA,EAAYK,YAAY7U,MAGnEkU,EAAMn8B,UAAU+Q,OAAS,SAAU4oB,EAAYrgB,GAC7C,IAAIlU,EAASu0B,EAAWzuB,IAAI,UACxBye,EAAYrQ,EAAIrH,WAChB2X,EAAatQ,EAAIpH,YACjB6qB,EAAW9/B,KAAKyb,IAAIiR,EAAWC,GAAc,EACjD1pB,KAAKe,GAAK+7B,GAAA,KAAwB53B,EAAO,GAAIukB,GAC7CzpB,KAAKgB,GAAK87B,GAAA,KAAwB53B,EAAO,GAAIwkB,GAC7C1pB,KAAKkB,WAAau4B,EAAWzuB,IAAI,cAAgBjO,KAAKM,GAAK,IAE3D,IAAI0qB,EAAS0R,EAAWzuB,IAAI,UAEN,kBAAX+c,GAAyC,kBAAXA,IACvCA,EAAS,CAAC,EAAGA,IAGf/nB,KAAKihB,GAAK6b,GAAA,KAAwB/U,EAAO,GAAI8U,GAC7C78B,KAAKiB,EAAI67B,GAAA,KAAwB/U,EAAO,GAAI8U,GAC5C,kBAAK78B,KAAKk8B,gBAAgB,SAAUrC,EAAepc,GACjDoc,EAAckD,UAAU/8B,KAAKihB,GAAIjhB,KAAKiB,GACtC,IAAI4nB,EAAQ7oB,KAAKkB,WAAauc,EAAM1gB,KAAKM,GAAK,EAAI2C,KAAKk8B,eAAexhC,OAEtEmuB,EAAQ9rB,KAAK0/B,MAAM1/B,KAAKG,IAAI2rB,GAAQ9rB,KAAKK,IAAIyrB,IAC7CgR,EAAchR,MAAQA,IACrB7oB,OAGLi8B,EAAMn8B,UAAUkK,OAAS,SAAUgL,EAASoE,GAC1C,IAAIsd,EAAgB12B,KAAKk8B,eACrBzC,EAAaz5B,KAAKsZ,OACtB,kBAAKod,GAAe,SAAUmD,GAC5BA,EAAcpb,MAAMse,UAAUzG,KAAWA,QAE3CthB,EAAQ4S,iBAAiB,SAAS,SAAUoV,EAAavf,GACvD,GAA4C,UAAxCuf,EAAYhyB,IAAI,qBACjBgK,EAAQioB,aAAa,QAASD,EAAYhyB,IAAI,iBAAmByuB,EADpE,CAKA,IAAI/jB,EAAOsnB,EAAYrnB,UACvB,kBAAK+gB,GAAe,SAAUmD,GAC5BA,EAAcpb,MAAMye,oBAAoBxnB,EAAMA,EAAKwI,aAAa2b,EAAcrf,YAE/Exa,MACH,IAAIg4B,EAAcyB,EAAWzuB,IAAI,eAEjC,SAASmyB,EAAiBC,GACxB,IAAIC,EAAQtgC,KAAKugC,IAAI,GAAIvgC,KAAKwgC,MAAMxgC,KAAKygC,IAAIJ,GAAYrgC,KAAK0gC,OAE1D76B,EAAIw6B,EAAWC,EASnB,OAPU,IAANz6B,EACFA,EAAI,EAGJA,GAAK,EAGAA,EAAIy6B,EAIb,kBAAK3G,GAAe,SAAUmD,EAAepc,GAC3C,IAAIigB,EAAY,gBAAe7D,EAAcpb,MAAOob,EAAcvd,OAAOkD,OACzE,gBAAgBqa,EAAcpb,MAAOob,EAAcvd,OACnD,IAAI8E,EAAYyY,EAAcvd,MAC1BmC,EAAQob,EAAcpb,MACtBkf,EAAW,gBAAqBlf,EAAO2C,EAAUpW,IAAI,OAAO,IAC5D4yB,EAAW,gBAAqBnf,EAAO2C,EAAUpW,IAAI,OAAO,IAC5DoyB,EAAW3e,EAAMof,cAErB,GAAgB,MAAZF,GAAgC,MAAZC,EAEtBnf,EAAMse,WAAWY,GAAWC,GAC5Bnf,EAAMqf,aAAaF,EAAWD,GAAY3F,QACrC,GAAgB,MAAZ2F,EAAkB,CAC3B,IAAIrlB,OAAM,EAEV,GACEA,EAAMqlB,EAAWP,EAAWpF,EAC5BvZ,EAAMse,WAAWY,EAAUrlB,GAG3BmG,EAAMqf,YAAYV,GAClBA,EAAWD,EAAiBC,SACrB9kB,EAAMolB,EAAU,IAAMK,SAASzlB,IAAQylB,SAASL,EAAU,UAC9D,GAAgB,MAAZE,EAAkB,CAC3B,IAAIplB,OAAM,EAEV,GACEA,EAAMolB,EAAWR,EAAWpF,EAC5BvZ,EAAMse,UAAUvkB,GAAMolB,GACtBnf,EAAMqf,YAAYV,GAClBA,EAAWD,EAAiBC,SACrB5kB,EAAMklB,EAAU,IAAMK,SAASvlB,IAAQulB,SAASL,EAAU,SAC9D,CACL,IAAIM,EAAmBvf,EAAMwf,WAAWvjC,OAAS,EAE7CsjC,EAAmBhG,IACrBoF,EAAWD,EAAiBC,IAI1B9kB,EAAMvb,KAAKmhC,KAAKR,EAAU,GAAKN,GAAYA,EAC3C5kB,EAAMskB,GAAA,KAAiBxkB,EAAM8kB,EAAWpF,GAC5CvZ,EAAMse,UAAUvkB,EAAKF,GACrBmG,EAAMqf,YAAYV,QAKxBnB,EAAMn8B,UAAUq+B,eAAiB,SAAUnpB,EAASopB,EAAQp1B,GAE1D,OADAq1B,QAAQC,KAAK,oBACN,MAGTrC,EAAMn8B,UAAUy+B,iBAAmB,SAAUvpB,EAASopB,EAAQI,GAE5D,OADAH,QAAQC,KAAK,oBACN,MAGTrC,EAAMn8B,UAAUswB,aAAe,SAAUC,GAEvC,OADAgO,QAAQC,KAAK,qBACN,GAGTrC,EAAMwC,OAAS,SAAUzpB,EAASoE,GAChC,IAAIslB,EAAY,GAahB,OAZA1pB,EAAQiS,cAAc,SAAS,SAAUwS,GACvC,IAAI/F,EAAQ,IAAIuI,EAAMxC,EAAYzkB,EAASoE,GAC3CslB,EAAUrjC,KAAKq4B,GACf+F,EAAWnkB,iBAAmBoe,KAEhC1e,EAAQ4S,iBAAiB,SAAS,SAAUoV,GACE,UAAxCA,EAAYhyB,IAAI,sBAGlBgyB,EAAY1nB,iBAAmBopB,EAAU1B,EAAYhyB,IAAI,eAAiB,OAGvE0zB,GAOTzC,EAAMjG,WAAa,GACZiG,EAtNT,GAyNe,MChOR,SAAS,GAAQvnB,GACtBA,EAAUiqB,yBAAyB,QAAS,IAC5CjqB,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAChCnqB,EAAUoqB,eAAe,CACvBnX,WAAY,QACZ5nB,MAAO,SAAUoZ,GACf,IAAIzD,EAAOyD,EAAYxD,UAEvBD,EAAKuI,MAAK,SAAUR,GAClB/H,EAAKqpB,cAActhB,EAAK,eAAgB,gBAG1C/H,EAAKspB,UAAU,eAAgB,gBCT9B,SAAS,GAAQtqB,GACtB,eAAI,IACJA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoBkR,IAC9B9iB,EAAU6R,eAAeuM,IACzBpe,EAAUkS,kBAAkBsC,GAAW,UACvCxU,EAAUuqB,qBAAqB,I,+FCM7BC,GAA4B,CAAC,OAAQ,SAAU,OAAQ,UAAW,UAAW,WAAY,QACzFC,GAA+B,mBAAqBD,IACpDE,GAAwB,mBAAqBF,GAA0BzD,OAAO,CAAC,OAC/E4D,GAAiB,mBAAqBH,GAA0BzD,OAAO,CAAC,OACxE6D,GAAc,kBAElB,SAASC,GAAkBjjB,GACzB,IAAIrE,EAAYqE,EAAMR,eAClB0jB,EAAYljB,EAAMtR,IAAI,aAO1B,OAJiB,MAAbw0B,IACFvnB,EAAUna,KAAO0hC,GAGZvnB,EAGT,IAAI,GAEJ,WACE,SAASwnB,EAAQrmB,GACf,IAAIlM,EAAQ,IAAI,QAChBlN,KAAK0/B,IAAM,gBAAO,eAClB1/B,KAAK2/B,YAAc,IAAIC,GAAA,KAAexmB,EAAIwE,SAC1C5d,KAAK6/B,gBAAkB,CACrBv4B,OAAQ4F,GAEVlN,KAAKkN,MAAQA,EACbA,EAAMzF,IAAIzH,KAAK8/B,cAAgB,IAAI,SACnC5yB,EAAMzF,IAAIzH,KAAK+/B,UAAY,IAAI,SA+YjC,OA5YAN,EAAQ3/B,UAAUkgC,KAAO,SAAUC,EAAejrB,EAASoE,EAAK8mB,EAAU7mB,GACxE,IAAI8mB,EAAmC,QAA3BF,EAAc/Y,SAGtBxR,EAAOuqB,EAActqB,SAAWsqB,EAActqB,UAClDwqB,GAASnrB,EAAQiS,cAAc,CAC7BC,SAAU,SACVkZ,QAAS,QACR,SAAUC,GACN3qB,GAAQ2qB,EAAUC,oBAAsBL,IAC3CvqB,EAAO2qB,EAAU1qB,cAGrB,IAAI4qB,EAAMN,EAAc3qB,iBACpBkrB,EAAexgC,KAAK8/B,cACpB5yB,EAAQlN,KAAKkN,MACbuzB,EAAgBF,EAAIG,mBACpBC,EAAmBF,EAAcG,IACjCC,EAAoBJ,EAAcK,KAElCC,GAAeP,EAAaxL,QAAQ,IAAM3b,EAE1C0nB,GACF7zB,EAAM9M,EAAIygC,EAAkBzgC,EAC5B8M,EAAM7M,EAAIwgC,EAAkBxgC,EAC5B6M,EAAMtB,OAASi1B,EAAkBj1B,OACjCsB,EAAMrB,OAASg1B,EAAkBh1B,OACjCqB,EAAMzB,SAENwjB,GAAA,eAAoB/hB,EAAO2zB,EAAmBZ,GAGhD,IAAIe,EAA6BtrB,GAAQA,EAAKwQ,UAAU,eAAiBxQ,EAAKwQ,UAAU,cAAcxrB,OAAS,EAC3GumC,EAAe,CACjB7nB,IAAKA,EACLmnB,IAAKA,EACLN,cAAeA,EACfvqB,KAAMA,EACNsrB,2BAA4BA,EAC5Bb,MAAOA,EACPQ,iBAAkBA,GAGK,YAArBJ,EAAIW,aACNlhC,KAAKmhC,cAAcF,GACW,WAArBV,EAAIW,cACblhC,KAAKohC,UAAUH,GAGjBjhC,KAAKqhC,kBAAkBpB,EAAejrB,EAASoE,GAE/CpZ,KAAKshC,wBAAwBrB,EAAeO,EAAcpnB,EAAK8mB,IAGjET,EAAQ3/B,UAAUqhC,cAAgB,SAAUF,GAC1C,IAAIM,EAAUvhC,KAAKwhC,oBAAsB,qBACrChB,EAAexgC,KAAK8/B,cACpBa,EAAmBM,EAAaN,iBAChCV,EAAgBgB,EAAahB,cAC7BvqB,EAAOurB,EAAavrB,KAEpB+rB,EAAiB,SAAUpR,GAC7B,MAAO,CAACA,EAAM,GAAKsQ,EAAiB/0B,OAAS+0B,EAAiBvgC,EAAGiwB,EAAM,GAAKsQ,EAAiB90B,OAAS80B,EAAiBtgC,IAGzHmgC,EAAarjB,YAEb,UAAY8jB,EAAaV,IAAImB,SAAS,SAAUC,GAC9C,IAAIC,EAAaD,EAAO3nC,KACpB6nC,EAAc5B,EAAc6B,eAAeF,GAC3CxjB,EAAU1I,EAAOA,EAAKqsB,YAAYH,GAAc,KAMhDI,EAAcT,EAAQv2B,IAAI42B,GAC1BK,IAAmBD,EAElBC,IACHD,EAAcT,EAAQz1B,IAAI81B,EAAY,IAAI,SAC1CpB,EAAa/4B,IAAIu6B,IAGnB,IAAIE,EAAe,IAAI,QAAqB,CAC1CC,uBAAwB,EACxB1+B,MAAO,CACL2+B,MAAO,MAGXJ,EAAYv6B,IAAIy6B,GAEXD,IAEHI,GAA2BpB,EAAce,EAAaJ,EAAYC,EAAa5B,EAAe7hB,GAC9FkkB,GAAsBrB,EAAce,EAAaJ,EAAYC,EAAa5B,GAC1EsC,GAA2BtB,EAAce,EAAaJ,EAAYC,EAAa5B,IAGjF,UAAY0B,EAAOa,YAAY,SAAUC,GACvC,GAAsB,YAAlBA,EAASlkC,KAAb,CAMA,IAFA,IAAI4lB,EAAS,GAEJ/oB,EAAI,EAAGA,EAAIqnC,EAASC,SAAShoC,SAAUU,EAC9C+oB,EAAO9oB,KAAKomC,EAAegB,EAASC,SAAStnC,KAG/C8mC,EAAaz+B,MAAM2+B,MAAM/mC,KAAK,IAAI,QAAgB,CAChD8mC,uBAAwB,EACxB1+B,MAAO,CACL0gB,OAAQA,MAIZ,IAAS/oB,EAAI,EAAGA,GAAKqnC,EAASE,UAAYF,EAASE,UAAUjoC,OAAS,KAAMU,EAAG,CAI7E,IAHA,IAAIwnC,EAAWH,EAASE,UAAUvnC,GAC9BynC,EAAW,GAENrH,EAAI,EAAGA,EAAIoH,EAASloC,SAAU8gC,EACrCqH,EAASxnC,KAAKomC,EAAemB,EAASpH,KAGxC0G,EAAaz+B,MAAM2+B,MAAM/mC,KAAK,IAAI,QAAgB,CAChD8mC,uBAAwB,EACxB1+B,MAAO,CACL0gB,OAAQ0e,WAKhBC,GAA0B7B,EAAciB,EAAc9jB,EAASyjB,GAE3DK,aAAwBa,GAAA,OAC1Bb,EAAac,SAAU,GAGzB,IAAIC,EAAWxB,EAAeE,EAAOuB,aACrCC,GAAoBlC,EAAciB,EAAcN,EAAYC,EAAa5B,EAAe7hB,EAAS6kB,KAChGjjC,OAGLy/B,EAAQ3/B,UAAUshC,UAAY,SAAUH,GACtC,IAAImC,EAAUnC,EAAaV,IAAI8C,IAC3B1C,EAAmBM,EAAaN,iBACpC3gC,KAAK+/B,UAAU3/B,EAAIugC,EAAiBvgC,EACpCJ,KAAK+/B,UAAU1/B,EAAIsgC,EAAiBtgC,EACpCL,KAAK+/B,UAAUn0B,OAAS+0B,EAAiB/0B,OACzC5L,KAAK+/B,UAAUl0B,OAAS80B,EAAiB90B,OAErC7L,KAAKsjC,oBAAoBF,KAC3BpjC,KAAKujC,WAELvjC,KAAKwjC,QAAQJ,IAGf,IAAIK,EAAmBzjC,KAAK0jC,kBAAoB,qBAC5CC,GAAY,EAChB,UAAY3jC,KAAK4jC,kBAAkBC,OAAO,SAAUC,GAKlD,IAAIlC,EAAakC,EAAU9pC,KACvBimC,EAAgBgB,EAAahB,cAC7BvqB,EAAOurB,EAAavrB,KACpBquB,EAAkBD,EAAUC,gBAC5B1lC,EAAKylC,EAAUzlC,GACf+f,EAAU1I,EAAOA,EAAKqsB,YAAYH,GAAc,KAChDC,EAAc5B,EAAc6B,eAAeF,GAe/C,GAbyD,MAArDzC,GAA6Bn0B,IAAI+4B,IAA4B1lC,aAAc0kC,GAAA,MAC7ED,GAA0B7B,EAAc5iC,EAAI+f,EAASyjB,GAGnDxjC,aAAc0kC,GAAA,OAChB1kC,EAAG2kC,SAAU,GAMf3kC,EAAG2lC,eAAiB,GAEfF,EAAUG,YAG8B,MAAvC5E,GAAer0B,IAAI+4B,IACrBZ,GAAoBlC,EAAc5iC,EAAIujC,EAAYC,EAAa5B,EAAe7hB,EAAS,MAGzFikB,GAA2BpB,EAAc5iC,EAAIujC,EAAYC,EAAa5B,EAAe7hB,GACrFkkB,GAAsBrB,EAAc5iC,EAAIujC,EAAYC,EAAa5B,GAEf,MAA9Cb,GAAsBp0B,IAAI+4B,IAA0B,CACtD,IAAIG,EAAU3B,GAA2BtB,EAAc5iC,EAAIujC,EAAYC,EAAa5B,GAEpE,SAAZiE,IACFP,GAAY,GAGd,IAAIQ,EAAMV,EAAiBz4B,IAAI42B,IAAe6B,EAAiB33B,IAAI81B,EAAY,IAC/EuC,EAAI9oC,KAAKgD,MAGZ2B,MAEHA,KAAKokC,qBAAqBT,EAAW1C,IAGvCxB,EAAQ3/B,UAAUskC,qBAAuB,SAAUT,EAAW1C,GAI5D,GAAI0C,GAAa1C,EAAad,MAAO,CACnC,IAAIkE,EAAYpD,EAAahB,cAAc/kB,SAAS,CAAC,OAAQ,cAAcY,eAGvEwoB,EAAYD,EAAUxlC,QAE1BmB,KAAK4jC,kBAAkBn0B,KAAK80B,UAAS,SAAUlmC,GAC7C,IAAKA,EAAGmmC,QAAS,CAGf,gBAAqBnmC,GACrB,IAAIvE,EAAQuE,EAAG8wB,YAAY,QAAQr1B,OAAS,GAEvB,MAAjBA,EAAM+E,SAAgC,MAAbylC,IAC3BxqC,EAAM+E,QAAUylC,GAKlBjmC,EAAG8wB,YAAY,kBAMvBsQ,EAAQ3/B,UAAUgO,OAAS,WACzB9N,KAAK8/B,cAAc3iB,YAEnBnd,KAAKwhC,oBAAsB,KAE3BxhC,KAAK+/B,UAAU5iB,YAEfnd,KAAKujC,WAELvjC,KAAK2/B,YAAY1rB,UAEjBjU,KAAK6/B,gBAAkB,MAGzBJ,EAAQ3/B,UAAU2kC,wBAA0B,SAAUzqC,EAAM0qC,GAC1D,GAAY,MAAR1qC,EACF,MAAO,GAGT,IAAIumC,EAAMmE,EAASpvB,iBAEnB,GAAyB,YAArBirB,EAAIW,aAA4B,CAClC,IAAIyD,EAAqB3kC,KAAKwhC,oBAE9B,GAAImD,EAAoB,CACtB,IAAI3C,EAAc2C,EAAmB35B,IAAIhR,GACzC,OAAOgoC,EAAc,CAACA,GAAe,SAElC,GAAyB,WAArBzB,EAAIW,aACb,OAAOlhC,KAAK0jC,mBAAqB1jC,KAAK0jC,kBAAkB14B,IAAIhR,IAAS,IAIzEylC,EAAQ3/B,UAAUwjC,oBAAsB,SAAUF,GAChD,OAAOpjC,KAAK4kC,cAAgBxB,GAG9B3D,EAAQ3/B,UAAU0jC,QAAU,SAAUJ,GACpC,IAAIyB,EAAWC,GAAA,KAAiBC,eAAe3B,GAE/C,GAAIyB,GAA8B,WAAlBA,EAAStmC,KAAmB,CAC1C,IAAIymC,EAAaH,EAASI,WAAWjlC,KAAK0/B,KAE1C1/B,KAAK+/B,UAAUt4B,IAAIu9B,EAAWv1B,MAE9BzP,KAAK4jC,kBAAoBoB,EACzBhlC,KAAK4kC,YAAcxB,IAIvB3D,EAAQ3/B,UAAUyjC,SAAW,WAC3B,IAAIH,EAAUpjC,KAAK4kC,YAEnB,GAAe,MAAXxB,EAAJ,CAIA,IAAIyB,EAAWC,GAAA,KAAiBC,eAAe3B,GAE3CyB,GAA8B,WAAlBA,EAAStmC,MACvBsmC,EAASK,YAAYllC,KAAK0/B,KAG5B1/B,KAAK4jC,kBAAoB,KACzB5jC,KAAK0jC,kBAAoB,KAEzB1jC,KAAK+/B,UAAU5iB,YAEfnd,KAAK4kC,YAAc,OAGrBnF,EAAQ3/B,UAAUuhC,kBAAoB,SAAUpB,EAAejrB,EAASoE,GACtE,IAAImnB,EAAMN,EAAc3qB,iBACpB6vB,EAAanlC,KAAK2/B,YAClByF,EAAiBplC,KAAK6/B,gBAE1BuF,EAAeC,UAAYpF,EAAcj1B,IAAI,cAC7Co6B,EAAeE,KAAO/E,EAAIgF,UAG1BJ,EAAWK,OAAOvF,EAAcj1B,IAAI,UAAW,GAC/C,IAAIkc,EAAW+Y,EAAc/Y,SAE7B,SAASue,IACP,IAAIC,EAAS,CACXnnC,KAAM,UACNshB,cAAeqH,GAGjB,OADAwe,EAAOxe,EAAW,MAAQ+Y,EAAcp2B,GACjC67B,EAGTP,EAAW/kB,IAAI,OAAOvC,GAAG,OAAO,SAAUlb,GACxC3C,KAAK2lC,gBAAiB,EACtBC,GAAA,KAA2BR,EAAgBziC,EAAEqnB,GAAIrnB,EAAE4nB,IACnDnR,EAAIwG,eAAe,YAAc6lB,IAAkB,CACjDzb,GAAIrnB,EAAEqnB,GACNO,GAAI5nB,EAAE4nB,QAEPvqB,MACHmlC,EAAW/kB,IAAI,QAAQvC,GAAG,QAAQ,SAAUlb,GAC1C3C,KAAK2lC,gBAAiB,EACtBC,GAAA,KAA4BR,EAAgBziC,EAAE8b,MAAO9b,EAAEkjC,QAASljC,EAAEmjC,SAClE1sB,EAAIwG,eAAe,YAAc6lB,IAAkB,CACjDH,KAAM3iC,EAAE8b,MACRonB,QAASljC,EAAEkjC,QACXC,QAASnjC,EAAEmjC,aAEZ9lC,MACHmlC,EAAWY,mBAAkB,SAAUpjC,EAAGvC,EAAGC,GAC3C,OAAOkgC,EAAInQ,aAAa,CAAChwB,EAAGC,MAAQ,gBAAoBsC,EAAGyW,EAAK6mB,OAgBpER,EAAQ3/B,UAAUkmC,oBAAsB,WACtChmC,KAAKkN,MAAMq3B,UAAS,SAAUlmC,GAC5B,IAAImlB,EAAQnlB,EAAGolB,iBAEXD,IACFA,EAAM9G,OAAS4iB,GAAY9b,GAAO9G,YAKxC+iB,EAAQ3/B,UAAUwhC,wBAA0B,SAAUrB,EAAeO,EAAcpnB,EAAK8mB,GACtF,IAAI+F,EAAUjmC,KACdwgC,EAAapgB,IAAI,aACjBogB,EAAapgB,IAAI,SAEb6f,EAAcj1B,IAAI,kBACpBw1B,EAAa3iB,GAAG,aAAa,WAC3BooB,EAAQN,gBAAiB,KAE3BnF,EAAa3iB,GAAG,SAAS,SAAUlb,GAC5BsjC,EAAQN,iBAIbM,EAAQN,gBAAiB,QAKxBlG,EAzZT,GA8ZA,SAASqD,GAA0B7B,EAAc5iC,EAAI+Y,EAAWyqB,GAQ9D,IAAIqE,EAAmBrE,EAAY3mB,SAAS,aACxCirB,EAAqBtE,EAAY3mB,SAAS,CAAC,WAAY,cACvDkrB,EAAiBvE,EAAY3mB,SAAS,CAAC,OAAQ,cAC/CmrB,EAAmBxE,EAAY3mB,SAAS,CAAC,SAAU,cAGnDorB,EAAc/G,GAAkB2G,GAChCK,EAAgBhH,GAAkB4G,GAClCK,EAAcjH,GAAkB8G,GAChChC,EAAY9E,GAAkB6G,GAE9B1wB,EAAOurB,EAAavrB,KAExB,GAAIA,EAAM,CAIR,IAAI5b,EAAQ4b,EAAKmN,cAAczL,EAAW,SACtCse,EAAQhgB,EAAKmN,cAAczL,EAAW,SAEtC6pB,EAAaD,4BAA8BlnC,EAAMgE,OACnDwoC,EAAYxoC,KAAOhE,EAAMgE,MAGvB43B,IACF4Q,EAAY5Q,MAAQ,gBAA+BA,EAAOuL,EAAa7nB,MAM3E/a,EAAG+uB,SAASkZ,GACZjoC,EAAGvE,MAAMoF,eAAgB,EACzBb,EAAG8wB,YAAY,YAAYr1B,MAAQysC,EACnCloC,EAAG8wB,YAAY,UAAUr1B,MAAQ0sC,EACjCnoC,EAAG8wB,YAAY,QAAQr1B,MAAQuqC,EAE/B,gBAAqBhmC,GAGvB,SAAS8kC,GAAoBlC,EAAc5iC,EAAIujC,EAAYC,EAAa5B,EACxE7hB,EACAqoB,GACE,IAAI/wB,EAAOurB,EAAavrB,KACpByqB,EAAQc,EAAad,MACrBuG,EAAYhxB,GAAQvT,MAAMuT,EAAK1K,IAAI0K,EAAKwI,aAAa,SAAUE,IAC/DkS,EAAa5a,GAAQA,EAAK4B,cAAc8G,GAK5C,GAAI+hB,GAASuG,GAAapW,GAAcA,EAAWqW,UAAW,CAC5D,IAAIxf,EAASgZ,EAAkByB,EAAVxjB,EACjB8E,OAAe,IAEdxN,GAAQ0I,GAAW,KACtB8E,EAAe+c,GAGjB,IAAI2G,EAAmBH,EAAU,CAC/BI,OAAQ,CACNvZ,MAAO,SACPD,cAAe,WAEf,KAGJ,gBAAchvB,EAAI,gBAAqBwjC,GAAc,CACnD3e,aAAcA,EACdC,eAAgBgE,EAChB/D,YAAawe,GACZgF,GACH,IAAIE,EAASzoC,EAAGolB,iBAEhB,GAAIqjB,IACFxH,GAAYwH,GAAQpqB,OAASoqB,EAAOpqB,OAEhCre,EAAG0oC,YACDN,GAAS,CAEX,IAAIrkC,EAAO/D,EAAGovB,kBAAkBC,QAChCrvB,EAAG0oC,WAAWjd,SAAW,EAAE2c,EAAQ,GAAKrkC,EAAKhC,GAAKgC,EAAKuC,MAAQ,IAAM,KAAM8hC,EAAQ,GAAKrkC,EAAK/B,GAAK+B,EAAKyC,OAAS,IAAM,KAK5H,gBAA2BxG,EAAI+f,EAAS,MACxC/f,EAAG2oC,uBAAwB,OAE3B3oC,EAAG4oC,oBACH5oC,EAAG6oC,mBACH7oC,EAAG2oC,sBAAwB,KAI/B,SAAS3E,GAA2BpB,EAAckG,EAAcvF,EAAYC,EAAa5B,EACzF7hB,GAGM6iB,EAAavrB,KAQfurB,EAAavrB,KAAK+G,iBAAiB2B,EAAS+oB,GAQ1C,gBAAUA,GAAcC,UAAY,CAClCvnB,cAAe,MACfmZ,eAAgBiH,EAAcjH,eAC9BqO,SAAUpH,EAAcjH,eACxBh/B,KAAM4nC,EACND,OAAQE,GAAeA,EAAY9sB,QAAU,IAKrD,SAASutB,GAAsBrB,EAAc5iC,EAAIujC,EAAYC,EAAa5B,GACnEgB,EAAavrB,MAChBuZ,GAAA,oBAAyB,CACvB5wB,GAAIA,EACJ+oB,eAAgB6Y,EAChBqH,SAAU1F,EAEV2F,kBAAmB1F,EAAY72B,IAAI,aAKzC,SAASu3B,GAA2BtB,EAAc5iC,EAAIujC,EAAYC,EAAa5B,GAE7E5hC,EAAGmpC,wBAA0BvH,EAAcj1B,IAAI,gBAE/C,IAAI2Y,EAAgBke,EAAY3mB,SAAS,YACrCusB,EAAQ9jB,EAAc3Y,IAAI,SAO9B,OANA,gBAAoB3M,EAAIopC,EAAO9jB,EAAc3Y,IAAI,cAE7Ci2B,EAAad,OACf,gBAAgC9hC,EAAI4hC,EAAe2B,GAG9C6F,EAGM,UC9lBX,GAEJ,SAAUt+B,GAGR,SAASu+B,IACP,IAAIj/B,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOmpC,EAAQnpC,KACdkK,EAuIT,OA7IA,gBAAUi/B,EAASv+B,GASnBu+B,EAAQ5nC,UAAUoZ,OAAS,SAAUyuB,EAAU3yB,EAASoE,EAAKC,GAE3D,IAAIA,GAA4B,oBAAjBA,EAAQ9a,MAA8B8a,EAAQuuB,OAAS5nC,KAAK0/B,IAA3E,CAIA,IAAIxyB,EAAQlN,KAAKkN,MAGjB,GAFAA,EAAMiQ,aAEFwqB,EAASrH,kBAAb,CASA,GALItgC,KAAK6nC,UAAYxuB,GAA4B,YAAjBA,EAAQ9a,MACtCyB,KAAK6nC,SAAS7B,sBAIV3sB,GAA4B,YAAjBA,EAAQ9a,MAAgD,WAA1B8a,EAAQwG,eAA8BxG,EAAQyuB,WAAaH,EAAS99B,GAW5G,CACDo8B,EAAUjmC,KAAK6nC,SACnB5B,GAAW/4B,EAAMzF,IAAIw+B,EAAQ/4B,YAZ7B,GAAIy6B,EAASI,aAAc,CACzB,IAAI9B,EAAUjmC,KAAK6nC,UAAY,IAAI,GAAQzuB,GAC3ClM,EAAMzF,IAAIw+B,EAAQ/4B,OAClB+4B,EAAQjG,KAAK2H,EAAU3yB,EAASoE,EAAKpZ,KAAMqZ,GAC3CrZ,KAAK6nC,SAAW5B,OAGhBjmC,KAAK6nC,UAAY7nC,KAAK6nC,SAAS/5B,SAC/B9N,KAAK6nC,SAAW,KAOpBF,EAAS38B,IAAI,qBAAuBgK,EAAQioB,aAAa,WAAaj9B,KAAKgoC,eAAeL,EAAU3yB,EAASoE,MAG/GsuB,EAAQ5nC,UAAUgO,OAAS,WACzB9N,KAAK6nC,UAAY7nC,KAAK6nC,SAAS/5B,SAC/B9N,KAAK6nC,SAAW,KAChB7nC,KAAKkN,MAAMiQ,aAGbuqB,EAAQ5nC,UAAUmU,QAAU,WAC1BjU,KAAK6nC,UAAY7nC,KAAK6nC,SAAS/5B,SAC/B9N,KAAK6nC,SAAW,MAGlBH,EAAQ5nC,UAAUkoC,eAAiB,SAAUL,EAAU3yB,EAASoE,GAC9D,IAAI6uB,EAAeN,EAASM,aACxB/6B,EAAQlN,KAAKkN,MACjB+6B,EAAahqB,KAAKgqB,EAAa/pB,aAAa,UAAU,SAAUlV,EAAOk/B,GACrE,IAAI/lC,MAAM6G,GAAV,CAIA,IAAIkT,EAAS+rB,EAAa3wB,cAAc4wB,GAExC,GAAKhsB,GAAWA,EAAOmU,MAAvB,CAKA,IAAIA,EAAQnU,EAAOmU,MACf9lB,EAAS2R,EAAO3R,OAChB49B,EAAS,IAAI,QAAe,CAC9BruC,MAAO,CAOLgE,KAAM6pC,EAAShyB,UAAUuQ,UAAU,SAASpoB,MAE9C2F,MAAO,CACL1C,GAAIsvB,EAAM,GAAc,EAAT9lB,EACfvJ,GAAIqvB,EAAM,GACVpvB,EAAG,GAEL2jB,QAAQ,EAERrD,GAAI,GAAMhX,EAAgC,EAAvB,QAAmB,KAWxC,IAAKA,EAAQ,CACX,IAAI69B,EAAWT,EAASU,WAAW1yB,UAC/B2yB,EAASL,EAAa3e,QAAQ4e,GAC9BK,EAAcH,EAASrG,YAAYuG,GACnCtsB,EAAYisB,EAAahsB,aAAaisB,GACtC7b,EAAarQ,EAAUd,SAAS,SAChC8mB,EAAcoG,EAAStrB,iBAAiByrB,GAQ5C,gBAAcJ,EAAQ,gBAAqBnsB,GAAY,CACrDkH,aAAc,CACZqM,kBAAmB,SAAU9R,EAAKoG,GAChC,OAAO8jB,EAASpY,kBAAkBgZ,EAAa1kB,OAIrDskB,EAAOnB,uBAAwB,EAE1B3a,EAAWrhB,IAAI,aAClBm9B,EAAOja,cAAc,CACnBpE,SAAU,WAIdkY,EAAYwG,mBAAqB,SAAUC,GACzC,gBAAcN,EAAQM,IAI1Bv7B,EAAMzF,IAAI0gC,SAIdT,EAAQnpC,KAAO,MACRmpC,EA9IT,CA+IEpnB,GAAA,MAEa,MCjJX,GAEJ,SAAUnX,GAGR,SAASu/B,IACP,IAAIjgC,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAiBhE,OAfAyI,EAAMlK,KAAOmqC,EAAUnqC,KAEvBkK,EAAMs/B,cAAe,EAErBt/B,EAAMkgC,YAAc,GAEpBlgC,EAAMyuB,mBAAqB,SAAU9f,GACnC,GAAiB,MAAbA,EAAmB,CACrB,IAAIkxB,EAAStoC,KAAK2V,UAAU2T,QAAQlS,GAChCmpB,EAAMvgC,KAAKsV,iBACXqsB,EAASpB,EAAIqI,UAAUN,GAC3B,OAAO3G,GAAUpB,EAAI/qB,YAAYmsB,EAAOuB,eAIrCz6B,EAoMT,OAxNA,gBAAUigC,EAAWv/B,GAuBrBu/B,EAAU5oC,UAAUgV,eAAiB,SAAUC,GAQ7C,IAPA,IAAIW,EAAO,OAAAob,GAAA,MAAiB9wB,KAAM,CAChC+wB,gBAAiB,CAAC,SAClBC,gBAAiB,WAAa,QAA8BhxB,QAE1D6oC,EAAc,qBACdC,EAAgB,GAEX1tC,EAAI,EAAGiP,EAAMqL,EAAKpa,QAASF,EAAIiP,EAAKjP,IAAK,CAChD,IAAI2tC,EAASrzB,EAAK4T,QAAQluB,GAC1BytC,EAAY/8B,IAAIi9B,GAAQ,GAG1B,IAAIC,EAAYlE,GAAA,KAAiBmE,KAAKjpC,KAAKkpC,aAAclpC,KAAK+U,OAAOwsB,QAASvhC,KAAK+U,OAAOo0B,cAY1F,OAXA,UAAYH,EAAUtH,SAAS,SAAUC,GACvC,IAAI3nC,EAAO2nC,EAAO3nC,KAEb6uC,EAAY79B,IAAIhR,IACnB8uC,EAAcztC,KAAKrB,MAMvB0b,EAAK0zB,aAAa,GAAIN,GACfpzB,GAQTgzB,EAAU5oC,UAAUwgC,gBAAkB,WACpC,IAAI+G,EAAWrnC,KAAK+U,OAAOsyB,SAC3B,OAAmB,MAAZA,EAAmBrnC,KAAKgV,QAAQioB,aAAa,MAAOoK,GAAY,MAGzEqB,EAAU5oC,UAAUopC,WAAa,WAC/B,OAAQlpC,KAAKsgC,mBAAqBtgC,MAAM+U,OAAOsuB,KASjDqF,EAAU5oC,UAAU4jB,YAAc,SAAUtM,GAG1C,IAAI1B,EAAO1V,KAAK2V,UAChB,OAAOD,EAAK1K,IAAI0K,EAAKwI,aAAa,SAAU9G,IAO9CsxB,EAAU5oC,UAAUgiC,eAAiB,SAAUF,GAC7C,IAAIlsB,EAAO1V,KAAK2V,UAChB,OAAOD,EAAKuG,aAAavG,EAAKqsB,YAAYH,KAO5C8G,EAAU5oC,UAAUy2B,cAAgB,SAAUnf,EAAWof,EAAgBC,GAQvE,IANA,IAAI/gB,EAAO1V,KAAK2V,UACZ3M,EAAQhJ,KAAK0jB,YAAYtM,GACzBpd,EAAO0b,EAAK4T,QAAQlS,GACpBuxB,EAAc3oC,KAAK2oC,YACnBU,EAAc,GAETjuC,EAAI,EAAGA,EAAIutC,EAAYjuC,OAAQU,IAAK,CAC3C,IAAIkuC,EAAaX,EAAYvtC,GAAG6sC,aAAalG,YAAY/nC,GACrD6tB,EAAWnS,EAAKwI,aAAa,SAE5B/b,MAAMwmC,EAAYvtC,GAAG6sC,aAAaj9B,IAAI6c,EAAUyhB,KACnDD,EAAYhuC,KAAKstC,EAAYvtC,GAAGpB,MAIpC,OAAO,gBAAoB,UAAW,CACpC68B,OAAQwS,EAAY5pC,KAAK,MACzB8pC,UAAWF,EAAY3uC,OACvBq8B,OAAQ,CAAC,gBAAoB,YAAa,CACxC/8B,KAAMA,EACNgP,MAAOA,QAKb0/B,EAAU5oC,UAAU0pC,QAAU,SAAUlE,GACtCtlC,KAAK+U,OAAOuwB,KAAOA,GAGrBoD,EAAU5oC,UAAU2pC,UAAY,SAAUvkC,GACxClF,KAAK+U,OAAO7P,OAASA,GAGvBwjC,EAAU5oC,UAAU4pC,cAAgB,SAAU9R,GAC5C,IAAIzD,EAAayD,EAAIzD,YAAc,YAC/BwV,EAAS,gBAAaxV,EAAY,EAAG,EAAGyD,EAAIgS,UAAWhS,EAAIiS,WAAYjS,EAAI3f,UAAUna,KAAM85B,EAAIkS,kBAWnG,OAVAH,EAAOvc,SAASwK,EAAI3f,WAEpB0xB,EAAO7vC,MAAMkE,OAAS,OAElBm2B,EAAW1pB,QAAQ,UAAY,IACjCk/B,EAAO7vC,MAAMkE,OAAS2rC,EAAO7vC,MAAMgE,KACnC6rC,EAAO7vC,MAAMgE,KAAO,OACpB6rC,EAAO7vC,MAAMkF,UAAY,GAGpB2qC,GAGTjB,EAAUnqC,KAAO,aACjBmqC,EAAUnxB,aAAe,CAAC,OAC1BmxB,EAAUqB,WAAa,MACvBrB,EAAUxyB,cAAgB,CAExBC,OAAQ,EAERC,EAAG,EACHd,iBAAkB,MAElB+tB,IAAK,GAMLr+B,KAAM,SAEN4sB,IAAK,SAULoY,YAAa,KAMbC,kBAAkB,EAIlBC,eAAgB,KAEhBhlC,OAAQ,KACRogC,KAAM,EACN6E,WAAY,KACZC,cAAc,EACd5mB,MAAO,CACLgO,MAAM,EACNhnB,MAAO,QAGTyN,UAAW,CACTJ,YAAa,GACbD,YAAa,OACb4nB,UAAW,QAEbjO,SAAU,CACR/N,MAAO,CACLgO,MAAM,EACNhnB,MAAO,gBAETyN,UAAW,CACTunB,UAAW,wBAGfxnB,OAAQ,CACNwL,MAAO,CACLgO,MAAM,EACNhnB,MAAO,gBAETyN,UAAW,CACTzN,MAAO,wBAGX2+B,aAAc,QAETT,EAzNT,CA0NE/xB,GAAA,MAEa,MCrOf,SAAS0zB,GAAeC,EAAOC,GAC7B,IAAI1B,EAAc,GAYlB,OAXA,UAAYyB,GAAO,SAAU50B,GAC3BA,EAAKuI,KAAKvI,EAAKwI,aAAa,UAAU,SAAUlV,EAAOyU,GAErD,IAAI+sB,EAAS,MAAQ90B,EAAK4T,QAAQ7L,GAClCorB,EAAY2B,GAAU3B,EAAY2B,IAAW,GAExCroC,MAAM6G,IACT6/B,EAAY2B,GAAQnvC,KAAK2N,SAIxBshC,EAAM,GAAGjH,IAAIiH,EAAM,GAAGpsB,aAAa,UAAU,SAAUlV,EAAOyU,GAOnE,IANA,IAYIgtB,EAZAD,EAAS,MAAQF,EAAM,GAAGhhB,QAAQ7L,GAClCyK,EAAM,EACN1P,EAAM8d,IACNhe,GAAOge,IACPjsB,EAAMw+B,EAAY2B,GAAQ9vC,OAErBU,EAAI,EAAGA,EAAIiP,EAAKjP,IACvBod,EAAMzb,KAAKyb,IAAIA,EAAKqwB,EAAY2B,GAAQpvC,IACxCkd,EAAMvb,KAAKub,IAAIA,EAAKuwB,EAAY2B,GAAQpvC,IACxC8sB,GAAO2gB,EAAY2B,GAAQpvC,GAe7B,OATEqvC,EADoB,QAAlBF,EACO/xB,EACkB,QAAlB+xB,EACAjyB,EACkB,YAAlBiyB,EACAriB,EAAM7d,EAEN6d,EAGI,IAAR7d,EAAY4L,IAAMw0B,KAId,SAASC,GAAiB11B,GACvC,IAAI21B,EAAe,GACnB31B,EAAQ4S,iBAAiB,OAAO,SAAUzO,GACxC,IAAIyxB,EAAezxB,EAAYmnB,kBAC3BhiC,EAAMssC,EAAe,IAAMA,EAAa/gC,GAAK,IAAMsP,EAAY+vB,cAClEyB,EAAarsC,GAAOqsC,EAAarsC,IAAQ,IAAIjD,KAAK8d,MAErD,UAAYwxB,GAAc,SAAUE,EAAYvsC,GAK9C,IAJA,IAAIoX,EAAO20B,GAAe,SAAWQ,GAAY,SAAU1xB,GACzD,OAAOA,EAAYxD,aACjBk1B,EAAW,GAAG7/B,IAAI,wBAEb5P,EAAI,EAAGA,EAAIyvC,EAAWnwC,OAAQU,IACrCyvC,EAAWzvC,GAAG6sC,aAAe4C,EAAWzvC,GAAGua,UAI7C,IAASva,EAAI,EAAGA,EAAIyvC,EAAWnwC,OAAQU,IACrCyvC,EAAWzvC,GAAGutC,YAAckC,EAC5BA,EAAWzvC,GAAG2sC,aAAqB,IAAN3sC,IAAYyvC,EAAWzvC,GAAGklC,kBACvDuK,EAAWzvC,GAAG0vC,QAAQp1B,EAAKq1B,gBAC3BF,EAAWzvC,GAAGitC,WAAawC,EAAW,MChE7B,SAASG,GAAgBh2B,GACtC,IAAIi2B,EAAmB,GACvBj2B,EAAQ4S,iBAAiB,OAAO,SAAUyY,GACxC,IAAI6K,EAAU7K,EAAU6I,aAExB,IAAI7I,EAAUC,oBAAqB2K,EAAiBC,GAApD,CAIA,IAAIC,EAAmB,GACvB,UAAY9K,EAAUsI,aAAa,SAAUyC,GAC3C,IAAI7K,EAAM6K,EAAa91B,iBACnBI,EAAO01B,EAAanD,aAEpBmD,EAAapgC,IAAI,qBAAuBgK,EAAQioB,aAAa,WAC/DvnB,EAAKuI,KAAKvI,EAAKwI,aAAa,UAAU,SAAUlV,EAAOyU,GACrD,IAAIzjB,EAAO0b,EAAK4T,QAAQ7L,GACpBkkB,EAASpB,EAAIqI,UAAU5uC,GAI3B,GAAK2nC,IAAUx/B,MAAM6G,GAArB,CAIA,IAAIuB,EAAS4gC,EAAiBnxC,IAAS,EACnCq2B,EAAQkQ,EAAI/qB,YAAYmsB,EAAOuB,aACnCiI,EAAiBnxC,GAAQuQ,EAAS,EAClCmL,EAAKoT,cAAcrL,EAAK,CACtB4S,MAAOA,EACP9lB,OAAQA,WAMhB,IAAImL,EAAO2qB,EAAU1qB,UACrBD,EAAKuI,MAAK,SAAUR,GAClB,IAAIzjB,EAAO0b,EAAK4T,QAAQ7L,GACpBvB,EAASxG,EAAK4B,cAAcmG,IAAQ,GACxCvB,EAAOyqB,WAAawE,EAAiBnxC,GACrC0b,EAAKoT,cAAcrL,EAAKvB,MAE1B+uB,EAAiBC,IAAW,M,8BCtC5BG,GAAqB,CACvB,QAAW,CACTrB,YAAa,IACbsB,iBAAiB,GAEnB,OAAU,CACRtB,YAAa,EACbsB,iBAAiB,IAIjB,GAEJ,SAAUniC,GAGR,SAASoiC,EAAIvxC,EAAMqpC,EAAKzL,GACtB,IAAInvB,EAAQU,EAAOE,KAAKrJ,KAAMhG,IAASgG,KAEvCyI,EAAMutB,WAAa,CAAC,MAAO,OAC3BvtB,EAAMlK,KAAO,MAEbkK,EAAM+iC,cAAgB,qBACtB/iC,EAAM46B,IAAMA,EACZ,IAAIoI,EAAS3G,GAAA,KAAiBmE,KAAK5F,EAAKzL,EAAI2J,QAAS3J,EAAIuR,cACrDtE,EAAWC,GAAA,KAAiBC,eAAe1B,GAC/C56B,EAAMy4B,aAAe2D,EAAWA,EAAStmC,KAAO,KAChD,IAAImtC,EAAgBL,GAAmBxG,EAAStmC,MAChDkK,EAAMkjC,YAAcF,EAAOG,WAC3BnjC,EAAMojC,iBAAmBH,EAAcJ,gBACvC7iC,EAAMi5B,QAAU+J,EAAO/J,QACvBj5B,EAAMuhC,YAAc,eAAiBpS,EAAIoS,YAAa0B,EAAc1B,aACpE,IAAI8B,EAAeL,EAAOK,aAI1B,OAFArjC,EAAMsjC,gBAAgBD,EAAa1rC,EAAG0rC,EAAazrC,EAAGyrC,EAAannC,MAAOmnC,EAAajnC,QAEhF4D,EAkGT,OAxHA,gBAAU8iC,EAAKpiC,GAwCfoiC,EAAIzrC,UAAUksC,aAAe,SAAU5rC,EAAGC,EAAGsE,EAAOE,GAClD,IAAIzC,EAAOpC,KAAKytB,kBACZ6d,EAAkBtrC,KAAK6rC,iBAC3BzpC,EAAOA,EAAKsrB,QAER4d,IAEFlpC,EAAK/B,GAAK+B,EAAK/B,EAAI+B,EAAKyC,QAG1B,IAAIonC,EAAmBjsC,KAAKksC,kBAC5BD,EAAiB9nC,UAAY/B,EAAK+pC,mBAAmB,IAAIC,GAAA,KAAahsC,EAAGC,EAAGsE,EAAOE,IACnF,IAAIwnC,EAAYJ,EAAiBh9B,OACjCg9B,EAAiBh9B,OAAS,KAC1Bg9B,EAAiBK,qBACjBL,EAAiBh9B,OAASo9B,EAEtBf,IACFW,EAAiBpgC,QAAUogC,EAAiBpgC,QAG9C7L,KAAKusC,oBAGPhB,EAAIzrC,UAAU8oC,UAAY,SAAU5uC,GAClC,OAAOgG,KAAK2rC,YAAY3gC,IAAIhR,IAG9BuxC,EAAIzrC,UAAU0sC,iBAAmB,SAAU9zB,GAGzC,IAFA,IAAIgpB,EAAU1hC,KAAK0hC,QAEVtmC,EAAI,EAAGA,EAAIsmC,EAAQhnC,OAAQU,IAAK,CACvC,IAAIumC,EAASD,EAAQtmC,GAErB,GAAoB,YAAhBumC,EAAOpjC,MAAsBojC,EAAO8K,QAAQ/zB,GAC9C,OAAOgpB,EAAQtmC,KASrBmwC,EAAIzrC,UAAU4sC,YAAc,SAAU1yC,EAAM2yC,GAC1C3sC,KAAKwrC,cAAc1/B,IAAI9R,EAAM2yC,IAO/BpB,EAAIzrC,UAAU8sC,YAAc,SAAU5yC,GACpC,IAAI2nC,EAAS3hC,KAAK2rC,YAAY3gC,IAAIhR,GAGlC,OAAOgG,KAAKwrC,cAAcxgC,IAAIhR,IAAS2nC,GAAUA,EAAOuB,aAG1DqI,EAAIzrC,UAAU0V,YAAc,SAAUE,EAAMm3B,EAAQC,GAMlD,GALoB,kBAATp3B,IAETA,EAAO1V,KAAK4sC,YAAYl3B,IAGtBA,EACF,OAAOq3B,GAAA,KAAKjtC,UAAU0V,YAAYnM,KAAKrJ,KAAM0V,EAAMm3B,EAAQC,IAI/DvB,EAAIzrC,UAAUq+B,eAAiB,SAAUnpB,EAASopB,EAAQp1B,GACxD,IAAIqM,EAAW23B,GAAY5O,GAC3B,OAAO/oB,IAAarV,KAAOqV,EAASG,YAAYxM,GAAS,MAG3DuiC,EAAIzrC,UAAUy+B,iBAAmB,SAAUvpB,EAASopB,EAAQI,GAC1D,IAAInpB,EAAW23B,GAAY5O,GAC3B,OAAO/oB,IAAarV,KAAOqV,EAASinB,YAAYkC,GAAS,MAGpD+M,EAzHT,CA0HEwB,GAAA,MAKF,SAASC,GAAY5O,GACnB,IAAIsG,EAAWtG,EAAOsG,SAClBvrB,EAAcilB,EAAOjlB,YACzB,OAAOurB,EAAWA,EAASpvB,iBAAmB6D,EAAcA,EAAY7D,mBACpE6D,EAAY8zB,uBAAuB,MAAO,SAAkBC,OAAO,IAAM,IAAI53B,iBAAmB,KANtG,WAAa,GAAKy3B,GAAA,MASH,UChJf,SAASI,GAAUzI,EAAUtrB,GAC3B,IAAI8wB,EAAiBxF,EAAS15B,IAAI,kBAElC,GAAsB,MAAlBk/B,EAAwB,CAC1B,IAAIkD,EAAUlD,EAAe,GACzBmD,EAAcnD,EAAe,GAE7B/nC,MAAMirC,EAAQ,KAAOjrC,MAAMirC,EAAQ,KAAOjrC,MAAMkrC,EAAY,KAAOlrC,MAAMkrC,EAAY,KAKvFrtC,KAAK+rC,gBAAgBqB,EAAQ,GAAIA,EAAQ,GAAIC,EAAY,GAAKD,EAAQ,GAAIC,EAAY,GAAKD,EAAQ,IAIvG,IAOIloC,EACA2Q,EAeAiS,EAvBA1lB,EAAOpC,KAAKytB,kBACZ6f,EAAe5I,EAAS15B,IAAI,gBAC5BuiC,EAAa7I,EAAS15B,IAAI,cAC1Bye,EAAYrQ,EAAIrH,WAChB2X,EAAatQ,EAAIpH,YACjBw7B,EAASprC,EAAKuC,MAAQvC,EAAKyC,OAAS7E,KAAKgqC,YACzCyD,GAAmB,EAmBvB,GAfIH,GAAgBC,IAClBroC,EAAS,CAAC43B,GAAA,KAAwBwQ,EAAa,GAAI7jB,GAAYqT,GAAA,KAAwBwQ,EAAa,GAAI5jB,IACxG7T,EAAOinB,GAAA,KAAwByQ,EAAYxwC,KAAKyb,IAAIiR,EAAWC,IAE1DvnB,MAAM+C,EAAO,KAAQ/C,MAAM+C,EAAO,KAAQ/C,MAAM0T,KACnD43B,GAAmB,IAUnBA,EACF3lB,EAAW,GAEP0lB,EAAS,GAEX1lB,EAASnjB,MAAQkR,EACjBiS,EAASjjB,OAASgR,EAAO23B,IAEzB1lB,EAASjjB,OAASgR,EAClBiS,EAASnjB,MAAQkR,EAAO23B,GAG1B1lB,EAASznB,EAAI6E,EAAO,GAAK4iB,EAASjjB,OAAS,EAC3CijB,EAAS1nB,EAAI8E,EAAO,GAAK4iB,EAASnjB,MAAQ,MACrC,CAEL,IAAI+oC,EAAkBhJ,EAASjd,qBAC/BimB,EAAgBF,OAASA,EACzB1lB,EAAW,QAAqB4lB,EAAiB,CAC/C/oC,MAAO8kB,EACP5kB,OAAQ6kB,IAIZ1pB,KAAK2tC,YAAY7lB,EAAS1nB,EAAG0nB,EAASznB,EAAGynB,EAASnjB,MAAOmjB,EAASjjB,QAClE7E,KAAKypC,UAAU/E,EAAS15B,IAAI,WAC5BhL,KAAKwpC,QAAQ9E,EAAS15B,IAAI,SAK5B,SAAS4iC,GAAarN,EAAKjkB,GACzB,UAAYA,EAAMtR,IAAI,aAAa,SAAU2hC,EAAU3yC,GACrDumC,EAAImM,YAAY1yC,EAAM2yC,MAI1B,IAAI,GAEJ,WACE,SAASkB,IAEP7tC,KAAKg2B,WAAa,GAAIl2B,UAAUk2B,WAsFlC,OAnFA6X,EAAW/tC,UAAU2+B,OAAS,SAAUzpB,EAASoE,GAC/C,IAAI00B,EAAU,GAEd94B,EAAQiS,cAAc,OAAO,SAAUyd,EAAUjnB,GAC/C,IAAIzjB,EAAO0qC,EAAS15B,IAAI,OACpBu1B,EAAM,IAAI,GAAIvmC,EAAOyjB,EAAKzjB,EAAM,CAClCunC,QAASmD,EAAS15B,IAAI,WACtBm+B,aAAczE,EAAS15B,IAAI,gBAC3Bg/B,YAAatF,EAAS15B,IAAI,iBAE5Bu1B,EAAI8E,UAAYX,EAAS15B,IAAI,cAC7B8iC,EAAQzyC,KAAKklC,GAEbmE,EAASpvB,iBAAmBirB,EAC5BA,EAAIjkB,MAAQooB,EAEZnE,EAAI1vB,OAASs8B,GACb5M,EAAI1vB,OAAO6zB,EAAUtrB,MAEvBpE,EAAQ+4B,YAAW,SAAU50B,GAC3B,IAAI9D,EAAW8D,EAAYnO,IAAI,oBAE/B,GAAiB,QAAbqK,EAAoB,CACtB,IAAIgyB,EAAWluB,EAAYnO,IAAI,aAAe,EAC9CmO,EAAY7D,iBAAmBw4B,EAAQzG,OAI3C,IAAI2G,EAAwB,GA6B5B,OA5BAh5B,EAAQ4S,iBAAiB,OAAO,SAAUzO,GACxC,IAAKA,EAAYmnB,kBAAmB,CAClC,IAAI4K,EAAU/xB,EAAY+vB,aAC1B8E,EAAsB9C,GAAW8C,EAAsB9C,IAAY,GACnE8C,EAAsB9C,GAAS7vC,KAAK8d,OAGxC,UAAY60B,GAAuB,SAAU3N,EAAW6K,GACtD,IAAI+C,EAAc,SAAW5N,GAAW,SAAU6N,GAChD,OAAOA,EAAgBljC,IAAI,cAEzBu1B,EAAM,IAAI,GAAI2K,EAASA,EAAS,CAClC3J,QAAS,cAAgB0M,GACzB9E,aAAc9I,EAAU,GAAGr1B,IAAI,gBAC/Bg/B,YAAa3J,EAAU,GAAGr1B,IAAI,iBAEhCu1B,EAAI8E,UAAY,cAAgBxwB,MAAM,KAAM,SAAWwrB,GAAW,SAAU6N,GAC1E,OAAOA,EAAgBljC,IAAI,kBAE7B8iC,EAAQzyC,KAAKklC,GAEbA,EAAI1vB,OAASs8B,GACb5M,EAAI1vB,OAAOwvB,EAAU,GAAIjnB,GACzB,UAAYinB,GAAW,SAAU6N,GAC/BA,EAAgB54B,iBAAmBirB,EACnCqN,GAAarN,EAAK2N,SAGfJ,GAOTD,EAAW/tC,UAAUquC,iBAAmB,SAAUC,EAAiBhL,EAAS7B,EAAS4H,GAKnF,IAHA,IAAIkF,GAAcD,GAAmB,IAAI5zC,QACrCquC,EAAc,qBAETztC,EAAI,EAAGA,EAAIizC,EAAW3zC,OAAQU,IACrCytC,EAAY/8B,IAAIuiC,EAAWjzC,GAAGpB,KAAMq0C,EAAWjzC,IAGjD,IAAIqwC,EAAS3G,GAAA,KAAiBmE,KAAK7F,EAAS7B,EAAS4H,GAOrD,OANA,UAAYsC,EAAO/J,SAAS,SAAUC,GACpC,IAAI3nC,EAAO2nC,EAAO3nC,MACjB6uC,EAAY79B,IAAIhR,IAASq0C,EAAWhzC,KAAK,CACxCrB,KAAMA,OAGHq0C,GAGFR,EAzFT,GA4FIS,GAAa,IAAI,GACN,MC7KX,GAEJ,SAAUnlC,GAGR,SAASolC,IACP,IAAI9lC,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOgwC,EAAShwC,KACfkK,EAiLT,OAvLA,gBAAU8lC,EAAUplC,GASpBolC,EAASzuC,UAAU+vB,KAAO,SAAU9a,EAAQsgB,EAAargB,GACvD,IAAIy2B,EAAS3G,GAAA,KAAiBC,eAAehwB,EAAOsuB,KAEpD,GAAIoI,GAA0B,YAAhBA,EAAOltC,KAAoB,CACvC,IAAI0Z,EAAYlD,EAAOkD,UAAYlD,EAAOkD,WAAa,GAEjD,UAAWA,IACfA,EAAUzN,MAAQ,QAItBxK,KAAKwuC,qBAAqBz5B,EAAQC,GAElC,QAA0BD,EAAQ,QAAS,CAAC,UAG9Cw5B,EAASzuC,UAAUg4B,cAAgB,WACjC,IAAIrvB,EAAQzI,KAER+U,EAAS/U,KAAK+U,OAClBA,EAAO2sB,QAAU,GAAWyM,iBAAiBp5B,EAAO2sB,QAAS3sB,EAAOsuB,IAAKtuB,EAAOwsB,QAASxsB,EAAOo0B,cAChG,IAAIsF,EAAc,GAClBzuC,KAAK0uC,gBAAkB,YAAc35B,EAAO2sB,SAAW,IAAI,SAAUiN,EAAgBC,GACnF,IAAIhN,EAAagN,EAAU50C,KAU3B,OARI4nC,IACF+M,EAAe7iC,IAAI81B,EAAY,IAAI7I,GAAA,KAAM6V,EAAWnmC,EAAOA,EAAMuM,UAE7D45B,EAAUC,WACZJ,EAAY7M,IAAc,IAIvB+M,IACN,sBAEE55B,EAAO05B,cACV15B,EAAO05B,YAAcA,IAQzBF,EAASzuC,UAAUgiC,eAAiB,SAAU9nC,GAC5C,OAAOgG,KAAK0uC,gBAAgB1jC,IAAIhR,IAAS,IAAI++B,GAAA,KAAM,KAAM/4B,KAAMA,KAAKgV,UAQtEu5B,EAASzuC,UAAUyvB,kBAAoB,SAAUv1B,EAAM80C,GACrD,IAAIjN,EAAc7hC,KAAK8hC,eAAe9nC,GAClC+0C,EAAuB,WAAXD,EAAsBjN,EAAY72B,IAAI,CAAC,QAAS,cAAgB62B,EAAY72B,IAAI,CAAC,WAAY,QAAS,cAClHiP,EAAS,CACXjgB,KAAMA,GAGR,MAAyB,oBAAd+0C,GACT90B,EAAO60B,OAASA,EACTC,EAAU90B,IACa,kBAAd80B,EACTA,EAAUx6B,QAAQ,MAAe,MAARva,EAAeA,EAAO,SADjD,GAKTu0C,EAASzuC,UAAU0pC,QAAU,SAAUlE,GACrCtlC,KAAK+U,OAAOuwB,KAAOA,GAGrBiJ,EAASzuC,UAAU2pC,UAAY,SAAUvkC,GACvClF,KAAK+U,OAAO7P,OAASA,GAIvBqpC,EAASzuC,UAAUkY,OAAS,SAAUhe,GACpC,IAAI+a,EAAS/U,KAAK+U,OACdq1B,EAAer1B,EAAOq1B,aAE1B,GAAKA,EAAL,CAIqB,aAAjBA,IACFr1B,EAAO05B,YAAc,MAGvB,IAAIA,EAAc15B,EAAO05B,cAAgB15B,EAAO05B,YAAc,IAC9DA,EAAYz0C,IAAQ,IAGtBu0C,EAASzuC,UAAUkvC,SAAW,SAAUh1C,GACtC,IAAIy0C,EAAczuC,KAAK+U,OAAO05B,YAE1BA,IACFA,EAAYz0C,IAAQ,IAIxBu0C,EAASzuC,UAAUmvC,eAAiB,SAAUj1C,GAC5CgG,KAAKA,KAAKupB,WAAWvvB,GAAQ,WAAa,UAAUA,IAGtDu0C,EAASzuC,UAAUypB,WAAa,SAAUvvB,GACxC,IAAIy0C,EAAczuC,KAAK+U,OAAO05B,YAC9B,SAAUA,IAAeA,EAAYz0C,KAGvCu0C,EAAShwC,KAAO,MAChBgwC,EAASxE,WAAa,MACtBwE,EAASr4B,cAAgB,CACvBC,OAAQ,EACRC,EAAG,EACHob,MAAM,EACNxsB,KAAM,SACN4sB,IAAK,SAILoY,YAAa,KAMbplB,QAAQ,EAERye,IAAK,GAGL6G,eAAgB,KAEhBhlC,OAAQ,KACRogC,KAAM,EACN6E,WAAY,KAEZ3mB,MAAO,CACLgO,MAAM,EACNhnB,MAAO,QAETyN,UAAW,CACTJ,YAAa,GACbD,YAAa,QAMf2Z,SAAU,CACR/N,MAAO,CACLgO,MAAM,EACNhnB,MAAO,gBAETyN,UAAW,CACTzN,MAAO,wBAGXwN,OAAQ,CACNwL,MAAO,CACLgO,MAAM,EACNhnB,MAAO,gBAETyN,UAAW,CACTzN,MAAO,wBAGXk3B,QAAS,IAKJ6M,EAxLT,CAyLEhV,GAAA,MAEa,M,0BChMX,GAEJ,SAAUpwB,GAGR,SAAS+lC,IACP,IAAIzmC,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAO2wC,EAAQ3wC,KACrBkK,EAAM0mC,kBAAmB,EAClB1mC,EA+DT,OAtEA,gBAAUymC,EAAS/lC,GAUnB+lC,EAAQpvC,UAAU+vB,KAAO,SAAU7a,EAASoE,GAC1C,IAAI6sB,EAAU,IAAI,GAAQ7sB,GAC1BpZ,KAAK6nC,SAAW5B,EAChBjmC,KAAKkN,MAAMzF,IAAIw+B,EAAQ/4B,OACvBlN,KAAKovC,KAAOh2B,GAGd81B,EAAQpvC,UAAUoZ,OAAS,SAAUwrB,EAAU1vB,EAASoE,EAAKC,GAC3D,IAAI4sB,EAAUjmC,KAAK6nC,SAEfnD,EAAS15B,IAAI,QACfi7B,EAAQjG,KAAK0E,EAAU1vB,EAASoE,EAAKpZ,KAAMqZ,GAE3CrZ,KAAK6nC,SAAS36B,MAAMiQ,YAGtB8oB,EAAQ/4B,MAAM2Q,GAAG,QAAS7d,KAAKqvC,mBAAoBrvC,MACnDimC,EAAQ/4B,MAAM0X,OAAS8f,EAAS15B,IAAI,UACpChL,KAAKsZ,OAASorB,EACd1kC,KAAKsvC,mBAAmB5K,EAAU1vB,EAASoE,IAG7C81B,EAAQpvC,UAAUuvC,mBAAqB,SAAU1sC,GAC/C,IAAIykC,EACJ,gBAAoBzkC,EAAE2E,QAAQ,SAAUioC,GACtC,OAAqD,OAA7CnI,EAAY,gBAAUmI,GAASnI,cACtC,GAECA,GACFpnC,KAAKovC,KAAKxvB,eAAe,CACvBrhB,KAAM,kBACNixC,MAAOxvC,KAAKsZ,OAAOzP,GACnB7P,KAAMotC,EAAUptC,QAKtBk1C,EAAQpvC,UAAUwvC,mBAAqB,SAAUhzB,EAAOtH,EAASoE,GAC/D,IAAI3Q,EAAQzI,KAEZA,KAAK6nC,SAAS36B,MAAMq3B,UAAS,SAAUkL,GACrC,IAAIrI,EAAY,gBAAUqI,GAAMrI,UAEhC,GAAIA,EAGF,OAFA3+B,EAAM6Q,OAAOiQ,WAAW6d,EAAUptC,MAAQof,EAAIs2B,YAAYD,GAAQr2B,EAAIu2B,YAAYF,IAE3E,MAKbP,EAAQpvC,UAAU2kC,wBAA0B,SAAUzqC,GACpD,OAAOgG,KAAK6nC,UAAY7nC,KAAK6nC,SAASpD,wBAAwBzqC,EAAMgG,KAAKsZ,SAG3E41B,EAAQpvC,UAAUmU,QAAU,WAC1BjU,KAAK6nC,UAAY7nC,KAAK6nC,SAAS/5B,UAGjCohC,EAAQ3wC,KAAO,MACR2wC,EAvET,CAwEE,SAEa,MC7ER,SAAS,GAAQx6B,GAKtB,SAASk7B,EAAWp7B,EAAQq7B,GAC1BA,EAAW7lC,OAAS,yBACpB0K,EAAUsS,eAAe6oB,GAAY,SAAUx2B,EAASrE,GACtD,IAAI65B,EAAW,GACXiB,EAAc,GAqBlB,OApBA96B,EAAQiS,cAAc,CACpBC,SAAU,MACVC,MAAO9N,IACN,SAAUqrB,GACXA,EAASlwB,GAAQ6E,EAAQrf,MACzB,IAAIumC,EAAMmE,EAASpvB,iBACnB,kBAAKirB,EAAImB,SAAS,SAAUC,GAC1BkN,EAASlN,EAAO3nC,MAAQ0qC,EAASnb,WAAWoY,EAAO3nC,QAAS,KAG9D,IAAI+1C,EAAQ,GACZ,kBAAKlB,GAAU,SAAUmB,EAAGh2C,GAC1B60C,EAAS70C,IAAS+1C,EAAM10C,KAAKrB,MAE/B81C,EAAYz0C,KAAK,CACfgsC,SAAU3C,EAAS1L,eAEnBh/B,KAAM+1C,OAGH,CACLlB,SAAUA,EACViB,YAAaA,EACb91C,KAAMqf,EAAQrf,SAhCpB0a,EAAUiqB,yBAAyB,MAAO,IAC1CjqB,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAmChC+Q,EAAW,iBAAkB,CAC3BrxC,KAAM,kBACN6mB,MAAO,qBAETwqB,EAAW,SAAU,CACnBrxC,KAAM,YACN6mB,MAAO,gBAETwqB,EAAW,WAAY,CACrBrxC,KAAM,cACN6mB,MAAO,kBAYT1Q,EAAUsS,eAAe,CACvBzoB,KAAM,UACN6mB,MAAO,UACPpb,OAAQ,oBACP,SAAUqP,EAASrE,GACpB,IAAI6K,EAAgBxG,EAAQwG,eAAiB,SAC7C7K,EAAQiS,cAAc,CACpBC,SAAUrH,EACVsH,MAAO9N,IACN,SAAU+N,GACX,IAAImZ,EAAMnZ,EAAe9R,iBAEzB,GAAiB,QAAbirB,EAAIhiC,KAAR,CAIA,IAAI0xC,EAAM,gBAAoB1P,EAAKlnB,EAAS+N,EAAepc,IAAI,eAC/Doc,EAAeqiB,WAAariB,EAAeqiB,UAAUwG,EAAI/qC,QACzDkiB,EAAeoiB,SAAWpiB,EAAeoiB,QAAQyG,EAAI3K,MAG/B,WAAlBzlB,GACF,kBAAKuH,EAAeuhB,aAAa,SAAUxvB,GACzCA,EAAYswB,UAAUwG,EAAI/qC,QAC1BiU,EAAYqwB,QAAQyG,EAAI3K,gBClF3B,SAAS,GAAQ5wB,GACtB,eAAI,IACJA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoB,IAC9B5R,EAAU6R,eAAeykB,IACzBt2B,EAAUkS,kBAAkBlS,EAAU8R,SAASK,UAAUC,UAAW4jB,IACpE,gBAA6B,MAAOh2B,EAAUsS,gB,8BCQzC,SAAS6I,GAAKqgB,GACnB,IAAIzgC,EAAOygC,EACXzgC,EAAK0gC,SAAW,CACdC,gBAAiB,KACjBC,SAAU5gC,EACV6gC,OAAQ,EACRC,SAAU,EACVC,OAAQ,EACRC,MAAO,EACPr1C,EAAG,EACHs1C,OAAQ,MAEV,IACIjB,EACAroC,EAFAupC,EAAQ,CAAClhC,GAIb,MAAOggC,EAAOkB,EAAMnjC,MAIlB,GAFApG,EAAWqoC,EAAKroC,SAEZqoC,EAAKmB,UAAYxpC,EAAS1M,OAG5B,IAFA,IAAIm2C,EAAIzpC,EAAS1M,OAERU,EAAIy1C,EAAI,EAAGz1C,GAAK,EAAGA,IAAK,CAC/B,IAAI8T,EAAQ9H,EAAShM,GACrB8T,EAAMihC,SAAW,CACfC,gBAAiB,KACjBC,SAAUnhC,EACVohC,OAAQ,EACRC,SAAU,EACVC,OAAQ,EACRC,MAAO,EACPr1C,EAAGA,EACHs1C,OAAQ,MAEVC,EAAMt1C,KAAK6T,IAiBZ,SAAS4hC,GAAUrB,EAAMsB,GAC9B,IAAI3pC,EAAWqoC,EAAKmB,SAAWnB,EAAKroC,SAAW,GAC3C4pC,EAAWvB,EAAK9nC,WAAWP,SAC3B6pC,EAAWxB,EAAKU,SAAS/0C,EAAI41C,EAASvB,EAAKU,SAAS/0C,EAAI,GAAK,KAEjE,GAAIgM,EAAS1M,OAAQ,CACnBw2C,GAAczB,GACd,IAAI0B,GAAY/pC,EAAS,GAAG+oC,SAASG,OAASlpC,EAASA,EAAS1M,OAAS,GAAGy1C,SAASG,QAAU,EAE3FW,GACFxB,EAAKU,SAASG,OAASW,EAASd,SAASG,OAASS,EAAWtB,EAAMwB,GACnExB,EAAKU,SAASI,SAAWd,EAAKU,SAASG,OAASa,GAEhD1B,EAAKU,SAASG,OAASa,OAEhBF,IACTxB,EAAKU,SAASG,OAASW,EAASd,SAASG,OAASS,EAAWtB,EAAMwB,IAGrExB,EAAK9nC,WAAWwoC,SAASC,gBAAkBgB,GAAU3B,EAAMwB,EAAUxB,EAAK9nC,WAAWwoC,SAASC,iBAAmBY,EAAS,GAAID,GAWzH,SAASM,GAAW5B,GACzB,IAAI6B,EAAQ7B,EAAKU,SAASG,OAASb,EAAK9nC,WAAWwoC,SAASI,SAC5Dd,EAAK7mB,UAAU,CACbxoB,EAAGkxC,IACF,GACH7B,EAAKU,SAASI,UAAYd,EAAK9nC,WAAWwoC,SAASI,SAE9C,SAAS,GAAWgB,GACzB,OAAOzuC,UAAUpI,OAAS62C,EAAKC,GAM1B,SAASC,GAAiBC,EAAKzwC,GAEpC,OADAywC,GAAO30C,KAAKM,GAAK,EACV,CACL+C,EAAGa,EAAIlE,KAAKK,IAAIs0C,GAChBrxC,EAAGY,EAAIlE,KAAKG,IAAIw0C,IAOb,SAAS,GAAYv4B,EAAaC,GACvC,OAAO,QAAqBD,EAAYsO,qBAAsB,CAC5D9iB,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,cAahB,SAASk/B,GAAczB,GACrB,IAAIroC,EAAWqoC,EAAKroC,SAChBypC,EAAIzpC,EAAS1M,OACb+1C,EAAQ,EACRD,EAAS,EAEb,QAASK,GAAK,EAAG,CACf,IAAI3hC,EAAQ9H,EAASypC,GACrB3hC,EAAMihC,SAASG,QAAUG,EACzBvhC,EAAMihC,SAASI,UAAYE,EAC3BD,GAAUthC,EAAMihC,SAASK,OACzBC,GAASvhC,EAAMihC,SAASM,MAAQD,GAmBpC,SAASY,GAAUO,EAAUV,EAAUZ,EAAUU,GAC/C,GAAIE,EAAU,CACZ,IAAIW,EAAeD,EACfE,EAAcF,EACdG,EAAcD,EAAYlqC,WAAWP,SAAS,GAC9C2qC,EAAad,EACbe,EAAcJ,EAAazB,SAASI,SACpC0B,EAAaJ,EAAY1B,SAASI,SAClC2B,EAAaJ,EAAY3B,SAASI,SAClC4B,EAAYJ,EAAW5B,SAASI,SAEpC,MAAOwB,EAAaK,GAAUL,GAAaF,EAAcQ,GAASR,GAAcE,GAAcF,EAAa,CACzGD,EAAeQ,GAAUR,GACzBE,EAAcO,GAASP,GACvBF,EAAazB,SAASE,SAAWsB,EACjC,IAAIlB,EAAQsB,EAAW5B,SAASG,OAAS6B,EAAYN,EAAY1B,SAASG,OAAS2B,EAAalB,EAAWgB,EAAYF,GAEnHpB,EAAQ,IACV6B,GAAYC,GAAaR,EAAYJ,EAAUtB,GAAWsB,EAAUlB,GACpEwB,GAAcxB,EACduB,GAAevB,GAGjB0B,GAAaJ,EAAW5B,SAASI,SACjC0B,GAAcJ,EAAY1B,SAASI,SACnCyB,GAAeJ,EAAazB,SAASI,SACrC2B,GAAcJ,EAAY3B,SAASI,SAGjCwB,IAAeK,GAAUR,KAC3BA,EAAazB,SAASO,OAASqB,EAC/BH,EAAazB,SAASI,UAAY4B,EAAYH,GAG5CH,IAAgBQ,GAASP,KAC3BA,EAAY3B,SAASO,OAASmB,EAC9BC,EAAY3B,SAASI,UAAY0B,EAAaC,EAC9C7B,EAAWsB,GAIf,OAAOtB,EAST,SAAS+B,GAAU3C,GACjB,IAAIroC,EAAWqoC,EAAKroC,SACpB,OAAOA,EAAS1M,QAAU+0C,EAAKmB,SAAWxpC,EAASA,EAAS1M,OAAS,GAAK+0C,EAAKU,SAASO,OAS1F,SAAS2B,GAAS5C,GAChB,IAAIroC,EAAWqoC,EAAKroC,SACpB,OAAOA,EAAS1M,QAAU+0C,EAAKmB,SAAWxpC,EAAS,GAAKqoC,EAAKU,SAASO,OAQxE,SAAS6B,GAAaR,EAAYtC,EAAMY,GACtC,OAAO0B,EAAW5B,SAASE,SAAS1oC,aAAe8nC,EAAK9nC,WAAaoqC,EAAW5B,SAASE,SAAWA,EAatG,SAASiC,GAAYE,EAAIC,EAAIhC,GAC3B,IAAID,EAASC,GAASgC,EAAGtC,SAAS/0C,EAAIo3C,EAAGrC,SAAS/0C,GAClDq3C,EAAGtC,SAASK,QAAUA,EACtBiC,EAAGtC,SAASM,OAASA,EACrBgC,EAAGtC,SAASI,UAAYE,EACxBgC,EAAGtC,SAASG,QAAUG,EACtB+B,EAAGrC,SAASK,QAAUA,EAUxB,SAASgB,GAAkBkB,EAAOC,GAChC,OAAOD,EAAM/qC,aAAegrC,EAAMhrC,WAAa,EAAI,E,iBCpQjDirC,GAEJ,WACE,SAASA,IACP5yC,KAAK6yC,YAAc,GACnB7yC,KAAK8yC,YAAc,GAGrB,OAAOF,EANT,GASI,GAEJ,SAAUzpC,GAGR,SAAS4pC,EAASpjC,GAChB,OAAOxG,EAAOE,KAAKrJ,KAAM2P,IAAS3P,KAmDpC,OAtDA,gBAAU+yC,EAAU5pC,GAMpB4pC,EAASjzC,UAAUkzC,gBAAkB,WACnC,MAAO,CACLh1C,OAAQ,OACRF,KAAM,OAIVi1C,EAASjzC,UAAUmkB,gBAAkB,WACnC,OAAO,IAAI2uB,IAGbG,EAASjzC,UAAU0D,UAAY,SAAU0gB,EAAKzgB,GAC5C,IAAIqvC,EAAcrvC,EAAMqvC,YACpBG,EAAWH,EAAYp4C,OACvBm4C,EAAcpvC,EAAMovC,YACpBK,EAAgBJ,EAAY,GAC5BK,EAAeL,EAAYG,EAAW,GAE1C,GAAiB,IAAbA,EAGF,OAFA/uB,EAAI/jB,OAAO0yC,EAAY,GAAIA,EAAY,SACvC3uB,EAAI3jB,OAAO2yC,EAAc,GAAIA,EAAc,IAI7C,IAAIE,EAAS3vC,EAAM2vC,OACfC,EAAqB,OAAXD,GAA8B,OAAXA,EAAkB,EAAI,EACnDE,EAAW,EAAID,EACfE,EAAe,gBAAa9vC,EAAM8vC,aAAc,GAChDC,EAAW,GACfA,EAASH,GAAWR,EAAYQ,GAChCG,EAASF,GAAYT,EAAYS,IAAaH,EAAaG,GAAYT,EAAYS,IAAaC,EAChGrvB,EAAI/jB,OAAO0yC,EAAY,GAAIA,EAAY,IACvC3uB,EAAI3jB,OAAOizC,EAAS,GAAIA,EAAS,IACjCtvB,EAAI/jB,OAAO+yC,EAAc,GAAIA,EAAc,IAC3CM,EAASH,GAAWH,EAAcG,GAClCnvB,EAAI3jB,OAAOizC,EAAS,GAAIA,EAAS,IACjCA,EAASH,GAAWF,EAAaE,GACjCnvB,EAAI3jB,OAAOizC,EAAS,GAAIA,EAAS,IACjCtvB,EAAI3jB,OAAO4yC,EAAa,GAAIA,EAAa,IAEzC,IAAK,IAAI/3C,EAAI,EAAGA,EAAI63C,EAAW,EAAG73C,IAAK,CACrC,IAAIi1B,EAAQyiB,EAAY13C,GACxB8oB,EAAI/jB,OAAOkwB,EAAM,GAAIA,EAAM,IAC3BmjB,EAASH,GAAWhjB,EAAMgjB,GAC1BnvB,EAAI3jB,OAAOizC,EAAS,GAAIA,EAAS,MAI9BT,EAvDT,CAwDEnqC,EAAA,MAEE,GAEJ,SAAUO,GAGR,SAASsqC,IACP,IAAIhrC,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAOk1C,EAASl1C,KACtBkK,EAAMirC,WAAa,IAAI,QAChBjrC,EAmMT,OA1MA,gBAAUgrC,EAAUtqC,GAUpBsqC,EAAS3zC,UAAU+vB,KAAO,SAAU7a,EAASoE,GAC3CpZ,KAAK2/B,YAAc,IAAIC,GAAA,KAAexmB,EAAIwE,SAC1C5d,KAAK6/B,gBAAkB,CACrBv4B,OAAQtH,KAAKkN,OAEflN,KAAKkN,MAAMzF,IAAIzH,KAAK0zC,aAGtBD,EAAS3zC,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAC1D,IAAI1D,EAAOyD,EAAYxD,UACnBg+B,EAAax6B,EAAYw6B,WACzBzmC,EAAQlN,KAAK0zC,WACbx3B,EAAS/C,EAAYnO,IAAI,UAEd,WAAXkR,GACFhP,EAAM9M,EAAIuzC,EAAWvzC,EAAIuzC,EAAWhvC,MAAQ,EAC5CuI,EAAM7M,EAAIszC,EAAWtzC,EAAIszC,EAAW9uC,OAAS,IAE7CqI,EAAM9M,EAAIuzC,EAAWvzC,EACrB8M,EAAM7M,EAAIszC,EAAWtzC,GAGvBL,KAAK4zC,oBAAoBz6B,GAEzBnZ,KAAKqhC,kBAAkBloB,EAAanE,EAASoE,GAE7C,IAAIkB,EAAUta,KAAKua,MACnB7E,EAAK1C,KAAKsH,GAAS7S,KAAI,SAAUyoB,GAC3B2jB,GAAgBn+B,EAAMwa,IAExB4jB,GAAWp+B,EAAMwa,EAAQ,KAAMhjB,EAAOiM,MAEvCnP,QAAO,SAAUkmB,EAAQC,GAC1B,IAAI4jB,EAAWz5B,EAAQwC,iBAAiBqT,GAEnC0jB,GAAgBn+B,EAAMwa,GAM3B4jB,GAAWp+B,EAAMwa,EAAQ6jB,EAAU7mC,EAAOiM,GALxC46B,GAAY,GAAWz5B,EAAS6V,EAAQ4jB,EAAU7mC,EAAOiM,MAM1DrL,QAAO,SAAUqiB,GAClB,IAAI4jB,EAAWz5B,EAAQwC,iBAAiBqT,GAMpC4jB,GACF,GAAWz5B,EAAS6V,EAAQ4jB,EAAU7mC,EAAOiM,MAE9C4D,UACH/c,KAAKg0C,gBAAkB76B,EAAYnO,IAAI,kBAEvChL,KAAKi0C,wBAAwB96B,IAEgB,IAAzCA,EAAYnO,IAAI,sBAClB0K,EAAK2K,mBAAkB,SAAUhiB,EAAI+Y,GACnC/Y,EAAG+hB,IAAI,SAASvC,GAAG,SAAS,WAC1BzE,EAAIwG,eAAe,CACjBrhB,KAAM,wBACNupC,SAAU3uB,EAAYtP,GACtBuN,UAAWA,UAMnBpX,KAAKua,MAAQ7E,GAGf+9B,EAAS3zC,UAAU8zC,oBAAsB,SAAUz6B,GACjD,IAAIzD,EAAOyD,EAAYxD,UACnBwO,EAAS,GACbzO,EAAKuI,MAAK,SAAUR,GAClB,IAAIvB,EAASxG,EAAK4B,cAAcmG,IAE5BvB,GAAW/Z,MAAM+Z,EAAO9b,IAAO+B,MAAM+Z,EAAO7b,IAC9C8jB,EAAO9oB,KAAK,EAAE6gB,EAAO9b,GAAI8b,EAAO7b,OAGpC,IAAImY,EAAM,GACNF,EAAM,GACV47B,GAAA,KAAgB/vB,EAAQ3L,EAAKF,GAG7B,IAAI67B,EAASn0C,KAAKo0C,KACdC,EAASr0C,KAAKs0C,KAEdh8B,EAAI,GAAKE,EAAI,KAAO,IACtBA,EAAI,GAAK27B,EAASA,EAAO,GAAK37B,EAAI,GAAK,EACvCF,EAAI,GAAK+7B,EAASA,EAAO,GAAK/7B,EAAI,GAAK,GAGrCA,EAAI,GAAKE,EAAI,KAAO,IACtBA,EAAI,GAAK27B,EAASA,EAAO,GAAK37B,EAAI,GAAK,EACvCF,EAAI,GAAK+7B,EAASA,EAAO,GAAK/7B,EAAI,GAAK,GAGzC,IAAIi8B,EAAep7B,EAAY7D,iBAAmB,IAAIy3B,GAAA,KACtDwH,EAAalP,UAAYlsB,EAAYnO,IAAI,cACzCupC,EAAaxI,gBAAgBvzB,EAAI,GAAIA,EAAI,GAAIF,EAAI,GAAKE,EAAI,GAAIF,EAAI,GAAKE,EAAI,IAC3E+7B,EAAa9K,UAAUtwB,EAAYnO,IAAI,WACvCupC,EAAa/K,QAAQrwB,EAAYnO,IAAI,SAErChL,KAAKkN,MAAM9O,KAAK,CACdgC,EAAGm0C,EAAan0C,EAChBC,EAAGk0C,EAAal0C,EAChBuL,OAAQ2oC,EAAa3oC,OACrBC,OAAQ0oC,EAAa1oC,SAEvB7L,KAAKo0C,KAAO57B,EACZxY,KAAKs0C,KAAOh8B,GAGdm7B,EAAS3zC,UAAUuhC,kBAAoB,SAAUloB,EAAanE,EAASoE,GACrE,IAAI3Q,EAAQzI,KAERmlC,EAAanlC,KAAK2/B,YAClByF,EAAiBplC,KAAK6/B,gBACtB3yB,EAAQlN,KAAKkN,MACjBi4B,EAAWY,mBAAkB,SAAUpjC,EAAGvC,EAAGC,GAC3C,IAAI+B,EAAO8K,EAAMugB,kBAEjB,OADArrB,EAAKurB,eAAezgB,EAAM/I,WACnB/B,EAAKqqC,QAAQrsC,EAAGC,KAAO,gBAAoBsC,EAAGyW,EAAKD,MAE5DgsB,EAAWK,OAAOrsB,EAAYnO,IAAI,SAClCo6B,EAAeC,UAAYlsB,EAAYnO,IAAI,cAC3Co6B,EAAeE,KAAOnsB,EAAY7D,iBAAiBiwB,UACnDJ,EAAW/kB,IAAI,OAAOA,IAAI,QAAQvC,GAAG,OAAO,SAAUlb,GACpDijC,GAAA,KAA2BR,EAAgBziC,EAAEqnB,GAAIrnB,EAAE4nB,IACnDnR,EAAIwG,eAAe,CACjBkoB,SAAU3uB,EAAYtP,GACtBtL,KAAM,WACNyrB,GAAIrnB,EAAEqnB,GACNO,GAAI5nB,EAAE4nB,QAEP1M,GAAG,QAAQ,SAAUlb,GACtBijC,GAAA,KAA4BR,EAAgBziC,EAAE8b,MAAO9b,EAAEkjC,QAASljC,EAAEmjC,SAClE1sB,EAAIwG,eAAe,CACjBkoB,SAAU3uB,EAAYtP,GACtBtL,KAAM,WACN+mC,KAAM3iC,EAAE8b,MACRonB,QAASljC,EAAEkjC,QACXC,QAASnjC,EAAEmjC,UAGbr9B,EAAMwrC,wBAAwB96B,GAG9BC,EAAIo7B,wBAIRf,EAAS3zC,UAAUm0C,wBAA0B,SAAU96B,GACrD,IAAIzD,EAAOyD,EAAYxD,UAEnB8+B,EAAYz0C,KAAK00C,oBAAoBv7B,GAEzCzD,EAAK2K,mBAAkB,SAAUhiB,EAAIof,GACnCpf,EAAGs2C,eAAeF,OAItBhB,EAAS3zC,UAAU40C,oBAAsB,SAAUv7B,GACjD,IAAI9D,EAAW8D,EAAY7D,iBAE3B,GAAsB,SAAlBD,EAAS9W,KACX,OAAO,EAGT,IAAIq2C,EAAiB50C,KAAKg0C,gBACtBa,EAAYx/B,EAASzJ,QAAU,EAE/BkpC,EAAWz/B,EAASkwB,UACpBkP,GAAaK,EAAW,GAAKF,EAAiB,EAClD,OAAOH,EAAYI,GAGrBpB,EAAS3zC,UAAUmU,QAAU,WAC3BjU,KAAK2/B,aAAe3/B,KAAK2/B,YAAY1rB,UACrCjU,KAAK6/B,gBAAkB,MAGzB4T,EAAS3zC,UAAUgO,OAAS,WAC1B9N,KAAK0zC,WAAWv2B,YAEhBnd,KAAKua,MAAQ,MAGfk5B,EAASl1C,KAAO,OACTk1C,EA3MT,CA4MEnzB,GAAA,MAEF,SAASuzB,GAAgBn+B,EAAM0B,GAC7B,IAAI8E,EAASxG,EAAK4B,cAAcF,GAChC,OAAO8E,IAAW/Z,MAAM+Z,EAAO9b,KAAO+B,MAAM+Z,EAAO7b,GAGrD,SAASyzC,GAAWp+B,EAAM0B,EAAW28B,EAAU7mC,EAAOiM,GACpD,IAAIub,GAAUqf,EACVtE,EAAO/5B,EAAKq/B,KAAKC,mBAAmB59B,GACpC4E,EAAYyzB,EAAKv0B,WACjBmU,EAAcogB,EAAKvpB,UAAU,SAASpoB,KACtCm3C,GAAqC,IAAlBxF,EAAKmB,UAA+C,IAAzBnB,EAAKroC,SAAS1M,OAAe20B,EAAc,OACzF6lB,EAAcx/B,EAAKq/B,KAAKtlC,KACxBg8B,EAASgE,EAAK9nC,aAAeutC,EAAczF,EAAOA,EAAK9nC,YAAc8nC,EACrE0F,EAAiBz/B,EAAKoH,iBAAiB2uB,EAAOr0B,WAC9Cg+B,EAAe3J,EAAO71B,YACtBy/B,EAAkBF,EAAiB,CACrC/0C,EAAG+0C,EAAeG,OAClBj1C,EAAG80C,EAAeI,OAClBC,KAAML,EAAeM,gBACrBC,KAAMP,EAAeQ,iBACnBP,EACAQ,EAAenG,EAAK75B,YAEpB8e,GACFqf,EAAW,IAAI8B,GAAA,KAAUngC,EAAM0B,EAAW,KAAM,CAC9C69B,iBAAkBA,EAClBa,cAAc,IAEhB/B,EAAS3zC,EAAIi1C,EAAgBj1C,EAC7B2zC,EAAS1zC,EAAIg1C,EAAgBh1C,GAE7B0zC,EAASllB,WAAWnZ,EAAM0B,EAAW,KAAM,CACzC69B,iBAAkBA,EAClBa,cAAc,IAIlB/B,EAAS0B,gBAAkB1B,EAASgC,aACpChC,EAAS4B,gBAAkB5B,EAASiC,aACpCjC,EAASgC,aAAeH,EAAaJ,KACrCzB,EAASiC,aAAeJ,EAAaF,KACrCxoC,EAAMzF,IAAIssC,GACVr+B,EAAK+G,iBAAiBrF,EAAW28B,GACjCA,EAASuB,OAASvB,EAAS3zC,EAC3B2zC,EAASwB,OAASxB,EAAS1zC,EAC3B4uB,GAAA,eAAoB8kB,EAAU,CAC5B3zC,EAAGw1C,EAAax1C,EAChBC,EAAGu1C,EAAav1C,GACf8Y,GACH,IAAIib,EAAa2f,EAASkC,gBAE1B,GAAkC,WAA9B98B,EAAYnO,IAAI,UAAwB,CAC1C,IAAIkrC,EAAWhB,EAAY9tC,SAAS,GAChC+uC,EAAaD,EAAStgC,YACtBwgC,EAAWF,EAAS9uC,SAAS1M,OAC7Bg3C,OAAM,EACN2E,OAAS,EAEb,GAAIT,EAAax1C,IAAM+1C,EAAW/1C,IAAuB,IAAlBqvC,EAAKmB,SAAmB,CAC7D,IAAI1rC,EAAS,CACX9E,GAAI81C,EAAS9uC,SAAS,GAAGwO,YAAYxV,EAAI81C,EAAS9uC,SAASgvC,EAAW,GAAGxgC,YAAYxV,GAAK,EAC1FC,GAAI61C,EAAS9uC,SAAS,GAAGwO,YAAYvV,EAAI61C,EAAS9uC,SAASgvC,EAAW,GAAGxgC,YAAYvV,GAAK,GAE5FqxC,EAAM30C,KAAK0/B,MAAMv3B,EAAO7E,EAAI81C,EAAW91C,EAAG6E,EAAO9E,EAAI+1C,EAAW/1C,GAE5DsxC,EAAM,IACRA,EAAgB,EAAV30C,KAAKM,GAASq0C,GAGtB2E,EAASnxC,EAAO9E,EAAI+1C,EAAW/1C,EAE3Bi2C,IACF3E,GAAY30C,KAAKM,SAGnBq0C,EAAM30C,KAAK0/B,MAAMmZ,EAAav1C,EAAI81C,EAAW91C,EAAGu1C,EAAax1C,EAAI+1C,EAAW/1C,GAExEsxC,EAAM,IACRA,EAAgB,EAAV30C,KAAKM,GAASq0C,GAGO,IAAzBjC,EAAKroC,SAAS1M,QAAyC,IAAzB+0C,EAAKroC,SAAS1M,SAAkC,IAAlB+0C,EAAKmB,UACnEyF,EAAST,EAAax1C,EAAI+1C,EAAW/1C,EAEjCi2C,IACF3E,GAAY30C,KAAKM,MAGnBg5C,EAAST,EAAax1C,EAAI+1C,EAAW/1C,EAEhCi2C,IACH3E,GAAY30C,KAAKM,KAKvB,IAAIi5C,EAAeD,EAAS,OAAS,QACjCE,EAAmBv6B,EAAUd,SAAS,SACtCiS,EAASopB,EAAiBvrC,IAAI,UAC9BwrC,EAAoBrpB,GAAUpwB,KAAKM,GAAK,KACxCuI,EAAcwuB,EAAW3Q,iBAEzB7d,IACFwuB,EAAWlG,cAAc,CACvBpE,SAAUysB,EAAiBvrC,IAAI,aAAesrC,EAC9C3qC,SAAoB,MAAVwhB,GAAkBukB,EAAM8E,EAClCC,OAAQ,WAEV7wC,EAAYwnB,SAAS,gBAAiB,WAK1C,IAAIqa,EAAQzrB,EAAUhR,IAAI,CAAC,WAAY,UACnC0rC,EAA6B,aAAVjP,EAAuBgI,EAAKkH,sBAAkC,eAAVlP,EAAyBgI,EAAKmH,uBAAyB,KAE9HF,IAEF,gBAAU3C,GAAUtM,MAAQiP,GAG9BG,GAAS19B,EAAas2B,EAAMyF,EAAanB,EAAUsB,EAAiBD,EAAcQ,EAAc1oC,GAE5F6mC,EAAS+C,SACX/C,EAASvL,mBAAqB,SAAUC,GACtC,GAAgB,SAAZA,EAAoB,CAItB,IAAI77B,EAAW6iC,EAAK9nC,YAAc+N,EAAKoH,iBAAiB2yB,EAAK9nC,WAAWyP,WAElExK,GAAYA,EAASmqC,aAAe,SACxC,gBAAchD,EAAS+C,OAAQrO,MAOzC,SAASoO,GAAS19B,EAAas2B,EAAMyF,EAAanB,EAAUsB,EAAiBD,EAAcQ,EAAc1oC,GACvG,IAAI8O,EAAYyzB,EAAKv0B,WACjB87B,EAAY79B,EAAYnO,IAAI,aAC5BkR,EAAS/C,EAAYnO,IAAI,UACzBooC,EAASj6B,EAAY89B,YACrBC,EAAY/9B,EAAYnO,IAAI,CAAC,YAAa,cAC1CmsC,EAAmBh+B,EAAYnO,IAAI,oBACnCmnB,EAAYnW,EAAUd,SAAS,aAAa+Z,eAC5CmiB,EAAOrD,EAAS+C,OAEpB,GAAkB,UAAdE,EACEvH,EAAK9nC,YAAc8nC,EAAK9nC,aAAeutC,IACpCkC,IACHA,EAAOrD,EAAS+C,OAAS,IAAI,QAAoB,CAC/CrzC,MAAO4zC,GAAan7B,EAAQk3B,EAAQ8D,EAAW7B,EAAiBA,MAIpEpmB,GAAA,eAAoBmoB,EAAM,CACxB3zC,MAAO4zC,GAAan7B,EAAQk3B,EAAQ8D,EAAW9B,EAAcQ,IAC5Dz8B,SAEA,GAAkB,aAAd69B,EACT,GAAe,eAAX96B,GACF,GAAIuzB,IAASyF,GAAezF,EAAKroC,UAAqC,IAAzBqoC,EAAKroC,SAAS1M,SAAkC,IAAlB+0C,EAAKmB,SAAmB,CAIjG,IAHA,IAAIxpC,EAAWqoC,EAAKroC,SAChB0rC,EAAc,GAET13C,EAAI,EAAGA,EAAIgM,EAAS1M,OAAQU,IAAK,CACxC,IAAIk8C,EAAclwC,EAAShM,GAAGwa,YAC9Bk9B,EAAYz3C,KAAK,CAACi8C,EAAYl3C,EAAGk3C,EAAYj3C,IAG1C+2C,IACHA,EAAOrD,EAAS+C,OAAS,IAAI,GAAS,CACpCrzC,MAAO,CACLovC,YAAa,CAAC+C,EAAax1C,EAAGw1C,EAAav1C,GAC3CyyC,YAAa,CAAC,CAAC8C,EAAax1C,EAAGw1C,EAAav1C,IAC5C+yC,OAAQA,EACRG,aAAc4D,MAKpBloB,GAAA,eAAoBmoB,EAAM,CACxB3zC,MAAO,CACLovC,YAAa,CAAC+C,EAAax1C,EAAGw1C,EAAav1C,GAC3CyyC,YAAaA,IAEd35B,SAGD,EAMJi+B,IACFA,EAAKv7B,SAAS,cAAgB,CAC5B3c,eAAe,EACfpB,KAAM,MACLq0B,IACH,gBAAyBilB,EAAMp7B,EAAW,aAC1C,gBAAqBo7B,GACrBlqC,EAAMzF,IAAI2vC,IAId,SAAS,GAAW1hC,EAAM0B,EAAW28B,EAAU7mC,EAAOiM,GACpD,IAIIi8B,EAJA3F,EAAO/5B,EAAKq/B,KAAKC,mBAAmB59B,GACpC89B,EAAcx/B,EAAKq/B,KAAKtlC,KACxBg8B,EAASgE,EAAK9nC,aAAeutC,EAAczF,EAAOA,EAAK9nC,YAAc8nC,EAIzE,MAAO2F,EAAe3J,EAAO71B,YAA6B,MAAhBw/B,EACxC3J,EAASA,EAAO9jC,aAAeutC,EAAczJ,EAASA,EAAO9jC,YAAc8jC,EAI7E,IAAI8L,EAAqB,CACvBp3B,SAAUhH,EAAYnO,IAAI,2BAC1BwsC,OAAQr+B,EAAYnO,IAAI,0BAE1BikB,GAAA,iBAAsB8kB,EAAU,CAC9B3zC,EAAGg1C,EAAah1C,EAAI,EACpBC,EAAG+0C,EAAa/0C,EAAI,GACnB8Y,EAAa,CACdo4B,GAAI,WACFrkC,EAAMY,OAAOimC,GACbr+B,EAAK+G,iBAAiBrF,EAAW,OAEnCqgC,UAAWF,IAEbxD,EAAS2D,QAAQ,KAAM,CACrBC,WAAW,EACXz3B,UAAWq3B,IAEb,IAAIpC,EAAiBz/B,EAAKoH,iBAAiB2uB,EAAOr0B,WAC9CwgC,EAAazC,EAAe2B,OAK5BM,EAAOrD,EAAS+C,UAA+B,IAApBrL,EAAOmF,UAAiD,IAA3BnF,EAAOrkC,SAAS1M,OAAek9C,OAAa97C,GACpGk7C,EAAY79B,EAAYnO,IAAI,aAC5B6sC,EAAY1+B,EAAYnO,IAAI,UAC5BooC,EAASj6B,EAAYnO,IAAI,UACzBksC,EAAY/9B,EAAYnO,IAAI,CAAC,YAAa,cAE1CosC,IACgB,UAAdJ,EACF/nB,GAAA,iBAAsBmoB,EAAM,CAC1B3zC,MAAO4zC,GAAaQ,EAAWzE,EAAQ8D,EAAW9B,EAAcA,GAChEt7C,MAAO,CACL+E,QAAS,IAEVsa,EAAa,CACdo4B,GAAI,WACFrkC,EAAMY,OAAOspC,IAEfK,UAAWF,IAEU,aAAdP,GAA0D,eAA9B79B,EAAYnO,IAAI,WACrDikB,GAAA,iBAAsBmoB,EAAM,CAC1B3zC,MAAO,CACLovC,YAAa,CAACuC,EAAah1C,EAAGg1C,EAAa/0C,GAC3CyyC,YAAa,CAAC,CAACsC,EAAah1C,EAAGg1C,EAAa/0C,KAE9CvG,MAAO,CACL+E,QAAS,IAEVsa,EAAa,CACdo4B,GAAI,WACFrkC,EAAMY,OAAOspC,IAEfK,UAAWF,KAMnB,SAASF,GAAaQ,EAAWzE,EAAQ8D,EAAW9B,EAAcQ,GAChE,IAAIkC,EACAC,EACAC,EACAC,EACAhrB,EACAxsB,EACAysB,EACAxsB,EAEJ,GAAkB,WAAdm3C,EAAwB,CAC1B5qB,EAAKmoB,EAAaI,KAClBtoB,EAAKkoB,EAAaM,KAClBj1C,EAAKm1C,EAAaJ,KAClB90C,EAAKk1C,EAAaF,KAClB,IAAIwC,EAAczG,GAAiBxkB,EAAIC,GACnCirB,EAAc1G,GAAiBxkB,EAAIC,GAAMxsB,EAAKwsB,GAAMgqB,GACpDkB,EAAc3G,GAAiBhxC,EAAIC,GAAMwsB,EAAKxsB,GAAMw2C,GACpDmB,EAAc5G,GAAiBhxC,EAAIC,GACvC,MAAO,CACLusB,GAAIirB,EAAY93C,GAAK,EACrB8sB,GAAIgrB,EAAY73C,GAAK,EACrBI,GAAI43C,EAAYj4C,GAAK,EACrBM,GAAI23C,EAAYh4C,GAAK,EACrBy3C,KAAMK,EAAY/3C,GAAK,EACvB23C,KAAMI,EAAY93C,GAAK,EACvB23C,KAAMI,EAAYh4C,GAAK,EACvB63C,KAAMG,EAAY/3C,GAAK,GAuB3B,OApBE4sB,EAAKmoB,EAAah1C,EAClB8sB,EAAKkoB,EAAa/0C,EAClBI,EAAKm1C,EAAax1C,EAClBM,EAAKk1C,EAAav1C,EAEH,OAAX+yC,GAA8B,OAAXA,IACrB0E,EAAO7qB,GAAMxsB,EAAKwsB,GAAMiqB,EACxBa,EAAO7qB,EACP8qB,EAAOv3C,GAAMwsB,EAAKxsB,GAAMy2C,EACxBe,EAAOv3C,GAGM,OAAX0yC,GAA8B,OAAXA,IACrB0E,EAAO7qB,EACP8qB,EAAO7qB,GAAMxsB,EAAKwsB,GAAMgqB,EACxBc,EAAOv3C,EACPw3C,EAAOv3C,GAAMwsB,EAAKxsB,GAAMw2C,GAIrB,CACLjqB,GAAIA,EACJC,GAAIA,EACJzsB,GAAIA,EACJC,GAAIA,EACJo3C,KAAMA,EACNC,KAAMA,EACNC,KAAMA,EACNC,KAAMA,GAIK,U,uCCrnBX,GAEJ,WACE,SAASK,EAASt+C,EAAMu+C,GACtBv4C,KAAKw4C,MAAQ,EACbx4C,KAAK6E,OAAS,EASd7E,KAAKoX,WAAa,EAClBpX,KAAKoH,SAAW,GAChBpH,KAAKy4C,aAAe,GACpBz4C,KAAK4wC,UAAW,EAChB5wC,KAAKhG,KAAOA,GAAQ,GACpBgG,KAAKu4C,SAAWA,EAoNlB,OA7MAD,EAASx4C,UAAU44C,UAAY,WAC7B,OAAO14C,KAAKoX,UAAY,GAG1BkhC,EAASx4C,UAAU64C,SAAW,SAAUC,EAASrH,EAAIsH,GAC5B,oBAAZD,IACTC,EAAUtH,EACVA,EAAKqH,EACLA,EAAU,MAGZA,EAAUA,GAAW,GAEjB,cAAgBA,KAClBA,EAAU,CACRE,MAAOF,IAIX,IAEIG,EAFAD,EAAQF,EAAQE,OAAS,WACzB1xC,EAAWpH,KAAK44C,EAAQx6C,MAAQ,YAE1B,aAAV06C,IAAyBC,EAAmBxH,EAAGloC,KAAKwvC,EAAS74C,OAE7D,IAAK,IAAI5E,EAAI,GAAI29C,GAAoB39C,EAAIgM,EAAS1M,OAAQU,IACxDgM,EAAShM,GAAGu9C,SAASC,EAASrH,EAAIsH,GAG1B,cAAVC,GAAyBvH,EAAGloC,KAAKwvC,EAAS74C,OAO5Cs4C,EAASx4C,UAAUk5C,qBAAuB,SAAUR,GAClD,IAAI3zC,EAAS,EACb7E,KAAKw4C,MAAQA,EAEb,IAAK,IAAIp9C,EAAI,EAAGA,EAAI4E,KAAKoH,SAAS1M,OAAQU,IAAK,CAC7C,IAAI8T,EAAQlP,KAAKoH,SAAShM,GAC1B8T,EAAM8pC,qBAAqBR,EAAQ,GAE/BtpC,EAAMrK,OAASA,IACjBA,EAASqK,EAAMrK,QAInB7E,KAAK6E,OAASA,EAAS,GAGzByzC,EAASx4C,UAAUm5C,YAAc,SAAUpvC,GACzC,GAAI7J,KAAKk5C,UAAYrvC,EACnB,OAAO7J,KAGT,IAAK,IAAI5E,EAAI,EAAGgM,EAAWpH,KAAKoH,SAAUiD,EAAMjD,EAAS1M,OAAQU,EAAIiP,EAAKjP,IAAK,CAC7E,IAAI60C,EAAM7oC,EAAShM,GAAG69C,YAAYpvC,GAElC,GAAIomC,EACF,OAAOA,IAKbqI,EAASx4C,UAAUqH,SAAW,SAAUsoC,GACtC,GAAIA,IAASzvC,KACX,OAAO,EAGT,IAAK,IAAI5E,EAAI,EAAGgM,EAAWpH,KAAKoH,SAAUiD,EAAMjD,EAAS1M,OAAQU,EAAIiP,EAAKjP,IAAK,CAC7E,IAAI60C,EAAM7oC,EAAShM,GAAG+L,SAASsoC,GAE/B,GAAIQ,EACF,OAAOA,IAUbqI,EAASx4C,UAAUq5C,aAAe,SAAUC,GAC1C,IAAIC,EAAY,GACZ5J,EAAO2J,EAAcp5C,KAAOA,KAAK2H,WAErC,MAAO8nC,EACL4J,EAAUh+C,KAAKo0C,GACfA,EAAOA,EAAK9nC,WAId,OADA0xC,EAAU3d,UACH2d,GAGTf,EAASx4C,UAAU62C,oBAAsB,WACvC,IAAIx7C,EAAU,GACVm+C,EAAWt5C,KAEf,MAAOs5C,EACLn+C,EAAQE,KAAKi+C,EAASliC,WACtBkiC,EAAWA,EAAS3xC,WAItB,OADAxM,EAAQugC,UACDvgC,GAGTm9C,EAASx4C,UAAU82C,qBAAuB,WACxC,IAAIz7C,EAAU,GAId,OAHA6E,KAAK24C,UAAS,SAAUY,GACtBp+C,EAAQE,KAAKk+C,EAAUniC,cAElBjc,GAGTm9C,EAASx4C,UAAU05C,SAAW,SAAUC,GACtC,IAAI/jC,EAAO1V,KAAKu4C,SAAS7iC,KACzB,OAAOA,EAAK1K,IAAI0K,EAAKgkC,aAAaD,GAAa,SAAUz5C,KAAKoX,YAGhEkhC,EAASx4C,UAAU8oB,UAAY,SAAU1M,EAAQy9B,GAC/C35C,KAAKoX,WAAa,GAAKpX,KAAKu4C,SAAS7iC,KAAKoT,cAAc9oB,KAAKoX,UAAW8E,EAAQy9B,IAOlFrB,EAASx4C,UAAU8V,UAAY,WAC7B,OAAO5V,KAAKu4C,SAAS7iC,KAAK4B,cAActX,KAAKoX,YAK/CkhC,EAASx4C,UAAUob,SAAW,SAAUxe,GACtC,KAAIsD,KAAKoX,UAAY,GAArB,CAIA,IAAImhC,EAAWv4C,KAAKu4C,SAChBv8B,EAAYu8B,EAAS7iC,KAAKuG,aAAajc,KAAKoX,WAChD,OAAO4E,EAAUd,SAASxe,KAI5B47C,EAASx4C,UAAU85C,cAAgB,WACjC,OAAQ55C,KAAKu4C,SAASsB,aAAe,IAAI75C,KAAKw4C,QAGhDF,EAASx4C,UAAUk/B,UAAY,SAAU1gC,EAAK0K,GAC5ChJ,KAAKoX,WAAa,GAAKpX,KAAKu4C,SAAS7iC,KAAKqpB,cAAc/+B,KAAKoX,UAAW9Y,EAAK0K,IAQ/EsvC,EAASx4C,UAAUomB,UAAY,SAAU5nB,GACvC,OAAO0B,KAAKu4C,SAAS7iC,KAAKmN,cAAc7iB,KAAKoX,UAAW9Y,IAG1Dg6C,EAASx4C,UAAUg6C,YAAc,WAC/B,OAAO95C,KAAKu4C,SAAS7iC,KAAKokC,YAAY95C,KAAKoX,YAG7CkhC,EAASx4C,UAAUo5C,MAAQ,WACzB,OAAOl5C,KAAKu4C,SAAS7iC,KAAKwjC,MAAMl5C,KAAKoX,YAUvCkhC,EAASx4C,UAAUi6C,aAAe,SAAUtK,GAC1C,IAAIxgC,EAASwgC,EAAK9nC,WAElB,MAAOsH,EAAQ,CACb,GAAIA,IAAWjP,KACb,OAAO,EAGTiP,EAASA,EAAOtH,WAGlB,OAAO,GAUT2wC,EAASx4C,UAAUk6C,eAAiB,SAAUvK,GAC5C,OAAOA,IAASzvC,MAAQyvC,EAAKsK,aAAa/5C,OAGrCs4C,EArOT,GA2OI,GAEJ,WACE,SAAS2B,EAAKlrB,GACZ/uB,KAAKzB,KAAO,OACZyB,KAAKk6C,OAAS,GACdl6C,KAAK+uB,UAAYA,EAmGnB,OAhGAkrB,EAAKn6C,UAAU64C,SAAW,SAAUC,EAASrH,EAAIsH,GAC/C74C,KAAKyP,KAAKkpC,SAASC,EAASrH,EAAIsH,IAGlCoB,EAAKn6C,UAAUk1C,mBAAqB,SAAU59B,GAC5C,IAAI+iC,EAAWn6C,KAAK0V,KAAKokC,YAAY1iC,GACrC,OAAOpX,KAAKk6C,OAAOC,IAGrBF,EAAKn6C,UAAUm5C,YAAc,SAAUj/C,GACrC,OAAOgG,KAAKyP,KAAKwpC,YAAYj/C,IAQ/BigD,EAAKn6C,UAAUkK,OAAS,WAItB,IAHA,IAAI0L,EAAO1V,KAAK0V,KACZi7B,EAAQ3wC,KAAKk6C,OAER9+C,EAAI,EAAGiP,EAAMsmC,EAAMj2C,OAAQU,EAAIiP,EAAKjP,IAC3Cu1C,EAAMv1C,GAAGgc,WAAa,EAGxB,IAAShc,EAAI,EAAGiP,EAAMqL,EAAKpa,QAASF,EAAIiP,EAAKjP,IAC3Cu1C,EAAMj7B,EAAKokC,YAAY1+C,IAAIgc,UAAYhc,GAQ3C6+C,EAAKn6C,UAAUs6C,aAAe,WAC5Bp6C,KAAK0V,KAAK2kC,oBAmBZJ,EAAKK,WAAa,SAAUC,EAAUxrB,EAAWyrB,GAC/C,IAAIzF,EAAO,IAAIkF,EAAKlrB,GAChB0rB,EAAW,GACXC,EAAS,EAGb,SAASC,EAAeC,EAAUjzC,GAChC,IAAIqB,EAAQ4xC,EAAS5xC,MACrB0xC,EAAS39C,KAAKub,IAAIoiC,EAAQ,aAAe1xC,GAASA,EAAMtO,OAAS,GACjE+/C,EAASp/C,KAAKu/C,GACd,IAAInL,EAAO,IAAI,GAAS,gBAAoBmL,EAAS5gD,KAAM,IAAK+6C,GAChEptC,EAAakzC,GAASpL,EAAM9nC,GAAcotC,EAAKtlC,KAAOggC,EAEtDsF,EAAKmF,OAAO7+C,KAAKo0C,GAEjB,IAAIroC,EAAWwzC,EAASxzC,SAExB,GAAIA,EACF,IAAK,IAAIhM,EAAI,EAAGA,EAAIgM,EAAS1M,OAAQU,IACnCu/C,EAAevzC,EAAShM,GAAIq0C,GAflCkL,EAAeJ,GAoBfxF,EAAKtlC,KAAKupC,qBAAqB,GAC/B,IAAI8B,EAAiB,OAAAC,GAAA,MAAiBN,EAAU,CAC9C1pB,gBAAiB,CAAC,SAClBiqB,gBAAiBN,IAEflpC,EAAO,IAAIypC,GAAA,KAAKH,EAAgB/rB,GASpC,OARAvd,EAAK0pC,SAAST,GACdD,GAAcA,EAAWhpC,GACzB,OAAA2pC,GAAA,MAAS,CACPC,SAAU5pC,EACV6pC,OAAQtG,EACRuG,WAAY,SAEdvG,EAAK/qC,SACE+qC,GAGFkF,EAvGT,GA+GA,SAASY,GAAS3rC,EAAOugC,GACvB,IAAIroC,EAAWqoC,EAAKroC,SAEhB8H,EAAMvH,aAAe8nC,IAIzBroC,EAAS/L,KAAK6T,GACdA,EAAMvH,WAAa8nC,GAGN,UC7WX,GAEJ,SAAUtmC,GAGR,SAASoyC,IACP,IAAI9yC,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAKhE,OAHAyI,EAAM0tB,iBAAkB,EAExB1tB,EAAM+yC,mBAAoB,EACnB/yC,EA0IT,OAlJA,gBAAU8yC,EAAiBpyC,GAiB3BoyC,EAAgBz7C,UAAUgV,eAAiB,SAAUC,GAEnD,IAAItF,EAAO,CACTzV,KAAM+a,EAAO/a,KACboN,SAAU2N,EAAOW,MAEf+lC,EAAS1mC,EAAO0mC,QAAU,GAC1BC,EAAc,IAAI3iB,GAAA,KAAM0iB,EAAQz7C,KAAMA,KAAKgV,SAC3C+/B,EAAO,GAAKuF,WAAW7qC,EAAMzP,KAAMw6C,GAEvC,SAASA,EAAWmB,GAClBA,EAASC,WAAW,gBAAgB,SAAUt/B,EAAOmB,GACnD,IAAIgyB,EAAOsF,EAAKC,mBAAmBv3B,GAMnC,OAJKgyB,EAAKroC,SAAS1M,QAAW+0C,EAAKmB,WACjCt0B,EAAM+Y,YAAcqmB,GAGfp/B,KAIX,IAAIu/B,EAAY,EAChB9G,EAAK4D,SAAS,YAAY,SAAUlJ,GAC9BA,EAAK+I,MAAQqD,IACfA,EAAYpM,EAAK+I,UAGrB,IAAIsD,EAAoB/mC,EAAO+mC,kBAC3BC,EAAkBD,GAAqB/mC,EAAOinC,kBAAoB,EAAIjnC,EAAOinC,iBAAmBH,EAMpG,OALA9G,EAAKtlC,KAAKkpC,SAAS,YAAY,SAAUlJ,GACvC,IAAIx8B,EAAOw8B,EAAK8I,SAAS7iC,KAAKumC,eAAexM,EAAKr4B,WAElDq4B,EAAKmB,SAAW39B,GAA0B,MAAlBA,EAAKipC,WAAqBjpC,EAAKipC,UAAYzM,EAAK+I,OAASuD,KAE5EhH,EAAKr/B,MAQd6lC,EAAgBz7C,UAAUm3C,UAAY,WACpC,IAAI7D,EAASpzC,KAAKgL,IAAI,UAQtB,MANe,eAAXooC,EACFA,EAAS,KACW,aAAXA,IACTA,EAAS,MAGJA,GAGTmI,EAAgBz7C,UAAU0pC,QAAU,SAAUlE,GAC5CtlC,KAAK+U,OAAOuwB,KAAOA,GAGrBiW,EAAgBz7C,UAAU2pC,UAAY,SAAUvkC,GAC9ClF,KAAK+U,OAAO7P,OAASA,GAGvBq2C,EAAgBz7C,UAAUy2B,cAAgB,SAAUnf,EAAWof,EAAgBC,GAC7E,IAAIse,EAAO/0C,KAAK2V,UAAUo/B,KACtBmB,EAAWnB,EAAKtlC,KAAKrI,SAAS,GAC9BqoC,EAAOsF,EAAKC,mBAAmB59B,GAC/BpO,EAAQymC,EAAK+J,WACbx/C,EAAOy1C,EAAKz1C,KAEhB,MAAOy1C,GAAQA,IAASyG,EACtBl8C,EAAOy1C,EAAK9nC,WAAW3N,KAAO,IAAMA,EACpCy1C,EAAOA,EAAK9nC,WAGd,OAAO,gBAAoB,YAAa,CACtC3N,KAAMA,EACNgP,MAAOA,EACPmzC,QAASh6C,MAAM6G,IAAmB,MAATA,KAI7BuyC,EAAgBh9C,KAAO,cAGvBg9C,EAAgBxR,WAAa,MAC7BwR,EAAgBrlC,cAAgB,CAC9BC,OAAQ,EACRC,EAAG,EACHd,iBAAkB,OAElBtQ,KAAM,MACN4sB,IAAK,MACL3sB,MAAO,MACP4sB,OAAQ,MAER3V,OAAQ,aAER86B,UAAW,QACXG,iBAAkB,MAElBrW,MAAM,EAEN8T,eAAgB,GAEhB1vC,OAAQ,KACRogC,KAAM,EACN8N,OAAQ,KACRzJ,OAAQ,cACR3V,WAAY,EACZ8nB,mBAAmB,EACnBE,iBAAkB,EAClB7pB,UAAW,CACT3nB,MAAO,OACP7F,MAAO,IACPy3C,UAAW,IAEbnkC,UAAW,CACTzN,MAAO,iBAEPqN,YAAa,KAEf2L,MAAO,CACLgO,MAAM,GAERoB,gBAAiB,SACjBJ,kBAAmB,IACnBG,wBAAyB,KAEpB4oB,EAnJT,CAoJE5kC,GAAA,MAEa0lC,GAAA,GC1Jf,SAASC,GAAU7sC,EAAM8sC,EAAUxL,GACjC,IAEItB,EAFAkB,EAAQ,CAAClhC,GACT+sC,EAAO,GAGX,MAAO/M,EAAOkB,EAAMnjC,MAIlB,GAFAgvC,EAAKnhD,KAAKo0C,GAENA,EAAKmB,SAAU,CACjB,IAAIxpC,EAAWqoC,EAAKroC,SAEpB,GAAIA,EAAS1M,OACX,IAAK,IAAIU,EAAI,EAAGA,EAAIgM,EAAS1M,OAAQU,IACnCu1C,EAAMt1C,KAAK+L,EAAShM,IAM5B,MAAOq0C,EAAO+M,EAAKhvC,MAEjB+uC,EAAS9M,EAAMsB,GAQnB,SAAS0L,GAAWhtC,EAAM8sC,GACxB,IACI9M,EADAkB,EAAQ,CAAClhC,GAGb,MAAOggC,EAAOkB,EAAMnjC,MAIlB,GAFA+uC,EAAS9M,GAELA,EAAKmB,SAAU,CACjB,IAAIxpC,EAAWqoC,EAAKroC,SAEpB,GAAIA,EAAS1M,OACX,IAAK,IAAIU,EAAIgM,EAAS1M,OAAS,EAAGU,GAAK,EAAGA,IACxCu1C,EAAMt1C,KAAK+L,EAAShM,KC7Cf,SAASshD,GAAW1nC,EAASoE,GAC1CpE,EAAQ4S,iBAAiB,QAAQ,SAAUzO,GACzCwjC,GAAaxjC,EAAaC,MAI9B,SAASujC,GAAaxjC,EAAaC,GACjC,IAAIu6B,EAAa,GAAYx6B,EAAaC,GAC1CD,EAAYw6B,WAAaA,EACzB,IAAIz3B,EAAS/C,EAAYnO,IAAI,UACzBrG,EAAQ,EACRE,EAAS,EACTksC,EAAa,KAEF,WAAX70B,GACFvX,EAAQ,EAAI5H,KAAKM,GACjBwH,EAAS9H,KAAKyb,IAAIm7B,EAAW9uC,OAAQ8uC,EAAWhvC,OAAS,EACzDosC,EAAa,IAAI,SAAU2B,EAAOC,GAChC,OAAQD,EAAM/qC,aAAegrC,EAAMhrC,WAAa,EAAI,GAAK+qC,EAAM8F,WAGjE7zC,EAAQgvC,EAAWhvC,MACnBE,EAAS8uC,EAAW9uC,OACpBksC,EAAa,MAGf,IAAImE,EAAc/7B,EAAYxD,UAAUo/B,KAAKtlC,KACzCymC,EAAWhB,EAAY9tC,SAAS,GAEpC,GAAI8uC,EAAU,CACZrmB,GAAKqlB,GACLoH,GAAUpG,EAAUpF,GAAWC,GAC/BmE,EAAY/E,SAASI,UAAY2F,EAAS/F,SAASG,OACnDmM,GAAWvG,EAAU7E,IACrB,IAAIuL,EAAS1G,EACT2G,EAAU3G,EACV4G,EAAW5G,EACfuG,GAAWvG,GAAU,SAAUzG,GAC7B,IAAIrvC,EAAIqvC,EAAK75B,YAAYxV,EAErBA,EAAIw8C,EAAOhnC,YAAYxV,IACzBw8C,EAASnN,GAGPrvC,EAAIy8C,EAAQjnC,YAAYxV,IAC1By8C,EAAUpN,GAGRA,EAAK+I,MAAQsE,EAAStE,QACxBsE,EAAWrN,MAGf,IAAIsN,EAAQH,IAAWC,EAAU,EAAI9L,EAAW6L,EAAQC,GAAW,EAC/DG,EAAOD,EAAQH,EAAOhnC,YAAYxV,EAClC68C,EAAO,EACPC,EAAO,EACPC,EAAU,EACVC,EAAU,EAEd,GAAe,WAAXlhC,EACF+gC,EAAOt4C,GAASk4C,EAAQjnC,YAAYxV,EAAI28C,EAAQC,GAEhDE,EAAOr4C,GAAUi4C,EAAStE,MAAQ,GAAK,GACvCiE,GAAWvG,GAAU,SAAUzG,GAC7B0N,GAAW1N,EAAK75B,YAAYxV,EAAI48C,GAAQC,EACxCG,GAAW3N,EAAK+I,MAAQ,GAAK0E,EAC7B,IAAIG,EAAY5L,GAAiB0L,EAASC,GAC1C3N,EAAK7mB,UAAU,CACbxoB,EAAGi9C,EAAUj9C,EACbC,EAAGg9C,EAAUh9C,EACbm1C,KAAM2H,EACNzH,KAAM0H,IACL,UAEA,CACL,IAAIE,EAAWnkC,EAAY89B,YAEV,OAAbqG,GAAkC,OAAbA,GACvBJ,EAAOr4C,GAAUg4C,EAAQjnC,YAAYxV,EAAI28C,EAAQC,GACjDC,EAAOt4C,GAASm4C,EAAStE,MAAQ,GAAK,GACtCiE,GAAWvG,GAAU,SAAUzG,GAC7B2N,GAAW3N,EAAK75B,YAAYxV,EAAI48C,GAAQE,EACxCC,EAAuB,OAAbG,GAAqB7N,EAAK+I,MAAQ,GAAKyE,EAAOt4C,GAAS8qC,EAAK+I,MAAQ,GAAKyE,EACnFxN,EAAK7mB,UAAU,CACbxoB,EAAG+8C,EACH98C,EAAG+8C,IACF,OAEiB,OAAbE,GAAkC,OAAbA,IAC9BL,EAAOt4C,GAASk4C,EAAQjnC,YAAYxV,EAAI28C,EAAQC,GAChDE,EAAOr4C,GAAUi4C,EAAStE,MAAQ,GAAK,GACvCiE,GAAWvG,GAAU,SAAUzG,GAC7B0N,GAAW1N,EAAK75B,YAAYxV,EAAI48C,GAAQC,EACxCG,EAAuB,OAAbE,GAAqB7N,EAAK+I,MAAQ,GAAK0E,EAAOr4C,GAAU4qC,EAAK+I,MAAQ,GAAK0E,EACpFzN,EAAK7mB,UAAU,CACbxoB,EAAG+8C,EACH98C,EAAG+8C,IACF,SClGE,SAASG,GAAWvoC,GACjCA,EAAQ4S,iBAAiB,QAAQ,SAAUzO,GACzC,IAAIzD,EAAOyD,EAAYxD,UACnBo/B,EAAOr/B,EAAKq/B,KAChBA,EAAK4D,UAAS,SAAUlJ,GACtB,IAAInzB,EAAQmzB,EAAKv0B,WAEbphB,EAAQwiB,EAAMpB,SAAS,aAAaY,eACpC0hC,EAAc9nC,EAAK+nC,uBAAuBhO,EAAKr4B,UAAW,SAC9D,oBAAOomC,EAAa1jD,SCTnB,SAAS4jD,GAAkBhpC,GAChCA,EAAUsS,eAAe,CACvBzoB,KAAM,wBACN6mB,MAAO,wBACPpb,OAAQ,WACP,SAAUqP,EAASrE,GACpBA,EAAQiS,cAAc,CACpBC,SAAU,SACVkZ,QAAS,OACTjZ,MAAO9N,IACN,SAAUF,GACX,IAAI/B,EAAYiC,EAAQjC,UACpB29B,EAAO57B,EAAYxD,UAAUo/B,KAC7BtF,EAAOsF,EAAKC,mBAAmB59B,GACnCq4B,EAAKmB,UAAYnB,EAAKmB,eAG1Bl8B,EAAUsS,eAAe,CACvBzoB,KAAM,WACN6mB,MAAO,WAKPpb,OAAQ,SACP,SAAUqP,EAASrE,GACpBA,EAAQiS,cAAc,CACpBC,SAAU,SACVkZ,QAAS,OACTjZ,MAAO9N,IACN,SAAUF,GACX,IAAI9D,EAAW8D,EAAY7D,iBACvB26B,EAAM,gBAAoB56B,EAAUgE,GACxCF,EAAYswB,WAAatwB,EAAYswB,UAAUwG,EAAI/qC,QACnDiU,EAAYqwB,SAAWrwB,EAAYqwB,QAAQyG,EAAI3K,YC9B9C,SAAS,GAAQ5wB,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoB+1B,IAC9B3nC,EAAU6R,eAAem2B,IACzBhoC,EAAUoqB,eAAeye,IACzBG,GAAkBhpC,GCTb,SAASipC,GAAmBtkC,EAASukC,EAAmBzkC,GAC7D,GAAIE,GAAW,aAAeukC,EAAmBvkC,EAAQ9a,OAAS,EAAG,CACnE,IAAIkR,EAAO0J,EAAYxD,UAAUo/B,KAAKtlC,KAClCouC,EAAaxkC,EAAQwkC,WAMzB,GAJ0B,kBAAfA,IACTA,EAAapuC,EAAKwpC,YAAY4E,IAG5BA,GAAcpuC,EAAKtI,SAAS02C,GAC9B,MAAO,CACLpO,KAAMoO,GAIV,IAAIC,EAAezkC,EAAQykC,aAE3B,GAAoB,MAAhBA,IAAyBD,EAAapuC,EAAKwpC,YAAY6E,IACzD,MAAO,CACLrO,KAAMoO,IAMP,SAASE,GAActO,GAC5B,IAAI/yC,EAAO,GAEX,MAAO+yC,EACLA,EAAOA,EAAK9nC,WACZ8nC,GAAQ/yC,EAAKrB,KAAKo0C,GAGpB,OAAO/yC,EAAKg/B,UAEP,SAASsiB,GAAcC,EAAUxO,GACtC,IAAIyO,EAAWH,GAAcE,GAC7B,OAAO,aAAeC,EAAUzO,IAAS,EAGpC,SAAS0O,GAAiB1O,EAAMt2B,GACrC,IAAIilC,EAAe,GAEnB,MAAO3O,EAAM,CACX,IAAI4O,EAAgB5O,EAAKr4B,UACzBgnC,EAAa/iD,KAAK,CAChBrB,KAAMy1C,EAAKz1C,KACXod,UAAWinC,EACXr1C,MAAOmQ,EAAYuK,YAAY26B,KAEjC5O,EAAOA,EAAK9nC,WAId,OADAy2C,EAAa1iB,UACN0iB,ECrDT,IAAIE,GAAO,aAEPC,GAAc,CAAC,oBAAqB,gBAAiB,eAClD,SAASC,GAAqB9pC,GACnC,IAAK,IAAItZ,EAAI,EAAGA,EAAImjD,GAAY7jD,OAAQU,IACtCsZ,EAAUsS,eAAe,CACvBzoB,KAAMggD,GAAYnjD,GAClB4O,OAAQ,cACPs0C,IAGL5pC,EAAUsS,eAAe,CACvBzoB,KAAM,oBACNyL,OAAQ,eACP,SAAUqP,EAASrE,GAOpB,SAASypC,EAAiBniC,EAAOyD,GAC/B,IAAI2+B,EAAQ,CAAC,oBAAqB,qBAC9BC,EAAa,GAA0BtlC,EAASqlC,EAAOpiC,GAE3D,GAAIqiC,EAAY,CACd,IAAIC,EAAiBtiC,EAAMuiC,cAEvBD,IACFvlC,EAAQylC,UAAY,GAAqBF,EAAgBD,EAAWlP,MAAQ,SAAW,aAGzFnzB,EAAMyiC,cAAcJ,EAAWlP,OAjBnCz6B,EAAQiS,cAAc,CACpBC,SAAU,SACVkZ,QAAS,UACTjZ,MAAO9N,GACNolC,M,iBCpBQ,SAASO,GAAuB7lC,GAC7C,IAAIzD,EAAOyD,EAAYxD,UACnBo/B,EAAOr/B,EAAKq/B,KACZkK,EAAoB,GACxBlK,EAAK4D,UAAS,SAAUlJ,GAEtB,IAAIF,EAAUE,EAEd,MAAOF,GAAWA,EAAQiJ,MAAQ,EAChCjJ,EAAUA,EAAQ5nC,WAGpB,IAAI+tB,EAAQ,gBAAoBvc,EAAYnE,QAASu6B,EAAQv1C,MAAQu1C,EAAQn4B,UAAY,GAAI6nC,GAC7FxP,EAAKzQ,UAAU,QAAStJ,MCJ5B,IAAI,GAEJ,SAAUvsB,GAGR,SAAS+1C,IACP,IAAIz2C,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAO2gD,EAAmB3gD,KAChCkK,EAAM02C,wBAAyB,EACxB12C,EA6QT,OApRA,gBAAUy2C,EAAoB/1C,GAc9B+1C,EAAmBp/C,UAAUgV,eAAiB,SAAUC,EAAQC,GAE9D,IAAIvF,EAAO,CACTzV,KAAM+a,EAAO/a,KACboN,SAAU2N,EAAOW,MAEnB0pC,GAAkB3vC,GAClB,IAAI4vC,EAAStqC,EAAOsqC,QAAU,GAK1BC,EAA4Bt/C,KAAKs/C,0BAA4B,GAC7DC,EAAwB,IAAIxmB,GAAA,KAAM,CACpC9gB,UAAWqnC,GACVt/C,KAAMgV,GACTqqC,EAAStqC,EAAOsqC,OAASG,GAAWH,EAAQrqC,GAC5C,IAAI6kC,EAAc,SAAWwF,GAAU,IAAI,SAAUI,GACnD,OAAO,IAAI1mB,GAAA,KAAM0mB,EAAaF,EAAuBvqC,KACpDhV,MAIC+0C,EAAO,GAAKuF,WAAW7qC,EAAMzP,KAAMw6C,GAEvC,SAASA,EAAWmB,GAClBA,EAASC,WAAW,gBAAgB,SAAUt/B,EAAOmB,GACnD,IAAIgyB,EAAOsF,EAAKC,mBAAmBv3B,GAC/BiiC,EAAa7F,EAAYpK,EAAK+I,OAGlC,OADAl8B,EAAM+Y,YAAcqqB,GAAcH,EAC3BjjC,KAIX,OAAOy4B,EAAKr/B,MAGdwpC,EAAmBp/C,UAAUg4B,cAAgB,WAC3C93B,KAAK++C,iBASPG,EAAmBp/C,UAAUy2B,cAAgB,SAAUnf,EAAWof,EAAgBC,GAChF,IAAI/gB,EAAO1V,KAAK2V,UACZ3M,EAAQhJ,KAAK0jB,YAAYtM,GACzBpd,EAAO0b,EAAK4T,QAAQlS,GACxB,OAAO,gBAAoB,YAAa,CACtCpd,KAAMA,EACNgP,MAAOA,KAYXk2C,EAAmBp/C,UAAUmxB,cAAgB,SAAU7Z,GACrD,IAAI6C,EAAS9Q,EAAOrJ,UAAUmxB,cAAcpc,MAAM7U,KAAM8C,WAEpD2sC,EAAOzvC,KAAK2V,UAAUo/B,KAAKC,mBAAmB59B,GAElD,OADA6C,EAAOmkC,aAAeD,GAAiB1O,EAAMzvC,MACtCia,GAaTilC,EAAmBp/C,UAAU6/C,cAAgB,SAAUhM,GAKrD3zC,KAAK2zC,WAAa3zC,KAAK2zC,YAAc,GACrC,YAAc3zC,KAAK2zC,WAAYA,IAQjCuL,EAAmBp/C,UAAU8/C,aAAe,SAAU/1C,GAapD,IAAIg2C,EAAa7/C,KAAK8/C,YAEjBD,IACHA,EAAa7/C,KAAK8/C,YAAc,qBAMhC9/C,KAAK+/C,iBAAmB,GAG1B,IAAIhgC,EAAQ8/B,EAAW70C,IAAInB,GAM3B,OAJa,MAATkW,GACF8/B,EAAW/zC,IAAIjC,EAAIkW,EAAQ/f,KAAK+/C,oBAG3BhgC,GAGTm/B,EAAmBp/C,UAAU++C,YAAc,WACzC,OAAO7+C,KAAKggD,WAGdd,EAAmBp/C,UAAUi/C,cAAgB,SAAUd,GACrDA,EAAWj+C,KAAKggD,UAAY/B,EAAWA,EAAWj+C,KAAKggD,UACvD,IAAIvwC,EAAOzP,KAAK2wB,aAAaokB,KAAKtlC,KAE7BwuC,IAAYA,IAAaxuC,GAASA,EAAKtI,SAAS82C,MACnDj+C,KAAKggD,UAAYvwC,IAIrByvC,EAAmBp/C,UAAUmgD,gBAAkB,WAC7CjB,GAAuBh/C,OAGzBk/C,EAAmB3gD,KAAO,iBAC1B2gD,EAAmBnV,WAAa,MAChCmV,EAAmBhpC,cAAgB,CAEjCO,YAAa,EAEbzR,KAAM,SACN4sB,IAAK,SACLjtB,MAAO,MACPE,OAAQ,MACRyZ,MAAM,EACN4hC,WAAY,SACZC,YAAa,IAAO,EAAIpjD,KAAK2tB,KAAK,IAClC01B,UAAW,KACXC,cAAe,IAEfC,gBAAiB,MACjBxf,MAAM,EACNyf,UAAW,aACXrgC,WAAW,EACXyS,wBAAyB,IACzBC,gBAAiB,eACjB4tB,WAAY,CACVhvB,MAAM,EACN3sB,OAAQ,GACRG,KAAM,SACN4sB,IAAK,SAGL6uB,eAAgB,GAChBxoC,UAAW,CACTzN,MAAO,kBACPk2C,UAAW,CACTl2C,MAAO,UAIbgZ,MAAO,CACLgO,MAAM,EAENmvB,SAAU,EACVC,QAAS,EACT92B,SAAU,SAEVtf,MAAO,OACPsnB,SAAU,YAIZ+uB,WAAY,CACVrvB,MAAM,EACN1H,SAAU,CAAC,EAAG,OACdjlB,OAAQ,GAGRitB,SAAU,WAEVzE,cAAe,UAEjBpV,UAAW,CACTzN,MAAO,KACPs2C,WAAY,KACZC,gBAAiB,KACjBlpC,YAAa,EACbmpC,SAAU,EACVppC,YAAa,OACbqpC,sBAAuB,MAKzB1vB,SAAU,CACRsvB,WAAY,CACVrvB,MAAM,EACN1H,SAAU,CAAC,EAAG,OACdo3B,UAAU,EACV7zB,cAAe,WAGnB8zB,gBAAiB,EACjBC,UAAW,KACXC,UAAW,KACX72C,MAAO,GAUPs2C,WAAY,KACZC,gBAAiB,KACjBO,eAAgB,QAChBC,WAAY,GAEZC,mBAAoB,KAKpBnC,OAAQ,IAWHH,EArRT,CAsREvoC,GAAA,MAMF,SAASyoC,GAAkBxE,GAIzB,IAAI1yB,EAAM,EACV,UAAY0yB,EAASxzC,UAAU,SAAU8H,GACvCkwC,GAAkBlwC,GAClB,IAAIuyC,EAAavyC,EAAMlG,MACvB,aAAey4C,KAAgBA,EAAaA,EAAW,IACvDv5B,GAAOu5B,KAET,IAAIC,EAAY9G,EAAS5xC,MAErB,aAAe04C,KACjBA,EAAYA,EAAU,KAGP,MAAbA,GAAqBv/C,MAAMu/C,MAC7BA,EAAYx5B,GAIVw5B,EAAY,IACdA,EAAY,GAGd,aAAe9G,EAAS5xC,OAAS4xC,EAAS5xC,MAAM,GAAK04C,EAAY9G,EAAS5xC,MAAQ04C,EAOpF,SAASlC,GAAWH,EAAQrqC,GAC1B,IAAI2sC,EAAkB,gBAAiB3sC,EAAQhK,IAAI,UAC/C42C,EAAkB,gBAAiB5sC,EAAQhK,IAAI,CAAC,OAAQ,QAAS,YAErE,GAAK22C,EAAL,CAKA,IAAIE,EACAC,EAFJzC,EAASA,GAAU,GAGnB,UAAYA,GAAQ,SAAUI,GAC5B,IAAInjC,EAAQ,IAAIyc,GAAA,KAAM0mB,GAClBsC,EAAazlC,EAAMtR,IAAI,SACvBg3C,EAAa1lC,EAAMtR,IAAI,UAEvBsR,EAAMtR,IAAI,CAAC,YAAa,WAAa+2C,GAA6B,SAAfA,KACrDF,GAAiB,IAGfvlC,EAAMtR,IAAI,CAAC,YAAa,WAAag3C,GAA6B,SAAfA,KACrDF,GAAiB,MAGrB,IAAIG,EAAS5C,EAAO,KAAOA,EAAO,GAAK,IAUvC,OARKwC,IACHI,EAAOz3C,MAAQm3C,EAAgBnnD,UAG5BsnD,GAAkBF,IACrBK,EAAOvsB,MAAQksB,EAAgBpnD,SAG1B6kD,GAGM,IAAA6C,GAAA,G,aCvWXC,GAAe,EACfC,GAAW,EACXC,GAAe,EAEf,GAEJ,WACE,SAASC,EAAWC,GAClBviD,KAAKkN,MAAQ,IAAI,QACjBq1C,EAAe96C,IAAIzH,KAAKkN,OAiH1B,OA9GAo1C,EAAWxiD,UAAUoZ,OAAS,SAAUC,EAAaC,EAAKykC,EAAY2E,GACpE,IAAIlmC,EAAQnD,EAAY+B,SAAS,cAC7BunC,EAAYziD,KAAKkN,MAGrB,GAFAu1C,EAAUtlC,YAELb,EAAMtR,IAAI,SAAY6yC,EAA3B,CAIA,IAAI3X,EAAmB5pB,EAAMpB,SAAS,aAElCwnC,EAAiBxc,EAAiBhrB,SAAS,aAC3CynC,EAAc,CAChBC,IAAK,CACH59C,KAAMsX,EAAMtR,IAAI,QAChB/F,MAAOqX,EAAMtR,IAAI,SACjB4mB,IAAKtV,EAAMtR,IAAI,OACf6mB,OAAQvV,EAAMtR,IAAI,WAEpB63C,IAAK,CACHl+C,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,aAEdyuC,eAAgBnkC,EAAMtR,IAAI,kBAC1B83C,WAAY,EACZC,WAAY,IAGd/iD,KAAKgjD,SAASnF,EAAY8E,EAAaD,GAEvC1iD,KAAKijD,eAAe9pC,EAAawpC,EAAazc,EAAkBwc,EAAgBF,GAEhF,QAAuBC,EAAWE,EAAYC,IAAKD,EAAYE,OAQjEP,EAAWxiD,UAAUkjD,SAAW,SAAUnF,EAAY8E,EAAaD,GACjE,IAAK,IAAIjT,EAAOoO,EAAYpO,EAAMA,EAAOA,EAAK9nC,WAAY,CACxD,IAAInC,EAAO,gBAAoBiqC,EAAKv0B,WAAWlQ,IAAI,QAAS,IACxDwiB,EAAWk1B,EAAeQ,YAAY19C,GACtCokC,EAAY7sC,KAAKub,IAAIkV,EAAS7oB,MAAuB,EAAfw9C,GAAkBQ,EAAYlC,gBACxEkC,EAAYG,YAAclZ,EAAYwY,GACtCO,EAAYI,WAAW1nD,KAAK,CAC1Bo0C,KAAMA,EACNjqC,KAAMA,EACNb,MAAOilC,MASb0Y,EAAWxiD,UAAUmjD,eAAiB,SAAU9pC,EAAawpC,EAAazc,EAAkBwc,EAAgBF,GAS1G,IAPA,IAAIW,EAAQ,EACR1C,EAAiBkC,EAAYlC,eAC7B57C,EAASsU,EAAYnO,IAAI,CAAC,aAAc,WACxCo4C,EAAgB,QAAwBT,EAAYC,IAAKD,EAAYE,KACrEC,EAAaH,EAAYG,WACzBC,EAAaJ,EAAYI,WAEpB3nD,EAAI2nD,EAAWroD,OAAS,EAAGU,GAAK,EAAGA,IAAK,CAC/C,IAAI6X,EAAO8vC,EAAW3nD,GAClBioD,EAAWpwC,EAAKw8B,KAChB7F,EAAY32B,EAAKtO,MACjBa,EAAOyN,EAAKzN,KAEZs9C,EAAaM,EAAcz+C,QAC7Bm+C,GAAclZ,EAAY6W,EAC1B7W,EAAY6W,EACZj7C,EAAO,MAGT,IAAInH,EAAK,IAAI,QAAgB,CAC3BoF,MAAO,CACL0gB,OAAQm/B,GAAeH,EAAO,EAAGvZ,EAAW/kC,EAAQzJ,IAAM2nD,EAAWroD,OAAS,EAAS,IAANU,IAEnFtB,MAAO,sBAASosC,EAAiBpqB,eAAgB,CAC/Cnc,SAAU,UAEZiG,YAAa,IAAI,QAAa,CAC5B9L,MAAO,CACL0L,KAAMA,EACN1H,KAAM4kD,EAAea,eACrB79C,KAAMg9C,EAAec,aAGzBzc,WAAY,CACVjd,SAAU,UAEZvI,GAAuB,IAAnB,QACJkiC,QAAS,mBAAMjB,EAAUa,KAE3BhlD,EAAG2oC,uBAAwB,EAC3BhnC,KAAKkN,MAAMzF,IAAIpJ,GACfqlD,GAAcrlD,EAAI8a,EAAakqC,GAC/BF,GAASvZ,EAAYwY,KAIzBE,EAAWxiD,UAAUgO,OAAS,WAC5B9N,KAAKkN,MAAMiQ,aAGNmlC,EApHT,GAuHA,SAASgB,GAAeljD,EAAGC,EAAGupC,EAAWC,EAAY8Z,EAAMC,GACzD,IAAIz/B,EAAS,CAAC,CAACw/B,EAAOvjD,EAAIA,EAAIiiD,GAAchiD,GAAI,CAACD,EAAIwpC,EAAWvpC,GAAI,CAACD,EAAIwpC,EAAWvpC,EAAIwpC,GAAa,CAAC8Z,EAAOvjD,EAAIA,EAAIiiD,GAAchiD,EAAIwpC,IAGvI,OAFC+Z,GAAQz/B,EAAO0/B,OAAO,EAAG,EAAG,CAACzjD,EAAIwpC,EAAYyY,GAAchiD,EAAIwpC,EAAa,KAC5E8Z,GAAQx/B,EAAO9oB,KAAK,CAAC+E,EAAGC,EAAIwpC,EAAa,IACnC1lB,EAIT,SAASu/B,GAAcrlD,EAAI8a,EAAakqC,GACtC,gBAAUhlD,GAAI+oC,UAAY,CACxBvnB,cAAe,SACfikC,iBAAkB,UAClB9qB,eAAgB7f,EAAY6f,eAC5B/T,YAAa9L,EAAY6f,eACzB+qB,WAAY5qC,EAAYnf,KACxB2tB,WAAY,UACZq8B,SAAU,aACVrI,SAAU,CACRvkC,UAAWisC,GAAYA,EAASjsC,UAChCpd,KAAMqpD,GAAYA,EAASrpD,MAE7BokD,aAAciF,GAAYlF,GAAiBkF,EAAUlqC,IAI1C,U,aCjJX8qC,GAEJ,WACE,SAASA,IACPjkD,KAAKkkD,SAAW,GAChBlkD,KAAKmkD,aAAe,GAyEtB,OA9DAF,EAAcnkD,UAAU2H,IAAM,SAAUpJ,EAAIiJ,EAAQ6Y,EAAUikC,EAAO5M,GACnE,OAAIx3C,KAAKmkD,aAAa9lD,EAAGwL,MAIzB7J,KAAKmkD,aAAa9lD,EAAGwL,KAAM,EAE3B7J,KAAKkkD,SAAS7oD,KAAK,CACjBgD,GAAIA,EACJiJ,OAAQA,EACR6Y,SAAUA,EACVikC,MAAOA,EACP5M,OAAQA,KAGH,IAOTyM,EAAcnkD,UAAUukD,SAAW,SAAU9H,GAE3C,OADAv8C,KAAKskD,kBAAoB/H,EAClBv8C,MAOTikD,EAAcnkD,UAAUykD,MAAQ,WAgB9B,IAfA,IAAI97C,EAAQzI,KAER1E,EAAQ0E,KAAKkkD,SAASxpD,OAEtB8pD,EAAiB,WACnBlpD,IAEIA,GAAS,IAEXmN,EAAMy7C,SAASxpD,OAAS,EACxB+N,EAAM07C,aAAe,GACrB17C,EAAM67C,mBAAqB77C,EAAM67C,sBAI5BlpD,EAAI,EAAGiP,EAAMrK,KAAKkkD,SAASxpD,OAAQU,EAAIiP,EAAKjP,IAAK,CACxD,IAAI6X,EAAOjT,KAAKkkD,SAAS9oD,GACzB6X,EAAK5U,GAAGomD,UAAUxxC,EAAK3L,OAAQ,CAC7B6Y,SAAUlN,EAAKkN,SACfikC,MAAOnxC,EAAKmxC,MACZ5M,OAAQvkC,EAAKukC,OACbkN,YAAY,EACZC,KAAMH,EACNI,QAASJ,IAIb,OAAOxkD,MAGFikD,EA5ET,GA+EO,SAASY,KACd,OAAO,IAAIZ,G,8BC5ET,GAAQ,QACR,GAAO,QACPa,GAAiB,EACjBC,GAAoB,QACpBC,GAAyB,aAEzBC,GAA6B,GAAnB,QAEVC,GAA2B,EAAnB,QACRC,GAAgC,EAAnB,QACbC,GAAoB,OAAAC,GAAA,MAAgB,CAAC,CAAC,OAAQ,SAElD,CAAC,SAAU,eAAgB,CAAC,YAAa,eAAgB,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,iBAI5GC,GAAqB,SAAUhpC,GAEjC,IAAIrE,EAAYmtC,GAAkB9oC,GAGlC,OADArE,EAAUja,OAASia,EAAUna,KAAOma,EAAUjZ,UAAY,KACnDiZ,GAGLstC,GAAQ,kBAER,GAEJ,SAAUp8C,GAGR,SAASq8C,IACP,IAAI/8C,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAKhE,OAHAyI,EAAMlK,KAAOinD,EAAYjnD,KACzBkK,EAAMg9C,OAAS,QACfh9C,EAAMy7C,SAAWwB,KACVj9C,EA0fT,OAlgBA,gBAAU+8C,EAAar8C,GAevBq8C,EAAY1lD,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,EAAKC,GAClE,IAAI6zB,EAASl4B,EAAQoU,eAAe,CAClClC,SAAU,SACVkZ,QAAS,UACTjZ,MAAO9N,IAGT,KAAI,qBAAQ6zB,EAAQ/zB,GAAe,GAAnC,CAIAnZ,KAAKmZ,YAAcA,EACnBnZ,KAAKoZ,IAAMA,EACXpZ,KAAKgV,QAAUA,EACf,IAAI0pC,EAAQ,CAAC,oBAAqB,qBAC9BC,EAAa,GAA0BtlC,EAASqlC,EAAOvlC,GACvDwsC,EAActsC,GAAWA,EAAQ9a,KACjCo1C,EAAax6B,EAAYw6B,WACzBjf,GAAU10B,KAAK4lD,SACfC,EAAc7lD,KAAKkkD,SAEnB4B,EAAyB,sBAAhBH,GAAuChH,GAAckH,EAAc,CAC9EE,cAAeF,EAAYG,UAAUrH,EAAWlP,KAAKqK,eACrDgF,UAAWzlC,EAAQylC,WACjB,KAEAyD,EAAiBviD,KAAKimD,oBAAoBtS,GAE1CuS,EAAelmD,KAAKmmD,UAAU5D,EAAgBppC,EAAa2sC,GAE9DpxB,GAAYixB,GAA+B,sBAAhBA,GAAuD,sBAAhBA,EAA8GO,EAAaE,gBAApFpmD,KAAKqmD,aAAa9D,EAAgB2D,EAAc/sC,EAAa2sC,GAEvK9lD,KAAKsmD,iBAAiBltC,GAEtBpZ,KAAKumD,kBAAkBptC,EAAaC,EAAKulC,KAG3C6G,EAAY1lD,UAAUmmD,oBAAsB,SAAUtS,GACpD,IAAI4O,EAAiBviD,KAAKwmD,gBAc1B,OAZKjE,IAGHA,EAAiBviD,KAAKwmD,gBAAkB,IAAI,GAE5CxmD,KAAKymD,YAAYlE,GAEjBviD,KAAKkN,MAAMzF,IAAI86C,IAGjBA,EAAeniD,EAAIuzC,EAAWvzC,EAC9BmiD,EAAeliD,EAAIszC,EAAWtzC,EACvBkiD,GAGTiD,EAAY1lD,UAAUqmD,UAAY,SAAU5D,EAAgBppC,EAAa2sC,GACvE,IAAIY,EAAWvtC,EAAYxD,UAAUo/B,KACjC4R,EAAU3mD,KAAK4lD,SAEfgB,EAAoBlB,KACpBG,EAAcH,KACdmB,EAAa7mD,KAAKkkD,SAClB4C,EAAmB,GAEvB,SAASC,EAAaC,EAAUC,EAASC,EAAa1O,GACpD,OAAO,GAAWr/B,EAAa0sC,EAAagB,EAAYf,EAAQc,EAAmBE,EAAkBE,EAAUC,EAASC,EAAa1O,GAOvI2O,EAAWT,EAASj3C,KAAO,CAACi3C,EAASj3C,MAAQ,GAAIk3C,GAAWA,EAAQl3C,KAAO,CAACk3C,EAAQl3C,MAAQ,GAAI8yC,EAAgBmE,IAAaC,IAAYA,EAAS,GAElJ,IAAIS,EAAgBC,EAAaR,GAGjC,OAFA7mD,KAAK4lD,SAAWc,EAChB1mD,KAAKkkD,SAAW2B,EACT,CACLe,kBAAmBA,EACnBQ,cAAeA,EACfhB,cAAeA,GAGjB,SAASe,EAAWG,EAAkBC,EAAiBL,EAAaM,EAAUhP,GAe5E,SAASiP,EAAOhY,GAEd,OAAOA,EAAKyJ,QAGd,SAASwO,EAAY/qC,EAAUC,GAC7B,IAAIoqC,EAAuB,MAAZrqC,EAAmB2qC,EAAiB3qC,GAAY,KAC3DsqC,EAAsB,MAAZrqC,EAAmB2qC,EAAgB3qC,GAAY,KACzD1P,EAAQ65C,EAAaC,EAAUC,EAASC,EAAa1O,GACzDtrC,GAASi6C,EAAWH,GAAYA,EAASvO,cAAgB,GAAIwO,GAAWA,EAAQxO,cAAgB,GAAIvrC,EAAOs6C,EAAUhP,EAAQ,GApB3HgP,GACFD,EAAkBD,EAClB,kBAAKA,GAAkB,SAAUp4C,EAAO6Q,IACrC7Q,EAAMwpC,aAAegP,EAAY3nC,EAAOA,OAKzC,IAAI4nC,GAAA,KAAWJ,EAAiBD,EAAkBG,EAAQA,GAAQhgD,IAAIigD,GAAa19C,OAAO09C,GAAa55C,OAAO,mBAAM45C,EAAa,OAAO3qC,UAgB9I,SAASsqC,EAAa33C,GACpB,IAAI03C,EAAgB1B,KAOpB,OANAh2C,GAAW,kBAAKA,GAAS,SAAUk4C,EAAOC,GACxC,IAAIC,EAASV,EAAcS,GAC3B,kBAAKD,GAAO,SAAUvpD,GACpBA,IAAOypD,EAAOzsD,KAAKgD,GAAKknD,GAAMlnD,GAAI0pD,YAAa,SAG5CX,EAGT,SAAShB,IACP,kBAAKgB,GAAe,SAAUjjB,GAC5B,kBAAKA,GAAK,SAAU9lC,GAClBA,EAAG4Q,QAAU5Q,EAAG4Q,OAAOnB,OAAOzP,SAGlC,kBAAKyoD,GAAkB,SAAUzoD,GAC/BA,EAAGsU,WAAY,EAGftU,EAAGoN,aAKT+5C,EAAY1lD,UAAUumD,aAAe,SAAU9D,EAAgB2D,EAAc/sC,EAAa2sC,GACxF,GAAK3sC,EAAYnO,IAAI,aAArB,CAIA,IAAIg9C,EAAiB7uC,EAAYnO,IAAI,2BACjCi9C,EAAe9uC,EAAYnO,IAAI,mBAE/BmV,GAAY,wBAAW6nC,GAAkB,EAAIA,IAAmB,EAChExQ,GAAU,wBAAWyQ,GAAgB,KAAOA,IAAiB,WAC7DC,EAAgB,KAEpB,kBAAKhC,EAAakB,eAAe,SAAUQ,EAAOC,GAChD,kBAAKD,GAAO,SAAUvpD,EAAI87C,GACxB,IAAI97C,EAAGsU,UAAP,CAIA,IAEIrL,EAFA2H,EAAS5Q,EAAG4Q,OAGZk5C,EAAa5C,GAAMt2C,GAEvB,GAAI62C,GAA+B,cAArBA,EAAOhH,UACnBx3C,EAAS2H,IAAW62C,EAAOC,cAGzB,CACAtiD,MAAO,CACLrD,EAAG,EACHC,EAAG,EACHsE,MAAOwjD,EAAWC,UAClBvjD,OAAQsjD,EAAWE,YAErBvuD,MAAO,CACL+E,QAAS,IAGX,CACA/E,MAAO,CACL+E,QAAS,QAGR,CACL,IAAIypD,EAAU,EACVC,EAAU,EAETJ,EAAWJ,aAIdO,EAAUH,EAAWC,UAAY,EACjCG,EAAUJ,EAAWE,WAAa,GAGpC/gD,EAAyB,cAAhBugD,EAA8B,CACrCznD,EAAGkoD,EACHjoD,EAAGkoD,EACHzuD,MAAO,CACL+E,QAAS,IAET,CACF4E,MAAO,CACLrD,EAAGkoD,EACHjoD,EAAGkoD,EACH5jD,MAAO,EACPE,OAAQ,GAEV/K,MAAO,CACL+E,QAAS,IAMfyI,GAAU4gD,EAAczgD,IAAIpJ,EAAIiJ,EAAQ6Y,EAAU,EAAGq3B,UAIzD,kBAAKx3C,KAAKkkD,UAAU,SAAU0D,EAAOC,GACnC,kBAAKD,GAAO,SAAUvpD,EAAI87C,GACxB,IAAI79C,EAAO4pD,EAAaU,kBAAkBiB,GAAa1N,GACnD7yC,EAAS,GAERhL,IAID+B,aAAc,QACC,MAAb/B,EAAKksD,OACPlhD,EAAOlH,EAAI/B,EAAG+B,EACdkH,EAAOjH,EAAIhC,EAAGgC,EACdhC,EAAG+B,EAAI9D,EAAKksD,KACZnqD,EAAGgC,EAAI/D,EAAKmsD,OAGVnsD,EAAKosD,WACPphD,EAAO7D,MAAQ,oBAAO,GAAIpF,EAAGoF,OAC7BpF,EAAG0d,SAASzf,EAAKosD,WAGfpsD,EAAKqsD,QACPtqD,EAAG+uB,SAAS,UAAW,GACvB9lB,EAAOxN,MAAQ,CACb+E,QAAS,IAIiB,IAArBR,EAAGvE,MAAM+E,UACdyI,EAAOxN,MAAQ,CACb+E,QAAS,KAKjBqpD,EAAczgD,IAAIpJ,EAAIiJ,EAAQ6Y,EAAU,EAAGq3B,SAE5Cx3C,MACHA,KAAKylD,OAAS,YACdyC,EAAc7D,SAAS,mBAAK,WAC1BrkD,KAAKylD,OAAS,QACdS,EAAaE,kBACZpmD,OAAOukD,UAGZiB,EAAY1lD,UAAUwmD,iBAAmB,SAAUltC,GACjD,IAAI+rB,EAAanlC,KAAK2/B,YAEjBwF,IACHA,EAAanlC,KAAK2/B,YAAc,IAAIC,GAAA,KAAexmB,EAAIwE,SACvDunB,EAAWK,OAAOxlC,KAAKmZ,YAAYnO,IAAI,SACvCm6B,EAAWtnB,GAAG,MAAO,kBAAK7d,KAAK4oD,OAAQ5oD,OACvCmlC,EAAWtnB,GAAG,OAAQ,kBAAK7d,KAAK6oD,QAAS7oD,QAG3C,IAAIoC,EAAO,IAAIgqC,GAAA,KAAa,EAAG,EAAGhzB,EAAIrH,WAAYqH,EAAIpH,aACtDmzB,EAAWY,mBAAkB,SAAUpjC,EAAGvC,EAAGC,GAC3C,OAAO+B,EAAKqqC,QAAQrsC,EAAGC,OAI3BmlD,EAAY1lD,UAAUgpD,iBAAmB,WACvC,IAAI3jB,EAAanlC,KAAK2/B,YAElBwF,IACFA,EAAWlxB,UACXkxB,EAAa,OAIjBqgB,EAAY1lD,UAAU8oD,OAAS,SAAUjmD,GACvC,GAAoB,cAAhB3C,KAAKylD,SAA2B1oD,KAAK8E,IAAIc,EAAEqnB,IAAM86B,IAAkB/nD,KAAK8E,IAAIc,EAAE4nB,IAAMu6B,IAAiB,CAEvG,IAAIr1C,EAAOzP,KAAKmZ,YAAYxD,UAAUo/B,KAAKtlC,KAE3C,IAAKA,EACH,OAGF,IAAI0mC,EAAa1mC,EAAKmG,YAEtB,IAAKugC,EACH,OAGFn2C,KAAKoZ,IAAIwG,eAAe,CACtBrhB,KAAM,cACNqpC,KAAM5nC,KAAK0/B,IACXoI,SAAU9nC,KAAKmZ,YAAYtP,GAC3Bk/C,SAAU,CACR3oD,EAAG+1C,EAAW/1C,EAAIuC,EAAEqnB,GACpB3pB,EAAG81C,EAAW91C,EAAIsC,EAAE4nB,GACpB5lB,MAAOwxC,EAAWxxC,MAClBE,OAAQsxC,EAAWtxC,YAM3B2gD,EAAY1lD,UAAU+oD,QAAU,SAAUlmD,GACxC,IAAIqmD,EAASrmD,EAAEkjC,QACXojB,EAAStmD,EAAEmjC,QAEf,GAAoB,cAAhB9lC,KAAKylD,OAAwB,CAE/B,IAAIh2C,EAAOzP,KAAKmZ,YAAYxD,UAAUo/B,KAAKtlC,KAE3C,IAAKA,EACH,OAGF,IAAI0mC,EAAa1mC,EAAKmG,YAEtB,IAAKugC,EACH,OAGF,IAAI/zC,EAAO,IAAIgqC,GAAA,KAAa+J,EAAW/1C,EAAG+1C,EAAW91C,EAAG81C,EAAWxxC,MAAOwxC,EAAWtxC,QACjF8uC,EAAa3zC,KAAKmZ,YAAYw6B,WAElCqV,GAAUrV,EAAWvzC,EACrB6oD,GAAUtV,EAAWtzC,EAErB,IAAIlC,EAAI+qD,GAAA,YACRA,GAAA,aAAiB/qD,EAAGA,EAAG,EAAE6qD,GAASC,IAClCC,GAAA,SAAa/qD,EAAGA,EAAG,CAACwE,EAAE8b,MAAO9b,EAAE8b,QAC/ByqC,GAAA,aAAiB/qD,EAAGA,EAAG,CAAC6qD,EAAQC,IAChC7mD,EAAKurB,eAAexvB,GACpB6B,KAAKoZ,IAAIwG,eAAe,CACtBrhB,KAAM,gBACNqpC,KAAM5nC,KAAK0/B,IACXoI,SAAU9nC,KAAKmZ,YAAYtP,GAC3Bk/C,SAAU,CACR3oD,EAAGgC,EAAKhC,EACRC,EAAG+B,EAAK/B,EACRsE,MAAOvC,EAAKuC,MACZE,OAAQzC,EAAKyC,YAMrB2gD,EAAY1lD,UAAU2mD,YAAc,SAAUlE,GAC5C,IAAI95C,EAAQzI,KAEZuiD,EAAe1kC,GAAG,SAAS,SAAUlb,GACnC,GAAqB,UAAjB8F,EAAMg9C,OAAV,CAIA,IAAIlF,EAAY93C,EAAM0Q,YAAYnO,IAAI,aAAa,GAEnD,GAAKu1C,EAAL,CAIA,IAAI5B,EAAal2C,EAAM0gD,WAAWxmD,EAAEuL,QAASvL,EAAEyL,SAE/C,GAAKuwC,EAAL,CAIA,IAAIlP,EAAOkP,EAAWlP,KAEtB,GAAIA,EAAK75B,YAAYwzC,WACnB3gD,EAAM4gD,YAAY1K,QAElB,GAAkB,eAAd4B,EACF93C,EAAM6gD,YAAY3K,QACb,GAAkB,SAAd4B,EAAsB,CAC/B,IAAIvkC,EAAYyzB,EAAK8I,SAAS7iC,KAAKuG,aAAawzB,EAAKr4B,WACjDmyC,EAAOvtC,EAAUhR,IAAI,QAAQ,GAC7Bw+C,EAAaxtC,EAAUhR,IAAI,UAAU,IAAS,QAClDu+C,GAAQ,gBAAWA,EAAMC,SAG5BxpD,OAGLwlD,EAAY1lD,UAAUymD,kBAAoB,SAAUptC,EAAaC,EAAKulC,GACpE,IAAIl2C,EAAQzI,KAEP2+C,IACHA,EAAmD,MAAtCxlC,EAAYnO,IAAI,aAAa,GAAgB,CACxDykC,KAAMt2B,EAAY0lC,eAIlB7+C,KAAKmpD,WAAW/vC,EAAIrH,WAAa,EAAGqH,EAAIpH,YAAc,GAEnD2sC,IACHA,EAAa,CACXlP,KAAMt2B,EAAYxD,UAAUo/B,KAAKtlC,SAKtCzP,KAAKypD,cAAgBzpD,KAAKypD,YAAc,IAAI,GAAWzpD,KAAKkN,SAASgM,OAAOC,EAAaC,EAAKulC,EAAWlP,MAAM,SAAUA,GACnG,cAAjBhnC,EAAMg9C,SACR,GAAqBtsC,EAAY0lC,cAAepP,GAAQhnC,EAAM4gD,YAAY,CACxE5Z,KAAMA,IACHhnC,EAAM6gD,YAAY,CACrB7Z,KAAMA,SAUd+V,EAAY1lD,UAAUgO,OAAS,WAC7B9N,KAAK8oD,mBAEL9oD,KAAKwmD,iBAAmBxmD,KAAKwmD,gBAAgBrpC,YAC7Cnd,KAAKkkD,SAAWwB,KAChB1lD,KAAKylD,OAAS,QACdzlD,KAAKypD,aAAezpD,KAAKypD,YAAY37C,UAGvC03C,EAAY1lD,UAAUmU,QAAU,WAC9BjU,KAAK8oD,oBAGPtD,EAAY1lD,UAAUwpD,YAAc,SAAU3K,GAC5C3+C,KAAKoZ,IAAIwG,eAAe,CACtBrhB,KAAM,oBACNqpC,KAAM5nC,KAAK0/B,IACXoI,SAAU9nC,KAAKmZ,YAAYtP,GAC3Bg0C,WAAYc,EAAWlP,QAI3B+V,EAAY1lD,UAAUupD,YAAc,SAAU1K,GAC5C3+C,KAAKoZ,IAAIwG,eAAe,CACtBrhB,KAAM,oBACNqpC,KAAM5nC,KAAK0/B,IACXoI,SAAU9nC,KAAKmZ,YAAYtP,GAC3Bg0C,WAAYc,EAAWlP,QAc3B+V,EAAY1lD,UAAUqpD,WAAa,SAAU/oD,EAAGC,GAC9C,IAAIs+C,EACAV,EAAWj+C,KAAKmZ,YAAY0lC,cAuBhC,OAtBAZ,EAAStF,SAAS,CAChBv6C,KAAM,eACN06C,MAAO,aACN,SAAUrJ,GACX,IAAI9zB,EAAO3b,KAAKkkD,SAASwF,WAAWja,EAAKqK,eAGzC,GAAIn+B,EAAM,CACR,IAAI0U,EAAQ1U,EAAKguC,sBAAsBvpD,EAAGC,GACtCoD,EAAQkY,EAAKlY,MAEjB,KAAIA,EAAMrD,GAAKiwB,EAAM,IAAMA,EAAM,IAAM5sB,EAAMrD,EAAIqD,EAAMkB,OAASlB,EAAMpD,GAAKgwB,EAAM,IAAMA,EAAM,IAAM5sB,EAAMpD,EAAIoD,EAAMoB,QAOjH,OAAO,EANP85C,EAAa,CACXlP,KAAMA,EACNvhC,QAASmiB,EAAM,GACfjiB,QAASiiB,EAAM,OAMpBrwB,MACI2+C,GAGT6G,EAAYjnD,KAAO,UACZinD,EAngBT,CAogBEllC,GAAA,MAMF,SAASolC,KACP,MAAO,CACLM,UAAW,GACX0D,WAAY,GACZE,QAAS,IASb,SAAS,GAAWzwC,EAAa0sC,EAAagB,EAAYf,EAAQc,EAAmBE,EAAkBE,EAAUC,EAASC,EAAa1O,GAErI,GAAKwO,EAAL,CASA,IAAI6C,EAAa7C,EAASpxC,YACtBF,EAAOyD,EAAYxD,UACnBm0C,EAAY9C,EAAS9rC,WAKzB,GAFAxF,EAAK+G,iBAAiBuqC,EAAS5vC,UAAW,MAErCyyC,GAAeA,EAAWE,SAA/B,CAIA,IAAIC,EAAYH,EAAWllD,MACvBslD,EAAaJ,EAAWhlD,OACxBgT,EAAcgyC,EAAWhyC,YACzBqyC,EAAgBL,EAAWl3C,UAC3Bw3C,EAAenD,EAASlN,cACxBsQ,EAAcnD,GAAWA,EAAQnN,cACjCwN,EAAmBN,EAASvO,aAC5B4R,EAAcR,EAAWQ,YACzBC,EAAWhD,GAAoBA,EAAiB5sD,OAChD6vD,EAAuBT,EAAU5uC,SAAS,aAC1CsvC,EAAyBV,EAAU5uC,SAAS,CAAC,WAAY,cACzDuvC,EAAqBX,EAAU5uC,SAAS,CAAC,OAAQ,cACjDwvC,EAAuBZ,EAAU5uC,SAAS,CAAC,SAAU,cACrDnD,EAAewyC,EAAqBv/C,IAAI,iBAAmB,EAI3DkC,EAAQy9C,EAAY,YAAa,IAErC,GAAKz9C,EAAL,CAYA,GARAg6C,EAAYz/C,IAAIyF,GAEhBA,EAAM9M,EAAIypD,EAAWzpD,GAAK,EAC1B8M,EAAM7M,EAAIwpD,EAAWxpD,GAAK,EAC1B6M,EAAM09C,aACNrF,GAAMr4C,GAAOk7C,UAAY4B,EACzBzE,GAAMr4C,GAAOm7C,WAAa4B,EAEtBJ,EAAWgB,gBACb,OAAO39C,EAIT,IAAI49C,EAAKH,EAAY,aAAc,GAAMnS,EAAO0M,IAChD4F,GAAMC,EAAiB79C,EAAO49C,EAAIR,GAAYT,EAAWmB,kBACzD,IAAIvjB,EAAQqiB,EAAU9+C,IAAI,CAAC,WAAY,UACnCigD,EAAYnB,EAAU9+C,IAAI,CAAC,WAAY,cACvCkgD,EAA2B,aAAVzjB,EAAuBuf,EAASrQ,sBAAkC,eAAVlP,EAAyBuf,EAASpQ,uBAAyBnP,EAExI,GAAI6iB,EAIE,gBAAqBp9C,IACvB,gBAAwBA,GAAO,GAG7B49C,IACF,gBAAwBA,GAAI,GAE5Bp1C,EAAK+G,iBAAiBuqC,EAAS5vC,UAAW0zC,GAC1C,gBAAiBA,EAAII,EAAgBD,QAElC,CACL,IAAIrB,EAAUe,EAAY,UAAW,GAAMnS,EAAO2M,IAClDyE,GAAWuB,EAAcj+C,EAAO08C,GAE5BkB,GAAM,gBAAqBA,IAC7B,gBAAwBA,GAAI,GAG9B,gBAAwB59C,GAAO,GAE/BwI,EAAK+G,iBAAiBuqC,EAAS5vC,UAAWlK,GAC1C,gBAAiBA,EAAOg+C,EAAgBD,GAG1C,OAAO/9C,IAIP,SAAS69C,EAAiB79C,EAAO49C,EAAIM,GACnC,IAAIC,EAAS,gBAAUP,GAYvB,GAVAO,EAAOj0C,UAAY4vC,EAAS5vC,UAC5Bi0C,EAAOpmC,YAAc9L,EAAY8L,YACjC6lC,EAAG/uC,SAAS,CACV3b,EAAG,EACHC,EAAG,EACHsE,MAAOqlD,EACPnlD,OAAQolD,EACRhpD,EAAG8W,IAGDmyC,EAIFoB,EAAiBR,OACZ,CACLA,EAAGn4C,WAAY,EACf,IAAI7Y,EAAQktD,EAAS9gC,UAAU,SAC3BqlC,EAAoBzxD,EAAMkE,OAC1BsoC,EAAcgf,GAAmBiF,GACrCjkB,EAAYxoC,KAAOytD,EACnB,IAAIhlB,EAAgB6e,GAAkBoF,GACtCjkB,EAAczoC,KAAO0sD,EAAuBx/C,IAAI,eAChD,IAAIq5B,EAAY+gB,GAAkBqF,GAClCpmB,EAAUvmC,KAAO2sD,EAAmBz/C,IAAI,eACxC,IAAIw7B,EAAc4e,GAAkBsF,GAGpC,GAFAlkB,EAAY1oC,KAAO4sD,EAAqB1/C,IAAI,eAExCogD,EAAe,CACjB,IAAII,EAAkBxB,EAAY,EAAInyC,EACtC4zC,EACAX,EAAIS,EAAmBzxD,EAAM+E,QAAS,CACpCuB,EAAGyX,EACHxX,EAAG,EACHsE,MAAO6mD,EACP3mD,OAAQwlD,SAIRS,EAAG7jB,oBAGP6jB,EAAG19B,SAASkZ,GACZwkB,EAAG37B,YAAY,YAAYr1B,MAAQysC,EACnCukB,EAAG37B,YAAY,QAAQr1B,MAAQuqC,EAC/BymB,EAAG37B,YAAY,UAAUr1B,MAAQ0sC,EACjC,gBAAqBskB,GAGvB59C,EAAMzF,IAAIqjD,GAGZ,SAASK,EAAcj+C,EAAO08C,GAC5B,IAAIyB,EAAS,gBAAUzB,GAEvByB,EAAOj0C,UAAY4vC,EAAS5vC,UAC5Bi0C,EAAOpmC,YAAc9L,EAAY8L,YACjC,IAAIymC,EAAe3uD,KAAKub,IAAI0xC,EAAY,EAAInyC,EAAa,GACrD8zC,EAAgB5uD,KAAKub,IAAI2xC,EAAa,EAAIpyC,EAAa,GAU3D,GATA+xC,EAAQ5mB,SAAU,EAClB4mB,EAAQ7tC,SAAS,CACf3b,EAAGyX,EACHxX,EAAGwX,EACHlT,MAAO+mD,EACP7mD,OAAQ8mD,EACR1qD,EAAG8W,IAGDmyC,EAIFoB,EAAiB1B,OACZ,CACLA,EAAQj3C,WAAY,EACpB,IAAIi5C,EAAY5E,EAAS9gC,UAAU,SAC/BmJ,EAAcu8B,EAAU9tD,KACxBwoC,EAAcgf,GAAmBiF,GACrCjkB,EAAYxoC,KAAOuxB,EACnBiX,EAAY5Q,MAAQk2B,EAAUl2B,MAC9B,IAAI6Q,EAAgB6e,GAAkBoF,GAClCnmB,EAAY+gB,GAAkBqF,GAC9BjkB,EAAc4e,GAAkBsF,GAEpCe,EAAY7B,EAASv6B,EAAau8B,EAAU/sD,QAAS,MACrD+qD,EAAQx8B,SAASkZ,GACjBsjB,EAAQz6B,YAAY,YAAYr1B,MAAQysC,EACxCqjB,EAAQz6B,YAAY,QAAQr1B,MAAQuqC,EACpCulB,EAAQz6B,YAAY,UAAUr1B,MAAQ0sC,EACtC,gBAAqBojB,GAGvB18C,EAAMzF,IAAImiD,GAGZ,SAAS0B,EAAiBO,IAGvBA,EAAQl5C,WAAam0C,EAAiBzrD,KAAKwwD,GAG9C,SAASJ,EAAYK,EAAQz8B,EAAaC,EAC1Cy8B,GACE,IAAIxV,EAAmBuT,EAAU5uC,SAAS6wC,EAAiB/G,GAAyBD,IAChF3hC,EAAc,gBAAoB0mC,EAAU9+C,IAAI,QAAS,MACzDghD,EAASzV,EAAiBxzB,WAAW,QACzC,gBAAc+oC,EAAQ,gBAAqBhC,EAAWiC,EAAiB/G,GAAyBD,IAAoB,CAClH3hC,YAAa4oC,EAAS5oC,EAAc,KACpCC,aAAcgM,EACd/L,eAAgBgM,EAChBpM,aAAc/J,EACdgK,eAAgB6jC,EAAS5vC,YAE3B,IAAI0vB,EAASglB,EAAOroC,iBAChBi9B,EAAY5Z,EAAOhtC,MACnBmyD,EAAc,+BAAkBvL,EAAUE,SAAW,GAErDmL,IACFD,EAAO59B,cAAc,CACnBg+B,WAAYH,IAEdjlB,EAAOqlB,oBAAqB,GAG9BrlB,EAAOslB,aAAe,WACpB,IAAIznD,EAAQ5H,KAAKub,KAAKyzC,EAAiBA,EAAepnD,MAAQmnD,EAAOroD,MAAMkB,OAASsnD,EAAY,GAAKA,EAAY,GAAI,GACjHpnD,EAAS9H,KAAKub,KAAKyzC,EAAiBA,EAAelnD,OAASinD,EAAOroD,MAAMoB,QAAUonD,EAAY,GAAKA,EAAY,GAAI,GAEpHvL,EAAU/7C,QAAUA,GAAS+7C,EAAU77C,SAAWA,GACpDiiC,EAAO1Z,SAAS,CACdzoB,MAAOA,EACPE,OAAQA,KAKd67C,EAAU2L,gBAAkB,EAC5B3L,EAAU4L,aAAe,WACzBC,EAAiB7L,EAAWqL,EAAgBlC,GAC5C,IAAI2C,EAAoB1lB,EAAO2lB,SAAS,YACxCF,EAAiBC,EAAoBA,EAAkB1yD,MAAQ,KAAMiyD,EAAgBlC,GAGvF,SAAS0C,EAAiBzyD,EAAOiyD,EAAgBlC,GAC/C,IAAIrkD,EAAO1L,EAAQA,EAAM0L,KAAO,KAEhC,IAAKumD,GAAkBlC,EAAWT,YAAsB,MAAR5jD,EAAc,CAC5D,IAAIknD,EAAWvzC,EAAYnO,IAAI,iBAAiB,GAChDlR,EAAM0L,KAAOknD,EAAWA,EAAW,IAAMlnD,EAAOA,GAIpD,SAASmlD,EAAY9C,EAAa8E,EAAMnU,EAAOpiC,GAC7C,IAAIy1C,EAAyB,MAAfzB,GAAuBvD,EAAWgB,GAAauC,GACzDwC,EAAQhG,EAAkBiB,GAkB9B,OAhBIgE,GAEFhF,EAAWgB,GAAauC,GAAe,KACvCyC,EAA2BD,EAAOf,IAE1B3B,IACN2B,EAAU,IAAIc,EAEVd,aAAmB9oB,GAAA,OACrB8oB,EAAQtqC,GAAKurC,GAAYtU,EAAOpiC,IAGlC22C,EAA0BH,EAAOf,IAI9BhG,EAAYgC,GAAasC,GAAgB0B,EAGlD,SAASgB,EAA2BD,EAAOf,GACzC,IAAImB,EAAUJ,EAAMzC,GAAgB,GAEhC0B,aAAmB,IACrBmB,EAAQxE,KAAOqD,EAAQzrD,EACvB4sD,EAAQvE,KAAOoD,EAAQxrD,GAEvB2sD,EAAQtE,SAAW,oBAAO,GAAImD,EAAQpoD,OAM1C,SAASspD,EAA0BH,EAAOf,GACxC,IAAImB,EAAUJ,EAAMzC,GAAgB,GAChCxiD,EAAaq/C,EAASr/C,WACtB68B,EAAUqnB,aAAmB,QAEjC,GAAIlkD,KAAgBm+C,GAA+B,cAArBA,EAAOhH,WAA4B,CAC/D,IAAImO,EAAa,EACbC,EAAa,EAGbC,EAAcvG,EAAkB8C,WAAW/hD,EAAWmyC,gBAErDgM,GAAUqH,GAAeA,EAAYzE,WACxCuE,EAAaE,EAAYzE,SAAS/jD,MAClCuoD,EAAaC,EAAYzE,SAAS7jD,QAKhC2/B,GACFwoB,EAAQxE,KAAO,EACfwE,EAAQvE,KAAOyE,GAEfF,EAAQtE,SAAW,CACjBtoD,EAAG6sD,EACH5sD,EAAG6sD,EACHvoD,MAAO,EACPE,OAAQ,GAMdmoD,EAAQrE,QAAUnkB,GAUtB,SAASsoB,GAAYtU,EAAO4U,GAC1B,OAAO5U,EAAQyM,GAAUmI,EAGZ,U,aC/4BXC,GAAoB,YACpB,GAAQ,kBACG,IACb1lC,WAAY,UACZ5nB,MAAO,SAAUoZ,GACf,IAAI47B,EAAO57B,EAAYxD,UAAUo/B,KAC7BtlC,EAAOslC,EAAKtlC,KAEZA,EAAKipC,aAIT4U,GAAW79C,EACX,GAAI0J,EAAY0lC,cAAc1F,eAAgBhgC,KAIlD,SAASm0C,GAAW7d,EAAM8d,EAAkBC,EAAmBr0C,GAC7D,IAAI2wC,EAAYra,EAAKv0B,WACjBuyC,EAAahe,EAAK75B,YAClBF,EAAO+5B,EAAK8I,SAAS7iC,KAEzB,GAAK+3C,IAAcA,EAAW96C,WAAc86C,EAAW1D,SAAvD,CAIA,IAMI2D,EANAC,EAAqB7D,EAAU5uC,SAASmyC,IACxCO,EAAUC,GAAaF,EAAoBJ,EAAkBp0C,GAC7DqkC,EAAc9nC,EAAK+nC,uBAAuBhO,EAAKr4B,UAAW,SAE1DQ,EAAc+1C,EAAmB3iD,IAAI,eACrCi2C,EAAwB0M,EAAmB3iD,IAAI,yBAGtB,MAAzBi2C,IAEFyM,EAAgBI,GAAeF,GAC/Bh2C,EAAcm2C,GAAqB9M,EAAuByM,IAG5DlQ,EAAYx/C,OAAS4Z,EACrB,IAAI6gC,EAAehJ,EAAKgJ,aAExB,GAAKA,GAAiBA,EAAa/9C,OAI5B,CACL,IAAIszD,EAAYC,GAAmBxe,EAAMqa,EAAW2D,EAAYE,EAAoBC,EAASnV,GAE7F,kBAAKA,GAAc,SAAUvpC,EAAO6Q,GAElC,GAAI7Q,EAAMspC,OAASgV,EAAkB9yD,QAAUwU,IAAUs+C,EAAkBt+C,EAAMspC,OAAQ,CACvF,IAAI0V,EAAcC,GAAUrE,EAAW8D,EAAS1+C,EAAO6Q,EAAOiuC,EAAW70C,GACzEm0C,GAAWp+C,EAAOg/C,EAAaV,EAAmBr0C,YAVtDu0C,EAAgBI,GAAeF,GAE/BpQ,EAAY1/C,KAAO4vD,GAcvB,SAASG,GAAaF,EAAoBJ,EAAkBp0C,GAC1D,IAAIy0C,EAAU,oBAAO,GAAIL,GACrBjO,EAA4BnmC,EAAYmmC,0BAQ5C,OAPA,kBAAK,CAAC,QAAS,aAAc,oBAAoB,SAAU8O,GAEzD9O,EAA0B8O,GAAcb,EAAiBa,GACzD,IAAI1wD,EAAMiwD,EAAmB3iD,IAAIojD,GACjC9O,EAA0B8O,GAAc,KACjC,MAAP1wD,IAAgBkwD,EAAQQ,GAAc1wD,MAEjCkwD,EAGT,SAASE,GAAeF,GACtB,IAAIpjD,EAAQ6jD,GAAqBT,EAAS,SAE1C,GAAIpjD,EAAO,CACT,IAAIs2C,EAAauN,GAAqBT,EAAS,cAC3C7M,EAAkBsN,GAAqBT,EAAS,mBAUpD,OARI7M,IACFv2C,EAAQ,wBAAUA,EAAO,KAAM,KAAMu2C,IAGnCD,IACFt2C,EAAQ,0BAAYA,EAAOs2C,IAGtBt2C,GAIX,SAASujD,GAAqB9M,EAAuByM,GACnD,OAAwB,MAAjBA,EACL,wBAAUA,EAAe,KAAM,KAAMzM,GAAyB,KAGlE,SAASoN,GAAqBT,EAAS5zD,GACrC,IAAIgP,EAAQ4kD,EAAQ5zD,GAEpB,GAAa,MAATgP,GAA2B,SAAVA,EACnB,OAAOA,EAIX,SAASilD,GAAmBxe,EAAMqa,EAAW2D,EAAYE,EAAoBC,EAASnV,GACpF,GAAKA,GAAiBA,EAAa/9C,OAAnC,CAIA,IAAI4zD,EAAcC,GAAezE,EAAW,UAA6B,MAAjB8D,EAAQpjD,OAAmC,SAAlBojD,EAAQpjD,QAAqB+jD,GAAezE,EAAW,eAAiByE,GAAezE,EAAW,oBAEnL,GAAKwE,EAAL,CAIA,IAAIlN,EAAY0I,EAAU9+C,IAAI,aAC1Bq2C,EAAYyI,EAAU9+C,IAAI,aAC1BwjD,EAAaf,EAAWe,WAAWh0D,QAC1B,MAAb4mD,GAAqBA,EAAYoN,EAAW,KAAOA,EAAW,GAAKpN,GACtD,MAAbC,GAAqBA,EAAYmN,EAAW,KAAOA,EAAW,GAAKnN,GACnE,IAAIC,EAAiBwI,EAAU9+C,IAAI,kBAC/B4sB,EAAM,CACRr5B,KAAM+vD,EAAYt0D,KAClBw0D,WAAYA,EACZC,OAAQH,EAAYI,OAGL,UAAb92B,EAAIr5B,MAAwC,UAAnB+iD,GAAiD,OAAnBA,EAIzD1pB,EAAI+2B,cAAgB,UAHpB/2B,EAAI+2B,cAAgB,WACpB/2B,EAAIg3B,MAAO,GAKb,IAAIC,EAAU,IAAIC,GAAA,KAAcl3B,GAEhC,OADA,GAAMi3B,GAASE,iBAAmBzN,EAC3BuN,IAUT,SAASN,GAAezE,EAAW9vD,GAGjC,IAAI00D,EAAQ5E,EAAU9+C,IAAIhR,GAC1B,OAAO,qBAAQ00D,IAAUA,EAAMh0D,OAAS,CACtCV,KAAMA,EACN00D,MAAOA,GACL,KAGN,SAASP,GAAUrE,EAAW8D,EAAS1+C,EAAO6Q,EAAO8uC,EAAS11C,GAC5D,IAAI61C,EAAe,oBAAO,GAAIpB,GAE9B,GAAIiB,EAAS,CAEX,IAAII,EAAcJ,EAAQtwD,KACtB+iD,EAAiC,UAAhB2N,GAA2B,GAAMJ,GAASE,iBAC3D/lD,EAA2B,UAAnBs4C,EAA6BvhC,EAA2B,OAAnBuhC,EAA0BnoC,EAAYymC,aAAa1wC,EAAMgqC,SAAWhqC,EAAMsqC,SAASsQ,EAAU9+C,IAAI,oBAClJgkD,EAAaC,GAAeJ,EAAQK,iBAAiBlmD,GAGvD,OAAOgmD,EC7JT,IAAI,GAAUjyD,KAAKub,IACf,GAAUvb,KAAKyb,IACf22C,GAAgB,cAChBlxC,GAAO,UACPmxC,GAAoB,CAAC,YAAa,eAClCC,GAAiB,CAAC,YAAa,YAC/BC,GAAwB,CAAC,aAAc,QACvCC,GAA0B,CAAC,aAAc,UAM9B,IACb5nC,WAAY,UACZ5nB,MAAO,SAAUoZ,EAAanE,EAASoE,EAAKC,GAG1C,IAAIm2C,EAAUp2C,EAAIrH,WACd09C,EAAWr2C,EAAIpH,YACf09C,EAAev2C,EAAYpE,OAC3B4+B,EAAa,QAAqBx6B,EAAYsO,qBAAsB,CACtE9iB,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,cAEV6D,EAAO65C,EAAa75C,MAAQ,GAE5B85C,EAAiB,gBAAaR,GAAcxb,EAAWhvC,MAAOkR,EAAK,IAAK25C,GACxEI,EAAkB,gBAAaT,GAAcxb,EAAW9uC,OAAQgR,EAAK,IAAK45C,GAE1E9J,EAActsC,GAAWA,EAAQ9a,KACjCmgD,EAAQ,CAAC,oBAAqB,qBAC9BC,EAAa,GAA0BtlC,EAASqlC,EAAOvlC,GACvD4vC,EAA2B,kBAAhBpD,GAAmD,gBAAhBA,EAAgCtsC,EAAQ0vC,SAAW,KACjG9K,EAAW9kC,EAAY0lC,cACvBgR,EAAgB,GAAqB5R,GAEzC,GAAoB,gBAAhB0H,EAA+B,CACjC,IAAImK,EAA2B,sBAAhBnK,EAAsCoK,GAAiB52C,EAAawlC,EAAYV,EAAU0R,EAAgBC,GAAmB7G,EAAW,CAACA,EAASpkD,MAAOokD,EAASlkD,QAAU,CAAC8qD,EAAgBC,GACxMI,EAASN,EAAapxC,KAEtB0xC,GAAqB,QAAXA,GAA+B,SAAXA,IAEhCA,EAAS,QAGX,IAAIpX,EAAU,CACZuH,YAAauP,EAAavP,YAC1B7hC,KAAM0xC,EACN5P,UAAWsP,EAAatP,WAG1BnC,EAAS1F,SAAS6B,eAKlB,IAAI6V,EAAmB,CACrB7vD,EAAG,EACHC,EAAG,EACHsE,MAAOmrD,EAAS,GAChBjrD,OAAQirD,EAAS,GACjBI,KAAMJ,EAAS,GAAKA,EAAS,IAE/B7R,EAASr1B,UAAUqnC,GACnBE,GAASlS,EAAUrF,GAAS,EAAO,GAEnCqX,EAAmBhS,EAASroC,YAC5BqI,GAAK4xC,GAAe,SAAUpgB,EAAM1vB,GAClC,IAAI0hC,GAAcoO,EAAc9vC,EAAQ,IAAMk+B,GAAUzE,WACxD/J,EAAK7mB,UAAU,YAAc,CAC3B4lC,WAAY,CAAC/M,EAAYA,GACzB5pC,YAAa,EACbwyC,YAAa,GACZ4F,OAIP,IAAIG,EAAWj3C,EAAYxD,UAAUo/B,KAAKtlC,KAC1C2gD,EAASxnC,UAAUynC,GAAsB1c,EAAYoV,EAAUpK,IAAa,GAC5ExlC,EAAYwmC,cAAchM,GAG1B2c,GAASF,EACT,IAAIhkB,GAAA,MAAcuH,EAAWvzC,GAAIuzC,EAAWtzC,EAAGmvD,EAASC,GAAWI,EAAe5R,EAAU,KAsBhG,SAASkS,GAAS1gB,EAAMmJ,EAAS2X,EAAc/X,GAC7C,IAAI7zC,EACAE,EAEJ,IAAI4qC,EAAKiJ,YAAT,CAIA,IAAImR,EAAapa,EAAK75B,YACtBjR,EAAQklD,EAAWllD,MACnBE,EAASglD,EAAWhlD,OAEpB,IAAIilD,EAAYra,EAAKv0B,WACjBrD,EAAciyC,EAAU9+C,IAAIokD,IAC5BoB,EAAe1G,EAAU9+C,IAAIqkD,IAAkB,EAC/CrE,EAAmByF,GAAoB3G,GACvCO,EAActtD,KAAKub,IAAIT,EAAamzC,GACpC0F,EAAe74C,EAAc24C,EAC7BG,EAAoBtG,EAAcmG,EACtC/gB,EAAK7mB,UAAU,CACb/Q,YAAaA,EACbwyC,YAAaA,EACbW,iBAAkBA,IACjB,GACHrmD,EAAQ,GAAQA,EAAQ,EAAI+rD,EAAc,GAC1C7rD,EAAS,GAAQA,EAAS6rD,EAAeC,EAAmB,GAC5D,IAAIC,EAAYjsD,EAAQE,EACpB4zC,EAAeoY,GAAaphB,EAAMqa,EAAW8G,EAAWhY,EAAS2X,EAAc/X,GAEnF,GAAKC,EAAa/9C,OAAlB,CAIA,IAAI0H,EAAO,CACThC,EAAGswD,EACHrwD,EAAGswD,EACHhsD,MAAOA,EACPE,OAAQA,GAENisD,EAAiB,GAAQnsD,EAAOE,GAChCksD,EAAOz6B,IAEP06B,EAAM,GACVA,EAAId,KAAO,EAEX,IAAK,IAAI90D,EAAI,EAAGiP,EAAMouC,EAAa/9C,OAAQU,EAAIiP,GAAM,CACnD,IAAI6E,EAAQupC,EAAar9C,GACzB41D,EAAI31D,KAAK6T,GACT8hD,EAAId,MAAQhhD,EAAM0G,YAAYs6C,KAC9B,IAAIe,EAAQC,GAAMF,EAAKF,EAAgBlY,EAAQuH,aAE3C8Q,GAASF,GACX31D,IACA21D,EAAOE,IAGLD,EAAId,MAAQc,EAAIxjD,MAAMoI,YAAYs6C,KAClC,GAASc,EAAKF,EAAgB1uD,EAAMouD,GAAc,GAClDM,EAAiB,GAAQ1uD,EAAKuC,MAAOvC,EAAKyC,QAC1CmsD,EAAIt2D,OAASs2D,EAAId,KAAO,EACxBa,EAAOz6B,KAQb,GAJI06B,EAAIt2D,QACN,GAASs2D,EAAKF,EAAgB1uD,EAAMouD,GAAc,IAG/CD,EAAc,CACjB,IAAI/O,EAAqBsI,EAAU9+C,IAAI,sBAEb,MAAtBw2C,GAA8BoP,EAAYpP,IAC5C+O,GAAe,GAInB,IAASn1D,EAAI,EAAGiP,EAAMouC,EAAa/9C,OAAQU,EAAIiP,EAAKjP,IAClD+0D,GAAS1X,EAAar9C,GAAIw9C,EAAS2X,EAAc/X,EAAQ,KAQ7D,SAASqY,GAAaphB,EAAMqa,EAAW8G,EAAWhY,EAAS2X,EAAc/X,GACvE,IAAIC,EAAehJ,EAAKroC,UAAY,GAChC+pD,EAAUvY,EAAQt6B,KACV,QAAZ6yC,GAAiC,SAAZA,IAAuBA,EAAU,MACtD,IAAIC,EAAqC,MAArBxY,EAAQwH,WAAqBxH,EAAQwH,WAAa5H,EAEtE,GAAI+X,IAAiBa,EACnB,OAAO3hB,EAAKgJ,aAAe,GAI7BA,EAAe,YAAcA,GAAc,SAAUvpC,GACnD,OAAQA,EAAMwpC,eAEhB,GAAKD,EAAc0Y,GACnB,IAAInzC,EAAOqzC,GAAUvH,EAAWrR,EAAc0Y,GAE9C,GAAiB,IAAbnzC,EAAKkK,IACP,OAAOunB,EAAKgJ,aAAe,GAK7B,GAFAz6B,EAAKkK,IAAMopC,GAAkBxH,EAAW8G,EAAW5yC,EAAKkK,IAAKipC,EAAS1Y,GAErD,IAAbz6B,EAAKkK,IACP,OAAOunB,EAAKgJ,aAAe,GAI7B,IAAK,IAAIr9C,EAAI,EAAGiP,EAAMouC,EAAa/9C,OAAQU,EAAIiP,EAAKjP,IAAK,CACvD,IAAI80D,EAAOzX,EAAar9C,GAAGo+C,WAAax7B,EAAKkK,IAAM0oC,EAEnDnY,EAAar9C,GAAGwtB,UAAU,CACxBsnC,KAAMA,IAeV,OAXIkB,IACF3Y,EAAa/9C,QAAU+0C,EAAK7mB,UAAU,CACpCwgC,YAAY,IACX,GACH3Q,EAAa/9C,OAAS,GAGxB+0C,EAAKgJ,aAAeA,EACpBhJ,EAAK7mB,UAAU,CACb4lC,WAAYxwC,EAAKwwC,aAChB,GACI/V,EAOT,SAAS6Y,GAAkBxH,EAAW8G,EAAW1oC,EAAKipC,EAASI,GAE7D,IAAKJ,EACH,OAAOjpC,EAOT,IAJA,IAAIq5B,EAAauI,EAAU9+C,IAAI,cAC3BX,EAAMknD,EAAgB72D,OACtB82D,EAAcnnD,EAETjP,EAAIiP,EAAM,EAAGjP,GAAK,EAAGA,IAAK,CACjC,IAAI4N,EAAQuoD,EAA4B,QAAZJ,EAAoB9mD,EAAMjP,EAAI,EAAIA,GAAGo+C,WAE7DxwC,EAAQkf,EAAM0oC,EAAYrP,IAC5BiQ,EAAcp2D,EACd8sB,GAAOlf,GAKX,MADY,QAAZmoD,EAAoBI,EAAgB1N,OAAO,EAAGx5C,EAAMmnD,GAAeD,EAAgB1N,OAAO2N,EAAannD,EAAMmnD,GACtGtpC,EAOT,SAAS,GAAKuwB,EAAc0Y,GAQ1B,OAPIA,GACF1Y,EAAan6B,MAAK,SAAUhkB,EAAGC,GAC7B,IAAIyY,EAAmB,QAAZm+C,EAAoB72D,EAAEk/C,WAAaj/C,EAAEi/C,WAAaj/C,EAAEi/C,WAAal/C,EAAEk/C,WAC9E,OAAgB,IAATxmC,EAAyB,QAAZm+C,EAAoB72D,EAAE8c,UAAY7c,EAAE6c,UAAY7c,EAAE6c,UAAY9c,EAAE8c,UAAYpE,KAI7FylC,EAOT,SAAS4Y,GAAUvH,EAAW1iD,EAAU+pD,GAItC,IAFA,IAAIjpC,EAAM,EAED9sB,EAAI,EAAGiP,EAAMjD,EAAS1M,OAAQU,EAAIiP,EAAKjP,IAC9C8sB,GAAO9gB,EAAShM,GAAGo+C,WAOrB,IACIgV,EADA/U,EAAYqQ,EAAU9+C,IAAI,mBAkB9B,OAfK5D,GAAaA,EAAS1M,OAEF,UAAd++C,GAAyB0X,GAClC3C,EAAa,CAACpnD,EAASA,EAAS1M,OAAS,GAAG8+C,WAAYpyC,EAAS,GAAGoyC,YACxD,QAAZ2X,GAAqB3C,EAAW9yB,YAG9B8yB,EAAa,CAACl4B,KAAWA,KACzBrY,GAAK7W,GAAU,SAAU8H,GACvB,IAAIlG,EAAQkG,EAAMsqC,SAASC,GAC3BzwC,EAAQwlD,EAAW,KAAOA,EAAW,GAAKxlD,GAC1CA,EAAQwlD,EAAW,KAAOA,EAAW,GAAKxlD,OAV9CwlD,EAAa,CAACv4C,IAAKA,KAcd,CACLiS,IAAKA,EACLsmC,WAAYA,GAShB,SAAS0C,GAAMF,EAAKF,EAAgBW,GAIlC,IAHA,IAAIC,EAAU,EACVC,EAAUr7B,IAELl7B,EAAI,EAAG80D,OAAO,EAAQ7lD,EAAM2mD,EAAIt2D,OAAQU,EAAIiP,EAAKjP,IACxD80D,EAAOc,EAAI51D,GAAGwa,YAAYs6C,KAEtBA,IACFA,EAAOyB,IAAYA,EAAUzB,GAC7BA,EAAOwB,IAAYA,EAAUxB,IAIjC,IAAI0B,EAAaZ,EAAId,KAAOc,EAAId,KAC5BttD,EAAIkuD,EAAiBA,EAAiBW,EAC1C,OAAOG,EAAa,GAAQhvD,EAAI8uD,EAAUE,EAAYA,GAAchvD,EAAI+uD,IAAYr7B,IAOtF,SAAS,GAAS06B,EAAKF,EAAgB1uD,EAAMouD,EAAcqB,GASzD,IAAIC,EAAYhB,IAAmB1uD,EAAKuC,MAAQ,EAAI,EAChDotD,EAAY,EAAID,EAChBE,EAAK,CAAC,IAAK,KACXv+C,EAAK,CAAC,QAAS,UACfnX,EAAO8F,EAAK4vD,EAAGF,IACfG,EAAiBnB,EAAiBE,EAAId,KAAOY,EAAiB,GAE9De,GAASI,EAAiB7vD,EAAKqR,EAAGs+C,OACpCE,EAAiB7vD,EAAKqR,EAAGs+C,KAG3B,IAAK,IAAI32D,EAAI,EAAG82D,EAASlB,EAAIt2D,OAAQU,EAAI82D,EAAQ92D,IAAK,CACpD,IAAIq0C,EAAOuhB,EAAI51D,GACXqyD,EAAa,GACb0E,EAAOF,EAAiBxiB,EAAK75B,YAAYs6C,KAAO+B,EAAiB,EACjEG,EAAM3E,EAAWh6C,EAAGs+C,IAAc,GAAQE,EAAiB,EAAIzB,EAAc,GAE7E6B,EAASjwD,EAAK4vD,EAAGF,IAAc1vD,EAAKqR,EAAGq+C,IAAcx1D,EACrDg2D,EAAQl3D,IAAM82D,EAAS,GAAKG,EAASF,EAAOE,EAASF,EACrDI,EAAM9E,EAAWh6C,EAAGq+C,IAAc,GAAQQ,EAAQ,EAAI9B,EAAc,GACxE/C,EAAWuE,EAAGD,IAAc3vD,EAAK4vD,EAAGD,IAAc,GAAQvB,EAAc4B,EAAM,GAC9E3E,EAAWuE,EAAGF,IAAcx1D,EAAO,GAAQk0D,EAAc+B,EAAM,GAC/Dj2D,GAAQg2D,EACR7iB,EAAK7mB,UAAU6kC,GAAY,GAG7BrrD,EAAK4vD,EAAGD,KAAeE,EACvB7vD,EAAKqR,EAAGs+C,KAAeE,EAIzB,SAASlC,GAAiB52C,EAAawlC,EAAYV,EAAU0R,EAAgBC,GAG3E,IAOI3gD,EAPAqqC,GAAYqF,GAAc,IAAIlP,KAC9B+iB,EAAc,CAAC7C,EAAgBC,GAEnC,IAAKtW,GAAYA,IAAa2E,EAC5B,OAAOuU,EAIT,IAAIC,EAAW9C,EAAiBC,EAC5BM,EAAOuC,EAAWt5C,EAAYpE,OAAOurC,gBAEzC,MAAOrxC,EAASqqC,EAAS3xC,WAAY,CAKnC,IAHA,IAAIugB,EAAM,EACN8oB,EAAW/hC,EAAO7H,SAEbhM,EAAI,EAAGiP,EAAM2mC,EAASt2C,OAAQU,EAAIiP,EAAKjP,IAC9C8sB,GAAO8oB,EAAS51C,GAAGo+C,WAGrB,IAAIkZ,EAAgBpZ,EAASE,WAE7B,GAAsB,IAAlBkZ,EACF,OAAOF,EAGTtC,GAAQhoC,EAAMwqC,EAEd,IAAIr9B,EAAcpmB,EAAOiM,WACrBrD,EAAcwd,EAAYrqB,IAAIokD,IAC9B/E,EAActtD,KAAKub,IAAIT,EAAa44C,GAAoBp7B,IAC5D66B,GAAQ,EAAIr4C,EAAcA,GAAe,EAAIA,EAAcwyC,GAAettD,KAAKugC,IAAI4yB,EAAM,IACzFA,EAAO,UAAqBA,EAAO,SACnC5W,EAAWrqC,EAGbihD,EAAOuC,IAAavC,EAAOuC,GAC3B,IAAIh0C,EAAQ1hB,KAAKugC,IAAI4yB,EAAOuC,EAAU,IACtC,MAAO,CAAC9C,EAAiBlxC,EAAOmxC,EAAkBnxC,GAIpD,SAAS4xC,GAAsB1c,EAAYoV,EAAUpK,GACnD,GAAIoK,EACF,MAAO,CACL3oD,EAAG2oD,EAAS3oD,EACZC,EAAG0oD,EAAS1oD,GAIhB,IAAIsyD,EAAkB,CACpBvyD,EAAG,EACHC,EAAG,GAGL,IAAKs+C,EACH,OAAOgU,EAMT,IAAI9U,EAAac,EAAWlP,KACxBvzB,EAAS2hC,EAAWjoC,YAExB,IAAKsG,EACH,OAAOy2C,EAIT,IAAIC,EAAe,CAAC12C,EAAOvX,MAAQ,EAAGuX,EAAOrX,OAAS,GAClD4qC,EAAOoO,EAEX,MAAOpO,EAAM,CACX,IAAIge,EAAahe,EAAK75B,YACtBg9C,EAAa,IAAMnF,EAAWrtD,EAC9BwyD,EAAa,IAAMnF,EAAWptD,EAC9BovC,EAAOA,EAAK9nC,WAGd,MAAO,CACLvH,EAAGuzC,EAAWhvC,MAAQ,EAAIiuD,EAAa,GACvCvyD,EAAGszC,EAAW9uC,OAAS,EAAI+tD,EAAa,IAM5C,SAAStC,GAAS7gB,EAAMojB,EAAUhD,EAAe5R,EAAUzF,GACzD,IAAIiV,EAAahe,EAAK75B,YAClBk9C,EAAsBjD,EAAcrX,GACpCqS,EAAkBiI,GAAuBA,IAAwBrjB,EAErE,KAAIqjB,IAAwBjI,GAAmBrS,IAAUqX,EAAcn1D,QAAU+0C,IAASwO,GAA1F,CAIAxO,EAAK7mB,UAAU,CAEbmhC,UAAU,EAGVp3C,WAAYk4C,IAAoBgI,EAASE,UAAUtF,GACnD5C,gBAAiBA,IAChB,GAEH,IAAImI,EAAgB,IAAI5mB,GAAA,KAAaymB,EAASzyD,EAAIqtD,EAAWrtD,EAAGyyD,EAASxyD,EAAIotD,EAAWptD,EAAGwyD,EAASluD,MAAOkuD,EAAShuD,QACpHoZ,GAAKwxB,EAAKgJ,cAAgB,IAAI,SAAUvpC,GACtCohD,GAASphD,EAAO8jD,EAAenD,EAAe5R,EAAUzF,EAAQ,OAIpE,SAASiY,GAAoBn0C,GAC3B,OAAOA,EAAMtR,IAAIskD,IAAyBhzC,EAAMtR,IAAIukD,IAA2B,ECpgB1E,SAAS,GAAQ76C,GACtBA,EAAU4R,oBAAoB47B,IAC9BxtC,EAAU2R,kBAAkB,IAC5B3R,EAAUoqB,eAAem0B,IACzBv+C,EAAU6R,eAAe2sC,IACzB1U,GAAqB9pC,G,8BCJnBy+C,GAAoB,CAAC,YAAa,WAKlC,GAEJ,SAAUhqD,GAGR,SAASiqD,EAAY19C,EAAM+H,GACzB,IAAIhV,EAAQU,EAAOE,KAAKrJ,OAASA,KAE7B80B,EAAUrsB,EACV0jB,EAAY,IAAI,QAChB3mB,EAAO,IAAI,QAOf,OANAsvB,EAAQlG,eAAeppB,GAEvBiD,EAAMinB,iBAAiBvD,GAEvB1jB,EAAMomB,WAAWnZ,EAAM+H,GAAK,GAErBhV,EAmGT,OAjHA,gBAAU2qD,EAAajqD,GAiBvBiqD,EAAYtzD,UAAU+uB,WAAa,SAAUnZ,EAAM+H,EAAKqR,GACtD,IAAIgG,EAAU90B,KACVmZ,EAAczD,EAAKqZ,UACnB/S,EAAYtG,EAAKuG,aAAawB,GAC9BvB,EAASxG,EAAK4B,cAAcmG,GAC5BkG,EAAgB3H,EAAUd,SAAS,YACnCrc,EAAUmd,EAAUhR,IAAImoD,IAC5Bt0D,EAAqB,MAAXA,EAAkB,EAAIA,EAEhCi2B,EAAQjZ,SAASnG,EAAKmN,cAAcpF,EAAK,UACzCqX,EAAQh7B,MAAM6F,SAAW,QAErBmvB,GACFgG,EAAQ/Y,SAAS,CACfoI,OAAQjI,EAAOiI,SAEjB2Q,EAAQh7B,MAAM+E,QAAU,EACxBowB,GAAA,aAAkB6F,EAAS,CACzBh7B,MAAO,CACL+E,QAASA,IAEVsa,EAAasE,IAEhBwR,GAAA,eAAoB6F,EAAS,CAC3Bh7B,MAAO,CACL+E,QAASA,GAEX4E,MAAO,CACL0gB,OAAQjI,EAAOiI,SAEhBhL,EAAasE,GAGlB,gBAAyBqX,EAAS9Y,GAElChc,KAAKkvB,aAAaxZ,EAAM+H,GAExB,gBAAoBzd,KAAM2jB,EAAc3Y,IAAI,SAAU2Y,EAAc3Y,IAAI,eAG1EooD,EAAYtzD,UAAUovB,aAAe,SAAUxZ,EAAM+H,GACnD,IAAIqX,EAAU90B,KACVmsB,EAAYnsB,KAAKosB,mBACjBgD,EAAY0F,EAAQrR,iBACpBtK,EAAczD,EAAKqZ,UACnB/S,EAAYtG,EAAKuG,aAAawB,GAC9BvB,EAASxG,EAAK4B,cAAcmG,GAC5B2U,EAAclW,EAAOsH,MACrB1pB,EAAQ4b,EAAKmN,cAAcpF,EAAK,SAChC4R,EAAcv1B,EAAMgE,KACxB,gBACAsxB,EAAW,gBAAqBpT,GAAY,CAC1CkH,aAAcxN,EAAKqZ,UACnB5L,eAAgB1F,EAChB6F,eAAgBxpB,EAAM+E,QACtBukB,YAAa1N,EAAK4T,QAAQ7L,IACzB,CACDopB,OAAQ,CACNvZ,MAAO8E,EAAYvsB,UACnBwnB,cAAe+E,EAAY/E,iBAG/ByH,EAAQ5G,cAAc,CACpBmlC,OAAO,EACPllC,SAAUiE,EAAYjE,OACtBmlC,aAAcjkC,EAEdkkC,YAAalkC,IAEf,IAAIpF,EAAamI,EAAYnI,WAC7BkC,EAAUpQ,SAAS,CACjBoI,OAAQ8F,IAEV6K,EAAQxG,oBAAsB,CAC5BC,OAAQtE,EAAa,IAAI,QAAcA,EAAW,GAAG,GAAIA,EAAW,GAAG,IAAM,MAI/EgF,GAAA,eAAoBG,EAAW,CAC7Bt1B,MAAO,CACLsG,EAAGgyB,EAAYhyB,EACfC,EAAG+xB,EAAY/xB,IAEhB8Y,EAAasE,GAChB2R,EAAUhxB,KAAK,CACbuN,SAAUymB,EAAYzmB,SACtBk6B,QAASzT,EAAYhyB,EACrB0lC,QAAS1T,EAAY/xB,EACrBkhB,GAAI,KAEN,gBAAkBuT,EAAS,gBAAyB9Y,GAAY,CAE9Dhe,OAAQqxB,KAIL+jC,EAlHT,CAmHE,SAEE,GAEJ,SAAUjqD,GAGR,SAASqqD,IACP,IAAI/qD,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAOi1D,EAAWj1D,KACxBkK,EAAMmnB,uBAAwB,EACvBnnB,EA+BT,OAtCA,gBAAU+qD,EAAYrqD,GAUtBqqD,EAAW1zD,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAC5D,IAAI1D,EAAOyD,EAAYxD,UACnB2E,EAAUta,KAAKua,MACfrN,EAAQlN,KAAKkN,MACjBwI,EAAK1C,KAAKsH,GAAS7S,KAAI,SAAUgW,GAC/B,IAAIg2C,EAAc,IAAI,GAAY/9C,EAAM+H,GACxC/H,EAAK+G,iBAAiBgB,EAAKg2C,GAC3BvmD,EAAMzF,IAAIgsD,MACTzpD,QAAO,SAAUkmB,EAAQC,GAC1B,IAAIujC,EAAQp5C,EAAQwC,iBAAiBqT,GACrCujC,EAAM7kC,WAAWnZ,EAAMwa,GACvBhjB,EAAMzF,IAAIisD,GACVh+C,EAAK+G,iBAAiByT,EAAQwjC,MAC7B5lD,QAAO,SAAU2P,GAClB,IAAIi2C,EAAQp5C,EAAQwC,iBAAiBW,GACrCwR,GAAA,4BAAiCykC,EAAOv6C,EAAasE,MACpDV,UACH/c,KAAKua,MAAQ7E,GAGf89C,EAAW1zD,UAAUgO,OAAS,WAC5B9N,KAAKkN,MAAMiQ,YACXnd,KAAKua,MAAQ,MAGfi5C,EAAW1zD,UAAUmU,QAAU,aAE/Bu/C,EAAWj1D,KAAO,SACXi1D,EAvCT,CAwCElzC,GAAA,MAEa,MCtKX,GAEJ,SAAUnX,GAGR,SAASwqD,IACP,IAAIlrD,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAOo1D,EAAkBp1D,KAC/BkK,EAAM+nB,uBAAwB,EACvB/nB,EA6FT,OApGA,gBAAUkrD,EAAmBxqD,GAU7BwqD,EAAkB7zD,UAAU+vB,KAAO,SAAU9a,GAC3C5L,EAAOrJ,UAAU+vB,KAAKhb,MAAM7U,KAAM8C,WAIlC9C,KAAKywB,qBAAuB,IAAIC,GAAA,KAAqB,UAAY1wB,KAAK2V,QAAS3V,MAAO,UAAYA,KAAK2wB,WAAY3wB,OAEnHA,KAAK4wB,kBAAkB7b,IAGzB4+C,EAAkB7zD,UAAUgV,eAAiB,SAAUC,EAAQC,GAC7D,OAAO,OAAA8b,GAAA,MAAiB9wB,KAAM,CAC5B+wB,gBAAiB,CAAC,SAClBC,gBAAiB,WAAa,QAA8BhxB,SAIhE2zD,EAAkB7zD,UAAU8wB,kBAAoB,SAAU7b,GAExD,gBAAgBA,EAAQ,YAAa,CAAC,SACtC,IAAIsc,EAAqBtc,EAAOoX,UAC5BmF,EAAuBvc,EAAOwc,SAASpF,UAE3CkF,EAAmBG,KAAOH,EAAmBG,MAAQzc,EAAOyO,MAAMgO,KAClEF,EAAqBE,KAAOF,EAAqBE,MAAQzc,EAAOwc,SAAS/N,MAAMgO,MAIjFmiC,EAAkB7zD,UAAUmxB,cAAgB,SAAU7Z,GACpD,IAAI1B,EAAO1V,KAAK2V,UAEZsE,EAAS9Q,EAAOrJ,UAAUmxB,cAAc5nB,KAAKrJ,KAAMoX,GAEnDyQ,EAAWnS,EAAKwI,aAAa,SAC7BgK,EAAMxS,EAAKyS,OAAON,GAItB,OAFA5N,EAAOkX,QAAWjJ,IAAYxS,EAAK1K,IAAI6c,EAAUzQ,GAAa8Q,EAAM,KAAKrZ,QAAQ,GAAzD,EACxBoL,EAAOmX,MAAM/1B,KAAK,WACX4e,GAGT05C,EAAkBp1D,KAAO,gBACzBo1D,EAAkBz9C,cAAgB,CAChCC,OAAQ,EACRC,EAAG,EACHC,iBAAiB,EACjBrR,KAAM,GACN4sB,IAAK,GACL3sB,MAAO,GACP4sB,OAAQ,GAMR+hC,QAAS,KACTC,QAAS,OACTv1C,KAAM,aACN80B,OAAQ,WACR0gB,IAAK,EACLC,YAAa,SACbvwC,MAAO,CACLgO,MAAM,EACN1H,SAAU,SAGZqC,UAAW,CACTqF,MAAM,EACN92B,OAAQ,GACRy3B,UAAW,CAETxtB,MAAO,IAGXsT,UAAW,CAETL,YAAa,OACbC,YAAa,GAEf0Z,SAAU,CACR/N,MAAO,CACLgO,MAAM,IAGVxZ,OAAQ,CACNC,UAAW,CACTL,YAAa,aAIZ+7C,EArGT,CAsGEh9C,GAAA,MAEaq9C,GAAA,GC/Gf,SAAS,GAAY76C,EAAaC,GAChC,OAAO,QAAqBD,EAAYsO,qBAAsB,CAC5D9iB,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,cAIhB,SAASiiD,GAAiBv+C,EAAM4I,GAQ9B,IAPA,IAAIuJ,EAAWnS,EAAKwI,aAAa,SAC7Bg2C,EAAWx+C,EAAKy+C,SAAStsC,GAAU,SAAUnqB,GAC/C,OAAOA,KAELvC,EAAU,GACVi5D,EAAuB,cAAT91C,EAETljB,EAAI,EAAGiP,EAAMqL,EAAKpa,QAASF,EAAIiP,EAAKjP,IAC3CD,EAAQC,GAAKA,EAYf,MARoB,oBAATkjB,EACTnjB,EAAQmjB,KAAKA,GACK,SAATA,GACTnjB,EAAQmjB,MAAK,SAAUhkB,EAAGC,GACxB,OAAO65D,EAAcF,EAAS55D,GAAK45D,EAAS35D,GAAK25D,EAAS35D,GAAK25D,EAAS55D,MAIrEa,EAGT,SAAS,GAAYua,GACnB,IAAIyD,EAAczD,EAAKqZ,UACnBqkB,EAASj6B,EAAYnO,IAAI,UAC7B0K,EAAKuI,MAAK,SAAUR,GAClB,IAOI5X,EACA6mB,EACAC,EACA1C,EAVAjO,EAAYtG,EAAKuG,aAAawB,GAC9B4O,EAAarQ,EAAUd,SAAS,SAChCoR,EAAgBD,EAAWrhB,IAAI,YAC/BuhB,EAAiBvQ,EAAUd,SAAS,aACpCgB,EAASxG,EAAK4B,cAAcmG,GAC5B0G,EAASjI,EAAOiI,OAChB6I,EAAkC,UAAlBV,GAA+C,WAAlBA,GAAgD,WAAlBA,GAAgD,eAAlBA,GAAoD,gBAAlBA,EAM/I,GAAIU,EACoB,eAAlBV,GACFI,GAASvI,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EAAI,EAC5CwI,GAASxI,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACxCte,EAAY,QACe,gBAAlBymB,GACTI,GAASvI,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EAAI,EAC5CwI,GAASxI,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACxCte,EAAY,UAEZ6mB,GAASvI,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACtEwI,GAASxI,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACtEte,EAAY,UAGdokB,EAAa,CAAC,CAACyC,EAAOC,GAAQ,CAACD,EAAOC,QACjC,CACL,IAAIM,OAAK,EACLC,OAAK,EACLzsB,OAAK,EACLC,OAAK,EACL8rB,EAAeD,EAAevhB,IAAI,UAElC,EAYkB,SAAlBshB,GAEFW,GAAM9I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrC+I,GAAM/I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrC1jB,EAAKwsB,EAAKT,EACVE,EAAQjsB,EAAK,EACboF,EAAY,SACe,UAAlBymB,GAETW,GAAM9I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrC+I,GAAM/I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrC1jB,EAAKwsB,EAAKT,EACVE,EAAQjsB,EAAK,EACboF,EAAY,QACe,QAAlBymB,GAETW,GAAM9I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrC+I,GAAM/I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrCzjB,EAAKwsB,EAAKV,EACVG,EAAQjsB,EAAK,EACbmF,EAAY,UACe,WAAlBymB,GAETW,GAAM9I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrC+I,GAAM/I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrCzjB,EAAKwsB,EAAKV,EACVG,EAAQjsB,EAAK,EACbmF,EAAY,UACe,aAAlBymB,GAETW,EAAgB,eAAXmmB,EAA0BjvB,EAAO,GAAG,GAAKA,EAAO,GAAG,GACxD+I,EAAgB,eAAXkmB,EAA0BjvB,EAAO,GAAG,GAAKA,EAAO,GAAG,GAEzC,eAAXivB,GACF1yC,EAAKwsB,EAAKV,EACVG,EAAQjsB,EAAK,EACbmF,EAAY,WAEZpF,EAAKwsB,EAAKT,EACVE,EAAQjsB,EAAK,EACboF,EAAY,QAEa,gBAAlBymB,GAETW,EAAK9I,EAAO,GAAG,GACf+I,EAAK/I,EAAO,GAAG,GAEA,eAAXivB,GACF1yC,EAAKwsB,EAAKV,EACVG,EAAQjsB,EAAK,EACbmF,EAAY,WAEZpF,EAAKwsB,EAAKT,EACVE,EAAQjsB,EAAK,EACboF,EAAY,WAEa,YAAlBymB,GAETW,EAAK9I,EAAO,GAAG,GACf+I,EAAgB,eAAXkmB,EAA0BjvB,EAAO,GAAG,GAAKA,EAAO,GAAG,GAEzC,eAAXivB,GACF1yC,EAAKwsB,EAAKV,EACVG,EAAQjsB,EAAK,EACbmF,EAAY,WAEZpF,EAAKwsB,EAAKT,EACVE,EAAQjsB,EAAK,EACboF,EAAY,UAEa,eAAlBymB,GAETW,EAAgB,eAAXmmB,EAA0BjvB,EAAO,GAAG,GAAKA,EAAO,GAAG,GACxD+I,EAAgB,eAAXkmB,EAA0BjvB,EAAO,GAAG,GAAKA,EAAO,GAAG,GAEzC,eAAXivB,GACF1yC,EAAKwsB,EAAKV,EACVG,EAAQjsB,EAAK,EACbmF,EAAY,WAEZpF,EAAKwsB,EAAKT,EACVE,EAAQjsB,EAAK,EACboF,EAAY,WAIdonB,GAAM9I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EACrC+I,GAAM/I,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,EAEtB,eAAXivB,GACF1yC,EAAKwsB,EAAKV,EACVG,EAAQjsB,EAAK,EACbmF,EAAY,WAEZpF,EAAKwsB,EAAKT,EACVE,EAAQjsB,EAAK,EACboF,EAAY,SAID,eAAXutC,GACF3yC,EAAKwsB,EACLP,EAAQjsB,IAERC,EAAKwsB,EACLP,EAAQjsB,GAGVupB,EAAa,CAAC,CAACgD,EAAIC,GAAK,CAACzsB,EAAIC,IAG/Bwb,EAAOsH,MAAQ,CACbyG,WAAYA,EACZ7pB,EAAGssB,EACHrsB,EAAGssB,EACHU,cAAe,SACfxnB,UAAWA,EACXsoB,OAAQnB,MAKC,SAASqnC,GAAar/C,EAASoE,GAC5CpE,EAAQ4S,iBAAiB,UAAU,SAAUzO,GAC3C,IAAIzD,EAAOyD,EAAYxD,UACnBkS,EAAWnS,EAAKwI,aAAa,SAC7BI,EAAOnF,EAAYnO,IAAI,QACvB8c,EAAW,GAAY3O,EAAaC,GACpCg6B,EAASj6B,EAAYnO,IAAI,UACzBye,EAAY3B,EAASnjB,MACrB+kB,EAAa5B,EAASjjB,OACtB1J,EAAU84D,GAAiBv+C,EAAM4I,GACjCle,EAAI0nB,EAAS1nB,EACbC,EAAIynB,EAASznB,EACbi0D,EAAwB,eAAXlhB,EAA0B,CAAC,gBAAaj6B,EAAYnO,IAAI,WAAY0e,GAAa,gBAAavQ,EAAYnO,IAAI,WAAY0e,IAAe,CAAC,gBAAavQ,EAAYnO,IAAI,WAAYye,GAAY,gBAAatQ,EAAYnO,IAAI,WAAYye,IACrP+kC,EAAa94C,EAAK6S,cAAcV,GAChCrP,EAAMW,EAAYnO,IAAI,OACtBsN,EAAMa,EAAYnO,IAAI,OAEf,MAAPwN,IACFA,EAAMzb,KAAKyb,IAAIg2C,EAAW,GAAI,IAGrB,MAAPl2C,IACFA,EAAMk2C,EAAW,IAGnB,IAAIuF,EAAc56C,EAAYnO,IAAI,eAC9B8oD,EAAM36C,EAAYnO,IAAI,OACtB6xB,EAAsB,eAAXuW,EAA0B3pB,EAAYC,EACjD6qC,GAAY13B,EAAWi3B,GAAOp+C,EAAKpa,QAAU,IAAMoa,EAAKpa,QAExDk5D,EAAgB,SAAU/2C,EAAKlT,GAEjC,GAAe,eAAX6oC,EAAyB,CAC3B,IAAIqhB,EAAQ/+C,EAAK1K,IAAI6c,EAAUpK,IAAQ,EACnCosB,EAAa,gBAAU4qB,EAAO,CAACj8C,EAAKF,GAAMg8C,GAAY,GACtDpyD,OAAK,EAET,OAAQ6xD,GACN,IAAK,MACH7xD,EAAK7B,EACL,MAEF,IAAK,SACH6B,EAAK7B,GAAKqpB,EAAamgB,GAAc,EACrC,MAEF,IAAK,SACH3nC,EAAK7B,GAAKqpB,EAAamgB,GACvB,MAGJ,MAAO,CAAC,CAACt/B,EAAQrI,GAAK,CAACqI,EAAQrI,EAAK2nC,IAGtC,IAEI5nC,EAFAvE,EAAMgY,EAAK1K,IAAI6c,EAAUpK,IAAQ,EACjCmsB,EAAY,gBAAUlsC,EAAK,CAAC8a,EAAKF,GAAMg8C,GAAY,GAGvD,OAAQP,GACN,IAAK,OACH9xD,EAAK7B,EACL,MAEF,IAAK,SACH6B,EAAK7B,GAAKqpB,EAAYmgB,GAAa,EACnC,MAEF,IAAK,QACH3nC,EAAK7B,EAAIqpB,EAAYmgB,EACrB,MAGJ,MAAO,CAAC,CAAC3nC,EAAIsI,GAAS,CAACtI,EAAK2nC,EAAWr/B,KAG5B,cAAT+T,IAEFi2C,GAAYA,EACZT,GAAOA,EAEQ,eAAX1gB,EACFhzC,GAAKqpB,EAELppB,GAAKqpB,EAGPvuB,EAAUA,EAAQugC,WAGpB,IAAK,IAAItgC,EAAI,EAAGA,EAAID,EAAQT,OAAQU,IAAK,CACvC,IAAIqiB,EAAMtiB,EAAQC,GACds5D,EAAUv5D,EAAQC,EAAI,GACtB4gB,EAAYtG,EAAKuG,aAAawB,GAElC,GAAe,eAAX21B,EAAyB,CAC3B,IAAIzuC,EAAQqX,EAAUhR,IAAI,CAAC,YAAa,UAE3B,MAATrG,EACFA,EAAQ4vD,GAER5vD,EAAQ,gBAAaA,EAAO8kB,GAEf,cAATnL,IACF3Z,GAASA,IAIb,IAAI4/C,EAAQiQ,EAAc/2C,EAAKrd,GAC3Bu0D,EAAMH,EAAcE,EAASt0D,EAAIuE,GACrCvE,GAAKuE,EAAQmvD,EACbp+C,EAAKoT,cAAcrL,EAAK,CACtB0G,OAAQogC,EAAM9oB,OAAOk5B,EAAIn6D,QAAQkhC,iBAE9B,CACL,IAAI72B,EAASmX,EAAUhR,IAAI,CAAC,YAAa,WAE3B,MAAVnG,EACFA,EAAS0vD,GAET1vD,EAAS,gBAAaA,EAAQ6kB,GAEjB,cAATpL,IACFzZ,GAAUA,IAIV0/C,EAAQiQ,EAAc/2C,EAAKpd,GAC3Bs0D,EAAMH,EAAcE,EAASr0D,EAAIwE,GACrCxE,GAAKwE,EAASivD,EACdp+C,EAAKoT,cAAcrL,EAAK,CACtB0G,OAAQogC,EAAM9oB,OAAOk5B,EAAIn6D,QAAQkhC,cAKvC,GAAYhmB,MClVT,SAAS,GAAQhB,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoB0tC,IAC9Bt/C,EAAU6R,eAAe8tC,IACzB3/C,EAAUkS,kBAAkBsC,GAAW,WCFzC,IAAI0rC,GAAiB,GAEjB,GAEJ,SAAUzrD,GAGR,SAAS0rD,IACP,IAAIpsD,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAKhE,OAHAyI,EAAMlK,KAAOs2D,EAAat2D,KAC1BkK,EAAMqsD,WAAa,IAAI,QACvBrsD,EAAMssD,cAAe,EACdtsD,EAmFT,OA3FA,gBAAUosD,EAAc1rD,GAWxB0rD,EAAa/0D,UAAU+vB,KAAO,WAC5B7vB,KAAKkN,MAAMzF,IAAIzH,KAAK80D,aAOtBD,EAAa/0D,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,EAAKC,GACnE,IAAI27C,EAAYh1D,KAAK80D,WACjBp/C,EAAOyD,EAAYxD,UACnB2E,EAAUta,KAAKua,MACflF,EAAW8D,EAAY7D,iBACvB0gB,EAAa3gB,EAAS2gB,WACtBi/B,EAAcC,GAAgB/7C,GAGlC,SAAS1R,EAAI0tD,GACX,IAAIC,EAAOC,GAAM3/C,EAAMs/C,EAAWG,EAAcn/B,EAAY3gB,GAC5DigD,GAAeF,EAAM1/C,EAAMy/C,EAAcF,GAG3C,SAASjrD,EAAOmrD,EAAcI,GAC5B,IAAIH,EAAO96C,EAAQwC,iBAAiBy4C,GAChCpxC,EAASqxC,GAAiB9/C,EAAMy/C,EAAcn/B,EAAY3gB,GAC9DK,EAAK+G,iBAAiB04C,EAAcC,GACpCnmC,GAAA,eAAoBmmC,EAAM,CACxB3xD,MAAO,CACL0gB,OAAQA,IAEThL,EAAag8C,GAChBG,GAAeF,EAAM1/C,EAAMy/C,EAAcF,GAG3C,SAASnnD,EAAOynD,GACd,IAAIH,EAAO96C,EAAQwC,iBAAiBy4C,GACpCP,EAAUlnD,OAAOsnD,GAInB,GAzBA1/C,EAAK1C,KAAKsH,GAAS7S,IAAIA,GAAKuC,OAAOA,GAAQ8D,OAAOA,GAAQiP,WAyBrD/c,KAAK+0D,aAAc,CACtB/0D,KAAK+0D,cAAe,EACpB,IAAI9oD,EAAWwpD,GAAoBpgD,EAAU8D,GAAa,WAExDu8C,YAAW,WACTV,EAAUj6C,uBAGdi6C,EAAU13C,YAAYrR,GAGxBjM,KAAKua,MAAQ7E,GAGfm/C,EAAa/0D,UAAU+Z,yBAA2B,SAAUV,EAAanE,EAASoE,GAChFpZ,KAAK+0D,cAAe,EACpB/0D,KAAKua,MAAQ,KAEbva,KAAK80D,WAAW33C,aAGlB03C,EAAa/0D,UAAUka,kBAAoB,SAAU27C,EAAYx8C,EAAanE,GAM5E,IALA,IAAIU,EAAOyD,EAAYxD,UACnBN,EAAW8D,EAAY7D,iBACvB0gB,EAAa3gB,EAAS2gB,WACtBi/B,EAAcC,GAAgB/7C,GAEzB/B,EAAYu+C,EAAWpR,MAAOntC,EAAYu+C,EAAWhB,IAAKv9C,IAAa,CAC9E,IAAIg+C,EAAOC,GAAM3/C,EAAM1V,KAAK80D,WAAY19C,EAAW4e,EAAY3gB,GAC/D+/C,EAAK5wC,aAAc,EACnB8wC,GAAeF,EAAM1/C,EAAM0B,EAAW69C,KAI1CJ,EAAa/0D,UAAUgO,OAAS,WAC9B9N,KAAK80D,YAAc90D,KAAK80D,WAAW33C,YACnCnd,KAAKua,MAAQ,MAGfs6C,EAAat2D,KAAO,WACbs2D,EA5FT,CA6FEv0C,GAAA,MAEF,SAASm1C,GAAoBpgD,EAAU8D,EAAao4B,GAClD,IAAIqkB,EAAgBvgD,EAASiH,MACzBla,EAAOiT,EAASwgD,UAChB/J,EAAS,IAAI,QAAa,CAC5BroD,MAAO,CACLrD,EAAGgC,EAAKhC,EACRC,EAAG+B,EAAK/B,EACRsE,MAAOvC,EAAKuC,MACZE,OAAQzC,EAAKyC,UAGb2V,EAAsC,eAAhCo7C,EAAc5qD,IAAI,UAA6B,QAAU,SAQnE,OAPA8gD,EAAO/vC,SAASvB,EAAK,GACrByU,GAAA,aAAkB68B,EAAQ,CACxBroD,MAAO,CACLkB,MAAOvC,EAAKuC,MACZE,OAAQzC,EAAKyC,SAEdsU,EAAao4B,GACTua,EAGT,SAAS0J,GAAiB9/C,EAAM0B,EAAW4e,EAAY3gB,GAGrD,IAFA,IAAI8O,EAAS,GAEJ/oB,EAAI,EAAGA,EAAI46B,EAAWt7B,OAAQU,IAAK,CAC1C,IAAI06D,EAAU9/B,EAAW56B,GACrB4N,EAAQ0M,EAAK1K,IAAI0K,EAAKwI,aAAa43C,GAAU1+C,GAE5C2+C,GAAa/sD,EAAOqM,EAAS2gD,QAAQF,GAASv3D,OACjD4lB,EAAO9oB,KAAKga,EAASG,YAAYxM,EAAO8sD,IAI5C,OAAO3xC,EAGT,SAASkxC,GAAM3/C,EAAMs/C,EAAW59C,EAAW4e,EAAY3gB,GACrD,IAAI8O,EAASqxC,GAAiB9/C,EAAM0B,EAAW4e,EAAY3gB,GACvD+/C,EAAO,IAAI,QAAiB,CAC9B3xD,MAAO,CACL0gB,OAAQA,GAGV5C,GAAI,KAIN,OAFAyzC,EAAUvtD,IAAI2tD,GACd1/C,EAAK+G,iBAAiBrF,EAAWg+C,GAC1BA,EAGT,SAASF,GAAgB/7C,GACvB,IAAI+Y,EAAS/Y,EAAYnO,IAAI,UAAU,GAIvC,OAHW,IAAXknB,IAAoBA,EAAS0iC,IAC7B1iC,EAAS,gBAAgBA,GACzB,mBAAMA,KAAYA,EAAS,GACpB,CACLA,OAAQA,GAIZ,SAASojC,GAAej3D,EAAIqX,EAAM0B,EAAW69C,GAC3C52D,EAAGwd,SAASnG,EAAKmN,cAAczL,EAAW,UAC1C/Y,EAAGvE,MAAMgE,KAAO,KAChBO,EAAG0d,SAAS,SAAUk5C,EAAY/iC,QAClC,IAAIlW,EAAYtG,EAAKuG,aAAa7E,GAC9BuM,EAAgB3H,EAAUd,SAAS,YACvC,gBAAyB7c,EAAI2d,EAAW,aACxC,gBAAoB3d,EAAIslB,EAAc3Y,IAAI,SAAU2Y,EAAc3Y,IAAI,cAsBxE,SAAS+qD,GAAar4D,EAAKu4D,GACzB,MAAoB,aAAbA,EAAiC,MAAPv4D,EAAqB,MAAPA,GAAeyE,MAAMzE,GAGvD,UClMX,GAEJ,SAAUyL,GAGR,SAAS+sD,IACP,IAAIztD,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAKhE,OAHAyI,EAAMlK,KAAO23D,EAAoB33D,KACjCkK,EAAM0tD,sBAAwB,YAC9B1tD,EAAM2tD,eAAiB,SAChB3tD,EAqDT,OA7DA,gBAAUytD,EAAqB/sD,GAW/B+sD,EAAoBp2D,UAAUgV,eAAiB,SAAUC,EAAQC,GAC/D,OAAO,OAAAC,GAAA,MAAoBjV,KAAKkV,YAAalV,KAAM,CACjDmV,mBAAoB,kBAAKkhD,GAAmB,KAAMr2D,SAUtDk2D,EAAoBp2D,UAAUw2D,2BAA6B,SAAUC,GACnE,IAAIlhD,EAAWrV,KAAKsV,iBAChBI,EAAO1V,KAAK2V,UACZxa,EAAU,GAMd,OALAka,EAASmhD,gBAAgB9gD,GAAM,SAAU+gD,EAAgBr/C,GACnDm/C,IAAgBE,GAClBt7D,EAAQE,KAAKqa,EAAKokC,YAAY1iC,OAG3Bjc,GAGT+6D,EAAoB33D,KAAO,kBAC3B23D,EAAoB3+C,aAAe,CAAC,YACpC2+C,EAAoBhgD,cAAgB,CAClCC,OAAQ,EACRC,EAAG,EACHd,iBAAkB,WAClBohD,cAAe,EACflzC,MAAO,CACLgO,MAAM,GAERmlC,gBAAiB,IACjBC,cAAe,EACfzkC,UAAW,CACTxtB,MAAO,EACP9F,QAAS,IACTN,KAAM,SAERgzB,SAAU,CACR/N,MAAO,CACLgO,MAAM,IAGV/a,YAAa,IACbyb,QAAQ,EACRU,gBAAiB,UAEZsjC,EA9DT,CA+DEv/C,GAAA,MAEF,SAAS0/C,GAAkBl9C,GAOzB,IAAIy8C,EAAgBz8C,EAAYnE,QAAQioB,aAAa,WAAY9jB,EAAYnO,IAAI,kBAEjF,GAAK4qD,EAAL,CAIA,IAAIiB,EAAe,GAKnB,OAJA,kBAAKjB,EAAc5/B,YAAY,SAAU8gC,GACvC,IAAIC,EAAeC,GAAuBF,GAC1CD,EAAaC,GAAWC,KAEnBF,GAGT,SAASG,GAAuBlB,GAC9B,OAAQA,EAAQvhD,QAAQ,MAAO,IAGlB,IAAA0iD,GAAA,GCjGX,GAAoB,CAAC,YAAa,WAClCC,GAAiB,CACnBvvC,WAAY,WACZ5nB,MAAO,SAAUoZ,EAAanE,GAC5B,IAAIK,EAAW8D,EAAY7D,iBACvB6hD,EAAa,CACftwB,OAAQ1tB,EAAYnO,IAAI,CAAC,YAAa,YACtCosD,OAAQj+C,EAAYnO,IAAI,iBACxBqsD,SAAUl+C,EAAYnO,IAAI,oBAE5B,MAAO,CACLssD,SAAU,SAAUr9C,EAAQvE,GAC1BL,EAASmhD,gBAAgB9gD,GAAM,SAAU6gD,EAAan/C,GACpD,IAAIvY,EAAUs4D,EAAWZ,GAEzB,GAAoB,WAAhBA,GAA4B7gD,EAAK6hD,cAAe,CAClD,IAAIC,EAAc9hD,EAAKuG,aAAa7E,GAAWpM,IAAI,IAAmB,GACvD,MAAfwsD,IAAwB34D,EAAU24D,GAGpC,IAAIha,EAAc9nC,EAAK+nC,uBAAuBrmC,EAAW,SACzDomC,EAAY3+C,QAAUA,IACrBob,EAAOsqC,MAAOtqC,EAAO06C,SAKjB,MCzBA,SAAS8C,GAAqB1iD,GAC3C2iD,GAAuB3iD,GACvB4iD,GAA4B5iD,GAO9B,SAAS2iD,GAAuB3iD,GAC9B,IAAIA,EAAO6iD,SAAX,CAIA,IAAIC,GAAoB,EACxB,UAAY9iD,EAAO4e,QAAQ,SAAUC,GAC/BA,GAAgC,aAAnBA,EAAUr1B,OACzBs5D,GAAoB,MAIpBA,IACF9iD,EAAO6iD,SAAW,CAAC,MASvB,SAASD,GAA4B5iD,GACnC,IAAIge,EAAO,QAA2Bhe,EAAO+iD,cAC7C,UAAY/kC,GAAM,SAAUglC,GAC1B,GAAK,cAAgBA,GAArB,CAIA,IAAIrB,EAAgBqB,EAAWrB,eAAiB,EAC5CsB,EAAiB,QAA2BjjD,EAAO6iD,UAAUlB,GAE7DsB,GAAkBA,EAAeC,qBACnC,WAAaF,EAAYC,EAAeC,qBAAqB,OCxCnE,IAAIC,GAAkB,EAElB,GAEJ,SAAU/uD,GAGR,SAAS0rD,IACP,IAAIpsD,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOs2D,EAAat2D,KACnBkK,EA4CT,OAlDA,gBAAUosD,EAAc1rD,GASxB0rD,EAAa/0D,UAAUoZ,OAAS,SAAU08C,EAAe5gD,EAASoE,GAChEpZ,KAAKsZ,OAASs8C,EACd51D,KAAKovC,KAAOh2B,EAEPpZ,KAAKm4D,YACRn4D,KAAKm4D,UAAY,GACjB,kBAAKC,IAAU,SAAUC,EAASC,GAChCl/C,EAAIwE,QAAQC,GAAGy6C,EAAWt4D,KAAKm4D,UAAUG,GAAa,kBAAKD,EAASr4D,SACnEA,OAGL,gBAAeA,KAAM,2BAA4B41D,EAAc5qD,IAAI,kBAAmB,YAGxF6pD,EAAa/0D,UAAUmU,QAAU,SAAUe,EAASoE,GAClD,kBAAKpZ,KAAKm4D,WAAW,SAAUE,EAASC,GACtCl/C,EAAIwE,QAAQwC,IAAIk4C,EAAWD,MAE7Br4D,KAAKm4D,UAAY,MAQnBtD,EAAa/0D,UAAUy4D,yBAA2B,SAAU3gC,GAC1D53B,KAAKw4D,gBAAgB5gC,IAOvBi9B,EAAa/0D,UAAU04D,gBAAkB,SAAU5gC,GACjDA,GAAO53B,KAAKovC,KAAKxvB,eAAe,oBAAO,CACrCrhB,KAAM,sBACLq5B,KAGLi9B,EAAat2D,KAAO,WACbs2D,EAnDT,CAoDE,SAEEuD,GAAW,CACbK,UAAW,SAAU91D,GACf+1D,GAAa14D,KAAM,WACrBA,KAAK24D,gBAAkB,CAACh2D,EAAEuL,QAASvL,EAAEyL,WAGzCwqD,QAAS,SAAUj2D,GACjB,IAAIk2D,EAAiB74D,KAAK24D,gBAE1B,GAAID,GAAa14D,KAAM,UAAY64D,EAAgB,CACjD,IAAIxoC,EAAQ,CAAC1tB,EAAEuL,QAASvL,EAAEyL,SACtByd,EAAO9uB,KAAKugC,IAAIu7B,EAAe,GAAKxoC,EAAM,GAAI,GAAKtzB,KAAKugC,IAAIu7B,EAAe,GAAKxoC,EAAM,GAAI,GAE9F,GAAIxE,EAAOqsC,GACT,OAGF,IAAIztB,EAASzqC,KAAKsZ,OAAOhE,iBAAiBwjD,0BAA0B,CAACn2D,EAAEuL,QAASvL,EAAEyL,UAE9D,SAApBq8B,EAAOsuB,UAAuB/4D,KAAKw4D,gBAAgB,CACjDQ,iBAAkBvuB,EAAOuuB,mBAI7Bh5D,KAAK24D,gBAAkB,MAEzBM,UAAW,SAAUt2D,GAEnB,IAAI3C,KAAK24D,iBAAoBD,GAAa14D,KAAM,aAAhD,CAIA,IAAIsc,EAAQtc,KAAKsZ,OACbmxB,EAASnuB,EAAMhH,iBAAiBwjD,0BAA0B,CAACn2D,EAAEuL,QAASvL,EAAEyL,UACxE2qD,EAAWtuB,EAAOsuB,SACT,SAAbA,GAAuB/4D,KAAKu4D,yBAAyBW,iBAAiB58C,EAAMtR,IAAI,uBAEhFhL,KAAKu4D,yBAAsC,SAAbQ,EAAsB,KAClD,CACAC,iBAAkBvuB,EAAOuuB,iBAEzB94C,UAAwB,SAAb64C,EAAsB,KAAO,CACtC54C,SAAU,QAOlB,SAASu4C,GAAaS,EAAMC,GAC1B,IAAI98C,EAAQ68C,EAAK7/C,OACjB,OAAOgD,EAAMtR,IAAI,mBAAqBsR,EAAMtR,IAAI,yBAA2BouD,EAG9D,UChHX,GAEJ,SAAUjwD,GAGR,SAASkwD,IACP,IAAI5wD,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO86D,EAAc96D,KACpBkK,EA6ET,OAnFA,gBAAU4wD,EAAelwD,GASzBkwD,EAAcv5D,UAAU+vB,KAAO,WAC7B1mB,EAAOrJ,UAAU+vB,KAAKhb,MAAM7U,KAAM8C,WAElC9C,KAAK6wB,YAAY,KAGnBwoC,EAAcv5D,UAAU+wB,YAAc,SAAUyoC,GAC9C,IAAIC,EAAav5D,KAAK+U,OACtBukD,GAAa,WAAaC,EAAYD,GAAW,GAEjDt5D,KAAKw5D,mBAOPH,EAAcv5D,UAAUqH,SAAW,SAAUmV,EAAOtH,GAClD,IAAI0hD,EAAgBp6C,EAAMtR,IAAI,iBAC9B,OAAwB,MAAjB0rD,GAAyB1hD,EAAQioB,aAAa,WAAYy5B,KAAmB12D,MAGtFq5D,EAAcv5D,UAAU25D,cAAgB,SAAU7hC,GAChD,UAAY,CAAC,iBAAkB,mBAAoB,kBAAmB,kBAAmB,qBAAqB,SAAU59B,GAClH49B,EAAI8hC,eAAe1/D,KAErBgG,KAAK+U,OAAO/a,GAAQ49B,EAAI59B,MAEzBgG,OAGLq5D,EAAcv5D,UAAU05D,gBAAkB,WACxC,IAAIxjC,EAAah2B,KAAKg2B,WAAa,GAC/B2jC,EAAoB35D,KAAK25D,kBAAoB,GAC7CC,EAAa,YAAc55D,KAAKgV,QAAQ6kD,gBAAgB,CAC1D3yC,SAAU,kBACR,SAAU9F,GAGZ,OAAQA,EAAUpW,IAAI,kBAAoB,KAAOhL,KAAKg5B,iBACrDh5B,MACH,UAAY45D,GAAY,SAAUx4C,GAChC4U,EAAW36B,KAAK,MAAQ+lB,EAAUpW,IAAI,QACtC2uD,EAAkBt+D,KAAK+lB,EAAU4X,oBAIrCqgC,EAAc96D,KAAO,WACrB86D,EAAc9hD,aAAe,CAAC,gBAC9B8hD,EAActvB,WAAa,MAC3BsvB,EAAcnjD,cAAgB,CAC5BC,OAAQ,EACRC,EAAG,EACHpR,KAAM,GACN4sB,IAAK,GACL3sB,MAAO,GACP4sB,OAAQ,GAGR3V,OAAQ,aAGR49C,gBAAgB,EAChBC,iBAAkB,KAClBC,gBAAiB,EACjBC,gBAAiB,GACjBC,eAAgB,GAChBC,mBAAoB,GAGpBC,2BAA4B,EAAE,IAAM,IAAM,IAC1CC,oBAAqB,QACrBpC,oBAAqB,MAEhBoB,EApFT,CAqFE9/B,GAAA,MAEa,MC1FX,GAEJ,SAAUpwB,GAGR,SAASmxD,EAAa9/C,EAAKiE,EAAO87C,EAAatE,EAAUhjC,GACvD,IAAIxqB,EAAQU,EAAOE,KAAKrJ,KAAMwa,EAAKiE,EAAO87C,IAAgBv6D,KAI1D,OAFAyI,EAAMlK,KAAO03D,GAAY,QACzBxtD,EAAMwqB,UAAYA,EACXxqB,EAOT,OAdA,gBAAU6xD,EAAcnxD,GAUxBmxD,EAAax6D,UAAUkW,aAAe,WACpC,MAA0D,eAAnDhW,KAAKsV,iBAAiB4F,WAAWlQ,IAAI,WAGvCsvD,EAfT,CAgBEt+B,GAAA,MAEa,M,aCVX,GAAO,UACP,GAAUj/B,KAAKyb,IACf,GAAUzb,KAAKub,IACfkiD,GAAYz9D,KAAKwgC,MACjBk9B,GAAW19D,KAAKmhC,KAChBlhC,GAAQ8/B,GAAA,KACR,GAAK//B,KAAKM,GAEV,GAEJ,WACE,SAASq9D,EAAS9E,EAAe5gD,EAASoE,GACxCpZ,KAAKzB,KAAO,WAKZyB,KAAK26D,SAAW,qBAMhB36D,KAAK46D,YAAc,GACnB56D,KAAKg2B,WAAa4/B,EAAc5/B,WAChCh2B,KAAKsZ,OAASs8C,EAEd51D,KAAK66D,MAAMjF,EAAe5gD,EAASoE,GAqVrC,OAlVAshD,EAAS56D,UAAU+6D,MAAQ,SAAUjF,EAAe5gD,EAASoE,GAC3D,IAAI4c,EAAa4/B,EAAc5/B,WAC3B2jC,EAAoB/D,EAAc+D,kBACtC,GAAK3jC,GAAY,SAAUxb,EAAKiD,GAC9B,IAAIwV,EAAY0mC,EAAkBl8C,GAC9B2D,EAAYpM,EAAQioB,aAAa,eAAgBhK,GAEjD5L,EAAOrnB,KAAK26D,SAAS7uD,IAAI0O,EAAK,IAAI,GAAaA,EAAKsgD,GAAA,KAA8B15C,GAAY,CAAC,EAAG,GAAIA,EAAUpW,IAAI,QAASioB,IAE7H8nC,EAA2B,aAAd1zC,EAAK9oB,KACtB8oB,EAAKvO,OAASiiD,GAAc35C,EAAUpW,IAAI,eAC1Cqc,EAAK2zC,QAAU55C,EAAUpW,IAAI,WAE7BoW,EAAUiG,KAAOA,EACjBA,EAAK/K,MAAQ8E,EACbiG,EAAK/R,iBAAmB8L,EAAU9L,iBAAmBtV,OACpDA,OAOL06D,EAAS56D,UAAUkK,OAAS,SAAUgL,EAASoE,GAC7CpZ,KAAKi7D,sBAAsBj7D,KAAKsZ,OAAQtE,IAG1C0lD,EAAS56D,UAAUswB,aAAe,SAAUC,GAC1C,IAAIsjB,EAAa3zC,KAAKk7D,kBAElBC,EAAWxnB,EAAWwnB,SACtBC,EAAaznB,EAAWynB,WACxBC,EAAgB1nB,EAAW0nB,cAC3BC,EAAQjrC,EAAM,EAAIgrC,GAClBE,EAAUlrC,EAAMgrC,GACpB,OAAOC,GAASH,GAAYG,GAASH,EAAWxnB,EAAW6nB,YAAcD,GAAWH,GAAcG,GAAWH,EAAaznB,EAAW8nB,cAGvIf,EAAS56D,UAAUob,SAAW,WAC5B,OAAOlb,KAAKsZ,QAOdohD,EAAS56D,UAAUm7D,sBAAwB,SAAUrF,EAAe5gD,GAClEA,EAAQ+4B,YAAW,SAAU50B,GAC3B,GAAKy8C,EAAczuD,SAASgS,EAAanE,GAAzC,CAIA,IAAIU,EAAOyD,EAAYxD,UACvB,GAAK3V,KAAKg2B,YAAY,SAAUxb,GAC9B,IAAI6M,EAAOrnB,KAAK26D,SAAS3vD,IAAIwP,GAE7B6M,EAAK5I,MAAMye,oBAAoBxnB,EAAMA,EAAKwI,aAAa1D,IACvDsgD,GAAA,KAA2BzzC,EAAK5I,MAAO4I,EAAK/K,SAC3Ctc,SACFA,OAOL06D,EAAS56D,UAAU+Q,OAAS,SAAU+kD,EAAex8C,GACnDpZ,KAAK07D,MAAQ,QAAyB9F,EAAcnuC,qBAAsB,CACxE9iB,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,cAGdhS,KAAK27D,eAGPjB,EAAS56D,UAAU+1D,QAAU,WAC3B,OAAO71D,KAAK07D,OAGdhB,EAAS56D,UAAUo7D,gBAAkB,WACnC,IAgBIU,EAhBAhG,EAAgB51D,KAAKsZ,OACrBlX,EAAOpC,KAAK07D,MACZ1J,EAAK,CAAC,IAAK,KACXv+C,EAAK,CAAC,QAAS,UACfyI,EAAS05C,EAAc5qD,IAAI,UAC3BqwD,EAA2B,eAAXn/C,EAA0B,EAAI,EAC9Cu/C,EAAer5D,EAAKqR,EAAG4nD,IACvBQ,EAAe,CAAC,EAAGJ,GACnBK,EAAY97D,KAAKg2B,WAAWt7B,OAC5Bu/D,EAAkB8B,GAASnG,EAAc5qD,IAAI,mBAAoB6wD,GACjE7B,EAAkB+B,GAASnG,EAAc5qD,IAAI,oBAAsB,EAAG,CAAC,EAAG8wD,IAC1EhC,EAAiBlE,EAAc5qD,IAAI,mBAAqB8wD,EAAY,GAAKA,EAAY9B,GAAmBA,EAAkB,GAAKC,EAAkB,GAAKwB,EAAe,EAIrKzC,EAAmBpD,EAAc5qD,IAAI,oBAGzC,GAAKguD,EAMH4C,EAAUG,GAAS/C,EAAiB,GAAKA,EAAiB,GAAI6C,GAC9D7C,EAAiB,GAAKA,EAAiB,GAAK4C,MAPvB,CACrBA,EAAUG,GAAS9B,GAAmBD,EAAkB,GAAI6B,GAC5D,IAAI9B,EAAmBnE,EAAc5qD,IAAI,qBAAuBwvD,GAAUsB,EAAY,GACtF9C,EAAmB,CAACiB,EAAkBF,EAAmB6B,EAAU,GACnE5C,EAAiB,GAAKA,EAAiB,GAAK4C,EAM9C,IAAII,GAAqBP,EAAeG,IAAYE,EAAY9B,GAEhEgC,EAAoB,IAAMA,EAAoB,GAE9C,IAAIC,EAAkB,CAACzB,GAAUx9D,GAAMg8D,EAAiB,GAAKiB,EAAiB,IAAM,EAAGQ,GAASz9D,GAAMg8D,EAAiB,GAAKiB,EAAiB,IAAM,GAE/IiC,EAAuBF,EAAoB/B,EAAkBjB,EAAiB,GAClF,MAAO,CACL98C,OAAQA,EACRm/C,cAAeA,EACfD,WAAYh5D,EAAK4vD,EAAGqJ,IACpBI,aAAcA,EACdN,SAAU/4D,EAAK4vD,EAAG,EAAIqJ,IACtBG,WAAYp5D,EAAKqR,EAAG,EAAI4nD,IACxBvB,eAAgBA,EAChBG,gBAAiBA,EACjB+B,kBAAmBA,EACnBhD,iBAAkBA,EAClB8C,UAAWA,EACXG,gBAAiBA,EACjBC,qBAAsBA,IAI1BxB,EAAS56D,UAAU67D,YAAc,WAC/B,IAAIv5D,EAAOpC,KAAK07D,MACZ3oC,EAAO/yB,KAAK26D,SACZ3kC,EAAah2B,KAAKg2B,WAElB2d,EAAa3zC,KAAKk7D,kBAElBh/C,EAASy3B,EAAWz3B,OACxB6W,EAAK9U,MAAK,SAAUoJ,GAClB,IAAI80C,EAAa,CAAC,EAAGxoB,EAAW6nB,YAC5B/9C,EAAM4J,EAAK2zC,QAAU,EAAI,EAC7B3zC,EAAK0V,UAAUo/B,EAAW1+C,GAAM0+C,EAAW,EAAI1+C,OAEjD,GAAKuY,GAAY,SAAUxb,EAAKiD,GAC9B,IAAI2+C,GAAWzoB,EAAWmmB,eAAiBuC,GAAuBC,IAAyB7+C,EAAKk2B,GAC5F4oB,EAAgB,CAClBC,WAAY,CACVp8D,EAAGg8D,EAAQtyC,SACXzpB,EAAGszC,EAAW6nB,YAEhBiB,SAAU,CACRr8D,EAAG,EACHC,EAAG+7D,EAAQtyC,WAGX4yC,EAAgB,CAClBF,WAAY,GAAK,EACjBC,SAAU,GAER3yC,EAAW,CAACyyC,EAAcrgD,GAAQ9b,EAAIgC,EAAKhC,EAAGm8D,EAAcrgD,GAAQ7b,EAAI+B,EAAK/B,GAC7EsL,EAAW+wD,EAAcxgD,GACzB/X,EAAY+kD,GAAA,YAChBA,GAAA,UAAc/kD,EAAWA,EAAWwH,GACpCu9C,GAAA,aAAiB/kD,EAAWA,EAAW2lB,GAKvC9pB,KAAK46D,YAAYpgD,GAAO,CACtBsP,SAAUA,EACVne,SAAUA,EACVxH,UAAWA,EACXw4D,uBAAwBP,EAAQO,uBAChCC,cAAeR,EAAQQ,cACvBC,qBAAsBT,EAAQS,qBAC9B5iC,cAAe,EACfD,eAAgB,KAEjBh6B,OAOL06D,EAAS56D,UAAUk2D,QAAU,SAAUx7C,GACrC,OAAOxa,KAAK26D,SAAS3vD,IAAIwP,IAO3BkgD,EAAS56D,UAAU0V,YAAc,SAAUxM,EAAOwR,GAChD,OAAOxa,KAAK88D,iBAAiB98D,KAAK26D,SAAS3vD,IAAIwP,GAAK+c,YAAYvuB,GAAQwR,IAS1EkgD,EAAS56D,UAAU02D,gBAAkB,SAAU9gD,EAAM6mC,EAAUgI,EAAOoQ,GAC3D,MAATpQ,IAAkBA,EAAQ,GACnB,MAAPoQ,IAAgBA,EAAMj/C,EAAKpa,SAC3B,IAAIyhE,EAAU/8D,KAAK26D,SACf3kC,EAAah2B,KAAKg2B,WAClBgnC,EAAiB,GACjBpD,EAAa,GACjB,UAAY5jC,GAAY,SAAU8gC,GAChCkG,EAAe3hE,KAAKqa,EAAKwI,aAAa44C,IACtC8C,EAAWv+D,KAAK0hE,EAAQ/xD,IAAI8rD,GAASx6C,UAIvC,IAFA,IAAI2gD,EAAej9D,KAAKk9D,iBAEf9lD,EAAYmtC,EAAOntC,EAAYu9C,EAAKv9C,IAAa,CACxD,IAAIm/C,OAAc,EAElB,GAAK0G,EAEE,CACL1G,EAAc,SAGd,IAFA,IAAIn/B,EAAS1hB,EAAK2hB,UAAU2lC,EAAgB5lD,GAEnCokB,EAAI,EAAG2hC,EAAOnnC,EAAWt7B,OAAQ8gC,EAAI2hC,EAAM3hC,IAAK,CACvD,IAAI3X,EAAQ+1C,EAAWp+B,GAAG4hC,eAAehmC,EAAOoE,IAEhD,GAAc,aAAV3X,EAAsB,CACxB0yC,EAAc,WACd,aAVJA,EAAc,SAehBha,EAASga,EAAan/C,KAQ1BsjD,EAAS56D,UAAUo9D,eAAiB,WAKlC,IAJA,IAAIlnC,EAAah2B,KAAKg2B,WAClB+mC,EAAU/8D,KAAK26D,SACfsC,GAAe,EAEVzhC,EAAI,EAAG2hC,EAAOnnC,EAAWt7B,OAAQ8gC,EAAI2hC,EAAM3hC,IACQ,WAAtDuhC,EAAQ/xD,IAAIgrB,EAAWwF,IAAIlf,MAAM8gD,mBACnCH,GAAe,GAInB,OAAOA,GAQTvC,EAAS56D,UAAUg9D,iBAAmB,SAAUpkD,EAAO8B,GACrD,IAAI6iD,EAAar9D,KAAK46D,YAAYpgD,GAClC,OAAOyU,GAAA,kBAAuB,CAACvW,EAAO,GAAI2kD,EAAWl5D,YAOvDu2D,EAAS56D,UAAUw9D,cAAgB,SAAU9iD,GAC3C,OAAO,WAAaxa,KAAK46D,YAAYpgD,KAOvCkgD,EAAS56D,UAAUg5D,0BAA4B,SAAUzoC,GACvD,IAAIsjB,EAAa3zC,KAAKk7D,kBAElBG,EAAgB1nB,EAAW0nB,cAC3BrC,EAAmBrlB,EAAWqlB,iBAAiBx+D,QAC/CohE,EAAU5C,EAAiB,GAAKA,EAAiB,GACjDx5C,EAAS,CAAC,EAAGm0B,EAAWsmB,iBAAmBtmB,EAAWmoB,UAAY,IAEtE,IAAK97D,KAAKowB,aAAaC,GACrB,MAAO,CACL0oC,SAAU,OACVC,iBAAkBA,GAKtB,IAGIjc,EAHAwgB,EAAaltC,EAAMgrC,GAAiB1nB,EAAWynB,WAAaznB,EAAWuoB,qBAIvEnD,EAAW,QACXiD,EAAoBroB,EAAWqoB,kBAE/BwB,EAAcx9D,KAAKsZ,OAAOtO,IAAI,8BAG9ByyD,EAA4B,MAAlBD,EAAY,GAE1B,GAAIxB,EACEyB,GAAWzB,GAAqBuB,EAAa3B,EAAU4B,EAAY,IACrEzE,EAAW,OACXhc,EAAQwgB,EAAa3B,EAAU4B,EAAY,IAClCC,GAAWzB,GAAqBuB,EAAa3B,GAAW,EAAI4B,EAAY,KACjFzE,EAAW,OACXhc,EAAQwgB,EAAa3B,GAAW,EAAI4B,EAAY,MAE/CzgB,EAAQwgB,EAAa3B,EAAU4B,EAAY,KAAO,IAAMzgB,EAAQwgB,EAAa3B,GAAW,EAAI4B,EAAY,MAAQ,IAAMzgB,EAAQ,GAGjIA,GAASpJ,EAAWsmB,gBAAkB+B,EACtCjf,EAAQ,OAAA2gB,GAAA,MAAW3gB,EAAOic,EAAkBx5C,EAAQ,OAClDu5C,EAAW,WAEV,CACD,IAAI4E,EAAW3E,EAAiB,GAAKA,EAAiB,GAClDpW,EAAMpjC,EAAO,GAAK+9C,EAAaI,EACnC3E,EAAmB,CAAC,GAAQ,EAAGpW,EAAM+a,EAAW,IAChD3E,EAAiB,GAAK,GAAQx5C,EAAO,GAAIw5C,EAAiB,GAAK2E,GAC/D3E,EAAiB,GAAKA,EAAiB,GAAK2E,EAGhD,MAAO,CACL3E,iBAAkBA,EAClBD,SAAUA,IAIP2B,EAtWT,GAyWA,SAASqB,GAAS1xD,EAAKmV,GACrB,OAAO,GAAQ,GAAQnV,EAAKmV,EAAO,IAAKA,EAAO,IAGjD,SAAS88C,GAAwBrpC,EAAW0gB,GAC1C,IAAIwe,EAAOxe,EAAW8nB,cAAgB9nB,EAAWmoB,UAAY,GAC7D,MAAO,CACLhyC,SAAUqoC,EAAOl/B,EACjB0pC,uBAAwBxK,EACxByK,eAAe,GAInB,SAASP,GAAqBppC,EAAW0gB,GACvC,IAKI7pB,EAGA+yC,EARApB,EAAe9nB,EAAW8nB,aAC1BxB,EAAkBtmB,EAAWsmB,gBAC7B6B,EAAYnoB,EAAWmoB,UACvBE,EAAoBroB,EAAWqoB,kBAC/BC,EAAkBtoB,EAAWsoB,gBAE7BU,EAAyBX,EACzBY,GAAgB,EAepB,OAZI3pC,EAAYgpC,EAAgB,IAC9BnyC,EAAWmJ,EAAY+oC,EACvBa,EAAuBb,GACd/oC,GAAagpC,EAAgB,IACtCnyC,EAAW6pB,EAAWuoB,qBAAuBjpC,EAAYgnC,EAAkBtmB,EAAWqlB,iBAAiB,GACvG2D,EAAyB1C,EACzB2C,GAAgB,IAEhB9yC,EAAW2xC,GAAgBK,EAAY,EAAI7oC,GAAa+oC,EACxDa,EAAuBb,GAGlB,CACLlyC,SAAUA,EACV6yC,uBAAwBA,EACxBC,cAAeA,EACfC,qBAAsBA,GAIX,UCraf,SAASe,GAAuB5oD,EAASoE,GACvC,IAAIykD,EAAe,GAgBnB,OAfA7oD,EAAQiS,cAAc,YAAY,SAAU2uC,EAAen4C,GACzD,IAAIpI,EAAW,IAAI,GAASugD,EAAe5gD,EAASoE,GACpD/D,EAASrb,KAAO,YAAcyjB,EAC9BpI,EAASxE,OAAO+kD,EAAex8C,GAC/Bw8C,EAActgD,iBAAmBD,EACjCA,EAASiH,MAAQs5C,EACjBiI,EAAaxiE,KAAKga,MAGpBL,EAAQ+4B,YAAW,SAAU50B,GAC3B,GAA4C,aAAxCA,EAAYnO,IAAI,oBAAoC,CACtD,IAAI4qD,EAAgBz8C,EAAY8zB,uBAAuB,WAAY,SAAkBC,OAAO,GAC5F/zB,EAAY7D,iBAAmBsgD,EAActgD,qBAG1CuoD,EAGT,IAAIC,GAA0B,CAC5Br/B,OAAQm/B,IAEK,M,aCvBX,GAEJ,SAAUz0D,GAGR,SAAS40D,IACP,IAAIt1D,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAQhE,OANAyI,EAAMlK,KAAOw/D,EAAkBx/D,KAK/BkK,EAAMu1D,gBAAkB,GACjBv1D,EA8DT,OAzEA,gBAAUs1D,EAAmB50D,GAc7B40D,EAAkBj+D,UAAUm+D,mBAAqB,WAC/C,OAAO,OAAA5Y,GAAA,MAAgB,CAAC,CAAC,OAAQ,SAAU,CAAC,YAAa,eAAgB,CAAC,SAAU,eAAgB,CAAC,QAAS,SAAU,CAAC,UAAW,YAA7H,CAEJrlD,KAAKkb,SAAS,qBAYnB6iD,EAAkBj+D,UAAUo+D,mBAAqB,SAAUC,GACzD,IAAIH,EAAkBh+D,KAAKg+D,gBAAkB,WAAaG,GAE1D,GAAIH,EACF,IAAK,IAAI5iE,EAAI4iE,EAAgBtjE,OAAS,EAAGU,GAAK,EAAGA,IAC/C0hC,GAAA,KAAekhC,EAAgB5iE,KAUrC2iE,EAAkBj+D,UAAUs9D,eAAiB,SAAUp0D,GACrD,IAAIg1D,EAAkBh+D,KAAKg+D,gBAE3B,IAAKA,EAAgBtjE,OACnB,MAAO,SAGT,GAAa,MAATsO,GAAiB7G,OAAO6G,GAC1B,MAAO,WAIT,GAA+B,IAA3Bg1D,EAAgBtjE,OAAc,CAChC,IAAI0iC,EAAW4gC,EAAgB,GAE/B,GAAI5gC,EAAS,IAAMp0B,GAASA,GAASo0B,EAAS,GAC5C,MAAO,cAGT,IAAK,IAAIhiC,EAAI,EAAGiP,EAAM2zD,EAAgBtjE,OAAQU,EAAIiP,EAAKjP,IACrD,GAAI4iE,EAAgB5iE,GAAG,IAAM4N,GAASA,GAASg1D,EAAgB5iE,GAAG,GAChE,MAAO,SAKb,MAAO,YAGF2iE,EA1ET,CA2EExkC,GAAA,MAEF,WAAa,GAAmB,SACjB,U,0BChFX6kC,GAAc,CAAC,WAAY,gBAAiB,YAE5C,GAEJ,SAAUj1D,GAGR,SAASk1D,IACP,IAAI51D,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO8/D,EAAiB9/D,KACvBkK,EA+GT,OArHA,gBAAU41D,EAAkBl1D,GAS5Bk1D,EAAiBv+D,UAAU+vB,KAAO,SAAU7a,EAASoE,GACnDjQ,EAAOrJ,UAAU+vB,KAAKhb,MAAM7U,KAAM8C,YAEjC9C,KAAKs+D,iBAAmB,IAAIC,GAAA,KAAgBnlD,EAAIwE,UAAUC,GAAG,QAAS,UAAY7d,KAAKw+D,SAAUx+D,QAGpGq+D,EAAiBv+D,UAAUoZ,OAAS,SAAUkI,EAAWpM,EAASoE,EAAKC,GACrE,IAAIolD,GAAmBr9C,EAAWpM,EAASqE,GAA3C,CAIArZ,KAAKohB,UAAYA,EACjBphB,KAAKoZ,IAAMA,EACXpZ,KAAKkN,MAAMiQ,YACX,IAAIuhD,EAAe1+D,KAAK2+D,WAIxB,GAHA3+D,KAAK2+D,WAAa,IAAI,QACtB3+D,KAAKkN,MAAMzF,IAAIzH,KAAK2+D,YAEfv9C,EAAUpW,IAAI,QAAnB,CAIA,IAAI4zD,EAAgBC,GAAiBz9C,EAAWpM,GAC5CK,EAAWupD,EAActpD,iBACzBwpD,EAAkB19C,EAAU68C,qBAC5Bc,EAAYD,EAAgBn6D,MAC5B6V,EAAM4G,EAAUiG,KAAK7M,IACrB6iD,EAAahoD,EAASioD,cAAc9iD,GACpCwkD,EAAa,YAAc,CAC7BC,uBAAwBF,GACvB1B,GACCvjC,EAAc,IAAIC,GAAA,KAAY3Y,EAAW49C,GAC7C,UAAYZ,GAAatkC,EAAYryB,IAAKqyB,GAE1C95B,KAAK2+D,WAAWl3D,IAAIqyB,EAAYK,YAEhCn6B,KAAKk/D,wBAAwBF,EAAYF,EAAiB19C,EAAWw9C,EAAeG,EAAW3lD,GAE/F6V,GAAA,mBAAwByvC,EAAc1+D,KAAK2+D,WAAYv9C,MAUzDi9C,EAAiBv+D,UAAUo/D,wBAA0B,SAAUF,EAAYF,EAAiB19C,EAAWw9C,EAAeG,EAAW3lD,GAE/H,IAAIoG,EAAS4B,EAAUiG,KAAK5H,YACxB0/C,EAAY3/C,EAAO,GAAKA,EAAO,GAC/B4/C,EAAQriE,KAAKyb,IAAI,GAA0B,GAAtBzb,KAAK8E,IAAIs9D,IAI9B/8D,EAAO,QAAqBq8B,OAAO,CACrCr+B,EAAGof,EAAO,GACVnf,GAAI0+D,EAAY,EAChBp6D,MAAOw6D,EACPt6D,OAAQk6D,IAEV38D,EAAKhC,GAAKg/D,EACVh9D,EAAKuC,OAAS,EAAIy6D,EAElBp/D,KAAKs+D,iBAAiBe,MAAM,CAC1BC,iBAAiB,EACjB3zD,SAAUqzD,EAAWrzD,SACrBvL,EAAG4+D,EAAWl1C,SAAS,GACvBzpB,EAAG2+D,EAAWl1C,SAAS,KACtBy1C,UAAU,CAAC,CACZC,QAAS,KACTvzD,SAAUwzD,GAAA,KAAkCr9D,GAC5Cs9D,iBAAkBD,GAAA,KAAqCr9D,EAAMgX,EAAKwlD,GAClEe,0BAA2BF,GAAA,KAAuCr9D,EAAM,MACtEw9D,YAAY,CACdC,UAAW,QACXC,WAAYhB,EACZiB,eAAe,IACdC,aAAaC,GAAiB7+C,KAGnCi9C,EAAiBv+D,UAAU0+D,SAAW,SAAU0B,GAC9C,IAAIC,EAAgBD,EAAWE,MAE3Bh/C,EAAYphB,KAAKohB,UACjBiG,EAAOjG,EAAUiG,KACjB82C,EAAY,SAAWgC,GAAe,SAAUE,GAClD,MAAO,CAACh5C,EAAKuV,YAAYyjC,EAAU3R,MAAM,IAAI,GAAOrnC,EAAKuV,YAAYyjC,EAAU3R,MAAM,IAAI,SAKtFttC,EAAUrM,OAAOurD,WAAaJ,EAAWK,OAASL,EAAWH,gBAEhE//D,KAAKoZ,IAAIwG,eAAe,CACtBrhB,KAAM,iBACNiiE,eAAgBp/C,EAAUvX,GAC1Bs0D,UAAWA,KAKjBE,EAAiBv+D,UAAUmU,QAAU,WACnCjU,KAAKs+D,iBAAiBrqD,WAGxBoqD,EAAiB9/D,KAAO,eACjB8/D,EAtHT,CAuHE,SAEF,SAASI,GAAmBr9C,EAAWpM,EAASqE,GAC9C,OAAOA,GAA4B,mBAAjBA,EAAQ9a,MAA6ByW,EAAQoU,eAAe,CAC5ElC,SAAU,eACVC,MAAO9N,IACN,KAAO+H,EAGZ,SAAS6+C,GAAiB7+C,GACxB,IAAIiG,EAAOjG,EAAUiG,KACrB,OAAO,SAAWjG,EAAU48C,iBAAiB,SAAU5gC,GACrD,MAAO,CACLyiC,UAAW,QACXL,QAAS,KACT9Q,MAAO,CAACrnC,EAAKkQ,YAAY6F,EAAS,IAAI,GAAO/V,EAAKkQ,YAAY6F,EAAS,IAAI,QAKjF,SAASyhC,GAAiBz9C,EAAWpM,GACnC,OAAOA,EAAQioB,aAAa,WAAY7b,EAAUpW,IAAI,kBAGzC,UC1JX,GAAa,CACfzM,KAAM,iBACN6mB,MAAO,oBAGF,SAASq7C,GAAuB/rD,GACrCA,EAAUsS,eAAe,IAAY,SAAU3N,EAASrE,GACtDA,EAAQiS,cAAc,CACpBC,SAAU,eACVC,MAAO9N,IACN,SAAUqnD,GACXA,EAAkBr5C,KAAK/K,MAAM4hD,mBAAmB7kD,EAAQ8kD,iBAO5DzpD,EAAUsS,eAAe,sBAAsB,SAAU3N,EAASrE,GAChEA,EAAQiS,cAAc,CACpBC,SAAU,WACVC,MAAO9N,IACN,SAAUu8C,GACXA,EAAc6D,cAAcpgD,SCflC,IAAIsnD,GAAoB,CACtBpiE,KAAM,QACNugE,gBAAiB,CACfn6D,MAAO,GACPkT,YAAa,EACbD,YAAa,oBACbpN,MAAO,oBACP3L,QAAS,IAEXyhE,UAAU,EACVlqD,EAAG,IAEE,SAAS,GAAQ1B,GACtBA,EAAUmqB,sBAAsB,IAChCnqB,EAAUkqB,uBAAuB,IACjClqB,EAAUiqB,yBAAyB,WAAY,IAC/CjqB,EAAUuqB,qBAAqBw4B,IAC/B/iD,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAChC,OAAA+hC,GAAA,MAAiBlsD,EAAW,WAAY,GAAmBisD,IAC3DF,GAAuB/rD,GCvBlB,SAAS,GAAQA,GACtB,eAAI,IACJA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoB2wC,IAC9BviD,EAAUoqB,eAAepqB,EAAU8R,SAASC,OAAOo6C,MAAO,I,iBCFxDC,GAEJ,WACE,SAASA,IACP9gE,KAAKitB,GAAK,EACVjtB,KAAKktB,GAAK,EACVltB,KAAKS,GAAK,EACVT,KAAKU,GAAK,EACVV,KAAK83C,KAAO,EACZ93C,KAAK+3C,KAAO,EACZ/3C,KAAKg4C,KAAO,EACZh4C,KAAKi4C,KAAO,EACZj4C,KAAKwf,OAAS,EAGhB,OAAOshD,EAbT,GAgBI,GAEJ,SAAU33D,GAGR,SAAS43D,EAAWpxD,GAClB,OAAOxG,EAAOE,KAAKrJ,KAAM2P,IAAS3P,KA+BpC,OAlCA,gBAAU+gE,EAAY53D,GAMtB43D,EAAWjhE,UAAUmkB,gBAAkB,WACrC,OAAO,IAAI68C,IAGbC,EAAWjhE,UAAU0D,UAAY,SAAU0gB,EAAKzgB,GAC9C,IAAI+b,EAAS/b,EAAM+b,OACnB0E,EAAI/jB,OAAOsD,EAAMwpB,GAAIxpB,EAAMypB,IAC3BhJ,EAAI1jB,cAAciD,EAAMq0C,KAAMr0C,EAAMs0C,KAAMt0C,EAAMu0C,KAAMv0C,EAAMw0C,KAAMx0C,EAAMhD,GAAIgD,EAAM/C,IAE7D,aAAjB+C,EAAM2vC,QACRlvB,EAAI3jB,OAAOkD,EAAMhD,GAAK+e,EAAQ/b,EAAM/C,IACpCwjB,EAAI1jB,cAAciD,EAAMu0C,KAAOx4B,EAAQ/b,EAAMw0C,KAAMx0C,EAAMq0C,KAAOt4B,EAAQ/b,EAAMs0C,KAAMt0C,EAAMwpB,GAAKzN,EAAQ/b,EAAMypB,MAE7GhJ,EAAI3jB,OAAOkD,EAAMhD,GAAIgD,EAAM/C,GAAK8e,GAChC0E,EAAI1jB,cAAciD,EAAMu0C,KAAMv0C,EAAMw0C,KAAOz4B,EAAQ/b,EAAMq0C,KAAMr0C,EAAMs0C,KAAOv4B,EAAQ/b,EAAMwpB,GAAIxpB,EAAMypB,GAAK1N,IAG3G0E,EAAI3hB,aAGNw+D,EAAWjhE,UAAUkhE,UAAY,WAC/B,gBAAchhE,OAGhB+gE,EAAWjhE,UAAUmhE,SAAW,WAC9B,gBAAcjhE,OAGT+gE,EAnCT,CAoCE,QAEE,GAEJ,SAAU53D,GAGR,SAAS+3D,IACP,IAAIz4D,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAO2iE,EAAW3iE,KACxBkK,EAAM04D,yBAA0B,EACzB14D,EA6LT,OApMA,gBAAUy4D,EAAY/3D,GAUtB+3D,EAAWphE,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAC5D,IAAIgoD,EAAaphE,KACbqhE,EAAQloD,EAAYmoD,WACpBp0D,EAAQlN,KAAKkN,MACbymC,EAAax6B,EAAYw6B,WAEzBhvC,EAAQgvC,EAAWhvC,MAEnBE,EAAS8uC,EAAW9uC,OACpB82C,EAAWxiC,EAAYxD,UACvB4rD,EAAWpoD,EAAYxD,QAAQ,QAC/By9B,EAASj6B,EAAYnO,IAAI,UAC7BhL,KAAKsZ,OAASH,EACdjM,EAAMiQ,YACNjQ,EAAM9M,EAAIuzC,EAAWvzC,EACrB8M,EAAM7M,EAAIszC,EAAWtzC,EAErBghE,EAAMG,UAAS,SAAUpqB,GACvB,IAAIqqB,EAAQ,IAAI,GACZpW,EAAS,gBAAUoW,GACvBpW,EAAOj0C,UAAYggC,EAAKhgC,UACxBi0C,EAAOpmC,YAAc9L,EAAY8L,YACjComC,EAAO50B,SAAW,OAClB,IAYIxJ,EACAC,EACAzsB,EACAC,EACAo3C,EACAC,EACAC,EACAC,EAnBAypB,EAAYtqB,EAAKl8B,WACjBof,EAAiBonC,EAAUxmD,SAAS,aACpCg8B,EAAY5c,EAAetvB,IAAI,aAC/B22D,EAAWvqB,EAAK1E,MAAM98B,YACtBgsD,EAAaxqB,EAAK1E,MAAMx3B,WACxB2mD,EAASD,EAAW52D,IAAI,UACxB82D,EAASF,EAAW52D,IAAI,UACxB+2D,EAAW3qB,EAAKzE,MAAM/8B,YACtBosD,EAAa5qB,EAAKzE,MAAMz3B,WACxB+mD,EAASD,EAAWh3D,IAAI,UACxBk3D,EAASF,EAAWh3D,IAAI,UACxBm3D,EAAa/qB,EAAKxhC,YA4CtB,OAnCA6rD,EAAMh+D,MAAM+b,OAASziB,KAAKub,IAAI,EAAG6pD,EAAW53C,IAC5Ck3C,EAAMh+D,MAAM2vC,OAASA,EAEN,aAAXA,GACFnmB,GAAgB,MAAV40C,EAAiBA,EAASl9D,EAAQg9D,EAASvhE,GAAK+hE,EAAWC,GACjEl1C,GAAgB,MAAV40C,EAAiBA,EAASj9D,EAAS88D,EAASthE,GAAKshE,EAASp3C,GAChE9pB,GAAgB,MAAVwhE,EAAiBA,EAASt9D,EAAQo9D,EAAS3hE,GAAK+hE,EAAWE,GACjE3hE,EAAe,MAAVwhE,EAAiBA,EAASr9D,EAASk9D,EAAS1hE,EACjDy3C,EAAO7qB,EACP8qB,EAAO7qB,GAAM,EAAIgqB,GAAax2C,EAAKw2C,EACnCc,EAAOv3C,EACPw3C,EAAO/qB,EAAKgqB,EAAYx2C,GAAM,EAAIw2C,KAElCjqB,GAAgB,MAAV40C,EAAiBA,EAASl9D,EAAQg9D,EAASvhE,GAAKuhE,EAAS33C,GAC/DkD,GAAgB,MAAV40C,EAAiBA,EAASj9D,EAAS88D,EAASthE,GAAK8hE,EAAWC,GAClE3hE,EAAe,MAAVwhE,EAAiBA,EAASt9D,EAAQo9D,EAAS3hE,EAChDM,GAAgB,MAAVwhE,EAAiBA,EAASr9D,EAASk9D,EAAS1hE,GAAK8hE,EAAWE,GAClEvqB,EAAO7qB,GAAM,EAAIiqB,GAAaz2C,EAAKy2C,EACnCa,EAAO7qB,EACP8qB,EAAO/qB,EAAKiqB,EAAYz2C,GAAM,EAAIy2C,GAClCe,EAAOv3C,GAGT+gE,EAAM1lD,SAAS,CACbkR,GAAIA,EACJC,GAAIA,EACJzsB,GAAIA,EACJC,GAAIA,EACJo3C,KAAMA,EACNC,KAAMA,EACNC,KAAMA,EACNC,KAAMA,IAERwpB,EAAM5lD,SAASye,EAAexe,gBAEtB2lD,EAAM3nE,MAAMgE,MAClB,IAAK,SACH2jE,EAAM3nE,MAAMgE,KAAOs5C,EAAK1E,MAAMxsB,UAAU,SACxCu7C,EAAM3nE,MAAM47B,MAAQ0hB,EAAK1E,MAAMxsB,UAAU,SAASwP,MAClD,MAEF,IAAK,SACH+rC,EAAM3nE,MAAMgE,KAAOs5C,EAAKzE,MAAMzsB,UAAU,SACxCu7C,EAAM3nE,MAAM47B,MAAQ0hB,EAAKzE,MAAMzsB,UAAU,SAASwP,MAClD,MAEF,IAAK,WACH,IAAI4sC,EAAclrB,EAAK1E,MAAMxsB,UAAU,SACnCq8C,EAAcnrB,EAAKzE,MAAMzsB,UAAU,SAEZ,kBAAhBo8C,GAAmD,kBAAhBC,IAC5Cd,EAAM3nE,MAAMgE,KAAO,IAAI,QAAuB,EAAG,EAAG,EAAG,EAAG,CAAC,CACzD0M,MAAO83D,EACP/3D,OAAQ,GACP,CACDC,MAAO+3D,EACPh4D,OAAQ,MAMhB,IAAIoZ,EAAgB+9C,EAAUxmD,SAAS,YACvC,gBAAyBumD,EAAOC,EAAW,aAAa,SAAUplD,GAChE,OAAOA,EAAMR,kBAEf5O,EAAMzF,IAAIg6D,GACVF,EAAS9kD,iBAAiB26B,EAAKhgC,UAAWqqD,GAC1C,IAAIh6B,EAAQ9jB,EAAc3Y,IAAI,SAC9B,gBAAoBy2D,EAAiB,cAAVh6B,EAAwB2P,EAAKorB,yBAA2B/6B,EAAO9jB,EAAc3Y,IAAI,cAC5G,gBAAUy2D,GAAOhrC,SAAW,UAG9B4qC,EAAM1oB,UAAS,SAAUlJ,GACvB,IAAIvzB,EAASuzB,EAAK75B,YACdoG,EAAYyzB,EAAKv0B,WACjBunD,EAAQzmD,EAAUhR,IAAI,UACtB03D,EAAQ1mD,EAAUhR,IAAI,UACtB2Y,EAAgB3H,EAAUd,SAAS,YACnC9Y,EAAO,IAAI,QAAa,CAC1BqB,MAAO,CACLrD,EAAY,MAATqiE,EAAgBA,EAAQ99D,EAAQuX,EAAO9b,EAC1CC,EAAY,MAATqiE,EAAgBA,EAAQ79D,EAASqX,EAAO7b,EAC3CsE,MAAOuX,EAAO8N,GACdnlB,OAAQqX,EAAOqO,IAEjBzwB,MAAOkiB,EAAUd,SAAS,aAAaY,eACvCyF,GAAI,KAEN,gBAAcnf,EAAM,gBAAqB4Z,GAAY,CACnDkH,aAAc/J,EACdgK,eAAgBssB,EAAKr4B,UACrBgM,YAAaqsB,EAAK5lC,KAEpBzH,EAAK4kC,uBAAwB,EAC7B5kC,EAAKgrB,SAAS,OAAQqiB,EAAKvpB,UAAU,UACrC9jB,EAAKgrB,SAAS,QAASqiB,EAAKvpB,UAAU,SAASwP,OAC/C,gBAAyBtzB,EAAM4Z,GAC/B9O,EAAMzF,IAAIrF,GACVu5C,EAASl/B,iBAAiBgzB,EAAKr4B,UAAWhV,GAC1C,gBAAUA,GAAMq0B,SAAW,OAC3B,IAAIgR,EAAQ9jB,EAAc3Y,IAAI,SAC9B,gBAAoB5I,EAAgB,cAAVqlC,EAAwBgI,EAAK+yB,yBAA2B/6B,EAAO9jB,EAAc3Y,IAAI,iBAE7G2wC,EAASt7B,mBAAkB,SAAUhiB,EAAI+Y,GACvC,IAAI4E,EAAY2/B,EAAS1/B,aAAa7E,GAElC4E,EAAUhR,IAAI,eAChB3M,EAAGskE,MAAQ,SAAU34C,EAAIO,GACvB62C,EAAWD,yBAA0B,EACrCnhE,KAAKyD,MAAMrD,GAAK4pB,EAChBhqB,KAAKyD,MAAMpD,GAAKkqB,EAChBvqB,KAAKyL,QACL2N,EAAIwG,eAAe,CACjBrhB,KAAM,WACNupC,SAAU3uB,EAAYtP,GACtBuN,UAAWukC,EAAS7B,YAAY1iC,GAChCwrD,OAAQ5iE,KAAKyD,MAAMrD,EAAIuE,EACvBk+D,OAAQ7iE,KAAKyD,MAAMpD,EAAIwE,KAI3BxG,EAAGykE,UAAY,WACb1B,EAAWD,yBAA0B,GAGvC9iE,EAAG0kE,WAAY,EACf1kE,EAAG2kE,OAAS,YAIXhjE,KAAKua,OAASpB,EAAYuB,sBAC7BxN,EAAMoQ,YAAY,GAAoBpQ,EAAMugB,kBAAmBtU,GAAa,WAC1EjM,EAAM6N,qBAIV/a,KAAKua,MAAQpB,EAAYxD,WAG3BurD,EAAWphE,UAAUmU,QAAU,aAE/BitD,EAAW3iE,KAAO,SACX2iE,EArMT,CAsME5gD,GAAA,MAGF,SAAS,GAAoBle,EAAM+W,EAAao4B,GAC9C,IAAIua,EAAS,IAAI,QAAa,CAC5BroD,MAAO,CACLrD,EAAGgC,EAAKhC,EAAI,GACZC,EAAG+B,EAAK/B,EAAI,GACZsE,MAAO,EACPE,OAAQzC,EAAKyC,OAAS,MAQ1B,OALAoqB,GAAA,aAAkB68B,EAAQ,CACxBroD,MAAO,CACLkB,MAAOvC,EAAKuC,MAAQ,KAErBwU,EAAao4B,GACTua,EAGM,U,aCvRX,GAEJ,SAAU3iD,GAGR,SAAS85D,IACP,IAAIx6D,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO0kE,EAAkB1kE,KACxBkK,EAqLT,OA3LA,gBAAUw6D,EAAmB95D,GAgB7B85D,EAAkBnjE,UAAUgV,eAAiB,SAAUC,EAAQC,GAC7D,IAAIkuD,EAAQnuD,EAAOouD,OAASpuD,EAAOmuD,MAC/BvyB,EAAQ57B,EAAOW,MAAQX,EAAO47B,MAC9B0O,EAAStqC,EAAOsqC,OACpBr/C,KAAK65C,YAAc,GAGnB,IAFA,IAAIA,EAAc75C,KAAK65C,YAEdz+C,EAAI,EAAGA,EAAIikD,EAAO3kD,OAAQU,IACV,MAAnBikD,EAAOjkD,GAAGo9C,OAAiB6G,EAAOjkD,GAAGo9C,OAAS,IAChDqB,EAAYwF,EAAOjkD,GAAGo9C,OAAS,IAAIzf,GAAA,KAAMsmB,EAAOjkD,GAAI4E,KAAMgV,IAQ9D,GAAI27B,GAASuyB,EAAO,CAClB,IAAI7B,EAAQ,OAAA+B,GAAA,MAAwBzyB,EAAOuyB,EAAOljE,MAAM,EAAMw6C,GAC9D,OAAO6mB,EAAM3rD,KAGf,SAAS8kC,EAAWmB,EAAU4lB,GAC5B5lB,EAASC,WAAW,gBAAgB,SAAUt/B,EAAOmB,GACnD,IAAItE,EAAcmD,EAAM+Y,YACpBnZ,EAAS/C,EAAYxD,UAAU2B,cAAcmG,GAEjD,GAAIvB,EAAQ,CACV,IAAImnD,EAAYnnD,EAAOs8B,MACnBkH,EAAavmC,EAAY0gC,YAAYwpB,GAErC3jB,IACFpjC,EAAM+Y,YAAcqqB,GAIxB,OAAOpjC,KAETilD,EAAS3lB,WAAW,gBAAgB,SAAUt/B,EAAOmB,GACnD,IAAItE,EAAcmD,EAAM+Y,YACpB+hB,EAAOj+B,EAAYmoD,WAAWgC,eAAe7lD,GAC7CvB,EAASk7B,EAAK1E,MAAM98B,YAExB,GAAIsG,EAAQ,CACV,IAAIs8B,EAAQt8B,EAAOs8B,MACfkH,EAAavmC,EAAY0gC,YAAYrB,GAErCkH,IACFpjC,EAAM+Y,YAAcqqB,GAIxB,OAAOpjC,OAKb2mD,EAAkBnjE,UAAUyjE,gBAAkB,SAAUnsD,EAAWosD,GACjE,IAAIC,EAAWzjE,KAAK+U,OAAOW,KAAK0B,GAChCqsD,EAASb,OAASY,EAAc,GAChCC,EAASZ,OAASW,EAAc,IASlCP,EAAkBnjE,UAAUwhE,SAAW,WACrC,OAAOthE,KAAK2V,UAAU0rD,OASxB4B,EAAkBnjE,UAAU4jE,YAAc,WACxC,OAAO1jE,KAAKshE,WAAWC,UAGzB0B,EAAkBnjE,UAAUy2B,cAAgB,SAAUnf,EAAWof,EAAgBC,GAC/E,SAAS0lB,EAAQz+C,GACf,OAAOyE,MAAMzE,IAAe,MAAPA,EAIvB,GAAiB,SAAb+4B,EAAqB,CACvB,IAAIxc,EAASja,KAAKixB,cAAc7Z,EAAWqf,GACvCktC,EAAa1pD,EAAOvE,KACpBkuD,EAAY3pD,EAAOjR,MACnB66D,EAAWF,EAAWl4B,OAAS,OAASk4B,EAAWr8D,OACvD,OAAO,gBAAoB,YAAa,CACtCtN,KAAM6pE,EACN76D,MAAO46D,EACPznB,QAASA,EAAQynB,KAIjB,IAAIn0B,EAAOzvC,KAAKshE,WAAWwC,eAAe1sD,GACtCpO,EAAQymC,EAAK75B,YAAY5M,MACzBs/B,EAAStoC,KAAKixB,cAAc7Z,EAAWqf,GAAU/gB,KAAK1b,KAC1D,OAAO,gBAAoB,YAAa,CACtCA,KAAgB,MAAVsuC,EAAiBA,EAAS,GAAK,KACrCt/B,MAAOA,EACPmzC,QAASA,EAAQnzC,MAKzBi6D,EAAkBnjE,UAAUg4B,cAAgB,WAC7B93B,KAAK+U,QAIpBkuD,EAAkBnjE,UAAUmxB,cAAgB,SAAU7Z,EAAWqf,GAC/D,IAAIxc,EAAS9Q,EAAOrJ,UAAUmxB,cAAc5nB,KAAKrJ,KAAMoX,EAAWqf,GAElE,GAAoB,MAAhBxc,EAAOjR,OAA8B,SAAbytB,EAAqB,CAC/C,IAAIgZ,EAAOzvC,KAAKshE,WAAWwC,eAAe1sD,GACtC2sD,EAAYt0B,EAAK75B,YAAY5M,MACjCiR,EAAOjR,MAAQ+6D,EAGjB,OAAO9pD,GAGTgpD,EAAkB1kE,KAAO,gBACzB0kE,EAAkB/sD,cAAgB,CAChCC,OAAQ,EACRC,EAAG,EACHd,iBAAkB,OAClBtQ,KAAM,KACN4sB,IAAK,KACL3sB,MAAO,MACP4sB,OAAQ,KACRuhB,OAAQ,aACRgV,UAAW,GACX4b,QAAS,EACTjB,WAAW,EACXkB,iBAAkB,GAClBzgD,MAAO,CACLgO,MAAM,EACN1H,SAAU,QACVo6C,SAAU,IAEZ7kB,OAAQ,GACR8kB,UAAW,UACXhyC,UAAW,CACT3nB,MAAO,UACP3L,QAAS,GACTu9C,UAAW,IAEb7qB,SAAU,CACR/N,MAAO,CACLgO,MAAM,GAERW,UAAW,CACTtzB,QAAS,KAGbmZ,OAAQ,CACNC,UAAW,CACTL,YAAa,YAGjBgb,gBAAiB,SACjBJ,kBAAmB,KAEdywC,EA5LT,CA6LEtsD,GAAA,MAEaytD,GAAA,GCpMA,SAASC,GAAarvD,EAASoE,GAC5CpE,EAAQ4S,iBAAiB,UAAU,SAAUzO,GAC3C,IAAIivC,EAAYjvC,EAAYnO,IAAI,aAC5Bg5D,EAAU7qD,EAAYnO,IAAI,WAC1B2oC,EAAa,GAAYx6B,EAAaC,GAC1CD,EAAYw6B,WAAaA,EACzB,IAAIhvC,EAAQgvC,EAAWhvC,MACnBE,EAAS8uC,EAAW9uC,OACpBw8D,EAAQloD,EAAYmoD,WACpB3wB,EAAQ0wB,EAAM1wB,MACdwyB,EAAQ9B,EAAM8B,MAClBmB,GAAkB3zB,GAClB,IAAI4zB,EAAgB,YAAc5zB,GAAO,SAAUlB,GACjD,OAAkC,IAA3BA,EAAK75B,YAAY5M,SAEtBw7D,EAAsC,IAAzBD,EAAc7pE,OAAe,EAAIye,EAAYnO,IAAI,oBAC9DooC,EAASj6B,EAAYnO,IAAI,UACzBm5D,EAAYhrD,EAAYnO,IAAI,aAChCy5D,GAAa9zB,EAAOwyB,EAAO/a,EAAW4b,EAASr/D,EAAOE,EAAQ2/D,EAAYpxB,EAAQ+wB,MAOtF,SAAS,GAAYhrD,EAAaC,GAChC,OAAO,QAAqBD,EAAYsO,qBAAsB,CAC5D9iB,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,cAIhB,SAASyyD,GAAa9zB,EAAOwyB,EAAO/a,EAAW4b,EAASr/D,EAAOE,EAAQ2/D,EAAYpxB,EAAQ+wB,GACzFO,GAAoB/zB,EAAOwyB,EAAO/a,EAAWzjD,EAAOE,EAAQuuC,EAAQ+wB,GACpEQ,GAAkBh0B,EAAOwyB,EAAOt+D,EAAQF,EAAOq/D,EAASQ,EAAYpxB,GACpEwxB,GAAkBj0B,EAAOyC,GAO3B,SAASkxB,GAAkB3zB,GACzB,UAAYA,GAAO,SAAUlB,GAC3B,IAAIo1B,EAAS,GAAIp1B,EAAKq1B,SAAUC,IAC5BC,EAAS,GAAIv1B,EAAKw1B,QAASF,IAC3BG,EAAez1B,EAAK+J,YAAc,EAClCxwC,EAAQjM,KAAKub,IAAIusD,EAAQG,EAAQE,GACrCz1B,EAAK7mB,UAAU,CACb5f,MAAOA,IACN,MAWP,SAAS07D,GAAoB/zB,EAAOwyB,EAAO/a,EAAWzjD,EAAOE,EAAQuuC,EAAQ+wB,GAW3E,IARA,IAAIgB,EAAc,GAEdC,EAAc,GAEdC,EAAgB,GAChBC,EAAiB,GACjBllE,EAAI,EAEChF,EAAI,EAAGA,EAAI+nE,EAAMzoE,OAAQU,IAChC+pE,EAAY/pE,GAAK,EAGnB,IAASA,EAAI,EAAGA,EAAIu1C,EAAMj2C,OAAQU,IAChCgqE,EAAYhqE,GAAKu1C,EAAMv1C,GAAG6pE,QAAQvqE,OAEX,IAAnB0qE,EAAYhqE,IACdiqE,EAAchqE,KAAKs1C,EAAMv1C,IAI7B,IAAImqE,GAAgB,EAIpB,MAAOF,EAAc3qE,OAAQ,CAC3B,IAAK,IAAI+iB,EAAM,EAAGA,EAAM4nD,EAAc3qE,OAAQ+iB,IAAO,CACnD,IAAIgyB,EAAO41B,EAAc5nD,GACrBxK,EAAOw8B,EAAK+1B,UAAU9vD,KAAKumC,eAAexM,EAAKr4B,WAC/CquD,EAA4B,MAAdxyD,EAAKulC,OAAiBvlC,EAAKulC,OAAS,EAElDitB,GAAexyD,EAAKulC,MAAQ+sB,IAC9BA,EAAetyD,EAAKulC,OAGtB/I,EAAK7mB,UAAU,CACb4vB,MAAOitB,EAAcxyD,EAAKulC,MAAQp4C,IACjC,GACQ,aAAXgzC,EAAwB3D,EAAK7mB,UAAU,CACrC2B,GAAI69B,IACH,GAAQ3Y,EAAK7mB,UAAU,CACxBoB,GAAIo+B,IACH,GAEH,IAAK,IAAIsd,EAAU,EAAGA,EAAUj2B,EAAKq1B,SAASpqE,OAAQgrE,IAAW,CAC/D,IAAItuB,EAAO3H,EAAKq1B,SAASY,GACrBC,EAAYxC,EAAM14D,QAAQ2sC,GAC9B+tB,EAAYQ,GAAa,EACzB,IAAI9nB,EAAazG,EAAKzE,MAClBizB,EAAYj1B,EAAMlmC,QAAQozC,GAEG,MAA3BunB,EAAYQ,IAAoBN,EAAe76D,QAAQozC,GAAc,GACzEynB,EAAejqE,KAAKwiD,MAKxBz9C,EACFilE,EAAgBC,EAChBA,EAAiB,GAGnB,IAASlqE,EAAI,EAAGA,EAAI+pE,EAAYzqE,OAAQU,IACtC,GAAuB,IAAnB+pE,EAAY/pE,GACd,MAAM,IAAIyqE,MAAM,iDAIpB,IAAIC,EAAWP,EAAenlE,EAAI,EAAImlE,EAAenlE,EAAI,EAErD+jE,GAA2B,SAAdA,GACf4B,GAAwBp1B,EAAOwzB,EAAW/wB,EAAQ0yB,GAGpD,IAAIE,EAAgB,aAAX5yB,GAAyBvuC,EAASujD,GAAa0d,GAAYnhE,EAAQyjD,GAAa0d,EACzFG,GAAkBt1B,EAAOq1B,EAAI5yB,GAG/B,SAAS8yB,GAAYz2B,GACnB,IAAIx8B,EAAOw8B,EAAK+1B,UAAU9vD,KAAKumC,eAAexM,EAAKr4B,WACnD,OAAqB,MAAdnE,EAAKulC,OAAiBvlC,EAAKulC,OAAS,EAG7C,SAASutB,GAAwBp1B,EAAOwzB,EAAW/wB,EAAQ0yB,GACzD,GAAkB,UAAd3B,EAAuB,CACzB,IAAIgC,EAAiB,GACjBC,EAAcz1B,EACd0X,EAAa,EAEjB,MAAO+d,EAAY1rE,OAAQ,CACzB,IAAK,IAAIU,EAAI,EAAGA,EAAIgrE,EAAY1rE,OAAQU,IAAK,CAC3C,IAAIq0C,EAAO22B,EAAYhrE,GACvBq0C,EAAK7mB,UAAU,CACby9C,aAAche,IACb,GAEH,IAAK,IAAI7sB,EAAI,EAAGA,EAAIiU,EAAKw1B,QAAQvqE,OAAQ8gC,IAAK,CAC5C,IAAI4b,EAAO3H,EAAKw1B,QAAQzpC,GAEpB2qC,EAAe17D,QAAQ2sC,EAAK1E,OAAS,GACvCyzB,EAAe9qE,KAAK+7C,EAAK1E,QAK/B0zB,EAAcD,EACdA,EAAiB,KACf9d,EAGJ,UAAY1X,GAAO,SAAUlB,GACtBy2B,GAAYz2B,IACfA,EAAK7mB,UAAU,CACb4vB,MAAOz7C,KAAKub,IAAI,EAAGwtD,EAAWr2B,EAAK75B,YAAYywD,gBAC9C,UAGgB,YAAdlC,GACTmC,GAAe31B,EAAOm1B,GAY1B,SAASQ,GAAe31B,EAAOm1B,GAC7B,UAAYn1B,GAAO,SAAUlB,GACtBy2B,GAAYz2B,IAAUA,EAAKq1B,SAASpqE,QACvC+0C,EAAK7mB,UAAU,CACb4vB,MAAOstB,IACN,MAYT,SAASG,GAAkBt1B,EAAOq1B,EAAI5yB,GACpC,UAAYzC,GAAO,SAAUlB,GAC3B,IAAI4zB,EAAY5zB,EAAK75B,YAAY4iC,MAAQwtB,EAC9B,aAAX5yB,EAAwB3D,EAAK7mB,UAAU,CACrCvoB,EAAGgjE,IACF,GAAQ5zB,EAAK7mB,UAAU,CACxBxoB,EAAGijE,IACF,MAeP,SAASsB,GAAkBh0B,EAAOwyB,EAAOt+D,EAAQF,EAAOq/D,EAASQ,EAAYpxB,GAC3E,IAAImzB,EAAiBC,GAAsB71B,EAAOyC,GAClDqzB,GAAoBF,EAAgBpD,EAAOt+D,EAAQF,EAAOq/D,EAAS5wB,GACnEszB,GAAkBH,EAAgBvC,EAASn/D,EAAQF,EAAOyuC,GAE1D,IAAK,IAAIuzB,EAAQ,EAAGnC,EAAa,EAAGA,IAGlCmC,GAAS,IACTC,GAAiBL,EAAgBI,EAAOvzB,GACxCszB,GAAkBH,EAAgBvC,EAASn/D,EAAQF,EAAOyuC,GAC1DyzB,GAAiBN,EAAgBI,EAAOvzB,GACxCszB,GAAkBH,EAAgBvC,EAASn/D,EAAQF,EAAOyuC,GAI9D,SAASozB,GAAsB71B,EAAOyC,GACpC,IAAImzB,EAAiB,GACjBO,EAAqB,aAAX1zB,EAAwB,IAAM,IACxC2zB,EAAc,gBAAUp2B,GAAO,SAAUlB,GAC3C,OAAOA,EAAK75B,YAAYkxD,MAQ1B,OANAC,EAAYC,KAAK1oD,MAAK,SAAUhkB,EAAGC,GACjC,OAAOD,EAAIC,KAEb,UAAYwsE,EAAYC,MAAM,SAAU1oE,GACtCioE,EAAelrE,KAAK0rE,EAAYE,QAAQj8D,IAAI1M,OAEvCioE,EAOT,SAASE,GAAoBF,EAAgBpD,EAAOt+D,EAAQF,EAAOq/D,EAAS5wB,GAC1E,IAAI8zB,EAAQ5wC,IACZ,UAAYiwC,GAAgB,SAAU51B,GACpC,IAAIE,EAAIF,EAAMj2C,OACVwtB,EAAM,EACV,UAAYyoB,GAAO,SAAUlB,GAC3BvnB,GAAOunB,EAAK75B,YAAY5M,SAE1B,IAAIm+D,EAAgB,aAAX/zB,GAAyBzuC,GAASksC,EAAI,GAAKmzB,GAAW97C,GAAOrjB,GAAUgsC,EAAI,GAAKmzB,GAAW97C,EAEhGi/C,EAAKD,IACPA,EAAQC,MAGZ,UAAYZ,GAAgB,SAAU51B,GACpC,UAAYA,GAAO,SAAUlB,EAAMr0C,GACjC,IAAIgsE,EAAS33B,EAAK75B,YAAY5M,MAAQk+D,EAEvB,aAAX9zB,GACF3D,EAAK7mB,UAAU,CACbxoB,EAAGhF,IACF,GACHq0C,EAAK7mB,UAAU,CACboB,GAAIo9C,IACH,KAEH33B,EAAK7mB,UAAU,CACbvoB,EAAGjF,IACF,GACHq0C,EAAK7mB,UAAU,CACb2B,GAAI68C,IACH,UAIT,UAAYjE,GAAO,SAAU/rB,GAC3B,IAAIiwB,GAAUjwB,EAAKoC,WAAa0tB,EAChC9vB,EAAKxuB,UAAU,CACb2B,GAAI88C,IACH,MAQP,SAASX,GAAkBH,EAAgBvC,EAASn/D,EAAQF,EAAOyuC,GACjE,IAAI0zB,EAAqB,aAAX1zB,EAAwB,IAAM,IAC5C,UAAYmzB,GAAgB,SAAU51B,GAIpC,IAAIW,EACA7B,EACAllB,EALJomB,EAAMryB,MAAK,SAAUhkB,EAAGC,GACtB,OAAOD,EAAEsb,YAAYkxD,GAAWvsE,EAAEqb,YAAYkxD,MAShD,IAJA,IAAI5kE,EAAK,EACL2uC,EAAIF,EAAMj2C,OACV4sE,EAAwB,aAAXl0B,EAAwB,KAAO,KAEvCh4C,EAAI,EAAGA,EAAIy1C,EAAGz1C,IACrBq0C,EAAOkB,EAAMv1C,GACbmvB,EAAKroB,EAAKutC,EAAK75B,YAAYkxD,GAEvBv8C,EAAK,IACP+mB,EAAQ7B,EAAK75B,YAAYkxD,GAAWv8C,EACzB,aAAX6oB,EAAwB3D,EAAK7mB,UAAU,CACrCxoB,EAAGkxC,IACF,GAAQ7B,EAAK7mB,UAAU,CACxBvoB,EAAGixC,IACF,IAGLpvC,EAAKutC,EAAK75B,YAAYkxD,GAAWr3B,EAAK75B,YAAY0xD,GAActD,EAGlE,IAAIv6C,EAAuB,aAAX2pB,EAAwBzuC,EAAQE,EAIhD,GAFA0lB,EAAKroB,EAAK8hE,EAAUv6C,EAEhBc,EAAK,EAAG,CACV+mB,EAAQ7B,EAAK75B,YAAYkxD,GAAWv8C,EACzB,aAAX6oB,EAAwB3D,EAAK7mB,UAAU,CACrCxoB,EAAGkxC,IACF,GAAQ7B,EAAK7mB,UAAU,CACxBvoB,EAAGixC,IACF,GACHpvC,EAAKovC,EAEL,IAASl2C,EAAIy1C,EAAI,EAAGz1C,GAAK,IAAKA,EAC5Bq0C,EAAOkB,EAAMv1C,GACbmvB,EAAKklB,EAAK75B,YAAYkxD,GAAWr3B,EAAK75B,YAAY0xD,GAActD,EAAU9hE,EAEtEqoB,EAAK,IACP+mB,EAAQ7B,EAAK75B,YAAYkxD,GAAWv8C,EACzB,aAAX6oB,EAAwB3D,EAAK7mB,UAAU,CACrCxoB,EAAGkxC,IACF,GAAQ7B,EAAK7mB,UAAU,CACxBvoB,EAAGixC,IACF,IAGLpvC,EAAKutC,EAAK75B,YAAYkxD,OAY9B,SAASF,GAAiBL,EAAgBI,EAAOvzB,GAC/C,UAAYmzB,EAAe/rE,QAAQkhC,WAAW,SAAUiV,GACtD,UAAYA,GAAO,SAAUlB,GAC3B,GAAIA,EAAKq1B,SAASpqE,OAAQ,CACxB,IAAI2F,EAAI,GAAIovC,EAAKq1B,SAAUyC,GAAgBn0B,GAAU,GAAI3D,EAAKq1B,SAAUC,IAExE,GAAI5iE,MAAM9B,GAAI,CACZ,IAAIgK,EAAMolC,EAAKq1B,SAASpqE,OACxB2F,EAAIgK,EAAM,GAAIolC,EAAKq1B,SAAU0C,GAAcp0B,GAAU/oC,EAAM,EAG7D,GAAe,aAAX+oC,EAAuB,CACzB,IAAI9B,EAAQ7B,EAAK75B,YAAYxV,GAAKC,EAAI,GAAOovC,EAAM2D,IAAWuzB,EAC9Dl3B,EAAK7mB,UAAU,CACbxoB,EAAGkxC,IACF,OACE,CACL,IAAIm2B,EAAQh4B,EAAK75B,YAAYvV,GAAKA,EAAI,GAAOovC,EAAM2D,IAAWuzB,EAC9Dl3B,EAAK7mB,UAAU,CACbvoB,EAAGonE,IACF,WAOb,SAASF,GAAenwB,EAAMhE,GAC5B,OAAO,GAAOgE,EAAKzE,MAAOS,GAAUgE,EAAKoC,WAG3C,SAASguB,GAAapwB,EAAMhE,GAC1B,OAAO,GAAOgE,EAAKzE,MAAOS,GAG5B,SAASs0B,GAAetwB,EAAMhE,GAC5B,OAAO,GAAOgE,EAAK1E,MAAOU,GAAUgE,EAAKoC,WAG3C,SAASmuB,GAAavwB,EAAMhE,GAC1B,OAAO,GAAOgE,EAAK1E,MAAOU,GAG5B,SAAS,GAAO3D,EAAM2D,GACpB,MAAkB,aAAXA,EAAwB3D,EAAK75B,YAAYxV,EAAIqvC,EAAK75B,YAAYoU,GAAK,EAAIylB,EAAK75B,YAAYvV,EAAIovC,EAAK75B,YAAY2U,GAAK,EAG3H,SAASw6C,GAAa3tB,GACpB,OAAOA,EAAKoC,WAGd,SAAS,GAAIouB,EAAOr2B,EAAI6B,GACtB,IAAIlrB,EAAM,EACN7d,EAAMu9D,EAAMltE,OACZU,GAAK,EAET,QAASA,EAAIiP,EAAK,CAChB,IAAIrB,GAASuoC,EAAGq2B,EAAMxsE,GAAIg4C,GAErBjxC,MAAM6G,KACTkf,GAAOlf,GAIX,OAAOkf,EAOT,SAAS2+C,GAAiBN,EAAgBI,EAAOvzB,GAC/C,UAAYmzB,GAAgB,SAAU51B,GACpC,UAAYA,GAAO,SAAUlB,GAC3B,GAAIA,EAAKw1B,QAAQvqE,OAAQ,CACvB,IAAI2F,EAAI,GAAIovC,EAAKw1B,QAASyC,GAAgBt0B,GAAU,GAAI3D,EAAKw1B,QAASF,IAEtE,GAAI5iE,MAAM9B,GAAI,CACZ,IAAIgK,EAAMolC,EAAKw1B,QAAQvqE,OACvB2F,EAAIgK,EAAM,GAAIolC,EAAKw1B,QAAS0C,GAAcv0B,GAAU/oC,EAAM,EAG5D,GAAe,aAAX+oC,EAAuB,CACzB,IAAI9B,EAAQ7B,EAAK75B,YAAYxV,GAAKC,EAAI,GAAOovC,EAAM2D,IAAWuzB,EAC9Dl3B,EAAK7mB,UAAU,CACbxoB,EAAGkxC,IACF,OACE,CACL,IAAIm2B,EAAQh4B,EAAK75B,YAAYvV,GAAKA,EAAI,GAAOovC,EAAM2D,IAAWuzB,EAC9Dl3B,EAAK7mB,UAAU,CACbvoB,EAAGonE,IACF,WAWb,SAAS7C,GAAkBj0B,EAAOyC,GAChC,IAAI0zB,EAAqB,aAAX1zB,EAAwB,IAAM,IAC5C,UAAYzC,GAAO,SAAUlB,GAC3BA,EAAKq1B,SAASxmD,MAAK,SAAUhkB,EAAGC,GAC9B,OAAOD,EAAEq4C,MAAM/8B,YAAYkxD,GAAWvsE,EAAEo4C,MAAM/8B,YAAYkxD,MAE5Dr3B,EAAKw1B,QAAQ3mD,MAAK,SAAUhkB,EAAGC,GAC7B,OAAOD,EAAEo4C,MAAM98B,YAAYkxD,GAAWvsE,EAAEm4C,MAAM98B,YAAYkxD,SAG9D,UAAYn2B,GAAO,SAAUlB,GAC3B,IAAI2yB,EAAK,EACLC,EAAK,EACT,UAAY5yB,EAAKq1B,UAAU,SAAU1tB,GACnCA,EAAKxuB,UAAU,CACbw5C,GAAIA,IACH,GACHA,GAAMhrB,EAAKxhC,YAAY2U,MAEzB,UAAYklB,EAAKw1B,SAAS,SAAU7tB,GAClCA,EAAKxuB,UAAU,CACby5C,GAAIA,IACH,GACHA,GAAMjrB,EAAKxhC,YAAY2U,SC3fd,SAASs9C,GAAa7yD,GACnCA,EAAQ4S,iBAAiB,UAAU,SAAUzO,GAC3C,IAAIkoD,EAAQloD,EAAYmoD,WACpB3wB,EAAQ0wB,EAAM1wB,MAElB,GAAIA,EAAMj2C,OAAQ,CAChB,IAAIotE,EAAaxxC,IACbyxC,GAAczxC,IAClB,UAAYqa,GAAO,SAAUlB,GAC3B,IAAIs0B,EAAYt0B,EAAK75B,YAAY5M,MAE7B+6D,EAAY+D,IACdA,EAAa/D,GAGXA,EAAYgE,IACdA,EAAahE,MAGjB,UAAYpzB,GAAO,SAAUlB,GAC3B,IAAIof,EAAU,IAAIC,GAAA,KAAc,CAC9BvwD,KAAM,QACNowD,cAAe,SACfH,WAAY,CAACsZ,EAAYC,GACzBtZ,OAAQt1C,EAAYnO,IAAI,WAEtBg9D,EAAkBnZ,EAAQK,iBAAiBzf,EAAK75B,YAAY5M,OAC5Di/D,EAAcx4B,EAAKv0B,WAAWlQ,IAAI,CAAC,YAAa,UAEjC,MAAfi9D,GACFx4B,EAAKzQ,UAAU,QAASipC,GACxBx4B,EAAKzQ,UAAU,QAAS,CACtBlhC,KAAMmqE,MAGRx4B,EAAKzQ,UAAU,QAASgpC,GACxBv4B,EAAKzQ,UAAU,QAAS,CACtBlhC,KAAMkqE,YCnCX,SAAS,GAAQtzD,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoB89C,IAC9B1vD,EAAU6R,eAAe89C,IACzB3vD,EAAUoqB,eAAe+oC,IACzBnzD,EAAUsS,eAAe,CACvBzoB,KAAM,WACN6mB,MAAO,WAEPpb,OAAQ,WACP,SAAUqP,EAASrE,GACpBA,EAAQiS,cAAc,CACpBC,SAAU,SACVkZ,QAAS,SACTjZ,MAAO9N,IACN,SAAUF,GACXA,EAAYoqD,gBAAgBlqD,EAAQjC,UAAW,CAACiC,EAAQupD,OAAQvpD,EAAQwpD,e,iBCf1E,GAEJ,WACE,SAASqF,KA4FT,OAtFAA,EAAsBpoE,UAAUgV,eAAiB,SAAUC,EAAQC,GAIjE,IAAImzD,EAKAC,EAJAC,EAAarzD,EAAQioB,aAAa,QAASj9B,KAAKgL,IAAI,eACpDs9D,EAAatzD,EAAQioB,aAAa,QAASj9B,KAAKgL,IAAI,eACpDu9D,EAAYF,EAAWr9D,IAAI,QAC3Bw9D,EAAYF,EAAWt9D,IAAI,QAIb,aAAdu9D,GACFxzD,EAAOmH,OAAS,aAChBisD,EAAcE,EAAWtpD,iBACzBqpD,GAAa,GACU,aAAdI,GACTzzD,EAAOmH,OAAS,WAChBisD,EAAcG,EAAWvpD,iBACzBqpD,GAAa,GAEbrzD,EAAOmH,OAASnH,EAAOmH,QAAU,aAGnC,IAAIusD,EAAY,CAAC,IAAK,KAClBC,EAAqC,eAAlB3zD,EAAOmH,OAA0B,EAAI,EACxDysD,EAAc3oE,KAAK4oE,aAAeH,EAAUC,GAC5CG,EAAeJ,EAAU,EAAIC,GAC7B9O,EAAa,CAACyO,EAAYC,GAC1BQ,EAAelP,EAAW8O,GAAkB19D,IAAI,QAChD+9D,EAAgBnP,EAAW,EAAI8O,GAAkB19D,IAAI,QACrD0K,EAAOX,EAAOW,KAGlB,GAAIA,GAAQ0yD,EAAY,CACtB,IAAIY,EAAkB,GACtB,UAAYtzD,GAAM,SAAUzC,EAAM8M,GAChC,IAAIkpD,EAEA,aAAeh2D,IACjBg2D,EAAUh2D,EAAKzY,QACfyY,EAAKi2D,QAAQnpD,IACJ,aAAe9M,EAAKjK,QAC7BigE,EAAUh2D,EAAKjK,MAAMxO,QACrByY,EAAKjK,MAAMkgE,QAAQnpD,IAEnBkpD,EAAUh2D,EAGZ+1D,EAAgB3tE,KAAK4tE,MAEvBl0D,EAAOW,KAAOszD,EAGhB,IAAIG,EAAyBnpE,KAAKmpE,uBAC9Bp4C,EAAkB,CAAC,CACrB/2B,KAAM2uE,EACNpqE,KAAM,gBAAuBuqE,GAC7BX,YAAaA,EACbiB,UAAW,CACTC,SAAS,EACT/hC,SAAU,GAEZgiC,QAAS,CAAC,SACT,CACDtvE,KAAM6uE,EACNtqE,KAAM,gBAAuBwqE,GAC7BO,QAASH,EAAuB3uE,UAElC,OAAO,OAAAs2B,GAAA,MAAiB9wB,KAAM,CAC5B+wB,gBAAiBA,EACjBiqB,gBAAiBmuB,EAAuBzuE,OAAS,EACjDs2B,gBAAiB,WAAa,QAAiCD,EAAiB/wB,SASpFkoE,EAAsBpoE,UAAUiW,YAAc,WAC5C,IAAIyE,EAAMxa,KAAK4oE,aACf,OAAO5oE,KAAKgV,QAAQioB,aAAaziB,EAAM,OAAQxa,KAAKgL,IAAIwP,EAAM,cAAc6M,MAGvE6gD,EA7FT,GCFI,GAEJ,SAAU/+D,GAGR,SAASogE,IACP,IAAI9gE,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KA6BhE,OA3BAyI,EAAMlK,KAAOgrE,EAAmBhrE,KAUhCkK,EAAM0gE,uBAAyB,CAAC,CAC9BnvE,KAAM,MACNwvE,gBAAgB,GACf,CACDxvE,KAAM,KACNwvE,gBAAgB,GACf,CACDxvE,KAAM,SACNwvE,gBAAgB,GACf,CACDxvE,KAAM,KACNwvE,gBAAgB,GACf,CACDxvE,KAAM,MACNwvE,gBAAgB,IAElB/gE,EAAM2tD,eAAiB,SAChB3tD,EA4BT,OA5DA,gBAAU8gE,EAAoBpgE,GAmC9BogE,EAAmBhrE,KAAO,iBAC1BgrE,EAAmBhyD,aAAe,CAAC,QAAS,QAAS,QACrDgyD,EAAmBrzD,cAAgB,CACjCC,OAAQ,EACRC,EAAG,EACHd,iBAAkB,cAClBe,iBAAiB,EACjB6F,OAAQ,KACRutD,SAAU,CAAC,EAAG,IACdxxD,UAAW,CACTzN,MAAO,OACPqN,YAAa,GAEf0Z,SAAU,CACR9S,OAAO,EACPxG,UAAW,CACTJ,YAAa,EACbtJ,WAAY,EACZJ,cAAe,EACfE,cAAe,EACfG,YAAa,oBAGjBgkB,kBAAmB,KAEd+2C,EA7DT,CA8DE5yD,GAAA,MAEF,mBAAM,GAAoB,IAAuB,GAClC,IAAA+yD,GAAA,GCjEX,GAEJ,SAAUvgE,GAGR,SAASwgE,IACP,IAAIlhE,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOorE,EAAYprE,KAClBkK,EAwDT,OA9DA,gBAAUkhE,EAAaxgE,GASvBwgE,EAAY7pE,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAC7D,IAAI1D,EAAOyD,EAAYxD,UACnBzI,EAAQlN,KAAKkN,MACboN,EAAUta,KAAKua,MAGdva,KAAKua,OACRrN,EAAMiQ,YAGR,IAAIysD,EAAyC,eAA9BzwD,EAAYnO,IAAI,UAA6B,EAAI,EAChE0K,EAAK1C,KAAKsH,GAAS7S,KAAI,SAAUyoB,GAC/B,GAAIxa,EAAKyG,SAAS+T,GAAS,CACzB,IAAII,EAAa5a,EAAK4B,cAAc4Y,GAChC6jB,EAAW81B,GAAgBv5C,EAAY5a,EAAMwa,EAAQ05C,GAAU,GACnEl0D,EAAK+G,iBAAiByT,EAAQ6jB,GAC9B7mC,EAAMzF,IAAIssC,OAEX/pC,QAAO,SAAUkmB,EAAQC,GAC1B,IAAI4jB,EAAWz5B,EAAQwC,iBAAiBqT,GAExC,GAAKza,EAAKyG,SAAS+T,GAAnB,CAKA,IAAII,EAAa5a,EAAK4B,cAAc4Y,GAE/B6jB,EAGH+1B,GAAoBx5C,EAAYyjB,EAAUr+B,EAAMwa,GAFhD6jB,EAAW81B,GAAgBv5C,EAAY5a,EAAMwa,EAAQ05C,GAKvD18D,EAAMzF,IAAIssC,GACVr+B,EAAK+G,iBAAiByT,EAAQ6jB,QAb5B7mC,EAAMY,OAAOimC,MAcdjmC,QAAO,SAAUqiB,GAClB,IAAI9xB,EAAKic,EAAQwC,iBAAiBqT,GAClC9xB,GAAM6O,EAAMY,OAAOzP,MAClB0e,UACH/c,KAAKua,MAAQ7E,GAGfi0D,EAAY7pE,UAAUgO,OAAS,SAAUkH,GACvC,IAAI9H,EAAQlN,KAAKkN,MACbwI,EAAO1V,KAAKua,MAChBva,KAAKua,MAAQ,KACb7E,GAAQA,EAAK2K,mBAAkB,SAAUhiB,GACvCA,GAAM6O,EAAMY,OAAOzP,OAIvBsrE,EAAYprE,KAAO,UACZorE,EA/DT,CAgEErpD,GAAA,MAEEypD,GAEJ,WACE,SAASA,KAET,OAAOA,EAHT,GAMI,GAEJ,SAAU5gE,GAGR,SAAS6gE,EAAQr6D,GACf,IAAIlH,EAAQU,EAAOE,KAAKrJ,KAAM2P,IAAS3P,KAGvC,OADAyI,EAAMlK,KAAO,iBACNkK,EA0BT,OAhCA,gBAAUuhE,EAAS7gE,GASnB6gE,EAAQlqE,UAAUmkB,gBAAkB,WAClC,OAAO,IAAI8lD,IAGbC,EAAQlqE,UAAU0D,UAAY,SAAU0gB,EAAKzgB,GAC3C,IAAIwmE,EAAOxmE,EAAM0gB,OACb/oB,EAAI,EAIR,IAHA8oB,EAAI/jB,OAAO8pE,EAAK7uE,GAAG,GAAI6uE,EAAK7uE,GAAG,IAC/BA,IAEOA,EAAI,EAAGA,IACZ8oB,EAAI3jB,OAAO0pE,EAAK7uE,GAAG,GAAI6uE,EAAK7uE,GAAG,IAKjC,IAFA8oB,EAAI3hB,YAEGnH,EAAI6uE,EAAKvvE,OAAQU,IACtB8oB,EAAI/jB,OAAO8pE,EAAK7uE,GAAG,GAAI6uE,EAAK7uE,GAAG,IAC/BA,IACA8oB,EAAI3jB,OAAO0pE,EAAK7uE,GAAG,GAAI6uE,EAAK7uE,GAAG,KAI5B4uE,EAjCT,CAkCEphE,EAAA,MAEF,SAASihE,GAAgBv5C,EAAY5a,EAAM0B,EAAWwyD,EAAUl1C,GAC9D,IAAIu1C,EAAO35C,EAAW25C,KAClB5rE,EAAK,IAAI,GAAQ,CACnBoF,MAAO,CACL0gB,OAAQuQ,EAASw1C,GAAUD,EAAML,EAAUt5C,GAAc25C,KAI7D,OADAH,GAAoBx5C,EAAYjyB,EAAIqX,EAAM0B,EAAWsd,GAC9Cr2B,EAGT,SAASyrE,GAAoBx5C,EAAYjyB,EAAIqX,EAAM0B,EAAWsd,GAC5D,IAAIvb,EAAczD,EAAKqZ,UACnBo7C,EAAel7C,GAAQyF,EAAS,YAAc,eAClDy1C,EAAa9rE,EAAI,CACfoF,MAAO,CACL0gB,OAAQmM,EAAW25C,OAEpB9wD,EAAa/B,GAChB/Y,EAAGwd,SAASnG,EAAKmN,cAAczL,EAAW,UAC1C/Y,EAAGvE,MAAMoF,eAAgB,EACzBb,EAAGkjB,GAAK,IACR,IAAIvF,EAAYtG,EAAKuG,aAAa7E,GAClC,gBAAyB/Y,EAAI2d,GAC7B,gBAAoB3d,EAAI2d,EAAUhR,IAAI,CAAC,WAAY,UAAWgR,EAAUhR,IAAI,CAAC,WAAY,eAG3F,SAASk/D,GAAU/lD,EAAQ3J,EAAK8V,GAC9B,OAAO,SAAWnM,GAAQ,SAAUkM,GAGlC,OAFAA,EAAQA,EAAM71B,QACd61B,EAAM7V,GAAO8V,EAAW85C,aACjB/5C,KAII,UC5JA,SAASg6C,GAAcr1D,EAASoE,ICE/C,IAAI,GAAO,UACI,SAASkxD,GAAct1D,GACpC,IAAI+xD,EAAcwD,GAAkBv1D,GACpC,GAAK+xD,GAAa,SAAUyD,GAC1B,IAAIC,EAAeD,EAAUC,aAExBA,EAAa/vE,SAIlBgwE,GAAcF,GACd,GAAKC,GAAc,SAAUtxD,EAAasE,GACxCktD,GAAmBxxD,EAAaqxD,EAAUI,cAAcntD,GAAM+sD,EAAUK,aAAaptD,WAQ3F,SAAS8sD,GAAkBv1D,GACzB,IAAIy1B,EAAS,GACTqgC,EAAW,GAgBf,OAfA91D,EAAQ4S,iBAAiB,WAAW,SAAUzO,GAC5C,IAAIN,EAAWM,EAAYpD,cACvB0H,EAAM,aAAeqtD,EAAUjyD,GAE/B4E,EAAM,IACRA,EAAMqtD,EAASpwE,OACfowE,EAASrtD,GAAO5E,EAChB4xB,EAAOhtB,GAAO,CACZ4J,KAAMxO,EACN4xD,aAAc,KAIlBhgC,EAAOhtB,GAAKgtD,aAAapvE,KAAK8d,MAEzBsxB,EAOT,SAASigC,GAAcF,GACrB,IAAIhrD,EAOAurD,EANAlyD,EAAW2xD,EAAUnjD,KACrBojD,EAAeD,EAAUC,aACzBO,EAAcP,EAAa/vE,OAC3BmwE,EAAeL,EAAUK,aAAe,GACxCD,EAAgBJ,EAAUI,cAAgB,GAC1CK,EAAY,GAGhB,GAAsB,aAAlBpyD,EAASta,KACXwsE,EAAYlyD,EAASqyD,mBAChB,CACL,IAAIC,EAAiB,EACrB,GAAKV,GAAc,SAAUtxD,GAC3BgyD,EAAiBpuE,KAAKub,IAAI6yD,EAAgBhyD,EAAYxD,UAAUra,YAElEkkB,EAAS3G,EAAS4G,YAAa1iB,KAAK8E,IAAI2d,EAAO,GAAKA,EAAO,IAG7D,GAAKirD,GAAc,SAAUtxD,GAC3B,IAAIiyD,EAAgBjyD,EAAYnO,IAAI,YAE/B,aAAeogE,KAClBA,EAAgB,CAACA,EAAeA,IAGlCH,EAAU5vE,KAAK,CAAC,gBAAa+vE,EAAc,GAAIL,IAAc,EAAG,gBAAaK,EAAc,GAAIL,IAAc,OAE/G,IAAIM,EAA6B,GAAZN,EAAkB,EACnCO,EAASD,EAAiBL,EAAc,GACxCvB,GAAY4B,EAAiBC,GAAUN,EAAc,IAAMA,EAC3DO,EAAO9B,EAAW,EAAI4B,EAAiB,EAC3C,GAAKZ,GAAc,SAAUtxD,EAAasE,GACxCmtD,EAAcvvE,KAAKkwE,GACnBA,GAAQD,EAAS7B,EACjBoB,EAAaxvE,KAAK0B,KAAKyb,IAAIzb,KAAKub,IAAImxD,EAAUwB,EAAUxtD,GAAK,IAAKwtD,EAAUxtD,GAAK,QAQrF,SAASktD,GAAmBxxD,EAAa5O,EAAQk/D,GAC/C,IAAIp0D,EAAW8D,EAAY7D,iBACvBI,EAAOyD,EAAYxD,UACnB61D,EAAY/B,EAAW,EACvBgC,EAAwC,eAA9BtyD,EAAYnO,IAAI,UAA6B,EAAI,EAC3D0gE,EAAU,EAAID,EACdhD,EAAY,CAAC,IAAK,KAClBkD,EAAOj2D,EAAKwI,aAAauqD,EAAUgD,IACnCG,EAAQl2D,EAAKm2D,iBAAiBpD,EAAUiD,IAE5C,KAAY,MAARC,GAAgBC,EAAMlxE,OAAS,GAInC,IAAK,IAAI0c,EAAY,EAAGA,EAAY1B,EAAKpa,QAAS8b,IAAa,CAC7D,IAAI00D,EAAap2D,EAAK1K,IAAI2gE,EAAMv0D,GAC5B20D,EAASC,EAASF,EAAYF,EAAM,GAAIx0D,GACxC60D,EAAOD,EAASF,EAAYF,EAAM,GAAIx0D,GACtC80D,EAAOF,EAASF,EAAYF,EAAM,GAAIx0D,GACtC+0D,EAAOH,EAASF,EAAYF,EAAM,GAAIx0D,GACtCg1D,EAAOJ,EAASF,EAAYF,EAAM,GAAIx0D,GACtC6yD,EAAO,GACXoC,EAAWpC,EAAMiC,GAAM,GACvBG,EAAWpC,EAAMkC,GAAM,GACvBlC,EAAK5uE,KAAK4wE,EAAMC,EAAME,EAAMD,GAC5BG,EAAWrC,EAAMgC,GACjBK,EAAWrC,EAAMmC,GACjBE,EAAWrC,EAAM8B,GACjBr2D,EAAKoT,cAAc1R,EAAW,CAC5BgzD,aAAc2B,EAAOL,GACrBzB,KAAMA,IAIV,SAAS+B,EAASF,EAAYtxD,EAAKpD,GACjC,IAIIiZ,EAJA3yB,EAAMgY,EAAK1K,IAAIwP,EAAKpD,GACpBm1D,EAAI,GAYR,OAXAA,EAAEd,GAAWK,EACbS,EAAEb,GAAWhuE,EAGTyE,MAAM2pE,IAAe3pE,MAAMzE,GAC7B2yB,EAAQ,CAACpa,IAAKA,MAEdoa,EAAQhb,EAASG,YAAY+2D,GAC7Bl8C,EAAMo7C,IAAYlhE,GAGb8lB,EAGT,SAASg8C,EAAWpC,EAAM55C,EAAOk0B,GAC/B,IAAIioB,EAASn8C,EAAM71B,QACfiyE,EAASp8C,EAAM71B,QACnBgyE,EAAOf,IAAYD,EACnBiB,EAAOhB,IAAYD,EACnBjnB,EAAQ0lB,EAAK5uE,KAAKmxE,EAAQC,GAAUxC,EAAK5uE,KAAKoxE,EAAQD,GAGxD,SAASF,EAAWrC,EAAMyC,GACxB,IAAI9kC,EAAO8kC,EAAUlyE,QACjBmyE,EAAKD,EAAUlyE,QACnBotC,EAAK6jC,IAAYD,EACjBmB,EAAGlB,IAAYD,EACfvB,EAAK5uE,KAAKusC,EAAM+kC,ICvIL,SAASC,GAAmBC,EAASj1C,GAClDA,EAAMA,GAAO,GAMb,IALA,IAAIk1C,EAAU,GACVC,EAAW,GACXC,EAAWp1C,EAAIo1C,SACfC,EAA0B,SAAbD,GAAoC,IAAbA,EAE/B5xE,EAAI,EAAGA,EAAIyxE,EAAQnyE,OAAQU,IAAK,CACvC,IAAI8xE,EAAU,gBAAIL,EAAQzxE,GAAGZ,SACzB2yE,EAAK,gBAASD,EAAS,KACvBE,EAAK,gBAASF,EAAS,IACvBG,EAAK,gBAASH,EAAS,KACvB10D,EAAM00D,EAAQ,GACd50D,EAAM40D,EAAQA,EAAQxyE,OAAS,GAC/B4yE,GAAqB,MAAZN,EAAmB,IAAMA,IAAaK,EAAKF,GACpDI,EAAMN,EAAaz0D,EAAMzb,KAAKub,IAAIE,EAAK20D,EAAKG,GAC5CE,EAAOP,EAAa30D,EAAMvb,KAAKyb,IAAIF,EAAK+0D,EAAKC,GAC7CG,EAAoB71C,EAAI61C,kBACxBnmC,EAAW,wBAAWmmC,GAAqBA,EAAkB,CAC/DzkE,MAAO5N,IACJ,sBAASqyE,GAAqBA,EAAkBl5D,QAAQ,UAAWnZ,EAAI,IAAMA,EAAI,GACtF0xE,EAAQzxE,KAAK,CAACisC,EAAUimC,EAAKJ,EAAIC,EAAIC,EAAIG,IAEzC,IAAK,IAAIhyC,EAAI,EAAGA,EAAI0xC,EAAQxyE,OAAQ8gC,IAAK,CACvC,IAAIioC,EAAWyJ,EAAQ1xC,GAEvB,GAAIioC,EAAW8J,GAAO9J,EAAW+J,EAAM,CACrC,IAAIE,EAAU,CAACpmC,EAAUm8B,GACzBsJ,EAAS1xE,KAAKqyE,KAKpB,MAAO,CACLZ,QAASA,EACTC,SAAUA,G,8BCpDHY,GAAmB,CAC5BpvE,KAAM,kBACN4F,UAAW,SAAmB8V,GAC5B,IAAI2zD,EAAW3zD,EAAO2zD,SAEtB,GAAIA,EAASC,eAAiB,QAA0B,CACtD,IAAIC,EAAS,GAET,EAIJ,gBAAWA,GAGb,IAAIrjC,EAASmiC,GAAmBgB,EAASj9C,aAAc1W,EAAO8zD,QAC9D,MAAO,CAAC,CACN/3C,WAAY,CAAC,WAAY,MAAO,KAAM,KAAM,KAAM,QAClDtgB,KAAM+0B,EAAOqiC,SACZ,CACDp3D,KAAM+0B,EAAOsiC,aClBZ,SAAS,GAAQr4D,GACtBA,EAAU4R,oBAAoBojD,IAC9Bh1D,EAAU2R,kBAAkB,IAC5B3R,EAAUoqB,eAAeurC,IACzB31D,EAAU6R,eAAe+jD,IACzB51D,EAAUs5D,kBAAkBL,ICH9B,IAAIM,GAAa,CAAC,QAAS,eAEvB,GAEJ,SAAU9kE,GAGR,SAAS+kE,IACP,IAAIzlE,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO2vE,EAAgB3vE,KACtBkK,EA4IT,OAlJA,gBAAUylE,EAAiB/kE,GAS3B+kE,EAAgBpuE,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAEjEpZ,KAAKkN,MAAM6N,iBAEX/a,KAAKwZ,gBAAgBL,GAErBnZ,KAAK0Z,aAAe1Z,KAAK2Z,aAAaR,GAAenZ,KAAK4Z,cAAcT,IAG1E+0D,EAAgBpuE,UAAU+Z,yBAA2B,SAAUV,EAAanE,EAASoE,GACnFpZ,KAAK8Z,SAEL9Z,KAAKwZ,gBAAgBL,IAGvB+0D,EAAgBpuE,UAAUka,kBAAoB,SAAUC,EAAQd,EAAanE,EAASoE,GACpFpZ,KAAK0Z,aAAe1Z,KAAKka,wBAAwBD,EAAQd,GAAenZ,KAAKmuE,yBAAyBl0D,EAAQd,IAGhH+0D,EAAgBpuE,UAAU0Z,gBAAkB,SAAUL,GACpD,IAAIgB,EAAchB,EAAYiB,gBAAgBpY,MAErB,MAArBhC,KAAK0Z,cAAwBS,IAAgBna,KAAK0Z,eACpD1Z,KAAK0Z,aAAeS,EAEpBna,KAAK8Z,WAITo0D,EAAgBpuE,UAAU8Z,cAAgB,SAAUT,GAClD,IAAIzD,EAAOyD,EAAYxD,UACnB2E,EAAUta,KAAKua,MACfrN,EAAQlN,KAAKkN,MACbkhE,EAAc14D,EAAKE,UAAU,eAC7BkF,EAAY3B,EAAYnO,IAAI,QAAQ,GACpC0N,EAAQS,EAAY7D,iBACpB+4D,EAAW31D,EAAME,SAAWF,EAAME,UAGjC5Y,KAAKua,OACRrN,EAAMiQ,YAGRzH,EAAK1C,KAAKsH,GAAS7S,KAAI,SAAUyoB,GAC/B,GAAIxa,EAAKyG,SAAS+T,GAAS,CACzB,IAAII,EAAa5a,EAAK4B,cAAc4Y,GAEpC,GAAIpV,GAAawzD,GAAmBD,EAAU/9C,GAC5C,OAGF,IAAIjyB,EAAK,GAAgBiyB,EAAYJ,GAAQ,GAC7CjB,GAAA,aAAkB5wB,EAAI,CACpBoF,MAAO,CACL0gB,OAAQmM,EAAW25C,OAEpB9wD,EAAa+W,GAChBq+C,GAAalwE,EAAIqX,EAAMwa,EAAQk+C,GAC/BlhE,EAAMzF,IAAIpJ,GACVqX,EAAK+G,iBAAiByT,EAAQ7xB,OAE/B2L,QAAO,SAAUkmB,EAAQC,GAC1B,IAAI9xB,EAAKic,EAAQwC,iBAAiBqT,GAElC,GAAKza,EAAKyG,SAAS+T,GAAnB,CAKA,IAAII,EAAa5a,EAAK4B,cAAc4Y,GAEhCpV,GAAawzD,GAAmBD,EAAU/9C,GAC5CpjB,EAAMY,OAAOzP,IAIVA,EAGH4wB,GAAA,eAAoB5wB,EAAI,CACtBoF,MAAO,CACL0gB,OAAQmM,EAAW25C,OAEpB9wD,EAAa+W,GANhB7xB,EAAK,GAAgBiyB,EAAYJ,GASnCq+C,GAAalwE,EAAIqX,EAAMwa,EAAQk+C,GAC/BlhE,EAAMzF,IAAIpJ,GACVqX,EAAK+G,iBAAiByT,EAAQ7xB,SAvB5B6O,EAAMY,OAAOzP,MAwBdyP,QAAO,SAAUqiB,GAClB,IAAI9xB,EAAKic,EAAQwC,iBAAiBqT,GAClC9xB,GAAM6O,EAAMY,OAAOzP,MAClB0e,UACH/c,KAAKua,MAAQ7E,GAGfw4D,EAAgBpuE,UAAU6Z,aAAe,SAAUR,GACjDnZ,KAAK8Z,SAEL,GAAYX,EAAanZ,KAAKkN,OAC9B,IAAIjB,EAAWkN,EAAYnO,IAAI,QAAQ,GAAQ,gBAAemO,EAAY7D,kBAAkB,EAAO6D,GAAe,KAE9GlN,EACFjM,KAAKkN,MAAMoQ,YAAYrR,GAEvBjM,KAAKkN,MAAM6N,kBAIfmzD,EAAgBpuE,UAAUquE,yBAA2B,SAAUl0D,EAAQd,GACrE,IAEI/B,EAFA1B,EAAOyD,EAAYxD,UACnBy4D,EAAc14D,EAAKE,UAAU,eAGjC,MAAsC,OAA9BwB,EAAY6C,EAAOuiC,QAAiB,CAC1C,IAAIlsB,EAAa5a,EAAK4B,cAAcF,GAChC/Y,EAAK,GAAgBiyB,EAAYlZ,GACrCm3D,GAAalwE,EAAIqX,EAAM0B,EAAWg3D,GAClC/vE,EAAGmmB,aAAc,EACjBxkB,KAAKkN,MAAMzF,IAAIpJ,KAInB6vE,EAAgBpuE,UAAUoa,wBAA0B,SAAUD,EAAQd,GACpE,GAAYA,EAAanZ,KAAKkN,OAAO,IAGvCghE,EAAgBpuE,UAAUgO,OAAS,SAAUkH,GAC3ChV,KAAK8Z,UAGPo0D,EAAgBpuE,UAAUga,OAAS,WACjC9Z,KAAKkN,MAAMiQ,YACXnd,KAAKua,MAAQ,MAGf2zD,EAAgB3vE,KAAO,cAChB2vE,EAnJT,CAoJE5tD,GAAA,MAEEkuD,GAEJ,WACE,SAASA,KAET,OAAOA,EAHT,GAMI,GAEJ,SAAUrlE,GAGR,SAASslE,EAAc9+D,GACrB,IAAIlH,EAAQU,EAAOE,KAAKrJ,KAAM2P,IAAS3P,KAGvC,OADAyI,EAAMlK,KAAO,uBACNkK,EA0BT,OAhCA,gBAAUgmE,EAAetlE,GASzBslE,EAAc3uE,UAAUmkB,gBAAkB,WACxC,OAAO,IAAIuqD,IAGbC,EAAc3uE,UAAU0D,UAAY,SAAU0gB,EAAKzgB,GACjD,IAAIwmE,EAAOxmE,EAAM0gB,OAEbnkB,KAAK0uE,aACPxqD,EAAI/jB,OAAO8pE,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC/B/lD,EAAI3jB,OAAO0pE,EAAK,GAAG,GAAIA,EAAK,GAAG,MAE/B/lD,EAAI/jB,OAAO8pE,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC/B/lD,EAAI3jB,OAAO0pE,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC/B/lD,EAAI3jB,OAAO0pE,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC/B/lD,EAAI3jB,OAAO0pE,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC/B/lD,EAAI3hB,YACJ2hB,EAAI/jB,OAAO8pE,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC/B/lD,EAAI3jB,OAAO0pE,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC/B/lD,EAAI/jB,OAAO8pE,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC/B/lD,EAAI3jB,OAAO0pE,EAAK,GAAG,GAAIA,EAAK,GAAG,MAI5BwE,EAjCT,CAkCE7lE,EAAA,MAEF,SAAS,GAAgB0nB,EAAYlZ,EAAWsd,GAC9C,IAAIu1C,EAAO35C,EAAW25C,KACtB,OAAO,IAAI,GAAc,CACvBxmE,MAAO,CACL0gB,OAAQuQ,EAAS,GAAUu1C,EAAM35C,GAAc25C,GAEjD1oD,GAAI,MAIR,SAAS+sD,GAAmBD,EAAU/9C,GAGpC,IAFA,IAAInP,GAAU,EAEL/lB,EAAI,EAAGA,EAAIk1B,EAAW25C,KAAKvvE,OAAQU,IAE1C,GAAIizE,EAAS5hC,QAAQnc,EAAW25C,KAAK7uE,GAAG,GAAIk1B,EAAW25C,KAAK7uE,GAAG,IAAK,CAClE+lB,GAAU,EACV,MAIJ,OAAOA,EAGT,SAASotD,GAAalwE,EAAIqX,EAAM0B,EAAWg3D,GACzC,IAAIpyD,EAAYtG,EAAKuG,aAAa7E,GAClC/Y,EAAGwd,SAASnG,EAAKmN,cAAczL,EAAW,UAC1C/Y,EAAGvE,MAAMoF,eAAgB,EACzBb,EAAGqwE,YAAcN,EACjB,gBAAyB/vE,EAAI2d,GAG/B,SAAS,GAAUmI,EAAQmM,GACzB,OAAO,SAAWnM,GAAQ,SAAUkM,GAGlC,OAFAA,EAAQA,EAAM71B,QACd61B,EAAM,GAAKC,EAAW85C,aACf/5C,KAIX,IAAIs+C,GAEJ,WACE,SAASA,KAET,OAAOA,EAHT,GAMI,GAEJ,SAAUxlE,GAGR,SAASylE,EAAaj/D,GACpB,IAAIlH,EAAQU,EAAOE,KAAKrJ,KAAM2P,IAAS3P,KAGvC,OADAyI,EAAMlK,KAAO,sBACNkK,EAuBT,OA7BA,gBAAUmmE,EAAczlE,GASxBylE,EAAa9uE,UAAUmkB,gBAAkB,WACvC,OAAO,IAAI0qD,IAGbC,EAAa9uE,UAAU0D,UAAY,SAAU0gB,EAAKzgB,GAKhD,IAFA,IAAI0gB,EAAS1gB,EAAM0gB,OAEV/oB,EAAI,EAAGA,EAAI+oB,EAAOzpB,QACzB,GAAIsF,KAAK6uE,SAAW1qD,EAAO/oB,KAAM,CAC/B,IAAIgF,EAAI+jB,EAAO/oB,KACf8oB,EAAI/jB,OAAOC,EAAG+jB,EAAO/oB,MACrB8oB,EAAI3jB,OAAOH,EAAG+jB,EAAO/oB,WAErBA,GAAK,GAKJwzE,EA9BT,CA+BEhmE,EAAA,MAEF,SAAS,GAAYuQ,EAAajM,EAAOsX,GACvC,IAAI9O,EAAOyD,EAAYxD,UACnBm5D,EAAcp5D,EAAKE,UAAU,eAC7Bm5D,EAAM,IAAI,GAAa,CACzBtrE,MAAO,CACL0gB,OAAQ2qD,GAEVD,OAAQ,IAEV3hE,EAAMzF,IAAIsnE,GACV,IAAIC,EAAM,IAAI,GAAa,CACzBvrE,MAAO,CACL0gB,OAAQ2qD,GAEVD,QAAS,IAEX3hE,EAAMzF,IAAIunE,GACV,GAAc,EAAGD,EAAK51D,EAAazD,GACnC,IAAe,EAAGs5D,EAAK71D,EAAazD,GAEhC8O,IACFuqD,EAAIvqD,aAAc,EAClBwqD,EAAIxqD,aAAc,GAItB,SAAS,GAAcyqD,EAAM5wE,EAAI8a,EAAazD,GAE5C,IAAIkC,EAAcuB,EAAYnO,IAAI,CAAC,YAAaikE,EAAO,EAAI,cAAgB,kBAAoB91D,EAAYnO,IAAI,CAAC,YAAaikE,EAAO,EAAI,QAAU,WAG9Ih3D,EAAYkB,EAAY+B,SAAS,aAAaY,aAAamyD,IAC/D5vE,EAAGwd,SAAS5D,GACZ5Z,EAAGvE,MAAMgE,KAAO,KAChBO,EAAGvE,MAAMkE,OAAS4Z,EAGL,UClUX,GAEJ,SAAUzO,GAGR,SAAS+lE,IACP,IAAIzmE,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAgBhE,OAdAyI,EAAMlK,KAAO2wE,EAAuB3wE,KACpCkK,EAAM0gE,uBAAyB,CAAC,CAC9BnvE,KAAM,OACNwvE,gBAAgB,GACf,CACDxvE,KAAM,QACNwvE,gBAAgB,GACf,CACDxvE,KAAM,SACNwvE,gBAAgB,GACf,CACDxvE,KAAM,UACNwvE,gBAAgB,IAEX/gE,EAsDT,OAzEA,gBAAUymE,EAAwB/lE,GA2BlC+lE,EAAuBpvE,UAAUqvE,aAAe,WAC9C,MAAO,QAGTD,EAAuBpvE,UAAUqX,cAAgB,SAAUC,EAAW1B,EAAM2B,GAC1E,IAAIiZ,EAAa5a,EAAK4B,cAAcF,GACpC,OAAOkZ,GAAcjZ,EAAUjV,KAAKkuB,EAAW8+C,YAGjDF,EAAuB3wE,KAAO,qBAC9B2wE,EAAuB33D,aAAe,CAAC,QAAS,QAAS,QACzD23D,EAAuBh5D,cAAgB,CACrCC,OAAQ,EACRC,EAAG,EACHd,iBAAkB,cAClBe,iBAAiB,EAGjB6F,OAAQ,KACR1E,MAAM,EACNS,UAAW,CACTzN,MAAO,UACP6kE,OAAQ,UACRz3D,YAAa,UACb03D,aAAc,UAGdz3D,YAAa,GAEf0Z,SAAU,CACR9S,OAAO,EACPxG,UAAW,CACTJ,YAAa,IAGjB03D,YAAa,KACbC,YAAa,KACb9qD,SAAU,KACV1iB,OAAO,EACPwU,eAAgB,IAChBC,YAAa,IACbS,qBAAsB,IACtBR,qBAAsB,MACtBkc,gBAAiB,SACjBJ,kBAAmB,KAEd08C,EA1ET,CA2EEv4D,GAAA,MAEF,mBAAM,GAAwB,IAAuB,GACtC,IAAA84D,GAAA,GCpFA,SAASC,GAAwB36D,GACzCA,GAAW,aAAeA,EAAO4e,SAKtC,UAAY5e,EAAO4e,QAAQ,SAAUg8C,GAC/B,cAAgBA,IAAmC,MAApBA,EAAWpxE,OAC5CoxE,EAAWpxE,KAAO,kB,iBCPpBqxE,GAA2B,CAAC,YAAa,eACzCC,GAA2B,CAAC,YAAa,gBACzCC,GAAqB,CAAC,YAAa,SACnCC,GAAqB,CAAC,YAAa,UACnCC,GAAoB,CACtBroD,WAAY,cACZsoD,KAAM,OAAAC,GAAA,QAENC,kBAAkB,EAClBpwE,MAAO,SAAUoZ,EAAanE,GAC5B,SAASo7D,EAASnB,EAAM3yD,GACtB,OAAOA,EAAMtR,IAAIikE,EAAO,EAAIa,GAAqBC,IAGnD,SAASM,EAAepB,EAAM3yD,GAC5B,OAAOA,EAAMtR,IAAIikE,EAAO,EAAIW,GAA2BC,IAG9C12D,EAAYxD,UAEvB,IAAIX,EAAQs7D,iBAAiBn3D,GAA7B,CAIA,IAAIo3D,EAAgBp3D,EAAYiB,gBAAgBpY,MAChD,OAAQuuE,GAAiB,CACvBjZ,SAAU,SAAUr9C,EAAQvE,GAC1B,IAAI0B,EAEJ,MAAsC,OAA9BA,EAAY6C,EAAOuiC,QAAiB,CAC1C,IAAIxgC,EAAYtG,EAAKuG,aAAa7E,GAC9B63D,EAAOv5D,EAAK4B,cAAcF,GAAW63D,KACrCn1E,EAAQkiB,EAAUF,eACtBhiB,EAAMgE,KAAOsyE,EAASnB,EAAMjzD,GAC5BliB,EAAMkE,OAASqyE,EAAepB,EAAMjzD,IAAcliB,EAAMgE,KACxD,IAAI0/C,EAAc9nC,EAAK+nC,uBAAuBrmC,EAAW,SACzD,oBAAOomC,EAAa1jD,SAMf,MCtCX02E,GAAmC,qBAAjBC,aAA+BA,aAAeC,MAChEC,GAAoB,CACtBhpD,WAAY,cACZsoD,KAAM,OAAAC,GAAA,QACNnwE,MAAO,SAAUoZ,GACf,IAAI9D,EAAW8D,EAAY7D,iBACvBI,EAAOyD,EAAYxD,UACnBi7D,EAAcC,GAAqB13D,EAAazD,GAChD+1D,EAAU,EACVC,EAAU,EACVjD,EAAY,CAAC,IAAK,KAClBkD,EAAOj2D,EAAKwI,aAAauqD,EAAUgD,IACnCG,EAAQl2D,EAAKm2D,iBAAiBpD,EAAUiD,IACxCoF,EAAUlF,EAAM,GAChBmF,EAAWnF,EAAM,GACjBoF,EAAYpF,EAAM,GAClBqF,EAAarF,EAAM,GAOvB,GANAl2D,EAAKkT,UAAU,CACbgoD,YAAaA,EAEbxC,YAAawC,GAAe,QAGlB,MAARjF,GAAgBC,EAAMlxE,OAAS,GAInC,MAAO,CACL48D,SAAUn+C,EAAYiB,gBAAgBpY,MAAQkvE,EAAgBC,GAGhE,SAASA,EAAel3D,EAAQvE,GAC9B,IAAI0B,EAEJ,MAAsC,OAA9BA,EAAY6C,EAAOuiC,QAAiB,CAC1C,IAAIsvB,EAAap2D,EAAK1K,IAAI2gE,EAAMv0D,GAC5Bg6D,EAAU17D,EAAK1K,IAAI8lE,EAAS15D,GAC5Bi6D,EAAW37D,EAAK1K,IAAI+lE,EAAU35D,GAC9Bk6D,EAAY57D,EAAK1K,IAAIgmE,EAAW55D,GAChCm6D,EAAa77D,EAAK1K,IAAIimE,EAAY75D,GAClCo6D,EAAQz0E,KAAKyb,IAAI44D,EAASC,GAC1BI,EAAS10E,KAAKub,IAAI84D,EAASC,GAC3BK,EAAa1F,EAASwF,EAAO1F,GAC7B6F,EAAc3F,EAASyF,EAAQ3F,GAC/B8F,EAAc5F,EAASsF,EAAWxF,GAClC+F,EAAe7F,EAASuF,EAAYzF,GACpC7B,EAAO,GACXoC,EAAWpC,EAAM0H,EAAa,GAC9BtF,EAAWpC,EAAMyH,EAAY,GAC7BzH,EAAK5uE,KAAKy2E,EAAsBD,GAAeC,EAAsBH,GAAcG,EAAsBF,GAAcE,EAAsBJ,IAC7Ih8D,EAAKoT,cAAc1R,EAAW,CAC5B63D,KAAM8C,GAAQr8D,EAAM0B,EAAWg6D,EAASC,EAAUN,GAClD3G,aAAcgH,EAAUC,EAAWM,EAAYjG,GAAWgG,EAAWhG,GACrEzB,KAAMA,EACNmF,UAAW4C,EAAcV,EAAWC,EAAYzF,KAIpD,SAASE,EAAStuE,EAAKouE,GACrB,IAAIS,EAAI,GAGR,OAFAA,EAAEd,GAAWK,EACbS,EAAEb,GAAWhuE,EACNyE,MAAM2pE,IAAe3pE,MAAMzE,GAAO,CAACuY,IAAKA,KAAOZ,EAASG,YAAY+2D,GAG7E,SAASF,EAAWpC,EAAM55C,EAAOk0B,GAC/B,IAAIioB,EAASn8C,EAAM71B,QACfiyE,EAASp8C,EAAM71B,QACnBgyE,EAAOf,GAAW,+BAAiBe,EAAOf,GAAWmF,EAAc,EAAG,GAAG,GACzEnE,EAAOhB,GAAW,+BAAiBgB,EAAOhB,GAAWmF,EAAc,EAAG,GAAG,GACzErsB,EAAQ0lB,EAAK5uE,KAAKmxE,EAAQC,GAAUxC,EAAK5uE,KAAKoxE,EAAQD,GAGxD,SAASwF,EAAcV,EAAWC,EAAYzF,GAC5C,IAAImG,EAAOjG,EAASsF,EAAWxF,GAC3BoG,EAAOlG,EAASuF,EAAYzF,GAGhC,OAFAmG,EAAKxG,IAAYmF,EAAc,EAC/BsB,EAAKzG,IAAYmF,EAAc,EACxB,CACLxwE,EAAG6xE,EAAK,GACR5xE,EAAG4xE,EAAK,GACRttE,MAAO+mE,EAAUkF,EAAcsB,EAAK,GAAKD,EAAK,GAC9CptE,OAAQ6mE,EAAUwG,EAAK,GAAKD,EAAK,GAAKrB,GAI1C,SAASkB,EAAsBzhD,GAE7B,OADAA,EAAMo7C,GAAW,+BAAiBp7C,EAAMo7C,GAAU,GAC3Cp7C,GAIX,SAAS6gD,EAAcj3D,EAAQvE,GAE7B,IAEI2a,EAGAjZ,EALA+M,EAAS,IAAIqsD,GAAwB,EAAfv2D,EAAO3e,OAC7BiP,EAAS,EAET4nE,EAAQ,GACRC,EAAS,GAGb,MAAsC,OAA9Bh7D,EAAY6C,EAAOuiC,QAAiB,CAC1C,IAAIsvB,EAAap2D,EAAK1K,IAAI2gE,EAAMv0D,GAC5Bg6D,EAAU17D,EAAK1K,IAAI8lE,EAAS15D,GAC5Bi6D,EAAW37D,EAAK1K,IAAI+lE,EAAU35D,GAC9Bk6D,EAAY57D,EAAK1K,IAAIgmE,EAAW55D,GAChCm6D,EAAa77D,EAAK1K,IAAIimE,EAAY75D,GAElCjV,MAAM2pE,IAAe3pE,MAAMmvE,IAAcnvE,MAAMovE,IACjDptD,EAAO5Z,KAAY0L,IACnB1L,GAAU,IAIZ4Z,EAAO5Z,KAAYwnE,GAAQr8D,EAAM0B,EAAWg6D,EAASC,EAAUN,GAC/DoB,EAAM1G,GAAWK,EACjBqG,EAAMzG,GAAW4F,EACjBjhD,EAAQhb,EAASG,YAAY28D,EAAO,KAAMC,GAC1CjuD,EAAO5Z,KAAY8lB,EAAQA,EAAM,GAAKpa,IACtCkO,EAAO5Z,KAAY8lB,EAAQA,EAAM,GAAKpa,IACtCk8D,EAAMzG,GAAW6F,EACjBlhD,EAAQhb,EAASG,YAAY28D,EAAO,KAAMC,GAC1CjuD,EAAO5Z,KAAY8lB,EAAQA,EAAM,GAAKpa,KAGxCP,EAAKkT,UAAU,cAAezE,MAKpC,SAAS4tD,GAAQr8D,EAAM0B,EAAWg6D,EAASC,EAAUN,GACnD,IAAI9B,EAYJ,OATEA,EADEmC,EAAUC,GACJ,EACCD,EAAUC,EACZ,EAEAj6D,EAAY,EACjB1B,EAAK1K,IAAI+lE,EAAU35D,EAAY,IAAMi6D,EAAW,GAAK,EACvD,EAGKpC,EAGT,SAAS4B,GAAqB13D,EAAazD,GACzC,IACI8J,EADA3G,EAAWM,EAAYpD,cAEvBg1D,EAA8B,aAAlBlyD,EAASta,KAAsBsa,EAASqyD,gBAAkB1rD,EAAS3G,EAAS4G,YAAa1iB,KAAK8E,IAAI2d,EAAO,GAAKA,EAAO,IAAM9J,EAAKpa,SAC5Ii0E,EAAc,gBAAa,uBAAUp2D,EAAYnO,IAAI,eAAgB+/D,GAAYA,GACjFyE,EAAc,gBAAa,uBAAUr2D,EAAYnO,IAAI,eAAgB,GAAI+/D,GACzErmD,EAAWvL,EAAYnO,IAAI,YAC/B,OAAmB,MAAZ0Z,EAAmB,gBAAaA,EAAUqmD,GAC/ChuE,KAAKub,IAAIvb,KAAKyb,IAAIuyD,EAAY,EAAGwE,GAAcC,GAGpC,UC9JR,SAAS,GAAQ96D,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoBmpD,IAC9B/6D,EAAUuqB,qBAAqB,IAC/BvqB,EAAUoqB,eAAe,IACzBpqB,EAAU6R,eAAe,I,qECEvB,GAEJ,SAAUpd,GAGR,SAASkpE,EAAWC,EAAU70D,EAAKw3C,GACjC,IAAIxsD,EAAQU,EAAOE,KAAKrJ,OAASA,KAMjC,OAJAyI,EAAMhB,IAAIgB,EAAM8pE,WAAWD,EAAU70D,EAAKw3C,IAE1CxsD,EAAM+pE,oBAAoBF,EAAU70D,GAE7BhV,EA0KT,OAnLA,gBAAU4pE,EAAYlpE,GAYtBkpE,EAAWvyE,UAAUyyE,WAAa,SAAUD,EAAU70D,EAAKw3C,GACzD,OAAO,IAAIwd,GAAA,KAAKH,EAAU70D,EAAKw3C,IAGjCod,EAAWvyE,UAAU0yE,oBAAsB,SAAUF,EAAU70D,GAC7D,IAAIzB,EAAYs2D,EAASr2D,aAAawB,GAClCi1D,EAAc12D,EAAUd,SAAS,UACjCrF,EAAO68D,EAAY1nE,IAAI,cACvBmpB,EAAau+C,EAAY1nE,IAAI,UAE5B,aAAe6K,KAClBA,EAAO,CAACA,EAAMA,IAGhB,IAAIsc,EAAYmgD,EAASzvD,cAAcpF,EAAK,SACxCjT,EAAQkoE,EAAY1nE,IAAI,UAAYmnB,GAAaA,EAAUn0B,OAC3D2rC,EAAS3pC,KAAKg1B,QAAQ,GAEtBh1B,KAAK2yE,cAAgBx+C,IAEvBn0B,KAAK8N,OAAO67B,GACZA,EAAS,gBAAaxV,GAAa,IAAM,GAAK,EAAG,EAAG3pB,GACpDm/B,EAAOpoB,GAAK,IACZooB,EAAO3G,SAAU,EACjBhjC,KAAKyH,IAAIkiC,IAINA,IAKLA,EAAOvc,SAAS,cAAe5iB,GAC/Bm/B,EAAOvc,SAASslD,EAAY52D,aAAa,CAAC,WAC1C6tB,EAAO/9B,OAASiK,EAAK,GACrB8zB,EAAO99B,OAASgK,EAAK,GACrB8zB,EAAO7T,SAAStrB,GAChBxK,KAAK2yE,YAAcx+C,EACnBn0B,KAAK4yE,aAAe/8D,EAEpB7V,KAAK6yE,uBAAuBP,EAAUI,EAAaj1D,KAGrD40D,EAAWvyE,UAAU+yE,uBAAyB,SAAUP,EAAUI,EAAaj1D,GAC7E,IAAIksB,EAAS3pC,KAAKg1B,QAAQ,GAE1B,GAAK2U,EAAL,CAIA,IAAImpC,EAAO9yE,KACPmkB,EAASmuD,EAASh7D,cAAcmG,GAChCs1D,EAAqC,IAA5BL,EAAY1nE,IAAI,UACzB4jD,EAAO8jB,EAAY1nE,IAAI,QACvBgoE,EAAgBN,EAAY1nE,IAAI,iBAChCioE,EAAY,cAAgBP,EAAY1nE,IAAI,UAAU,SAAUyS,GAClE,OAAOA,EAAM60D,EAASh3E,QAAUy3E,EAAS,KAW3C,GARAppC,EAAOjtB,QAAS,EAEhB1c,KAAKkzE,uBAAuBvpC,EAAQxlB,GAEhC6uD,EAAgB,IAClBD,EAAS/yE,KAAKmzE,eAAexpC,GAAUqpC,EAAgB,MAGrDD,IAAW/yE,KAAKozE,SAAWxkB,IAAS5uD,KAAKqzE,SAC3C1pC,EAAO2pC,gBAEHP,EAAS,GAAG,CACd,IAAIQ,OAAW,EAGbA,EADuB,oBAAdN,EACEA,EAAUx1D,GAEVw1D,EAGTtpC,EAAO6pC,IAAM,IACfD,GAAYR,EAASppC,EAAO6pC,KAG9B7pC,EAAO6pC,IAAM,EACb,IAAIC,EAAW9pC,EAAO+pC,QAAQ,GAAI9kB,GAAM+kB,KAAKZ,EAAQ,CACnDS,IAAK,IACJpvB,MAAMmvB,GAAUK,QAAO,WACxBd,EAAKe,sBAAsBlqC,MAGxBilB,GACH6kB,EAAS9uB,MAAK,WACZmuB,EAAKhlE,OAAO67B,MAIhB8pC,EAASlvB,QAIbvkD,KAAKozE,QAAUL,EACf/yE,KAAKqzE,MAAQzkB,IAGfyjB,EAAWvyE,UAAUqzE,eAAiB,SAAUxpC,GAE9C,OAAO,WAAUA,EAAOmqC,KAAMnqC,EAAOoqC,OAAS,WAAUpqC,EAAOoqC,MAAOpqC,EAAOqqC,OAG/E3B,EAAWvyE,UAAUozE,uBAAyB,SAAUvpC,EAAQxlB,GAC9DwlB,EAAOmqC,KAAO3vD,EAAO,GACrBwlB,EAAOqqC,KAAO7vD,EAAO,GACrBwlB,EAAOoqC,MAAQ5vD,EAAO,IAAM,EAAEA,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,GAAIA,EAAO,GAAG,GAAKA,EAAO,GAAG,IAAM,IAGlGkuD,EAAWvyE,UAAU+uB,WAAa,SAAUyjD,EAAU70D,EAAKw3C,GACzDj1D,KAAKg1B,QAAQ,GAAGnG,WAAWyjD,EAAU70D,EAAKw3C,GAE1Cj1D,KAAKwyE,oBAAoBF,EAAU70D,IAGrC40D,EAAWvyE,UAAU+zE,sBAAwB,SAAUlqC,GACrD,IAAIsqC,EAAKtqC,EAAOmqC,KACZI,EAAKvqC,EAAOqqC,KACZG,EAAMxqC,EAAOoqC,MACbK,EAAIzqC,EAAO6pC,IACX5wB,EAAM,CAACjZ,EAAOvpC,EAAGupC,EAAOtpC,GACxBg0E,EAAUzxB,EAAIpoD,QACd85E,EAAc,QACdC,EAAwB,QAC5B3xB,EAAI,GAAK0xB,EAAYL,EAAG,GAAIE,EAAI,GAAID,EAAG,GAAIE,GAC3CxxB,EAAI,GAAK0xB,EAAYL,EAAG,GAAIE,EAAI,GAAID,EAAG,GAAIE,GAE3C,IAAII,EAAKD,EAAsBN,EAAG,GAAIE,EAAI,GAAID,EAAG,GAAIE,GACjD/R,EAAKkS,EAAsBN,EAAG,GAAIE,EAAI,GAAID,EAAG,GAAIE,GACrDzqC,EAAOh+B,UAAY5O,KAAK0/B,MAAM4lC,EAAImS,GAAMz3E,KAAKM,GAAK,EAEzB,SAArB2C,KAAK2yE,aAA+C,SAArB3yE,KAAK2yE,aAA+C,cAArB3yE,KAAK2yE,mBAC9C72E,IAAnB6tC,EAAO8qC,SAAyB9qC,EAAO8qC,QAAU9qC,EAAO6pC,KAC1D7pC,EAAO99B,OAAmC,KAA1B,WAAUwoE,EAASzxB,GAEzB,IAANwxB,IACFxxB,EAAI,GAAKyxB,EAAQ,IAAMzxB,EAAI,GAAKyxB,EAAQ,IAAM,EAC9CzxB,EAAI,GAAKyxB,EAAQ,IAAMzxB,EAAI,GAAKyxB,EAAQ,IAAM,IAEpB,IAAnB1qC,EAAO8qC,QAEhB9qC,EAAO99B,OAAS,EAAI,WAAUooE,EAAIrxB,GAElCjZ,EAAO99B,OAAS7L,KAAK4yE,aAAa,IAItCjpC,EAAO8qC,QAAU9qC,EAAO6pC,IACxB7pC,EAAOjtB,QAAS,EAChBitB,EAAOvpC,EAAIwiD,EAAI,GACfjZ,EAAOtpC,EAAIuiD,EAAI,IAGjByvB,EAAWvyE,UAAU40E,aAAe,SAAUpC,EAAU70D,GACtDzd,KAAKg1B,QAAQ,GAAG0/C,aAAapC,EAAU70D,GACvC,IAAIi1D,EAAcJ,EAASr2D,aAAawB,GAAKvC,SAAS,UAEtDlb,KAAK6yE,uBAAuBP,EAAUI,EAAaj1D,IAG9C40D,EApLT,CAqLE,SAEa,MCjMX,GAEJ,SAAUlpE,GAGR,SAASwrE,EAASrC,EAAU70D,EAAKw3C,GAC/B,IAAIxsD,EAAQU,EAAOE,KAAKrJ,OAASA,KAIjC,OAFAyI,EAAMmsE,gBAAgBtC,EAAU70D,EAAKw3C,GAE9BxsD,EA0DT,OAjEA,gBAAUksE,EAAUxrE,GAUpBwrE,EAAS70E,UAAU80E,gBAAkB,SAAUtC,EAAU70D,EAAKw3C,GAE5D,IAAI9wC,EAASmuD,EAASh7D,cAAcmG,GAChC23C,EAAO,IAAI,QAAiB,CAC9B3xD,MAAO,CACL0gB,OAAQA,KAGZnkB,KAAKyH,IAAI2tD,GAETp1D,KAAK60E,iBAAiBvC,EAAU70D,EAAKw3C,IAKvC0f,EAAS70E,UAAU+uB,WAAa,SAAUyjD,EAAU70D,EAAKw3C,GACvD,IAAI97C,EAAcm5D,EAASvjD,UACvBqmC,EAAOp1D,KAAKg1B,QAAQ,GACpB1tB,EAAS,CACX7D,MAAO,CACL0gB,OAAQmuD,EAASh7D,cAAcmG,KAGnCwR,GAAA,eAAoBmmC,EAAM9tD,EAAQ6R,EAAasE,GAE/Czd,KAAK60E,iBAAiBvC,EAAU70D,EAAKw3C,IAKvC0f,EAAS70E,UAAU+0E,iBAAmB,SAAUvC,EAAU70D,EAAKw3C,GAC7D,IAAIG,EAAOp1D,KAAKg1B,QAAQ,GACpBhZ,EAAYs2D,EAASr2D,aAAawB,GAClCq3D,EAAiB7f,GAAeA,EAAY8f,kBAE3C9f,IAAeqd,EAAS/a,gBAC3Bud,EAAiB94D,EAAUd,SAAS,CAAC,WAAY,cAAc+Z,gBAGjEmgC,EAAKv5C,SAASy2D,EAASzvD,cAAcpF,EAAK,UAC1C23C,EAAKt7D,MAAMgE,KAAO,KAClBs3D,EAAKt7D,MAAMoF,eAAgB,EAC3B,IAAI81E,EAAoB5f,EAAKjmC,YAAY,YACzC6lD,EAAkBl7E,MAAQg7E,EAC1B,gBAAoB90E,OAKtB20E,EAAS70E,UAAU40E,aAAe,SAAUpC,EAAU70D,GACpD,IAAIgS,EAAWzvB,KAAKg1B,QAAQ,GAC5BvF,EAAS1T,SAAS,SAAUu2D,EAASh7D,cAAcmG,KAI9Ck3D,EAlET,CAmEE,SAEa,MCtEX,GAEJ,SAAUxrE,GAGR,SAAS8rE,IACP,IAAIxsE,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMysE,WAAa,EACnBzsE,EAAM0sE,kBAAoB,EACnB1sE,EA8FT,OArGA,gBAAUwsE,EAAgB9rE,GAW1B8rE,EAAen1E,UAAUyyE,WAAa,SAAUD,EAAU70D,EAAKw3C,GAC7D,OAAO,IAAI,GAASqd,EAAU70D,EAAKw3C,IAKrCggB,EAAen1E,UAAUozE,uBAAyB,SAAUvpC,EAAQxlB,GAClEnkB,KAAKo1E,QAAUjxD,EAIf,IAHA,IAAIkxD,EAAY,CAAC,GACbhrE,EAAM,EAEDjP,EAAI,EAAGA,EAAI+oB,EAAOzpB,OAAQU,IAAK,CACtC,IAAI64E,EAAK9vD,EAAO/oB,EAAI,GAChB84E,EAAK/vD,EAAO/oB,GAChBiP,GAAO,WAAU4pE,EAAIC,GACrBmB,EAAUh6E,KAAKgP,GAGjB,GAAY,IAARA,EAAJ,CAKA,IAASjP,EAAI,EAAGA,EAAIi6E,EAAU36E,OAAQU,IACpCi6E,EAAUj6E,IAAMiP,EAGlBrK,KAAKs1E,SAAWD,EAChBr1E,KAAKu1E,QAAUlrE,OATbrK,KAAKu1E,QAAU,GAcnBN,EAAen1E,UAAUqzE,eAAiB,WACxC,OAAOnzE,KAAKu1E,SAKdN,EAAen1E,UAAU+zE,sBAAwB,SAAUlqC,GACzD,IAAIyqC,EAAIzqC,EAAO6pC,IACXrvD,EAASnkB,KAAKo1E,QACdI,EAAUx1E,KAAKs1E,SACfjrE,EAAM8Z,EAAOzpB,OAEjB,GAAK86E,EAAL,CAKA,IACIC,EADAC,EAAY11E,KAAKk1E,WAGrB,GAAId,EAAIp0E,KAAKm1E,kBAAmB,CAG9B,IAAI5wB,EAAQxnD,KAAKyb,IAAIk9D,EAAY,EAAGrrE,EAAM,GAE1C,IAAKorE,EAAQlxB,EAAOkxB,GAAS,EAAGA,IAC9B,GAAID,EAAQC,IAAUrB,EACpB,MAKJqB,EAAQ14E,KAAKyb,IAAIi9D,EAAOprE,EAAM,OACzB,CACL,IAAKorE,EAAQC,EAAWD,EAAQprE,EAAKorE,IACnC,GAAID,EAAQC,GAASrB,EACnB,MAIJqB,EAAQ14E,KAAKyb,IAAIi9D,EAAQ,EAAGprE,EAAM,GAGpC,IAAIkiE,GAAK6H,EAAIoB,EAAQC,KAAWD,EAAQC,EAAQ,GAAKD,EAAQC,IACzDE,EAAKxxD,EAAOsxD,GACZxB,EAAK9vD,EAAOsxD,EAAQ,GACxB9rC,EAAOvpC,EAAIu1E,EAAG,IAAM,EAAIpJ,GAAKA,EAAI0H,EAAG,GACpCtqC,EAAOtpC,EAAIs1E,EAAG,IAAM,EAAIpJ,GAAKA,EAAI0H,EAAG,GACpC,IAAIO,EAAKP,EAAG,GAAK0B,EAAG,GAChBtT,EAAK4R,EAAG,GAAK0B,EAAG,GACpBhsC,EAAOh+B,UAAY5O,KAAK0/B,MAAM4lC,EAAImS,GAAMz3E,KAAKM,GAAK,EAClD2C,KAAKk1E,WAAaO,EAClBz1E,KAAKm1E,kBAAoBf,EACzBzqC,EAAOjtB,QAAS,IAIXu4D,EAtGT,CAuGE,IAEa,M,uCCxGXW,GAEJ,WACE,SAASA,IACP51E,KAAKyvB,UAAW,EAChBzvB,KAAKo8C,UAAY,EACjBp8C,KAAK61E,KAAO,GAGd,OAAOD,EAPT,GAUI,GAEJ,SAAUzsE,GAGR,SAAS2sE,EAAenmE,GACtB,OAAOxG,EAAOE,KAAKrJ,KAAM2P,IAAS3P,KA0GpC,OA7GA,gBAAU81E,EAAgB3sE,GAM1B2sE,EAAeh2E,UAAUkzC,gBAAkB,WACzC,MAAO,CACLh1C,OAAQ,OACRF,KAAM,OAIVg4E,EAAeh2E,UAAUmkB,gBAAkB,WACzC,OAAO,IAAI2xD,IAGbE,EAAeh2E,UAAU0D,UAAY,SAAU0gB,EAAKzgB,GAClD,IAAIoyE,EAAOpyE,EAAMoyE,KACbz5B,EAAY34C,EAAM24C,UAEtB,GAAI34C,EAAMgsB,SACR,IAAK,IAAIr0B,EAAI,EAAGA,EAAIy6E,EAAKn7E,QAAS,CAChC,IAAIY,EAAQu6E,EAAKz6E,KAEjB,GAAIE,EAAQ,EAAG,CACb4oB,EAAI/jB,OAAO01E,EAAKz6E,KAAMy6E,EAAKz6E,MAE3B,IAAK,IAAI8X,EAAI,EAAGA,EAAI5X,EAAO4X,IACzBgR,EAAI3jB,OAAOs1E,EAAKz6E,KAAMy6E,EAAKz6E,YAKjC,IAASA,EAAI,EAAGA,EAAIy6E,EAAKn7E,QAAS,CAChC,IAAIuH,EAAK4zE,EAAKz6E,KACV8G,EAAK2zE,EAAKz6E,KACV6xB,EAAK4oD,EAAKz6E,KACV8xB,EAAK2oD,EAAKz6E,KAGd,GAFA8oB,EAAI/jB,OAAO8B,EAAIC,GAEXk6C,EAAY,EAAG,CACjB,IAAI37C,GAAMwB,EAAKgrB,GAAM,GAAK/qB,EAAKgrB,GAAMkvB,EACjC17C,GAAMwB,EAAKgrB,GAAM,GAAKD,EAAKhrB,GAAMm6C,EACrCl4B,EAAIrjB,iBAAiBJ,EAAIC,EAAIusB,EAAIC,QAEjChJ,EAAI3jB,OAAO0sB,EAAIC,KAMvB4oD,EAAeh2E,UAAUi2E,cAAgB,SAAU31E,EAAGC,GACpD,IAAIoD,EAAQzD,KAAKyD,MACboyE,EAAOpyE,EAAMoyE,KACbz5B,EAAY34C,EAAM24C,UAClBp9C,EAAYgB,KAAKlG,MAAMkF,UAE3B,GAAIyE,EAAMgsB,SAGR,IAFA,IAAIrY,EAAY,EAEPhc,EAAI,EAAGA,EAAIy6E,EAAKn7E,QAAS,CAChC,IAAIY,EAAQu6E,EAAKz6E,KAEjB,GAAIE,EAAQ,EAIV,IAHA,IAAI2G,EAAK4zE,EAAKz6E,KACV8G,EAAK2zE,EAAKz6E,KAEL8X,EAAI,EAAGA,EAAI5X,EAAO4X,IAAK,CAC9B,IAAI+Z,EAAK4oD,EAAKz6E,KACV8xB,EAAK2oD,EAAKz6E,KAEd,GAAI,QAA0B6G,EAAIC,EAAI+qB,EAAIC,EAAIluB,EAAWoB,EAAGC,GAC1D,OAAO+W,EAKbA,SAKF,IAFIA,EAAY,EAEPhc,EAAI,EAAGA,EAAIy6E,EAAKn7E,QAAS,CAC5BuH,EAAK4zE,EAAKz6E,KACV8G,EAAK2zE,EAAKz6E,KACV6xB,EAAK4oD,EAAKz6E,KACV8xB,EAAK2oD,EAAKz6E,KAEd,GAAIghD,EAAY,EAAG,CACjB,IAAI37C,GAAMwB,EAAKgrB,GAAM,GAAK/qB,EAAKgrB,GAAMkvB,EACjC17C,GAAMwB,EAAKgrB,GAAM,GAAKD,EAAKhrB,GAAMm6C,EAErC,GAAI45B,GAAA,KAA+B/zE,EAAIC,EAAIzB,EAAIC,EAAIusB,EAAIC,EAAIluB,EAAWoB,EAAGC,GACvE,OAAO+W,OAGT,GAAI,QAA0BnV,EAAIC,EAAI+qB,EAAIC,EAAIluB,EAAWoB,EAAGC,GAC1D,OAAO+W,EAIXA,IAIJ,OAAQ,GAGH0+D,EA9GT,CA+GE,QAEE,GAEJ,WACE,SAASG,IACPj2E,KAAKkN,MAAQ,IAAI,QAqInB,OAlIA+oE,EAAcn2E,UAAUo2E,aAAe,WACrC,OAAQl2E,KAAKm2E,cAQfF,EAAcn2E,UAAU+uB,WAAa,SAAUnZ,GAC7C1V,KAAKkN,MAAMiQ,YACX,IAAIi5D,EAAS,IAAI,GAAe,CAC9BC,WAAW,EACXrT,OAAQ,YAEVoT,EAAOr6D,SAAS,CACd85D,KAAMngE,EAAKE,UAAU,iBAGvB5V,KAAKs2E,WAAWF,EAAQ1gE,GAGxB1V,KAAKkN,MAAMzF,IAAI2uE,GACfp2E,KAAKm2E,aAAe,MAQtBF,EAAcn2E,UAAUy2E,yBAA2B,SAAU7gE,GAC3D1V,KAAKkN,MAAMiQ,YAEXnd,KAAKw2E,oBAED9gE,EAAKpa,QAAU,KACZ0E,KAAKm2E,eACRn2E,KAAKm2E,aAAe,IAAIM,GAAA,KAAuB,CAC7C7xD,QAAQ,KAIZ5kB,KAAKkN,MAAMzF,IAAIzH,KAAKm2E,eAEpBn2E,KAAKm2E,aAAe,MASxBF,EAAcn2E,UAAU42E,kBAAoB,SAAU/gB,EAAYjgD,GAChE,IAAI0gE,EAAS,IAAI,GACjBA,EAAOr6D,SAAS,CACd85D,KAAMngE,EAAKE,UAAU,iBAGvB5V,KAAKs2E,WAAWF,EAAQ1gE,IAAQ1V,KAAKm2E,cAEhCn2E,KAAKm2E,aAMRn2E,KAAKm2E,aAAaQ,eAAeP,GAAQ,IALzCA,EAAOC,WAAY,EACnBD,EAAOpT,OAAS,UAChBoT,EAAOQ,aAAejhB,EAAWpR,MACjCvkD,KAAKkN,MAAMzF,IAAI2uE,KAWnBH,EAAcn2E,UAAUgO,OAAS,WAC/B9N,KAAKw2E,oBAELx2E,KAAKm2E,aAAe,KACpBn2E,KAAKkN,MAAMiQ,aAKb84D,EAAcn2E,UAAUw2E,WAAa,SAAUF,EAAQ1gE,EAAMmhE,GAC3D,IAAI9nD,EAAYrZ,EAAKqZ,UACrBqnD,EAAOr6D,SAAS,CACd0T,SAAUV,EAAU/jB,IAAI,YACxBoxC,UAAWrtB,EAAU/jB,IAAI,CAAC,YAAa,gBAEzCorE,EAAOv6D,SAASkT,EAAU7T,SAAS,aAAa+Z,gBAChDmhD,EAAOt8E,MAAMoF,eAAgB,EAC7B,IAAIpF,EAAQ4b,EAAKwQ,UAAU,SAQ3B,GANIpsB,GAASA,EAAMkE,QACjBo4E,EAAOhpD,SAAS,SAAUtzB,EAAMkE,QAGlCo4E,EAAOhpD,SAAS,OAAQ,OAEnBypD,EAAe,CAClB,IAAIC,EAAW,gBAAUV,GAGzBU,EAAS7xD,YAAc8J,EAAU9J,YACjCmxD,EAAOv4D,GAAG,aAAa,SAAUlb,GAC/Bm0E,EAAS1/D,UAAY,KACrB,IAAIA,EAAYg/D,EAAOL,cAAcpzE,EAAEuL,QAASvL,EAAEyL,SAE9CgJ,EAAY,IAEd0/D,EAAS1/D,UAAYA,EAAYg/D,EAAOQ,mBAQhDX,EAAcn2E,UAAU02E,kBAAoB,WAC1C,IAAIhyD,EAAcxkB,KAAKm2E,aAEnB3xD,GACFA,EAAYuyD,oBAKTd,EAvIT,GA0Ie,MChRXe,GAAc,CAChBrvD,WAAY,QACZsoD,KAAM,OAAAC,GAAA,QACNnwE,MAAO,SAAUoZ,GACf,IAAI9D,EAAW8D,EAAY7D,iBACvB2hE,EAAa99D,EAAYnO,IAAI,YAC7BksE,EAAU/9D,EAAYiB,gBAAgBpY,MAC1C,MAAO,CACLs1D,SAAU,SAAUr9C,EAAQq4D,GAC1B,IAAI6E,EAAa,GAEjB,GAAID,EAAS,CACX,IAAI/yD,OAAS,EACTizD,EAAWn9D,EAAO06C,IAAM16C,EAAOsqC,MAEnC,GAAI0yB,EAAY,CAGd,IAFA,IAAII,EAAmB,EAEdj8E,EAAI6e,EAAOsqC,MAAOnpD,EAAI6e,EAAO06C,IAAKv5D,IACzCi8E,GAAoBl+D,EAAYm+D,mBAAmBl8E,GAGrD+oB,EAAS,IAAIssD,aAAa2G,EAA8B,EAAnBC,QAErClzD,EAAS,IAAIssD,aAAwB,EAAX2G,GAG5B,IAAI7sE,EAAS,EACTgL,EAAK,GAET,IAASna,EAAI6e,EAAOsqC,MAAOnpD,EAAI6e,EAAO06C,IAAKv5D,IAAK,CAC9C,IAAIiP,EAAM8O,EAAYo+D,cAAcn8E,EAAG+7E,GAEnCF,IACF9yD,EAAO5Z,KAAYF,GAGrB,IAAK,IAAI6I,EAAI,EAAGA,EAAI7I,EAAK6I,IACvBqC,EAAKF,EAASG,YAAY2hE,EAAWjkE,IAAI,EAAOqC,GAChD4O,EAAO5Z,KAAYgL,EAAG,GACtB4O,EAAO5Z,KAAYgL,EAAG,GAI1B+8D,EAAS1pD,UAAU,cAAezE,QAElC,IAAS/oB,EAAI6e,EAAOsqC,MAAOnpD,EAAI6e,EAAO06C,IAAKv5D,IAAK,CAC9C,IAAI4gB,EAAYs2D,EAASr2D,aAAa7gB,GAElCo8E,GADAntE,EAAM8O,EAAYo+D,cAAcn8E,EAAG+7E,GAC7B,IAEV,GAAIF,EACF,IAAK,IAAIz7C,EAAI,EAAGA,EAAInxB,EAAKmxB,IACvBg8C,EAAIn8E,KAAKga,EAASG,YAAY2hE,EAAW37C,SAEtC,CACLg8C,EAAI,GAAKniE,EAASG,YAAY2hE,EAAW,IACzCK,EAAI,GAAKniE,EAASG,YAAY2hE,EAAW,IACzC,IAAI/6B,EAAYpgC,EAAUhR,IAAI,CAAC,YAAa,eAEvCoxC,IACHo7B,EAAI,GAAK,EAAEA,EAAI,GAAG,GAAKA,EAAI,GAAG,IAAM,GAAKA,EAAI,GAAG,GAAKA,EAAI,GAAG,IAAMp7B,GAAYo7B,EAAI,GAAG,GAAKA,EAAI,GAAG,IAAM,GAAKA,EAAI,GAAG,GAAKA,EAAI,GAAG,IAAMp7B,IAIzIk2B,EAASxpD,cAAc1tB,EAAGo8E,QAOvB,MChEX,GAEJ,SAAUruE,GAGR,SAASsuE,IACP,IAAIhvE,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOk5E,EAAUl5E,KAChBkK,EA+JT,OArKA,gBAAUgvE,EAAWtuE,GASrBsuE,EAAU33E,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAC3D,IAAI1D,EAAOyD,EAAYxD,UAEnB+hE,EAAW13E,KAAK23E,gBAAgBjiE,EAAMyD,GAEtChD,EAASgD,EAAYnO,IAAI,UACzB4sE,EAAcz+D,EAAYnO,IAAI,CAAC,SAAU,gBACzC6sE,EAAKz+D,EAAIwE,QAITk6D,EAAiC,QAAzBD,EAAGE,QAAQhnE,WAElB+mE,GACHD,EAAGE,QAAQC,SAAS7hE,GAAQjC,OAAM,GAIZ,MAApBlU,KAAKi4E,aAAwBH,GAC/BD,EAAG9nE,YAAY/P,KAAKi4E,YAAa,CAC/BC,YAAY,IAIZl4E,KAAKm4E,YAAYh/D,IAAgBy+D,KAW9BE,GACHD,EAAG9nE,YAAYoG,EAAQ,CACrB+hE,YAAY,EACZE,eAAgBr7E,KAAKub,IAAIvb,KAAKyb,IAAIo/D,EAAc,GAAK,GAAK,GAAI,MAKpEF,EAAS7oD,WAAWnZ,GACpB,IAAIzJ,EAAWkN,EAAYnO,IAAI,QAAQ,IAAS,gBAAemO,EAAY7D,kBAAkB,EAAO6D,GAEhGlN,EACFjM,KAAKkN,MAAMoQ,YAAYrR,GAEvBjM,KAAKkN,MAAM6N,iBAGb/a,KAAKi4E,YAAc9hE,EACnBnW,KAAKq4E,WAAY,GAGnBZ,EAAU33E,UAAU+Z,yBAA2B,SAAUV,EAAanE,EAASoE,GAC7E,IAAI1D,EAAOyD,EAAYxD,UAEnB+hE,EAAW13E,KAAK23E,gBAAgBjiE,EAAMyD,GAE1Cu+D,EAASnB,yBAAyB7gE,GAElC1V,KAAKs4E,YAAYl/D,GAEjBpZ,KAAKq4E,WAAY,GAGnBZ,EAAU33E,UAAUka,kBAAoB,SAAU27C,EAAYx8C,EAAanE,GACzEhV,KAAKu4E,UAAU7B,kBAAkB/gB,EAAYx8C,EAAYxD,WAEzD3V,KAAKq4E,UAAY1iB,EAAWhB,MAAQx7C,EAAYxD,UAAUra,SAG5Dm8E,EAAU33E,UAAU04E,gBAAkB,SAAUr/D,EAAanE,EAASoE,GACpE,IAAI1D,EAAOyD,EAAYxD,UACnByE,EAAkBjB,EAAYiB,gBAElC,IAAKpa,KAAKq4E,WAAaj+D,EAAgBpY,OAASoY,EAAgBq+D,kBAE9D,MAAO,CACLzuE,QAAQ,GAKV,IAAIimC,EAAM,GAAYlwC,MAAMoZ,EAAanE,EAASoE,GAE9C62B,EAAIqnB,UACNrnB,EAAIqnB,SAAS,CACX/S,MAAO,EACPoQ,IAAKj/C,EAAKpa,QACVA,MAAOoa,EAAKpa,SACXoa,GAIL1V,KAAKu4E,UAAU7D,eAEf10E,KAAKs4E,YAAYl/D,IAIrBq+D,EAAU33E,UAAU63E,gBAAkB,SAAUjiE,EAAMyD,GACpD,IAAIu+D,EAAW13E,KAAKu4E,UAEhBG,EAAY14E,KAAKm4E,YAAYh/D,GAE7B89D,IAAe99D,EAAYnO,IAAI,YAC/BoP,EAAkBjB,EAAYiB,gBAC9BD,EAAcC,EAAgBpY,MAqBlC,OAbK01E,GAAYgB,IAAc14E,KAAK24E,WAAa1B,IAAej3E,KAAK44E,aAAez+D,IAAgBna,KAAK0Z,eACnGg+D,GACFA,EAAS5pE,SAGX4pE,EAAW13E,KAAKu4E,UAAYp+D,EAAc,IAAI,GAAkB,IAAI0+D,GAAA,KAAS5B,EAAayB,EAAY,GAAiB,GAAWA,EAAY,GAAajG,GAAA,MAC3JzyE,KAAK24E,UAAYD,EACjB14E,KAAK44E,YAAc3B,EACnBj3E,KAAK0Z,aAAeS,EACpBna,KAAKkN,MAAMiQ,aAGbnd,KAAKkN,MAAMzF,IAAIiwE,EAASxqE,OACjBwqE,GAGTD,EAAU33E,UAAUq4E,YAAc,SAAUh/D,GAC1C,QAASA,EAAYnO,IAAI,CAAC,SAAU,UAGtCysE,EAAU33E,UAAUw4E,YAAc,SAAUl/D,GAE1C,IAAIy+D,EAAKz+D,EAAIwE,QACTk6D,EAAiC,QAAzBD,EAAGE,QAAQhnE,UAElB+mE,GAA6B,MAApB93E,KAAKi4E,aACjBJ,EAAGE,QAAQC,SAASh4E,KAAKi4E,aAAa/jE,OAAM,IAIhDujE,EAAU33E,UAAUgO,OAAS,SAAUkH,EAASoE,GAC9CpZ,KAAKu4E,WAAav4E,KAAKu4E,UAAUzqE,SACjC9N,KAAKu4E,UAAY,KAEjBv4E,KAAKs4E,YAAYl/D,IAGnBq+D,EAAUl5E,KAAO,QACVk5E,EAtKT,CAuKEn3D,GAAA,MAEa,MC9KXw4D,GAAmC,qBAAhBC,YAA8BrI,MAAQqI,YACzDC,GAAqC,qBAAjBC,aAA+BvI,MAAQuI,aAE/D,SAASC,GAAUtlD,GACjB,IAAIle,EAAOke,EAAUle,KAEjBA,GAAQA,EAAK,IAAMA,EAAK,GAAG,IAAMA,EAAK,GAAG,GAAGgD,QAK9Ckb,EAAUle,KAAO,iBAAIA,GAAM,SAAUyjE,GACnC,IAAIC,EAAS,CAACD,EAAQ,GAAGzgE,MAAOygE,EAAQ,GAAGzgE,OACvCpR,EAAS,CACX8xE,OAAQA,GAWV,OARID,EAAQ,GAAGn/E,OACbsN,EAAO+xE,SAAWF,EAAQ,GAAGn/E,MAG3Bm/E,EAAQ,GAAGn/E,OACbsN,EAAOgyE,OAASH,EAAQ,GAAGn/E,MAGtB,sBAAS,CAACsN,EAAQ6xE,EAAQ,GAAIA,EAAQ,SAKnD,IAAI,GAEJ,SAAUhwE,GAGR,SAASowE,IACP,IAAI9wE,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAKhE,OAHAyI,EAAMlK,KAAOg7E,EAAiBh7E,KAC9BkK,EAAM0tD,sBAAwB,YAC9B1tD,EAAM2tD,eAAiB,SAChB3tD,EAyQT,OAjRA,gBAAU8wE,EAAkBpwE,GAW5BowE,EAAiBz5E,UAAU+vB,KAAO,SAAU9a,GAE1CA,EAAOW,KAAOX,EAAOW,MAAQ,GAE7BwjE,GAAUnkE,GAEV,IAAI01B,EAASzqC,KAAKw5E,wBAAwBzkE,EAAOW,MAEjD1V,KAAKy5E,YAAchvC,EAAOivC,WAC1B15E,KAAK25E,kBAAoBlvC,EAAOmvC,iBAE5BnvC,EAAOivC,aACT3kE,EAAOW,KAAO,IAAI+6D,aAAahmC,EAAOnvC,QAGxC6N,EAAOrJ,UAAU+vB,KAAKhb,MAAM7U,KAAM8C,YAGpCy2E,EAAiBz5E,UAAU+wB,YAAc,SAAU9b,GAGjD,GAFAmkE,GAAUnkE,GAENA,EAAOW,KAAM,CAEf,IAAI+0B,EAASzqC,KAAKw5E,wBAAwBzkE,EAAOW,MAEjD1V,KAAKy5E,YAAchvC,EAAOivC,WAC1B15E,KAAK25E,kBAAoBlvC,EAAOmvC,iBAE5BnvC,EAAOivC,aACT3kE,EAAOW,KAAO,IAAI+6D,aAAahmC,EAAOnvC,QAI1C6N,EAAOrJ,UAAU+wB,YAAYhc,MAAM7U,KAAM8C,YAG3Cy2E,EAAiBz5E,UAAU+5E,WAAa,SAAU5/D,GAChD,IAAIwwB,EAASzqC,KAAKw5E,wBAAwBv/D,EAAOvE,MAE7C+0B,EAAOivC,aACJ15E,KAAKy5E,aAIRz5E,KAAKy5E,YAAc,yBAAYz5E,KAAKy5E,YAAahvC,EAAOivC,YACxD15E,KAAK25E,kBAAoB,yBAAY35E,KAAK25E,kBAAmBlvC,EAAOmvC,oBAJpE55E,KAAKy5E,YAAchvC,EAAOivC,WAC1B15E,KAAK25E,kBAAoBlvC,EAAOmvC,kBAMlC3/D,EAAOvE,KAAO,IAAI+6D,aAAahmC,EAAOnvC,QAGxC0E,KAAK2wB,aAAakpD,WAAW5/D,EAAOvE,OAGtC6jE,EAAiBz5E,UAAUg6E,wBAA0B,SAAUr8D,GAC7D,IAAIzB,EAAYhc,KAAK2V,UAAUsG,aAAawB,GACxC27D,EAASp9D,EAAUjH,kBAAkB27D,MAAQ10D,EAAUjH,OAASiH,EAAU+G,WAAW,UAQzF,OAAOq2D,GAGTG,EAAiBz5E,UAAUw3E,mBAAqB,SAAU75D,GACxD,OAAIzd,KAAK25E,kBACA35E,KAAK25E,kBAAwB,EAANl8D,EAAU,GAEjCzd,KAAK85E,wBAAwBr8D,GAAK/iB,QAI7C6+E,EAAiBz5E,UAAUy3E,cAAgB,SAAU95D,EAAKqvB,GACxD,GAAI9sC,KAAK25E,kBAAmB,CAI1B,IAHA,IAAIpvE,EAASvK,KAAK25E,kBAAwB,EAANl8D,GAChCpT,EAAMrK,KAAK25E,kBAAwB,EAANl8D,EAAU,GAElCriB,EAAI,EAAGA,EAAIiP,EAAKjP,IACvB0xC,EAAI1xC,GAAK0xC,EAAI1xC,IAAM,GACnB0xC,EAAI1xC,GAAG,GAAK4E,KAAKy5E,YAAYlvE,EAAa,EAAJnP,GACtC0xC,EAAI1xC,GAAG,GAAK4E,KAAKy5E,YAAYlvE,EAAa,EAAJnP,EAAQ,GAGhD,OAAOiP,EAEP,IAAI+uE,EAASp5E,KAAK85E,wBAAwBr8D,GAE1C,IAASriB,EAAI,EAAGA,EAAIg+E,EAAO1+E,OAAQU,IACjC0xC,EAAI1xC,GAAK0xC,EAAI1xC,IAAM,GACnB0xC,EAAI1xC,GAAG,GAAKg+E,EAAOh+E,GAAG,GACtB0xC,EAAI1xC,GAAG,GAAKg+E,EAAOh+E,GAAG,GAGxB,OAAOg+E,EAAO1+E,QAIlB6+E,EAAiBz5E,UAAU05E,wBAA0B,SAAU9jE,GAC7D,IAAIqkE,EAAc,EAQlB,GANI/5E,KAAKy5E,cACPM,EAAc/5E,KAAKy5E,YAAY/+E,QAKV,kBAAZgb,EAAK,GAAiB,CAS/B,IARA,IAAIrL,EAAMqL,EAAKhb,OAEXs/E,EAA4B,IAAIlB,GAAUzuE,GAC1C4vE,EAAgB,IAAIjB,GAAW3uE,GAC/B6vE,EAAe,EACfC,EAAe,EACfC,EAAY,EAEPh/E,EAAI,EAAGA,EAAIiP,GAAM,CACxB+vE,IACA,IAAI9+E,EAAQoa,EAAKta,KAEjB4+E,EAA0BG,KAAkBD,EAAeH,EAE3DC,EAA0BG,KAAkB7+E,EAE5C,IAAK,IAAI4X,EAAI,EAAGA,EAAI5X,EAAO4X,IAAK,CAC9B,IAAI9S,EAAIsV,EAAKta,KACTiF,EAAIqV,EAAKta,KACb6+E,EAAcC,KAAkB95E,EAChC65E,EAAcC,KAAkB75E,GAUpC,MAAO,CACLu5E,iBAAkB,IAAIb,YAAYiB,EAA0BK,OAAQ,EAAGF,GACvET,WAAYO,EACZ3+E,MAAO8+E,GAIX,MAAO,CACLR,iBAAkB,KAClBF,WAAY,KACZp+E,MAAOoa,EAAKhb,SAIhB6+E,EAAiBz5E,UAAUgV,eAAiB,SAAUC,EAAQC,GACjB,IAQvCs9D,EAAW,IAAIr3B,GAAA,KAAK,CAAC,SAAUj7C,MAenC,OAdAsyE,EAAS/a,eAAgB,EACzB+a,EAASp3B,SAASnmC,EAAOW,KAAM,IAAI,SAAU+tD,EAAU3N,EAAS1+C,EAAWkjE,GAEzE,GAAI7W,aAAoBiN,MACtB,OAAOz6D,IAEPq8D,EAAS/a,eAAgB,EACzB,IAAIvuD,EAAQy6D,EAASz6D,MAErB,OAAa,MAATA,EACKA,aAAiB0nE,MAAQ1nE,EAAMsxE,GAAYtxE,OADpD,KAKGspE,GAGTiH,EAAiBz5E,UAAUy2B,cAAgB,SAAUnf,EAAWof,EAAgBC,GAC9E,IAAI/gB,EAAO1V,KAAK2V,UACZqG,EAAYtG,EAAKuG,aAAa7E,GAC9Bpd,EAAOgiB,EAAUhR,IAAI,QAEzB,GAAIhR,EACF,OAAOA,EAGT,IAAIq/E,EAAWr9D,EAAUhR,IAAI,YACzBsuE,EAASt9D,EAAUhR,IAAI,UACvBuvE,EAAU,GAGd,OAFY,MAAZlB,GAAoBkB,EAAQl/E,KAAKg+E,GACvB,MAAVC,GAAkBiB,EAAQl/E,KAAKi+E,GACxB,gBAAoB,YAAa,CACtCt/E,KAAMugF,EAAQ96E,KAAK,UAIvB85E,EAAiBz5E,UAAU06E,mBAAqB,WAC9C,QAASx6E,KAAKgL,IAAI,CAAC,SAAU,UAG/BuuE,EAAiBz5E,UAAUkX,eAAiB,WAC1C,IAAIP,EAAczW,KAAK+U,OAAO0B,YAE9B,OAAmB,MAAfA,EACKzW,KAAK+U,OAAO/S,MAAQ,IAAMhC,KAAKgL,IAAI,eAGrCyL,GAGT8iE,EAAiBz5E,UAAUmX,wBAA0B,WACnD,IAAIC,EAAuBlX,KAAK+U,OAAOmC,qBAEvC,OAA4B,MAAxBA,EACKlX,KAAK+U,OAAO/S,MAAQ,IAAMhC,KAAKgL,IAAI,wBAGrCkM,GAGTqiE,EAAiBh7E,KAAO,eACxBg7E,EAAiBhiE,aAAe,CAAC,OAAQ,QAAS,MAAO,YACzDgiE,EAAiBrjE,cAAgB,CAC/BZ,iBAAkB,MAClBa,OAAQ,EACRC,EAAG,EACHC,iBAAiB,EAEjBokE,WAAY,EACZC,WAAY,EACZ/wC,OAAQ,CAAC,OAAQ,QACjB3V,WAAY,CAAC,GAAI,IAEjBqT,SAAU,EACVszC,OAAQ,CACNnpD,MAAM,EACNuhD,OAAQ,EACRC,cAAe,EACfrpC,OAAQ,SACR3V,WAAY,EACZ46B,MAAM,EACNgpB,YAAa,IAEf51E,OAAO,EAEPwU,eAAgB,IAChBiZ,UAAU,EACVjY,MAAM,EACNgM,MAAO,CACLgO,MAAM,EACN1H,SAAU,OAIZqI,UAAW,CACTtzB,QAAS,KAGN06E,EAlRT,CAmRE5iE,GAAA,MAEaikE,GAAA,GC7Tf,SAASC,GAAUvgF,GAKjB,OAJMA,aAAao2E,QACjBp2E,EAAI,CAACA,EAAGA,IAGHA,EAGT,IAAIwgF,GAAc,CAChBnzD,WAAY,QACZ5nB,MAAO,SAAUoZ,GACf,IAAIgb,EAAa0mD,GAAU1hE,EAAYnO,IAAI,WACvCgpB,EAAa6mD,GAAU1hE,EAAYnO,IAAI,eACvC0K,EAAOyD,EAAYxD,UAMvB,SAASolE,EAASrlE,EAAM+H,GACtB,IAAIzB,EAAYtG,EAAKuG,aAAawB,GAC9B0W,EAAa0mD,GAAU7+D,EAAU+G,WAAW,UAAU,IACtDiR,EAAa6mD,GAAU7+D,EAAU+G,WAAW,cAAc,IAC9DoR,EAAW,IAAMze,EAAKqpB,cAActhB,EAAK,aAAc0W,EAAW,IAClEA,EAAW,IAAMze,EAAKqpB,cAActhB,EAAK,WAAY0W,EAAW,IAChEH,EAAW,IAAMte,EAAKqpB,cAActhB,EAAK,iBAAkBuW,EAAW,IACtEA,EAAW,IAAMte,EAAKqpB,cAActhB,EAAK,eAAgBuW,EAAW,IAGtE,OAfAte,EAAKspB,UAAU,aAAc7K,GAAcA,EAAW,IACtDze,EAAKspB,UAAU,WAAY7K,GAAcA,EAAW,IACpDze,EAAKspB,UAAU,iBAAkBhL,GAAcA,EAAW,IAC1Dte,EAAKspB,UAAU,eAAgBhL,GAAcA,EAAW,IAYjD,CACL+mD,SAAUrlE,EAAK6hD,cAAgBwjB,EAAW,QAIjC,MC9BR,SAAS,GAAQrmE,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoBs0D,IAC9BlmE,EAAU6R,eAAe,IACzB7R,EAAUoqB,eAAe,I,iBCGvBk8C,GAAyB,CAAC,YAAa,eAEvCC,GAAe,CAAC,CAClBjpB,GAAI,IACJv+C,GAAI,QACJsM,MAAO,EACPm7D,QAAS,CAAC,OAAQ,UACjB,CACDlpB,GAAI,IACJv+C,GAAI,SACJsM,MAAO,EACPm7D,QAAS,CAAC,MAAO,YAEfC,GAAmB,IAAI,QAEvB,GAEJ,SAAUhyE,GAGR,SAASiyE,IACP,IAAI3yE,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO68E,EAAiB78E,KACvBkK,EAuFT,OA7FA,gBAAU2yE,EAAkBjyE,GAS5BiyE,EAAiBt7E,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAClE,IAAIlM,EAAQlN,KAAKkN,MACbwI,EAAOyD,EAAYxD,UACnB2E,EAAUta,KAAKua,MACf8gE,EAAYliE,EAAY7D,iBACxBuD,EAAWwiE,EAAUtlE,cACrBC,EAAe6C,EAAS7C,eACxBslE,EAAeD,EAAUE,OAAO1lB,UAChCj+B,EAAM,CACR4jD,OAAQ,CACN72E,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,aAEdmH,YAAaA,EACb9D,SAAUgmE,EACVI,eAAgB,CAAC,CAACH,EAAal7E,EAAGk7E,EAAal7E,EAAIk7E,EAAa32E,OAAQ,CAAC22E,EAAaj7E,EAAGi7E,EAAaj7E,EAAIi7E,EAAaz2E,SACvHmR,aAAcA,EACd6R,SAAUozD,IAAcjlE,GACxB0lE,YAAaT,GAAa,GAAKjlE,IA+CjC,OA7CAN,EAAK1C,KAAKsH,GAAS7S,KAAI,SAAU2P,GAC/B,GAAK1B,EAAKyG,SAAS/E,GAAnB,CAIA,IAAI4E,EAAYC,GAAavG,EAAM0B,GAC/BukE,EAAaC,GAAclmE,EAAM0B,EAAW4E,EAAW4b,GACvDikD,EAAMC,GAAUpmE,EAAMkiB,EAAK+jD,GAC/BjmE,EAAK+G,iBAAiBrF,EAAWykE,GACjC3uE,EAAMzF,IAAIo0E,GACVE,GAAaF,EAAKjkD,EAAK+jD,OACtB3xE,QAAO,SAAU2S,EAAUC,GAC5B,IAAIi/D,EAAMvhE,EAAQwC,iBAAiBF,GAEnC,GAAKlH,EAAKyG,SAASQ,GAAnB,CAKA,IAAIX,EAAYC,GAAavG,EAAMiH,GAC/Bg/D,EAAaC,GAAclmE,EAAMiH,EAAUX,EAAW4b,GACtDokD,EAAoBC,GAAYvmE,EAAMimE,GAEtCE,GAAOG,IAAsBH,EAAIK,sBACnChvE,EAAMY,OAAO+tE,GACbnmE,EAAK+G,iBAAiBE,EAAU,MAChCk/D,EAAM,MAGJA,EACFM,GAAUN,EAAKjkD,EAAK+jD,GAEpBE,EAAMC,GAAUpmE,EAAMkiB,EAAK+jD,GAAY,GAGzCjmE,EAAK+G,iBAAiBE,EAAUk/D,GAChCA,EAAIO,sBAAwBT,EAE5BzuE,EAAMzF,IAAIo0E,GACVE,GAAaF,EAAKjkD,EAAK+jD,QAxBrBzuE,EAAMY,OAAO+tE,MAyBd/tE,QAAO,SAAUsJ,GAClB,IAAIykE,EAAMvhE,EAAQwC,iBAAiB1F,GACnCykE,GAAOQ,GAAU/hE,EAASlD,EAAWykE,EAAIO,sBAAsB3hE,eAAgBohE,MAC9E9+D,UACH/c,KAAKua,MAAQ7E,EACN1V,KAAKkN,OAGdkuE,EAAiBt7E,UAAUgO,OAAS,SAAUkH,EAASoE,GACrD,IAAIlM,EAAQlN,KAAKkN,MACbwI,EAAO1V,KAAKua,MAEZvF,EAAQhK,IAAI,aACV0K,GACFA,EAAK2K,mBAAkB,SAAUw7D,GAC/BQ,GAAU3mE,EAAM,gBAAUmmE,GAAKzkE,UAAWpC,EAAS6mE,MAIvD3uE,EAAMiQ,aAIVi+D,EAAiB78E,KAAO,eACjB68E,EA9FT,CA+FE96D,GAAA,MAGF,SAASs7D,GAAclmE,EAAM0B,EAAW4E,EAAW4b,GACjD,IAAI1b,EAASxG,EAAK4B,cAAcF,GAC5BklE,EAAetgE,EAAUhR,IAAI,gBAC7BuxE,EAAavgE,EAAUhR,IAAI,cAC3BwxE,EAAiBxgE,EAAUhR,IAAI,mBAAqB,QACpDqpB,EAAerY,EAAUhR,IAAI,gBAC7BW,GAAY0oB,GAAgB,GAAKt3B,KAAKM,GAAK,KAAO,EAClDo/E,EAAoBzgE,EAAUhR,IAAI,sBAAwB,EAC1D0P,EAAqBsB,EAAUtB,qBAC/BihE,EAAa,CACfvkE,UAAWA,EACX8E,OAAQA,EACRF,UAAWA,EACXmY,WAAYze,EAAKmN,cAAczL,EAAW,WAAa,SACvDtd,MAAO4b,EAAKmN,cAAczL,EAAW,SACrCmlE,WAAYA,EACZD,aAAcA,EACdI,sBAAuB1gE,EAAUhR,IAAI,yBACrCyxE,kBAAmBA,EACnB9wE,SAAUA,EACV8O,eAAgBC,EAAqBsB,EAAY,KACjD2gE,WAAYjiE,GAAsBsB,EAAUhR,IAAI,CAAC,WAAY,UAC7DuW,GAAIvF,EAAU+G,WAAW,KAAK,IAAS,GAEzC65D,GAAiB5gE,EAAWsgE,EAAcpgE,EAAQ0b,EAAK+jD,GACvDkB,GAAkBnnE,EAAM0B,EAAW8E,EAAQogE,EAAcC,EAAYZ,EAAWmB,eAAgBnB,EAAWoB,OAAQN,EAAmB7kD,EAAK+jD,GAC3IqB,GAAiBhhE,EAAW2/D,EAAWsB,YAAatxE,EAAUisB,EAAK+jD,GACnE,IAAI3nD,EAAa2nD,EAAW3nD,WACxBkpD,EAAelhE,EAAUhR,IAAI,gBAOjC,OALI,aAAekyE,KACjBA,EAAe,CAAC,gBAAaA,EAAa,GAAIlpD,EAAW,IAAK,gBAAakpD,EAAa,GAAIlpD,EAAW,MAGzGmpD,GAAkBnhE,EAAWgY,EAAY9X,EAAQogE,EAAcC,EAAYW,EAAcV,EAAgBb,EAAWyB,eAAgBzB,EAAWmB,eAAgBnB,EAAW0B,gBAAiBzlD,EAAK+jD,GACzLA,EAIT,SAASiB,GAAiB5gE,EAAWsgE,EAAcpgE,EAAQ0b,EAAK0lD,GAC9D,IAKIR,EALAj1D,EAAW+P,EAAI/P,SACf01D,EAAqBvhE,EAAUhR,IAAI,sBACnCwyE,EAAY5lD,EAAIviB,SAAS6M,aAAa0V,EAAIviB,SAASU,eACnD0nE,EAASD,EAAUE,cAAcF,EAAUjmD,YAAY,IACvDomD,EAAY,IAAMzhE,EAAO2L,EAASpU,KAAO,GAG7C,GAAI,aAAe8pE,GAAqB,CACtC,IAAIK,EAAuB,CAACC,GAAqBL,EAAWD,EAAmB,IAAME,EAAQI,GAAqBL,EAAWD,EAAmB,IAAME,GACtJG,EAAqB,GAAKA,EAAqB,IAAMA,EAAqBliD,UAC1EohD,EAAiBc,EAAqBD,QAEtCb,EAD+B,MAAtBS,EACQM,GAAqBL,EAAWD,GAAsBE,EAC9DnB,EACQ1kD,EAAI6jD,eAAe5zD,EAAS9H,OAAO49D,GAAaF,EAEhDvhE,EAAO2L,EAASpU,IAGnC6pE,EAAiBR,eAAiBA,EAE9BR,IACFgB,EAAiBD,gBAAkBnhE,EAAO2L,EAASpU,KAGrD6pE,EAAiBP,OAASD,EAAiB,EAAI,EAAIA,EAAiB,GAAK,EAAI,EAG/E,SAASe,GAAqBx2D,EAAMre,GAClC,OAAOqe,EAAKq2D,cAAcr2D,EAAKkQ,YAAYlQ,EAAK5I,MAAMq/D,MAAM90E,KAI9D,SAAS6zE,GAAkBnnE,EAAM0B,EAAW8E,EAAQogE,EAAcC,EAAYO,EAAgBC,EAAQN,EAAmB7kD,EAAK0lD,GAC5H,IAIIS,EAJAl2D,EAAW+P,EAAI/P,SACf6zD,EAAc9jD,EAAI8jD,YAClBsC,EAAejhF,KAAK8E,IAAIqa,EAAOw/D,EAAYjoE,KAC3CugB,EAAate,EAAKmN,cAAczL,EAAW,cAI7C2mE,EADE,aAAe/pD,GACEA,EAAWx5B,QAEZ,MAAdw5B,EAEiB,CAAC,OAAQ,QAET,CAACA,EAAYA,GAQpC+pD,EAAiBrC,EAAY37D,OAAS,gBAAag+D,EAAiBrC,EAAY37D,OAAQi+D,GACxFD,EAAiBl2D,EAAS9H,OAAS,gBAAag+D,EAAiBl2D,EAAS9H,OAAQu8D,EAAe0B,EAAejhF,KAAK8E,IAAIi7E,IACzHQ,EAAiBtpD,WAAa+pD,EAE9B,IAAId,EAAcK,EAAiBL,YAAc,CAACc,EAAiB,GAAKtB,EAAmBsB,EAAiB,GAAKtB,GAEjHQ,EAAYp1D,EAAS9H,SAAW6X,EAAI5hB,cAAgB,EAAI,GAAK+mE,EAG/D,SAASC,GAAiBhhE,EAAWihE,EAAatxE,EAAUisB,EAAK0lD,GAI/D,IAAIF,EAAiBphE,EAAUhR,IAAIgwE,KAA2B,EAE1DoC,IACFjC,GAAiB/8E,KAAK,CACpBwN,OAAQqxE,EAAY,GACpBpxE,OAAQoxE,EAAY,GACpBtxE,SAAUA,IAEZwvE,GAAiB3C,kBACjB4E,GAAkBjC,GAAiBh8E,eACnCi+E,GAAkBH,EAAYrlD,EAAI/P,SAAS9H,QAG7Cu9D,EAAiBF,eAAiBA,EAGpC,SAASD,GAAkBnhE,EAAWgY,EAAY9X,EAAQogE,EAAcC,EAAYW,EAAcV,EAAgBY,EAAgBN,EAAgBO,EAAiBzlD,EAAK0lD,GACtK,IAAI5B,EAAc9jD,EAAI8jD,YAClB7zD,EAAW+P,EAAI/P,SACfk1D,EAASO,EAAiBP,OAC1BkB,EAAalhF,KAAKub,IAAI0b,EAAWnM,EAAS9H,OAASq9D,EAAgB,GACnEc,EAAUD,EAId,GAAI3B,EAAc,CAChB,IAAI6B,EAAoBphF,KAAK8E,IAAIi7E,GAC7BsB,EAAe,cAAgBpiE,EAAUhR,IAAI,gBAAiB,OAAS,GACvEqzE,GAAY,EAEZD,EAAaE,YAAY,OAASF,EAAa1jF,OAAS,IAC1D2jF,GAAY,EACZD,EAAeA,EAAa5jF,MAAM,EAAG4jF,EAAa1jF,OAAS,IAG7D,IAAI6jF,EAAsB,gBAAaH,EAAcpqD,EAAWnM,EAAS9H,QACrEy+D,EAAiBzhF,KAAKub,IAAI2lE,EAAmC,EAAtBM,EAAyB,GAGhEE,EAASJ,EAAY,EAA0B,EAAtBE,EAGzBG,EAAkB,gBAAUpC,GAC5BqC,EAAcD,EAAkBpC,EAAesC,IAAYT,EAAoBM,GAAUD,GAGzFK,EAAQV,EAAoBQ,EAAcV,EAC9CM,EAAsBM,EAAQ,GAAKR,EAAYM,EAAcA,EAAc,GAC3EH,EAAiBP,EAAmC,EAAtBM,EAC9BE,EAASJ,EAAY,EAA0B,EAAtBE,EAEpBG,GAAoC,UAAjBpC,IACtBqC,EAActB,EAAkBuB,IAAY7hF,KAAK8E,IAAIw7E,GAAmBoB,GAAUD,GAAkB,GAGtGN,EAAUS,EAAcH,EAAiBC,EACzCnB,EAAiBqB,YAAcA,EAC/BrB,EAAiBc,aAAeG,EAGlC,IAAIO,EAAU/B,GAAUmB,EAAU,GAC9Ba,EAAezB,EAAiByB,aAAe,GACnDA,EAAarD,EAAY37D,OAAS7D,EAAOw/D,EAAYjoE,IAAM,EAC3DsrE,EAAal3D,EAAS9H,OAA4B,UAAnBy8D,EAA6BsC,EAA6B,QAAnBtC,EAA2BM,EAAiBgC,EAAUhC,EAAiB,EAEzII,IACF6B,EAAa,IAAM7B,EAAa,GAChC6B,EAAa,IAAM7B,EAAa,IAGlC,IAAI8B,EAAiB1B,EAAiB0B,eAAiB,GACvDA,EAAetD,EAAY37D,OAAS7D,EAAOw/D,EAAY1pB,IACvDgtB,EAAen3D,EAAS9H,OAAS7D,EAAO2L,EAASmqC,IACjD,IAAIitB,EAAe3B,EAAiB2B,aAAe,YAAc,GAAI/iE,GACrE+iE,EAAap3D,EAASpU,IAAMspE,EAAShgF,KAAKub,IAAIvb,KAAK8E,IAAIqa,EAAO2L,EAASpU,KAAM1W,KAAK8E,IAAIk9E,EAAal3D,EAAS9H,OAAS++D,IACrHG,EAAavD,EAAYjoE,IAAMyI,EAAOw/D,EAAYjoE,IAClD,IAAIyrE,EAAY5B,EAAiB4B,UAAY,GAE7CA,EAAUxD,EAAY1pB,KAAO91C,EAAOw/D,EAAY1pB,IAChDktB,EAAUxD,EAAYjoE,IAAMmkB,EAAI4jD,OAAOE,EAAYjoE,IACnDyrE,EAAUr3D,EAASmqC,IAAM,EACzBktB,EAAUr3D,EAASpU,IAAMyI,EAAO2L,EAASpU,IAG3C,SAAS0rE,GAAWxD,GAClB,IAAIc,EAAoBd,EAAWc,kBAC/B//E,EAAO,gBACXi/E,EAAWxnD,YAAasoD,EAAoB,GAAIA,EAAoB,EAAGA,EAAmBA,GAO1F,OANA//E,EAAK0B,KAAK,CACR4kC,SAAS,IAEG,UAAdtmC,EAAK6B,MAAoB7B,EAAK0wB,SAAS,CACrCluB,eAAe,IAEVxC,EAGT,SAAS0iF,GAA4BvD,EAAKjkD,EAAK+jD,EAAYt6D,GACzD,IAAIg+D,EAASxD,EAAIyD,kBACbtrD,EAAa2nD,EAAW3nD,WACxBopD,EAAiBzB,EAAWyB,eAC5B2B,EAAepD,EAAWoD,aAC1Bl3D,EAAW+P,EAAI/P,SACf82D,EAAchD,EAAWgD,aAAe,EACxC5+D,EAAQ,EACRw/D,EAAOvrD,EAAW4D,EAAI/P,SAAS9H,OAASq9D,EAA2C,EAA1BzB,EAAWyC,aAoBxE,IAnBAoB,GAAS3D,GAAK,SAAUn/E,GACtBA,EAAK+iF,0BAA4B1/D,EACjCrjB,EAAKgjF,uBAAyBf,EAE1B5+D,EAAQ4+D,EACVgB,GAAWjjF,EAAM,KAAMkjF,EAAW7/D,GAAQ47D,EAAYt6D,GAEtDs+D,GAAWjjF,EAAM,KAAM,CACrBkP,OAAQ,EACRC,OAAQ,GACP8vE,EAAYt6D,GAAU,WACvBg+D,EAAOvxE,OAAOpR,MAKlBqjB,OAGKA,EAAQ4+D,EAAa5+D,IAAS,CACnC,IAAIrjB,EAAOyiF,GAAWxD,GACtBj/E,EAAK+iF,0BAA4B1/D,EACjCrjB,EAAKgjF,uBAAyBf,EAC9BU,EAAO53E,IAAI/K,GACX,IAAI4K,EAASs4E,EAAW7/D,GACxB4/D,GAAWjjF,EAAM,CACf0D,EAAGkH,EAAOlH,EACVC,EAAGiH,EAAOjH,EACVuL,OAAQ,EACRC,OAAQ,GACP,CACDD,OAAQtE,EAAOsE,OACfC,OAAQvE,EAAOuE,OACfF,SAAUrE,EAAOqE,UAChBgwE,EAAYt6D,GAGjB,SAASu+D,EAAW7/D,GAClB,IAAI+J,EAAWi1D,EAAavkF,QAGxBuiF,EAASpB,EAAWoB,OACpB3hF,EAAI2kB,EAOR,OALyC,UAArC47D,EAAWe,sBAAoCK,EAAS,EAAIA,EAAS,KACvE3hF,EAAIujF,EAAc,EAAI5+D,GAGxB+J,EAASjC,EAAS9H,OAASw/D,GAAQnkF,EAAIujF,EAAc,EAAI,IAAOI,EAAal3D,EAAS9H,OAC/E,CACL3f,EAAG0pB,EAAS,GACZzpB,EAAGypB,EAAS,GACZle,OAAQ+vE,EAAWsB,YAAY,GAC/BpxE,OAAQ8vE,EAAWsB,YAAY,GAC/BtxE,SAAUgwE,EAAWhwE,WAK3B,SAASk0E,GAA2BhE,EAAKjkD,EAAK+jD,EAAYt6D,GACxD,IAAIg+D,EAASxD,EAAIyD,kBACbQ,EAAWjE,EAAIkE,oBAEdD,EAcHH,GAAWG,EAAU,KAAM,CACzB1/E,EAAGu7E,EAAWoD,aAAa,GAC3B1+E,EAAGs7E,EAAWoD,aAAa,GAC3BnzE,OAAQ+vE,EAAWsB,YAAY,GAC/BpxE,OAAQ8vE,EAAWsB,YAAY,GAC/BtxE,SAAUgwE,EAAWhwE,UACpBgwE,EAAYt6D,IAnBfy+D,EAAWjE,EAAIkE,oBAAsBZ,GAAWxD,GAChD0D,EAAO53E,IAAIq4E,GACXH,GAAWG,EAAU,CACnB1/E,EAAGu7E,EAAWoD,aAAa,GAC3B1+E,EAAGs7E,EAAWoD,aAAa,GAC3BnzE,OAAQ,EACRC,OAAQ,EACRF,SAAUgwE,EAAWhwE,UACpB,CACDC,OAAQ+vE,EAAWsB,YAAY,GAC/BpxE,OAAQ8vE,EAAWsB,YAAY,IAC9BtB,EAAYt6D,IAanB,SAAS2+D,GAAsBnE,EAAKF,EAAYt6D,GAC9C,IAAII,EAAY,YAAc,GAAIk6D,EAAWsD,cACzCgB,EAAUpE,EAAIqE,mBAEbD,EAaHN,GAAWM,EAAS,KAAM,CACxBx8E,MAAOge,GACNk6D,EAAYt6D,IAdf4+D,EAAUpE,EAAIqE,mBAAqB,IAAI,QAAa,CAClD3+D,GAAI,EACJ9d,MAAOge,EACPmD,QAAQ,EACR9qB,MAAO,CACLkE,OAAQ,cACRF,KAAM,cACNkB,UAAW,KAGf68E,EAAIp0E,IAAIw4E,IAQZ,SAASE,GAAmBtE,EAAKjkD,EAAK+jD,EAAYt6D,GAEhD,GAAIs6D,EAAWY,WAAY,CACzB,IAAItwE,EAAW4vE,EAAIuE,oBACflB,EAAY,YAAc,GAAIvD,EAAWuD,WACzCr3D,EAAW+P,EAAI/P,SACfpN,EAAiBkhE,EAAWlhE,eAC5BrD,EAAYukE,EAAWvkE,UAE3B,GAAInL,EACFgjB,GAAA,eAAoBhjB,EAAU,CAC5BxI,MAAOy7E,GACNzkE,EAAgBrD,OACd,CACL8nE,EAAUr3D,EAASpU,IAAM,EACzBxH,EAAW,IAAI,QAAa,CAC1BxI,MAAOy7E,IAGTrD,EAAIyD,kBAAkBhiE,YAAYrR,GAElC4vE,EAAIuE,oBAAsBn0E,EAC1B,IAAI3E,EAAS,GACbA,EAAOugB,EAASpU,IAAMkoE,EAAWuD,UAAUr3D,EAASpU,IACpDwb,GAAQ5N,EAAW,cAAgB,aAAapV,EAAU,CACxDxI,MAAO6D,GACNmT,EAAgBrD,KAKzB,SAAS6E,GAAavG,EAAM0B,GAC1B,IAAI4E,EAAYtG,EAAKuG,aAAa7E,GAGlC,OAFA4E,EAAUqkE,wBAA0BA,GACpCrkE,EAAUtB,mBAAqB,GACxBsB,EAGT,SAASqkE,GAAwB3jF,GAE/B,MAAO,CACLqjB,MAAOrjB,EAAK+iF,0BACZnkF,MAAOoB,EAAKgjF,wBAIhB,SAAS,KAEP,OAAO1/E,KAAKq1B,YAAY3a,wBAA0B1a,KAAK+iB,WAAW,aAGpE,SAAS+4D,GAAUpmE,EAAMkiB,EAAK+jD,EAAYt6D,GAExC,IAAIw6D,EAAM,IAAI,QAEVwD,EAAS,IAAI,QAgBjB,OAfAxD,EAAIp0E,IAAI43E,GACRxD,EAAIyD,kBAAoBD,EACxBA,EAAOj/E,EAAIu7E,EAAWqD,eAAe,GACrCK,EAAOh/E,EAAIs7E,EAAWqD,eAAe,GAEjCrD,EAAWW,aACb8C,GAA4BvD,EAAKjkD,EAAK+jD,GAEtCkE,GAA2BhE,EAAKjkD,EAAK+jD,GAGvCqE,GAAsBnE,EAAKF,EAAYt6D,GACvC8+D,GAAmBtE,EAAKjkD,EAAK+jD,EAAYt6D,GACzCw6D,EAAIK,oBAAsBD,GAAYvmE,EAAMimE,GAC5CE,EAAIO,sBAAwBT,EACrBE,EAGT,SAASM,GAAUN,EAAKjkD,EAAK+jD,GAC3B,IAAIlhE,EAAiBkhE,EAAWlhE,eAC5BrD,EAAYukE,EAAWvkE,UACvBioE,EAASxD,EAAIyD,kBACjBrwD,GAAA,eAAoBowD,EAAQ,CAC1Bj/E,EAAGu7E,EAAWqD,eAAe,GAC7B3+E,EAAGs7E,EAAWqD,eAAe,IAC5BvkE,EAAgBrD,GAEfukE,EAAWW,aACb8C,GAA4BvD,EAAKjkD,EAAK+jD,GAAY,GAElDkE,GAA2BhE,EAAKjkD,EAAK+jD,GAAY,GAGnDqE,GAAsBnE,EAAKF,GAAY,GACvCwE,GAAmBtE,EAAKjkD,EAAK+jD,GAAY,GAG3C,SAASU,GAAU3mE,EAAM0B,EAAWqD,EAAgBohE,GAElD,IAAIyE,EAAYzE,EAAIqE,mBACpBI,GAAaA,EAAUr5C,oBACvB,IAAIs5C,EAAS,GACbf,GAAS3D,GAAK,SAAUn/E,GACtB6jF,EAAOllF,KAAKqB,MAEdm/E,EAAIkE,qBAAuBQ,EAAOllF,KAAKwgF,EAAIkE,qBAE3ClE,EAAIuE,sBAAwB3lE,EAAiB,MAC7C,UAAY8lE,GAAQ,SAAU7jF,GAC5BuyB,GAAA,iBAAsBvyB,EAAM,CAC1BkP,OAAQ,EACRC,OAAQ,GACP4O,EAAgBrD,GAAW,WAC5BykE,EAAI5sE,QAAU4sE,EAAI5sE,OAAOnB,OAAO+tE,SAGpCnmE,EAAK+G,iBAAiBrF,EAAW,MAGnC,SAAS6kE,GAAYvmE,EAAMimE,GACzB,MAAO,CAACjmE,EAAKmN,cAAc84D,EAAWvkE,UAAW,WAAa,SAAUukE,EAAWW,eAAgBX,EAAWY,YAAY98E,KAAK,KAGjI,SAAS+/E,GAAS3D,EAAKtqC,EAAIsH,GAEzB,UAAYgjC,EAAIyD,kBAAkBl4E,YAAY,SAAU/I,GACtDA,IAAOw9E,EAAIqE,oBAAsB3uC,EAAGloC,KAAKwvC,EAASx6C,MAItD,SAASshF,GAAWthF,EAAImiF,EAAgBC,EAAgB9E,EAAYt6D,EAAUkwB,GAC5EivC,GAAkBniF,EAAGD,KAAKoiF,GAEtB7E,EAAWY,aAAel7D,EAC5Bo/D,GAAkBpiF,EAAGD,KAAKqiF,GAE1BA,GAAkBxxD,GAAQ5N,EAAW,cAAgB,aAAahjB,EAAIoiF,EAAgB9E,EAAWlhE,eAAgBkhE,EAAWvkE,UAAWm6B,GAI3I,SAASwqC,GAAaF,EAAKjkD,EAAK+jD,GAC9B,IAAIvkE,EAAYukE,EAAWvkE,UACvB4E,EAAY2/D,EAAW3/D,UAGvB2H,EAAgB3H,EAAUd,SAAS,YACnCqrB,EAAgB5iB,EAAczI,SAAS,aAAaY,eACpDuoB,EAAYroB,EAAUd,SAAS,CAAC,OAAQ,cAAcY,eACtD0qB,EAAcxqB,EAAUd,SAAS,CAAC,SAAU,cAAcY,eAC1DgH,EAAc9G,EAAU+G,WAAW,UACnC0kB,EAAQ9jB,EAAc3Y,IAAI,SAC1BigD,EAAYtnC,EAAc3Y,IAAI,aAC9B2xE,EAAah5D,EAAc3Y,IAAI,SACnCw0E,GAAS3D,GAAK,SAAUn/E,GACtB,GAAIA,aAAgB,OAAS,CAC3B,IAAIm5B,EAAYn5B,EAAK5C,MACrB4C,EAAKmf,SAAS,YAAc,CAE1BxX,MAAOwxB,EAAUxxB,MACjBjE,EAAGy1B,EAAUz1B,EACbC,EAAGw1B,EAAUx1B,EACbsE,MAAOkxB,EAAUlxB,MACjBE,OAAQgxB,EAAUhxB,QACjB82E,EAAW7hF,aAEd4C,EAAKmf,SAAS8/D,EAAW7hF,OAG3B,IAAI4mF,EAAgBhkF,EAAKyyB,YAAY,YACrCuxD,EAAc5mF,MAAQysC,EAElBo2C,IAEF+D,EAAc90E,OAAuB,IAAdlP,EAAKkP,OAC5B80E,EAAc70E,OAAuB,IAAdnP,EAAKmP,QAG9BnP,EAAKyyB,YAAY,QAAQr1B,MAAQuqC,EACjC3nC,EAAKyyB,YAAY,UAAUr1B,MAAQ0sC,EACnC1jB,IAAgBpmB,EAAKsmE,OAASlgD,GAC9BpmB,EAAK6kB,GAAKo6D,EAAWp6D,MAEvB,IAAIo/D,EAAqB/oD,EAAI/P,SAASqzD,UAAUS,EAAWmB,eAAiB,IACxEmD,EAAUpE,EAAIqE,mBAClB,gBAAcD,EAAS,gBAAqBjkE,GAAY,CACtDkH,aAAc0U,EAAIze,YAClBgK,eAAgB/L,EAChBgM,YAAa,gBAAgBwU,EAAIze,YAAYxD,UAAWyB,GACxDiM,aAAcs4D,EAAW7hF,MAAMgE,KAC/BwlB,eAAgBq4D,EAAW7hF,MAAM+E,QACjC0kB,uBAAwBo9D,IAE1B,gBAAoB9E,EAAKp0C,EAAOwjB,GAGlC,SAAS2zB,GAAWgC,GAClB,IAAIC,EAAe9jF,KAAKC,MAAM4jF,GAE9B,OAAO7jF,KAAK8E,IAAI++E,EAAQC,GAAgB,KAAOA,EAAe9jF,KAAKmhC,KAAK0iD,GAG3D,UCpoBX,GAEJ,SAAUz3E,GAGR,SAAS23E,IACP,IAAIr4E,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAKhE,OAHAyI,EAAMlK,KAAOuiF,EAAwBviF,KACrCkK,EAAM0tB,iBAAkB,EACxB1tB,EAAMs4E,cAAgB,YACft4E,EAsCT,OA9CA,gBAAUq4E,EAAyB33E,GAWnC23E,EAAwBhhF,UAAUgV,eAAiB,SAAUC,GAG3D,OADAA,EAAOisE,MAAQ,KACR73E,EAAOrJ,UAAUgV,eAAeD,MAAM7U,KAAM8C,YAGrDg+E,EAAwBviF,KAAO,sBAC/BuiF,EAAwBvpE,aAAe,CAAC,QACxCupE,EAAwB5qE,cAAgB,gBAAqBW,GAAmBX,cAAe,CAC7FyzB,OAAQ,SACR3V,WAAY,KACZK,aAAc,KACdmoD,eAAgB,KAChBU,aAAc,KACdkB,aAAc,KACd9B,cAAc,EACdI,sBAAuB,MACvBH,YAAY,EACZgB,mBAAoB,KACpBd,kBAAmB,IACnBwE,OAAQ,QAGRxqE,YAAa,EACb8a,SAAU,CAGR9S,OAAO,GAETzG,OAAQ,CACNC,UAAW,CACTL,YAAa,cAIZkpE,EA/CT,CAgDEjqE,IAEaqqE,GAAA,GCpDR,SAAS,GAAQxsE,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoB46D,IAC9BxsE,EAAU6R,eAAe,mBAAM,QAAQ,iB,iBCErC,GAEJ,SAAUpd,GAGR,SAASg4E,IACP,IAAI14E,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAO4iF,EAAe5iF,KAC5BkK,EAAM24E,QAAU,GACT34E,EAqHT,OA5HA,gBAAU04E,EAAgBh4E,GAU1Bg4E,EAAerhF,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,GAChE,IAAI1D,EAAOyD,EAAYxD,UACnBm9D,EAAO9yE,KACPkN,EAAQlN,KAAKkN,MACbm0E,EAAeloE,EAAYmoE,iBAC3B3tC,EAAaj+B,EAAKE,UAAU,cAC5BxT,EAAOuxC,EAAWvxC,KAClB21B,EAAc4b,EAAW5b,YAI7B,SAASwpD,EAAUtuE,GACjB,OAAOA,EAAKjZ,KAJdkT,EAAM9M,EAAI,EACV8M,EAAM7M,EAAI+B,EAAK/B,EAAI03B,EAAY,GAM/B,IAAIypD,EAAa,IAAI75B,GAAA,KAAW3nD,KAAKyhF,eAAiB,GAAIJ,EAAcE,EAAWA,GAC/EG,EAAkB,GAGtB,SAASC,EAAQ7yC,EAAQrxB,EAAK0S,GAC5B,IAAIyxD,EAAkB9O,EAAKsO,QAE3B,GAAe,WAAXtyC,EAAJ,CAWA,IANA,IAEIh1C,EAcAg7B,EAhBA+sD,EAAU,GACVC,EAAU,GAEV3mF,EAAUkmF,EAAa5jE,GAAKtiB,QAC5BqgC,EAAI,EAEDA,EAAIrgC,EAAQT,OAAQ8gC,IAAK,CAC9B,IAAItf,EAASxG,EAAK4B,cAAcnc,EAAQqgC,IACpCp7B,EAAI8b,EAAO9b,EACX8B,EAAKga,EAAOha,GACZ7B,EAAI6b,EAAO7b,EACfwhF,EAAQxmF,KAAK+E,EAAG8B,GAChB4/E,EAAQzmF,KAAK+E,EAAG8B,EAAK7B,GACrBvG,EAAQ4b,EAAKmN,cAAc1nB,EAAQqgC,GAAI,SAIzC,IAAIumD,EAAarsE,EAAK4B,cAAcnc,EAAQ,IACxCkxB,EAAalT,EAAY+B,SAAS,SAClC2S,EAASxB,EAAWrhB,IAAI,UACxB2Y,EAAgBxK,EAAY+B,SAAS,YAEzC,GAAe,QAAX4zB,EAAkB,CACpB,IAAIkzC,EAAaN,EAAgBjkE,GAAO,IAAI,QAC5CqX,EAAU,IAAI,QAAU,CACtBrxB,MAAO,CACL0gB,OAAQ09D,EACRI,gBAAiBH,EACjB5vD,OAAQ,GACRgwD,gBAAiB,GACjBC,kBAAkB,GAEpB5gE,GAAI,IAENygE,EAAWv6E,IAAIqtB,GACf5nB,EAAMzF,IAAIu6E,GAEN7oE,EAAYuB,sBACdoa,EAAQxX,YAAY,GAAoBwX,EAAQrH,kBAAmBtU,GAAa,WAC9E2b,EAAQ/Z,yBAGP,CACDinE,EAAaJ,EAAgBzxD,GACjC2E,EAAUktD,EAAWhtD,QAAQ,GAC7B9nB,EAAMzF,IAAIu6E,GACVN,EAAgBjkE,GAAOukE,EACvB/yD,GAAA,eAAoB6F,EAAS,CAC3BrxB,MAAO,CACL0gB,OAAQ09D,EACRI,gBAAiBH,IAElB3oE,GAGL,gBAAc2b,EAAS,gBAAqB3b,GAAc,CACxDgK,eAAgBhoB,EAAQqgC,EAAI,GAC5BpY,YAAa1N,EAAK4T,QAAQnuB,EAAQqgC,EAAI,IACtCnY,aAAcvpB,EAAMgE,MACnB,CACD+oC,OAAQ,CACNxZ,cAAe,YAInByH,EAAQ5G,cAAc,CACpBpE,SAAU,KACVupC,OAAO,IAET,IAAI+uB,EAAUttD,EAAQrR,iBAElB2+D,IACFA,EAAQhiF,EAAI2hF,EAAW3hF,EAAIytB,EAC3Bu0D,EAAQ/hF,EAAI0hF,EAAW7/E,GAAK6/E,EAAW1hF,EAAI,GAG7Cy0B,EAAQjZ,SAAS/hB,GACjB4b,EAAK+G,iBAAiBgB,EAAKqX,GAC3B,gBAAyBA,EAAS3b,GAClC,gBAAoB2b,EAASnR,EAAc3Y,IAAI,SAAU2Y,EAAc3Y,IAAI,mBAnFzEkC,EAAMY,OAAO8zE,EAAgBnkE,IANjC+jE,EAAW/5E,IAAI,kBAAKk6E,EAAS3hF,KAAM,QAAQgK,OAAO,kBAAK23E,EAAS3hF,KAAM,WAAW8N,OAAO,kBAAK6zE,EAAS3hF,KAAM,WAAW+c,UA4FvH/c,KAAKyhF,cAAgBJ,EACrBrhF,KAAKohF,QAAUM,GAGjBP,EAAe5iF,KAAO,aACf4iF,EA7HT,CA8HE7gE,GAAA,MAIF,SAAS,GAAoBle,EAAM+W,EAAao4B,GAC9C,IAAIua,EAAS,IAAI,QAAa,CAC5BroD,MAAO,CACLrD,EAAGgC,EAAKhC,EAAI,GACZC,EAAG+B,EAAK/B,EAAI,GACZsE,MAAO,EACPE,OAAQzC,EAAKyC,OAAS,MAU1B,OAPAoqB,GAAA,aAAkB68B,EAAQ,CACxBroD,MAAO,CACLrD,EAAGgC,EAAKhC,EAAI,GACZuE,MAAOvC,EAAKuC,MAAQ,IACpBE,OAAQzC,EAAKyC,OAAS,KAEvBsU,EAAao4B,GACTua,EAGM,UCvJXu2B,GAAkB,EAElB,GAEJ,SAAUl5E,GAGR,SAASm5E,IACP,IAAI75E,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAO+jF,EAAsB/jF,KACnCkK,EAAM+nB,uBAAwB,EACvB/nB,EAoOT,OA3OA,gBAAU65E,EAAuBn5E,GAcjCm5E,EAAsBxiF,UAAU+vB,KAAO,SAAU9a,GAE/C5L,EAAOrJ,UAAU+vB,KAAKhb,MAAM7U,KAAM8C,WAKlC9C,KAAKywB,qBAAuB,IAAIC,GAAA,KAAqB,UAAY1wB,KAAK2V,QAAS3V,MAAO,UAAYA,KAAK2wB,WAAY3wB,QAUrHsiF,EAAsBxiF,UAAUyiF,QAAU,SAAU7sE,GAClD,IAAI8sE,EAAgB9sE,EAAKhb,OASrB+nF,EAAgB,GAEhB1b,EAAc,gBAAUrxD,GAAM,SAAUzC,GAK1C,OAJKwvE,EAAc/oB,eAAezmD,EAAK,GAAK,MAC1CwvE,EAAcxvE,EAAK,GAAK,KAAO,GAG1BA,EAAK,MAEVyvE,EAAY,GAChB3b,EAAYE,QAAQhpD,MAAK,SAAU2M,EAAOtsB,GACxCokF,EAAUrnF,KAAK,CACbrB,KAAMsE,EACNqkF,SAAU/3D,OAKd,IAFA,IAAIg4D,EAAWF,EAAUhoF,OAEhBwY,EAAI,EAAGA,EAAI0vE,IAAY1vE,EAAG,CAGjC,IAFA,IAAIo1B,EAASo6C,EAAUxvE,GAAGlZ,KAEjBwhC,EAAI,EAAGA,EAAIknD,EAAUxvE,GAAGyvE,SAASjoF,SAAU8gC,EAAG,CACrD,IAAIqnD,EAAYH,EAAUxvE,GAAGyvE,SAASnnD,GAAG,GAAK,GAC9CinD,EAAcI,GAAa3vE,EAG7B,IAAK,IAAI2vE,KAAaJ,EAChBA,EAAc/oB,eAAempB,IAAcJ,EAAcI,KAAe3vE,IAC1EuvE,EAAcI,GAAa3vE,EAC3BwC,EAAK8sE,GAAiB,CAACK,EAAW,EAAGv6C,GACrCk6C,KAKN,OAAO9sE,GAST4sE,EAAsBxiF,UAAUgV,eAAiB,SAAUC,EAAQC,GAajE,IAZA,IAAI8tE,EAAkB9iF,KAAKitC,uBAAuB,aAAc,SAAkBC,OAAO,GACrF+oB,EAAW6sB,EAAgB93E,IAAI,QAE/B+3E,EAAa,YAAchuE,EAAOW,MAAM,SAAU+tD,GACpD,YAAuB3nE,IAAhB2nE,EAAS,MAGd/tD,EAAO1V,KAAKuiF,QAAQQ,GAAc,IAClCC,EAAW,GACXzhD,EAAUvhC,KAAKuhC,QAAU,qBACzBjmC,EAAQ,EAEHF,EAAI,EAAGA,EAAIsa,EAAKhb,SAAUU,EACjC4nF,EAAS3nF,KAAKqa,EAAKta,GAAGinF,KAEjB9gD,EAAQv2B,IAAI0K,EAAKta,GAAGinF,OACvB9gD,EAAQz1B,IAAI4J,EAAKta,GAAGinF,IAAkB/mF,GACtCA,KAIJ,IAAIw/C,EAAiB,OAAAC,GAAA,MAAiBrlC,EAAM,CAC1Cqb,gBAAiB,CAAC,UAClBkyD,iBAAkB,CAAC,CACjBjpF,KAAM,OACNuE,KAAM,gBAAuB03D,IAC5B,CACDj8D,KAAM,QACNuE,KAAM,SACL,CACDvE,KAAM,OACNuE,KAAM,YAERs4D,aAAc,CACZqsB,OAAQ,EACRl6E,MAAO,EACPs+B,SAAU,KAGV91B,EAAO,IAAIypC,GAAA,KAAKH,EAAgB96C,MAEpC,OADAwR,EAAK0pC,SAASxlC,GACPlE,GAQT8wE,EAAsBxiF,UAAUwhF,eAAiB,WAK/C,IAJA,IAAI5rE,EAAO1V,KAAK2V,UACZwtE,EAAWztE,EAAKpa,QAChB8nF,EAAW,GAENhoF,EAAI,EAAGA,EAAI+nF,IAAY/nF,EAC9BgoF,EAAShoF,GAAKA,EAGhB,IAAIioF,EAAU3tE,EAAKwI,aAAa,UAE5B6oD,EAAc,gBAAUqc,GAAU,SAAUrjE,GAC9C,OAAOrK,EAAK1K,IAAI,OAAQ+U,MAEtBujE,EAAc,GAUlB,OATAvc,EAAYE,QAAQhpD,MAAK,SAAU2M,EAAOtsB,GACxCssB,EAAMtM,MAAK,SAAUilE,EAAQC,GAC3B,OAAO9tE,EAAK1K,IAAIq4E,EAASE,GAAU7tE,EAAK1K,IAAIq4E,EAASG,MAEvDF,EAAYjoF,KAAK,CACfrB,KAAMsE,EACNnD,QAASyvB,OAGN04D,GAOThB,EAAsBxiF,UAAU2jF,mBAAqB,SAAUjpE,EAAKxR,EAAO6P,GACpE,aAAe2B,KAClBA,EAAMA,EAAM,CAACA,GAAO,IAStB,IANA,IAIIkpE,EAJAhuE,EAAO1V,KAAK2V,UACZ2tE,EAActjF,KAAKshF,iBACnBnmF,EAAU,GACVynF,EAAWU,EAAY5oF,OAGlBU,EAAI,EAAGA,EAAIwnF,IAAYxnF,EAAG,CAKjC,IAJA,IAAIuoF,EAAU/kE,OAAOC,UACjB+kE,GAAc,EACdC,EAAWP,EAAYloF,GAAGD,QAAQT,OAE7B8gC,EAAI,EAAGA,EAAIqoD,IAAYroD,EAAG,CACjC,IAAIsoD,EAAWpuE,EAAK1K,IAAIwP,EAAI,GAAI8oE,EAAYloF,GAAGD,QAAQqgC,IACnD3P,EAAO9uB,KAAK8E,IAAIiiF,EAAW96E,GAE3B6iB,GAAQ83D,IACVD,EAAeI,EACfH,EAAU93D,EACV+3D,EAAaN,EAAYloF,GAAGD,QAAQqgC,IAIxCrgC,EAAQE,KAAKuoF,GAGf,MAAO,CACLG,YAAa5oF,EACbuoF,aAAcA,IAIlBpB,EAAsBxiF,UAAUy2B,cAAgB,SAAUnf,EAAWof,EAAgBC,GACnF,IAAI/gB,EAAO1V,KAAK2V,UACZ3b,EAAO0b,EAAK4T,QAAQlS,GACpBpO,EAAQ0M,EAAK1K,IAAI0K,EAAKwI,aAAa,SAAU9G,GACjD,OAAO,gBAAoB,YAAa,CACtCpd,KAAMA,EACNgP,MAAOA,KAIXs5E,EAAsB/jF,KAAO,oBAC7B+jF,EAAsB/qE,aAAe,CAAC,cACtC+qE,EAAsBpsE,cAAgB,CACpCC,OAAQ,EACRC,EAAG,EACHd,iBAAkB,aAElByiB,YAAa,CAAC,MAAO,OAErBisD,gBAAiB,EACjBpxD,gBAAiB,SACjBpP,MAAO,CACLqK,OAAQ,EACR2D,MAAM,EACN1H,SAAU,OACVo6C,SAAU,IAEZ3yC,SAAU,CACR/N,MAAO,CACLgO,MAAM,KAIL8wD,EA5OT,CA6OE3rE,GAAA,MAEastE,GAAA,GC1PA,SAASC,GAAiBlvE,EAASoE,GAChDpE,EAAQ4S,iBAAiB,cAAc,SAAUzO,GAC/C,IAAIzD,EAAOyD,EAAYxD,UACnButE,EAAS/pE,EAAY7D,iBACrBq+B,EAAa,GAEbvxC,EAAO8gF,EAAOrtB,UAClBliB,EAAWvxC,KAAOA,EAClB,IAAI21B,EAAc5e,EAAYnO,IAAI,eAC9Bqc,EAAO67D,EAAOltB,UAGlB,GAFAriB,EAAW5b,YAAcA,EAEL,eAAhB1Q,EAAK+rB,OAAyB,CAChCrb,EAAY,GAAK+E,GAAA,KAAwB/E,EAAY,GAAI31B,EAAKyC,QAC9DkzB,EAAY,GAAK+E,GAAA,KAAwB/E,EAAY,GAAI31B,EAAKyC,QAC9D,IAAIA,EAASzC,EAAKyC,OAASkzB,EAAY,GAAKA,EAAY,GACxDosD,GAAmBzuE,EAAMyD,EAAatU,OACjC,CACLkzB,EAAY,GAAK+E,GAAA,KAAwB/E,EAAY,GAAI31B,EAAKuC,OAC9DozB,EAAY,GAAK+E,GAAA,KAAwB/E,EAAY,GAAI31B,EAAKuC,OAC9D,IAAIA,EAAQvC,EAAKuC,MAAQozB,EAAY,GAAKA,EAAY,GACtDosD,GAAmBzuE,EAAMyD,EAAaxU,GAGxC+Q,EAAKkT,UAAU,aAAc+qB,MAWjC,SAASwwC,GAAmBzuE,EAAMyD,EAAatU,GAC7C,GAAK6Q,EAAKpa,QAyBV,IArBA,IAmBI8oF,EAnBA/uE,EAAW8D,EAAY7D,iBAEvBguE,EAAcnqE,EAAYmoE,iBAE1B+B,EAAU3tE,EAAKwI,aAAa,UAC5B2J,EAAWnS,EAAKwI,aAAa,SAC7BmmE,EAAc,SAAWf,GAAa,SAAUgB,GAClD,OAAO,SAAWA,EAAYnpF,SAAS,SAAUsiB,GAC/C,IAAIlI,EAAKF,EAASG,YAAYE,EAAK1K,IAAIq4E,EAAS5lE,IAEhD,OADAlI,EAAG,GAAKG,EAAK1K,IAAI6c,EAAUpK,GACpBlI,QAGPg2D,EAAOgZ,GAAgBF,GACvBG,EAAWjZ,EAAKrpE,GAChBilE,EAAKtiE,EAAS0mE,EAAKjzD,IAEnBu4B,EAAIyyC,EAAY5oF,OAChByD,EAAImlF,EAAY,GAAGnoF,QAAQT,OAGtB8gC,EAAI,EAAGA,EAAIr9B,IAAKq9B,EAAG,CAC1B4oD,EAASI,EAAShpD,GAAK2rC,EACvBzxD,EAAKoT,cAAcw6D,EAAY,GAAGnoF,QAAQqgC,GAAI,CAC5CipD,WAAY,EACZrkF,EAAGikF,EAAY,GAAG7oD,GAAG,GACrBt5B,GAAIkiF,EACJ/jF,EAAGgkF,EAAY,GAAG7oD,GAAG,GAAK2rC,IAG5B,IAAK,IAAI/rE,EAAI,EAAGA,EAAIy1C,IAAKz1C,EACvBgpF,GAAUC,EAAYjpF,EAAI,GAAGogC,GAAG,GAAK2rC,EACrCzxD,EAAKoT,cAAcw6D,EAAYloF,GAAGD,QAAQqgC,GAAI,CAC5CipD,WAAYrpF,EACZgF,EAAGikF,EAAYjpF,GAAGogC,GAAG,GACrBt5B,GAAIkiF,EACJ/jF,EAAGgkF,EAAYjpF,GAAGogC,GAAG,GAAK2rC,KAalC,SAASod,GAAgB7uE,GAOvB,IANA,IAAIktE,EAAWltE,EAAKhb,OAChBmpF,EAAWnuE,EAAK,GAAGhb,OACnBgqF,EAAO,GACPxiF,EAAK,GACLoW,EAAM,EAEDld,EAAI,EAAGA,EAAIyoF,IAAYzoF,EAAG,CAGjC,IAFA,IAAIupF,EAAO,EAEFnpD,EAAI,EAAGA,EAAIonD,IAAYpnD,EAC9BmpD,GAAQjvE,EAAK8lB,GAAGpgC,GAAG,GAGjBupF,EAAOrsE,IACTA,EAAMqsE,GAGRD,EAAKrpF,KAAKspF,GAGZ,IAAK,IAAIzxE,EAAI,EAAGA,EAAI2wE,IAAY3wE,EAC9BhR,EAAGgR,IAAMoF,EAAMosE,EAAKxxE,IAAM,EAG5BoF,EAAM,EAEN,IAAK,IAAIssE,EAAI,EAAGA,EAAIf,IAAYe,EAAG,CACjC,IAAI18D,EAAMw8D,EAAKE,GAAK1iF,EAAG0iF,GAEnB18D,EAAM5P,IACRA,EAAM4P,GAIV,MAAO,CACLhmB,GAAIA,EACJoW,IAAKA,GC9IF,SAAS,GAAQ5D,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoB29D,IAC9BvvE,EAAU6R,eAAe29D,IACzBxvE,EAAUkS,kBAAkBsC,GAAW,eCkBzC,IAAI27D,GAAmB,EACnBC,GAAiB,EAKjB,GAEJ,SAAU37E,GAGR,SAAS47E,EAAct1C,EAAMt2B,EAAanE,EAASoE,GACjD,IAAI3Q,EAAQU,EAAOE,KAAKrJ,OAASA,KAEjCyI,EAAM8Y,GAAKsjE,GACXp8E,EAAMs+B,WAAa,CACjB5Y,QAAQ,GAEV,gBAAU1lB,GAAOwc,YAAc9L,EAAY8L,YAC3C,IAAIzf,EAAO,IAAI,QAAa,CAC1B+b,GAAIujE,GACJlgE,OAAQ6qB,EAAKv0B,WAAWlQ,IAAI,CAAC,QAAS,aAOxC,OAJAvC,EAAMmmB,eAAeppB,GAErBiD,EAAMomB,YAAW,EAAM4gB,EAAMt2B,EAAanE,EAASoE,GAE5C3Q,EAqLT,OAxMA,gBAAUs8E,EAAe57E,GAsBzB47E,EAAcjlF,UAAU+uB,WAAa,SAAUC,EAAa2gB,EAC5Dt2B,EAAanE,EAASoE,GACpBpZ,KAAKyvC,KAAOA,EACZA,EAAKikB,MAAQ1zD,KACbmZ,EAAcA,GAAenZ,KAAKglF,aAClChwE,EAAUA,GAAWhV,KAAKilF,SAC1B,IAAInjE,EAAS9hB,KACb,gBAAU8hB,GAAQ1K,UAAYq4B,EAAKr4B,UACnC,IAAI4E,EAAYyzB,EAAKv0B,WACjByI,EAAgB3H,EAAUd,SAAS,YACnCgB,EAASuzB,EAAK75B,YACdmM,EAAc,YAAc,GAAI7F,GACpC6F,EAAYyB,MAAQ,KACpB,IAAI8iB,EAAcmJ,EAAKvpB,UAAU,SACjCogB,EAAY3mC,SAAW,QACvB,IAAI+1B,EAAQ+Z,EAAKvpB,UAAU,SAEvBwP,IACF4Q,EAAY5Q,MAAQ,gBAA+BA,EAAOtc,IAG5D,IAAIqV,EAAeD,GAAsBxS,EAAUd,SAAS,aAAc6G,GAC1E,YAAcA,EAAa0M,GAC3B,UAAY,SAAgB,SAAU6G,GACpC,IAAIzR,EAAQ/B,EAAOqN,YAAYmG,GAC3B4vD,EAAiBlpE,EAAUd,SAAS,CAACoa,EAAW,cACpDzR,EAAM/pB,MAAQorF,EAAeppE,eAE7B,IAAI2S,EAAeD,GAAsB02D,EAAgBnjE,GAErD0M,IACF5K,EAAMpgB,MAAQgrB,MAIdK,GACFhN,EAAO/F,SAASgG,GAChBD,EAAOre,MAAMxC,EAAIib,EAAO+E,GACxBgO,GAAA,eAAoBnN,EAAQ,CAC1Bre,MAAO,CACLxC,EAAGib,EAAOjb,IAEXkY,EAAas2B,EAAKr4B,YAIrB6X,GAAA,eAAoBnN,EAAQ,CAC1Bre,MAAOse,GACN5I,GAGL2I,EAAOjG,SAASyqB,GAEhBtmC,KAAKkvB,aAAa/V,GAElB,IAAI2J,EAAc9G,EAAU+G,WAAW,UACvCD,GAAehB,EAAO1jB,KAAK,SAAU0kB,GACrC9iB,KAAKglF,aAAe7rE,GAAenZ,KAAKglF,aACxChlF,KAAKilF,SAAWjwE,GAAWhV,KAAKilF,SAChC,IAAIx9C,EAAQ9jB,EAAc3Y,IAAI,SAC1BkgD,EAA2B,aAAVzjB,EAAuBgI,EAAKkH,sBAAkC,eAAVlP,EAAyBgI,EAAKmH,uBAAyBnP,EAChI,gBAAoBznC,KAAMkrD,EAAgBvnC,EAAc3Y,IAAI,eAG9D+5E,EAAcjlF,UAAUovB,aAAe,SAAU/V,GAC/C,IAAI1Q,EAAQzI,KAERgc,EAAYhc,KAAKyvC,KAAKv0B,WACtBq7B,EAAmBv6B,EAAUd,SAAS,SACtCgB,EAASlc,KAAKyvC,KAAK75B,YACnBiT,EAAQ3M,EAAO/a,SAAW+a,EAAOhb,WACjC0rB,GAAY1Q,EAAOhb,WAAagb,EAAO/a,UAAY,EACnD6oB,EAAKjtB,KAAKK,IAAIwvB,GACdrC,EAAKxtB,KAAKG,IAAI0vB,GACd9K,EAAS9hB,KACTwjB,EAAQ1B,EAAO2B,iBACfrM,EAAYpX,KAAKyvC,KAAKr4B,UACtB+tE,EAAgB5uC,EAAiBvrC,IAAI,YAAc,IAAMjO,KAAKM,GAC9D+nF,EAAgB7uC,EAAiBvrC,IAAI,WAA8B,MAAjBm6E,GAAyBpoF,KAAK8E,IAAIgnB,GAASs8D,GAuFjG,SAASE,EAAa/oE,EAAOtiB,GAC3B,IAAIsrF,EAAYhpE,EAAMtR,IAAIhR,GAE1B,OAAiB,MAAbsrF,EACK/uC,EAAiBvrC,IAAIhR,GAGvBsrF,EA7FT9hE,EAAM9G,QAAU0oE,EAEhB,UAAY,SAAgB,SAAU9vD,GACpC,IAAIiwD,EAAgC,WAAdjwD,EAAyBtZ,EAAUd,SAAS,SAAWc,EAAUd,SAAS,CAACoa,EAAW,UACxGkwD,EAAyB,WAAdlwD,EACXzR,EAAQ2hE,EAAWhiE,EAAQA,EAAM2L,YAAYmG,GAC7C9vB,EAAO2T,EAAYoW,kBAAkBnY,EAAWke,GAEhDkwD,IACFhgF,EAAOA,GAAQiD,EAAMgnC,KAAKz1C,MAG5B6pB,EAAM/pB,MAAQ,gBAAgByrF,EAAiB,GAAI,KAAoB,WAAdjwD,GAAwB,GAE7E9vB,IACFqe,EAAM/pB,MAAM0L,KAAOA,GAIrB,IAAIigF,EAAUF,EAAgBv6E,IAAI,QAEnB,MAAXy6E,GAAoBD,IACtB3hE,EAAMnH,QAAU+oE,GAGlB,IAOIxkF,EAPAqrB,EAAgB+4D,EAAaE,EAAiB,YAC9CG,EAAcF,EAAW1jE,EAASA,EAAO8B,OAAO0R,GAChDqwD,EAAaD,EAAY5rF,MAAMgE,KACnC4nF,EAAY3+C,WAAa,CACvBwsB,YAA8C,YAAjCgyB,EAAgBv6E,IAAI,SAAyB26E,EAAa,KACvEx3D,OAA0B,YAAlB7B,GAGV,IAAIs5D,EAAeP,EAAaE,EAAiB,aAAe,EAC5D1/E,EAAYw/E,EAAaE,EAAiB,SAExB,YAAlBj5D,GACFrrB,EAAIib,EAAOjb,EAAI2kF,EACf//E,EAAY+mB,EAAW7vB,KAAKM,GAAK,EAAI,QAAU,QAE1CwI,GAA2B,WAAdA,EAGO,SAAdA,GACT5E,EAAIib,EAAO+E,GAAK2kE,EAEZh5D,EAAW7vB,KAAKM,GAAK,IACvBwI,EAAY,UAES,UAAdA,IACT5E,EAAIib,EAAOjb,EAAI2kF,EAEXh5D,EAAW7vB,KAAKM,GAAK,IACvBwI,EAAY,UAZd5E,GAAKib,EAAOjb,EAAIib,EAAO+E,IAAM,EAC7Bpb,EAAY,UAgBhBge,EAAM/pB,MAAMwzB,MAAQznB,EACpBge,EAAM/pB,MAAMuzB,cAAgBg4D,EAAaE,EAAiB,kBAAoB,SAC9E1hE,EAAMzjB,EAAIa,EAAI+oB,EAAK9N,EAAOnb,GAC1B8iB,EAAMxjB,EAAIY,EAAIspB,EAAKrO,EAAOlb,GAC1B,IAAI6kF,EAAaR,EAAaE,EAAiB,UAC3Cp4D,EAAS,EAEM,WAAf04D,GACF14D,GAAUP,EAENO,GAAUpwB,KAAKM,GAAK,IACtB8vB,GAAUpwB,KAAKM,KAEO,eAAfwoF,GACT14D,EAASpwB,KAAKM,GAAK,EAAIuvB,EAEnBO,EAASpwB,KAAKM,GAAK,EACrB8vB,GAAUpwB,KAAKM,GACN8vB,GAAUpwB,KAAKM,GAAK,IAC7B8vB,GAAUpwB,KAAKM,KAEc,kBAAfwoF,IAChB14D,EAAS04D,EAAa9oF,KAAKM,GAAK,KAGlCwmB,EAAMlY,SAAWwhB,KAanB3J,EAAMsiE,cAGDf,EAzMT,CA0ME,SAEa,MCzNJgB,GAAsB,qBAC7BC,GAAmB,oBACnBC,GAAqB,sBAClB,SAASC,GAAsBxxE,GACpCA,EAAUsS,eAAe,CACvBzoB,KAAMwnF,GACN/7E,OAAQ,eACP,SAAUqP,EAASrE,GAOpB,SAASypC,EAAiBniC,EAAOyD,GAC/B,IAAI4+B,EAAahB,GAAmBtkC,EAAS,CAAC0sE,IAAsBzpE,GAEpE,GAAIqiC,EAAY,CACd,IAAIC,EAAiBtiC,EAAMuiC,cAEvBD,IACFvlC,EAAQylC,UAAYd,GAAcY,EAAgBD,EAAWlP,MAAQ,SAAW,aAGlFnzB,EAAMyiC,cAAcJ,EAAWlP,OAhBnCz6B,EAAQiS,cAAc,CACpBC,SAAU,SACVkZ,QAAS,WACTjZ,MAAO9N,GACNolC,MAgBL/pC,EAAUsS,eAAe,CACvBzoB,KAAMynF,GACNh8E,OAAQ,SACP,SAAUqP,EAASrE,EAASoE,GAS7B,SAAS+sE,EAAgB7pE,GACvB,IAAIqiC,EAAahB,GAAmBtkC,EAAS,CAAC2sE,IAAmB1pE,GAE7DqiC,IACFtlC,EAAQjC,UAAYunC,EAAWlP,KAAKr4B,WAXxCiC,EAAU,oBAAO,GAAIA,GACrBrE,EAAQiS,cAAc,CACpBC,SAAU,SACVkZ,QAAS,WACTjZ,MAAO9N,GACN8sE,GAeH/sE,EAAIwG,eAAe,oBAAOvG,EAAS,CACjC9a,KAAM,kBAGVmW,EAAUsS,eAAe,CACvBzoB,KAAM0nF,GACNj8E,OAAQ,eACP,SAAUqP,EAASrE,EAASoE,GAC7BC,EAAU,oBAAO,GAAIA,GAMrBD,EAAIwG,eAAe,oBAAOvG,EAAS,CACjC9a,KAAM,iBC/DZ,IAAI,GAEJ,SAAU4K,GAGR,SAASi9E,IACP,IAAI39E,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO6nF,EAAa7nF,KACnBkK,EA8KT,OApLA,gBAAU29E,EAAcj9E,GASxBi9E,EAAatmF,UAAUoZ,OAAS,SAAUC,EAAanE,EAASoE,EAChEC,GACE,IAAIy5D,EAAO9yE,KACXA,KAAKmZ,YAAcA,EACnBnZ,KAAKoZ,IAAMA,EACXpZ,KAAKgV,QAAUA,EACf,IAAIU,EAAOyD,EAAYxD,UACnBu/B,EAAcx/B,EAAKq/B,KAAKtlC,KACxB42E,EAAUltE,EAAY0lC,cACtB3xC,EAAQlN,KAAKkN,MACbo5E,EAAyBntE,EAAYnO,IAAI,0BACzCu7E,EAAc,GAClBF,EAAQ1tC,UAAS,SAAUlJ,GACzB82C,EAAYlrF,KAAKo0C,MAEnB,IAAI+2C,EAAcxmF,KAAKymF,cAAgB,GAQvC,SAASt/B,EAAWo/B,EAAaC,GAO/B,SAAS/+B,EAAOhY,GACd,OAAOA,EAAKyJ,QAGd,SAASwO,EAAYx3B,EAAQC,GAC3B,IAAIu2D,EAAoB,MAAVx2D,EAAiB,KAAOq2D,EAAYr2D,GAC9C+2B,EAAoB,MAAV92B,EAAiB,KAAOq2D,EAAYr2D,GAClD42B,EAAa2/B,EAASz/B,GAbG,IAAvBs/B,EAAY7rF,QAAuC,IAAvB8rF,EAAY9rF,QAI5C,IAAIitD,GAAA,KAAW6+B,EAAaD,EAAa9+B,EAAQA,GAAQhgD,IAAIigD,GAAa19C,OAAO09C,GAAa55C,OAAO,WAAa45C,EAAa,OAAO3qC,UAaxI,SAASgqC,EAAa2/B,EAASz/B,GAM7B,GALKq/B,IAA0BI,GAAYA,EAAQltC,aAEjDktC,EAAU,MAGRA,IAAYxxC,GAAe+R,IAAY/R,EACzC,GAAI+R,GAAWA,EAAQyM,MACjBgzB,GAEFz/B,EAAQyM,MAAM7kC,YAAW,EAAO63D,EAASvtE,EAAanE,EAASoE,GAE/D1D,EAAK+G,iBAAiBiqE,EAAQtvE,UAAW6vC,EAAQyM,QAGjDizB,EAAW1/B,QAER,GAAIy/B,EAAS,CAElB,IAAIhzB,EAAQ,IAAI,GAAcgzB,EAASvtE,EAAanE,EAASoE,GAC7DlM,EAAMzF,IAAIisD,GAEVh+C,EAAK+G,iBAAiBiqE,EAAQtvE,UAAWs8C,IAK/C,SAASizB,EAAWl3C,GACbA,GAIDA,EAAKikB,QACPxmD,EAAMY,OAAO2hC,EAAKikB,OAClBjkB,EAAKikB,MAAQ,MAIjB,SAASkzB,EAAa1xC,EAAa+I,GAC7BA,EAASzF,MAAQ,GAEfs6B,EAAK+T,aAEP/T,EAAK+T,aAAah4D,YAAW,EAAOqmB,EAAa/7B,EAAanE,EAASoE,IAGvE05D,EAAK+T,aAAe,IAAI,GAAc3xC,EAAa/7B,EAAanE,EAASoE,GACzElM,EAAMzF,IAAIqrE,EAAK+T,eAIjB5oC,EAASyV,MAAMtzC,IAAI,SACnB0yD,EAAK+T,aAAahpE,GAAG,SAAS,SAAUlb,GACtCmwE,EAAKzpB,YAAYpL,EAASt2C,gBAEnBmrE,EAAK+T,eAEd35E,EAAMY,OAAOglE,EAAK+T,cAClB/T,EAAK+T,aAAe,MAnFxB1/B,EAAWo/B,EAAaC,GACxBI,EAAa1xC,EAAamxC,GAE1BrmF,KAAKymD,cAELzmD,KAAKymF,aAAeF,GAuFtBH,EAAatmF,UAAU2mD,YAAc,WACnC,IAAIh+C,EAAQzI,KAEZA,KAAKkN,MAAMkT,IAAI,SACfpgB,KAAKkN,MAAM2Q,GAAG,SAAS,SAAUlb,GAC/B,IAAImkF,GAAc,EAEd7oC,EAAWx1C,EAAM0Q,YAAY0lC,cAEjCZ,EAAStF,UAAS,SAAUlJ,GAC1B,IAAKq3C,GAAer3C,EAAKikB,OAASjkB,EAAKikB,QAAU/wD,EAAE2E,OAAQ,CACzD,IAAIi5C,EAAY9Q,EAAKv0B,WAAWlQ,IAAI,aAEpC,GAAkB,eAAdu1C,EACF93C,EAAM4gD,YAAY5Z,QACb,GAAkB,SAAd8Q,EAAsB,CAC/B,IAAIvkC,EAAYyzB,EAAKv0B,WACjBquC,EAAOvtC,EAAUhR,IAAI,QAEzB,GAAIu+C,EAAM,CACR,IAAIC,EAAaxtC,EAAUhR,IAAI,UAAU,IAAS,SAClD,gBAAWu+C,EAAMC,IAIrBs9B,GAAc,UAUtBV,EAAatmF,UAAUupD,YAAc,SAAU5Z,GACzCA,IAASzvC,KAAKmZ,YAAY0lC,eAC5B7+C,KAAKoZ,IAAIwG,eAAe,CACtBrhB,KAAMwnF,GACNn+C,KAAM5nC,KAAK0/B,IACXoI,SAAU9nC,KAAKmZ,YAAYtP,GAC3Bg0C,WAAYpO,KASlB22C,EAAatmF,UAAUswB,aAAe,SAAUC,EAAOlX,GACrD,IAAIi3C,EAAWj3C,EAAYxD,UACvB2a,EAAa8/B,EAAS94C,cAAc,GAExC,GAAIgZ,EAAY,CACd,IAAItG,EAAKqG,EAAM,GAAKC,EAAWvvB,GAC3BwpB,EAAK8F,EAAM,GAAKC,EAAWtvB,GAC3B+mB,EAAShrB,KAAK2tB,KAAKV,EAAKA,EAAKO,EAAKA,GACtC,OAAOxC,GAAUuI,EAAWrvB,GAAK8mB,GAAUuI,EAAWrP,KAI1DmlE,EAAa7nF,KAAO,WACb6nF,EArLT,CAsLE9lE,GAAA,MAEa,MC1LX,GAEJ,SAAUnX,GAGR,SAAS49E,IACP,IAAIt+E,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAOwoF,EAAoBxoF,KACjCkK,EAAM+yC,mBAAoB,EACnB/yC,EAqIT,OA5IA,gBAAUs+E,EAAqB59E,GAU/B49E,EAAoBjnF,UAAUgV,eAAiB,SAAUC,EAAQC,GAE/D,IAAIvF,EAAO,CACTzV,KAAM+a,EAAO/a,KACboN,SAAU2N,EAAOW,MAEnB,GAAkBjG,GAClB,IAAIoqC,EAAc,SAAW9kC,EAAOsqC,QAAU,IAAI,SAAUI,GAC1D,OAAO,IAAI1mB,GAAA,KAAM0mB,EAAaz/C,KAAMgV,KACnChV,MAIC+0C,EAAO,GAAKuF,WAAW7qC,EAAMzP,KAAMw6C,GAEvC,SAASA,EAAWmB,GAClBA,EAASC,WAAW,gBAAgB,SAAUt/B,EAAOmB,GACnD,IAAIgyB,EAAOsF,EAAKC,mBAAmBv3B,GAC/BiiC,EAAa7F,EAAYpK,EAAK+I,OAElC,OADAkH,IAAepjC,EAAM+Y,YAAcqqB,GAC5BpjC,KAIX,OAAOy4B,EAAKr/B,MAGdqxE,EAAoBjnF,UAAUg4B,cAAgB,WAC5C93B,KAAK++C,iBAOPgoC,EAAoBjnF,UAAUmxB,cAAgB,SAAU7Z,GACtD,IAAI6C,EAAS9Q,EAAOrJ,UAAUmxB,cAAcpc,MAAM7U,KAAM8C,WAEpD2sC,EAAOzvC,KAAK2V,UAAUo/B,KAAKC,mBAAmB59B,GAElD,OADA6C,EAAOmkC,aAAeD,GAAiB1O,EAAMzvC,MACtCia,GAGT8sE,EAAoBjnF,UAAU++C,YAAc,WAC1C,OAAO7+C,KAAKggD,WAGd+mC,EAAoBjnF,UAAUi/C,cAAgB,SAAUd,GACtDA,EAAWj+C,KAAKggD,UAAY/B,EAAWA,EAAWj+C,KAAKggD,UACvD,IAAIvwC,EAAOzP,KAAK2wB,aAAaokB,KAAKtlC,KAE7BwuC,IAAYA,IAAaxuC,GAASA,EAAKtI,SAAS82C,MACnDj+C,KAAKggD,UAAYvwC,IAIrBs3E,EAAoBjnF,UAAUmgD,gBAAkB,WAC9CjB,GAAuBh/C,OAGzB+mF,EAAoBxoF,KAAO,kBAC3BwoF,EAAoB7wE,cAAgB,CAClCC,OAAQ,EACRC,EAAG,EAEHlR,OAAQ,CAAC,MAAO,OAChB6iB,OAAQ,CAAC,EAAG,OAEZpmB,WAAW,EACXT,WAAY,GAEZ8mB,SAAU,EAEVM,kBAAkB,EAElBi4B,UAAW,aACX+lC,wBAAwB,EACxB9iE,MAAO,CAEL2J,OAAQ,SACRqE,MAAM,EACN3yB,QAAS,EAGTyuB,MAAO,SACPxD,SAAU,SACV62B,SAAU,EACV/7B,QAAQ,GAEV3M,UAAW,CACTJ,YAAa,EACbD,YAAa,QACbE,WAAY,QACZvJ,WAAY,EACZC,YAAa,qBACbL,cAAe,EACfE,cAAe,EACfxP,QAAS,GAEX0yB,SAAU,CACRkW,MAAO,cAETn5B,KAAM,CACJ2J,UAAW,CACTpZ,QAAS,IAEX2kB,MAAO,CACL3kB,QAAS,KAIbmwB,cAAe,YACfwD,kBAAmB,IACnBG,wBAAyB,IACzBjd,KAAM,GACN2pC,OAAQ,GAaR/gC,KAAM,QAEDyoE,EA7IT,CA8IEpwE,GAAA,MAEF,SAAS,GAAkBikC,GAIzB,IAAI1yB,EAAM,EACV,UAAY0yB,EAASxzC,UAAU,SAAU8H,GACvC,GAAkBA,GAClB,IAAIuyC,EAAavyC,EAAMlG,MAEvB,aAAey4C,KAAgBA,EAAaA,EAAW,IACvDv5B,GAAOu5B,KAET,IAAIC,EAAY9G,EAAS5xC,MAErB,aAAe04C,KACjBA,EAAYA,EAAU,KAGP,MAAbA,GAAqBv/C,MAAMu/C,MAC7BA,EAAYx5B,GAIVw5B,EAAY,IACdA,EAAY,GAGd,aAAe9G,EAAS5xC,OAAS4xC,EAAS5xC,MAAM,GAAK04C,EAAY9G,EAAS5xC,MAAQ04C,EAGrE,IAAAslC,GAAA,GCrLX,GAASjqF,KAAKM,GAAK,IACR,SAAS4pF,GAAet/D,EAAY3S,EAASoE,GAC1DpE,EAAQ4S,iBAAiBD,GAAY,SAAUxO,GAC7C,IAAIjU,EAASiU,EAAYnO,IAAI,UACzB+c,EAAS5O,EAAYnO,IAAI,UAExB,aAAe+c,KAClBA,EAAS,CAAC,EAAGA,IAGV,aAAe7iB,KAClBA,EAAS,CAACA,EAAQA,IAGpB,IAAIP,EAAQyU,EAAIrH,WACZlN,EAASuU,EAAIpH,YACb6D,EAAO9Y,KAAKyb,IAAI7T,EAAOE,GACvB9D,EAAK,gBAAamE,EAAO,GAAIP,GAC7B3D,EAAK,gBAAakE,EAAO,GAAIL,GAC7Boc,EAAK,gBAAa8G,EAAO,GAAIlS,EAAO,GACpC5U,EAAI,gBAAa8mB,EAAO,GAAIlS,EAAO,GACnC3U,GAAciY,EAAYnO,IAAI,cAAgB,GAC9Cgd,EAAW7O,EAAYnO,IAAI,YAAc,GACzCkqC,EAAc/7B,EAAYxD,UAAUo/B,KAAKtlC,KACzC2gD,EAAWj3C,EAAY0lC,cACvBqoC,EAAY92B,EAAS5X,MACrBl6B,EAAOnF,EAAYnO,IAAI,QAEf,MAARsT,GACF,GAAa8xC,EAAU9xC,GAGzB,IAAI2J,EAAiB,EACrB,UAAYmoC,EAAShpD,UAAU,SAAU8H,IACtC/M,MAAM+M,EAAMsqC,aAAevxB,OAE9B,IAAIC,EAAMkoC,EAAS5W,WAEfpxB,EAAarrB,KAAKM,IAAM6qB,GAAOD,GAAkB,EACjDk/D,EAAmB/2B,EAAS5X,MAAQ,EACpC6G,EAAS+Q,EAASvrD,QAAUsiF,GAAoB,EAAI,GACpDC,GAAanmF,EAAIggB,IAAOo+B,GAAU,GAClC19C,EAAYwX,EAAYnO,IAAI,aAC5Bsd,EAAmBnP,EAAYnO,IAAI,oBAInC2d,EAAMhnB,EAAY,GAAK,EAMvB0lF,EAAa,SAAU53C,EAAMvuC,GAC/B,GAAKuuC,EAAL,CAIA,IAAItuC,EAAWD,EAEf,GAAIuuC,IAASyF,EAAa,CAExB,IAAIlsC,EAAQymC,EAAK+J,WACb3wB,EAAgB,IAARX,GAAaI,EAAmBF,EAAapf,EAAQof,EAE7DS,EAAQb,IACVa,EAAQb,GAMV7mB,EAAWD,EAAaynB,EAAME,EAC9B,IAAI2vB,EAAQ/I,EAAK+I,MAAQ0uC,GAAaC,GAAoB,EAAI,GAC1DG,EAASrmE,EAAKmmE,EAAY5uC,EAC1B+uC,EAAOtmE,EAAKmmE,GAAa5uC,EAAQ,GACjCx8B,EAAYyzB,EAAKv0B,WAEM,MAAvBc,EAAUhR,IAAI,QAEhBs8E,EAAS,gBAAatrE,EAAUhR,IAAI,MAAO6K,EAAO,IAI1B,MAAtBmG,EAAUhR,IAAI,OAEhBu8E,EAAO,gBAAavrE,EAAUhR,IAAI,KAAM6K,EAAO,IAGjD45B,EAAK7mB,UAAU,CACbC,MAAOA,EACP3nB,WAAYA,EACZC,SAAUA,EACVQ,UAAWA,EACXZ,GAAIA,EACJC,GAAIA,EACJigB,GAAIqmE,EACJrmF,EAAGsmF,IAKP,GAAI93C,EAAKroC,UAAYqoC,EAAKroC,SAAS1M,OAAQ,CAEzC,IAAI8sF,EAAiB,EACrB,UAAY/3C,EAAKroC,UAAU,SAAUqoC,GACnC+3C,GAAkBH,EAAW53C,EAAMvuC,EAAasmF,MAIpD,OAAOrmF,EAAWD,IAIpB,GAAIimF,EAAkB,CACpB,IAAIG,EAASrmE,EACTsmE,EAAOtmE,EAAKmmE,EACZv+D,EAAkB,EAAV9rB,KAAKM,GACjB63C,EAAYtsB,UAAU,CACpBC,MAAOA,EACP3nB,WAAYA,EACZC,SAAUD,EAAa2nB,EACvBlnB,UAAWA,EACXZ,GAAIA,EACJC,GAAIA,EACJigB,GAAIqmE,EACJrmF,EAAGsmF,IAIPF,EAAWj3B,EAAUlvD,MAOzB,SAAS,GAAauuC,EAAMg4C,GAC1B,IAAIrgF,EAAWqoC,EAAKroC,UAAY,GAChCqoC,EAAKroC,SAAW,GAAKA,EAAUqgF,GAE3BrgF,EAAS1M,QACX,UAAY+0C,EAAKroC,UAAU,SAAU8H,GACnC,GAAaA,EAAOu4E,MAa1B,SAAS,GAAKrgF,EAAUqgF,GACtB,GAAyB,oBAAdA,EAA0B,CACnC,IAAIC,EAAc,SAAWtgF,GAAU,SAAU8H,EAAOuO,GACtD,IAAIzU,EAAQkG,EAAMsqC,WAClB,MAAO,CACLv/B,OAAQ,CACNu+B,MAAOtpC,EAAMspC,MACb3zC,OAAQqK,EAAMrK,OACduS,UAAWlI,EAAMkI,UACjBoiC,SAAU,WACR,OAAOxwC,IAGX+W,MAAOtC,MAMX,OAHAiqE,EAAYppE,MAAK,SAAUhkB,EAAGC,GAC5B,OAAOktF,EAAUntF,EAAE2f,OAAQ1f,EAAE0f,WAExB,SAAWytE,GAAa,SAAUpgF,GACvC,OAAOF,EAASE,EAAOyY,UAGzB,IAAI4nE,EAAwB,QAAdF,EACd,OAAOrgF,EAASkX,MAAK,SAAUhkB,EAAGC,GAChC,IAAIyY,GAAQ1Y,EAAEk/C,WAAaj/C,EAAEi/C,aAAemuC,EAAU,GAAK,GAC3D,OAAgB,IAAT30E,GAAc1Y,EAAE8c,UAAY7c,EAAE6c,YAAcuwE,GAAW,EAAI,GAAK30E,KCvL9D,SAAS40E,GAAe5yE,GACrC,IAAI6yE,EAAe,GAEnB,SAASC,EAAUr4C,EAAMt2B,EAAa4uE,GAEpC,IAAIx4C,EAAUE,EAEd,MAAOF,GAAWA,EAAQiJ,MAAQ,EAChCjJ,EAAUA,EAAQ5nC,WAGpB,IAAI6C,EAAQ2O,EAAY6uE,oBAAoBz4C,EAAQv1C,MAAQu1C,EAAQn4B,UAAY,GAAIywE,GAOpF,OALIp4C,EAAK+I,MAAQ,GAAsB,kBAAVhuC,IAE3BA,EAAQ,mBAAKA,GAAQilC,EAAK+I,MAAQ,IAAMuvC,EAAa,GAAK,KAGrDv9E,EAGTwK,EAAQ4S,iBAAiB,YAAY,SAAUzO,GAC7C,IAAIzD,EAAOyD,EAAYxD,UACnBo/B,EAAOr/B,EAAKq/B,KAChBA,EAAK4D,UAAS,SAAUlJ,GACtB,IAAInzB,EAAQmzB,EAAKv0B,WACbphB,EAAQwiB,EAAMpB,SAAS,aAAaY,eAEnChiB,EAAMgE,OACThE,EAAMgE,KAAOgqF,EAAUr4C,EAAMt2B,EAAa47B,EAAKtlC,KAAK5K,SAGtD,IAAI24C,EAAc9nC,EAAK+nC,uBAAuBhO,EAAKr4B,UAAW,SAC9D,oBAAOomC,EAAa1jD,SC5BnB,SAAS,GAAQ4a,GACtBA,EAAU2R,kBAAkB,IAC5B3R,EAAU4R,oBAAoB0gE,IAC9BtyE,EAAU6R,eAAe,mBAAM0gE,GAAgB,aAC/CvyE,EAAUkS,kBAAkB,mBAAMsC,GAAY,aAC9CxU,EAAUoqB,eAAe8oD,IACzB1B,GAAsBxxE,G,wDCZjB,SAAS,GAAO0M,EAAWwW,GAChCA,EAAMA,GAAO,GACb,IAAIsrD,EAAS9hE,EAAU9L,iBACnB+R,EAAOjG,EAAUiG,KACjBnL,EAAS,GACT+rE,EAAe5gE,EAAKyC,SACpBspB,EAAS/rB,EAAK+rB,OACdhxC,EAAO8gF,EAAOrtB,UACdqyB,EAAY,CAAC9lF,EAAKhC,EAAGgC,EAAKhC,EAAIgC,EAAKuC,MAAOvC,EAAK/B,EAAG+B,EAAK/B,EAAI+B,EAAKyC,QAChEsjF,EAAc,CAChB3rB,WAAY,CACV5qC,IAAKs2D,EAAU,GACfr2D,OAAQq2D,EAAU,IAEpBzrB,SAAU,CACRz3D,KAAMkjF,EAAU,GAChBjjF,MAAOijF,EAAU,KAGrBhsE,EAAO4N,SAAW,CAAY,aAAXspB,EAAwB+0C,EAAY1rB,SAASwrB,GAAgBC,EAAU,GAAe,eAAX90C,EAA0B+0C,EAAY3rB,WAAWyrB,GAAgBC,EAAU,IACzK,IAAIjnF,EAAI,CACNu7D,WAAY,EACZC,SAAU,GAEZvgD,EAAOvQ,SAAW5O,KAAKM,GAAK,EAAI4D,EAAEmyC,GAClC,IAAIg1C,EAAe,CACjBx2D,KAAM,EACNC,OAAQ,EACR5sB,MAAO,EACPD,MAAO,GAETkX,EAAO8d,eAAiB9d,EAAO+d,cAAgB/d,EAAOge,cAAgBkuD,EAAaH,GAE/E7mE,EAAUpW,IAAI,CAAC,WAAY,aAC7BkR,EAAO+d,eAAiB/d,EAAO+d,eAG7B,cAAgBrC,EAAIywD,YAAajnE,EAAUpW,IAAI,CAAC,YAAa,cAC/DkR,EAAO8d,gBAAkB9d,EAAO8d,gBAGlC,IAAIsuD,EAAgB1wD,EAAIzK,OAIxB,OAHiB,MAAjBm7D,IAA0BA,EAAgBlnE,EAAUpW,IAAI,CAAC,YAAa,YACtEkR,EAAOosE,cAAiC,QAAjBL,GAA0BK,EAAgBA,EACjEpsE,EAAOqF,GAAK,EACLrF,E,8BCvCL,GAAmB,CAAC,WAAY,gBAAiB,YACjDqsE,GAAmB,CAAC,YAAa,aAEjC,GAEJ,SAAUp/E,GAGR,SAASq/E,IACP,IAAI//E,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAOiqF,EAAejqF,KAC5BkK,EAAMggF,iBAAmB,oBAClBhgF,EA4BT,OAnCA,gBAAU+/E,EAAgBr/E,GAU1Bq/E,EAAe1oF,UAAUoZ,OAAS,SAAUkI,EAAWpM,EAASoE,EAAKC,GACnE,IAAInM,EAAQlN,KAAKkN,MACjBA,EAAMiQ,YACN,IAAIuhD,EAAe1+D,KAAK2+D,WACxB3+D,KAAK2+D,WAAa,IAAI,QACtB,IAAIziD,EAAS,GAAwBkF,GACjC0Y,EAAc,IAAIC,GAAA,KAAY3Y,EAAWlF,GAC7C,UAAY,GAAkB4d,EAAYryB,IAAKqyB,GAC/C5sB,EAAMzF,IAAIzH,KAAK2+D,YACfzxD,EAAMzF,IAAIqyB,EAAYK,YACtB,UAAYouD,IAAkB,SAAUvuF,GAClConB,EAAUpW,IAAI,CAAChR,EAAM,UACvB0uF,GAAoB1uF,GAAMgG,KAAMA,KAAKkN,MAAOlN,KAAK2+D,WAAYv9C,KAE9DphB,MACHivB,GAAA,mBAAwByvC,EAAc1+D,KAAK2+D,WAAYv9C,GAEvDjY,EAAOrJ,UAAUoZ,OAAO7P,KAAKrJ,KAAMohB,EAAWpM,EAASoE,EAAKC,IAG9DmvE,EAAe1oF,UAAUgO,OAAS,WAChC,gBAA0B9N,OAG5BwoF,EAAejqF,KAAO,aACfiqF,EApCT,CAqCEG,GAAA,MAEED,GAAsB,CACxBrvD,UAAW,SAAUuvD,EAAU17E,EAAO27E,EAAWznE,GAC/C,IAAIiG,EAAOjG,EAAUiG,KAErB,IAAIA,EAAK5I,MAAMqqE,UAAf,CAIA,IAAI1uD,EAAiBhZ,EAAUlG,SAAS,aACpCof,EAAiBF,EAAelf,SAAS,aACzC6tE,EAAazuD,EAAetvB,IAAI,SACpC+9E,EAAaA,aAAsBrY,MAAQqY,EAAa,CAACA,GAWzD,IAVA,IAAIC,EAAW5nE,EAAU9L,iBAAiBugD,UACtC7/C,EAAeqR,EAAKrR,eACpB6kB,EAAa,GACbouD,EAAY,EACZ5tD,EAAchU,EAAK2T,eAAe,CACpCkuD,UAAW9uD,IAET65C,EAAK,GACLC,EAAK,GAEA94E,EAAI,EAAGA,EAAIigC,EAAY3gC,SAAUU,EAAG,CAC3C,IAAIkgC,EAAYjU,EAAKq2D,cAAcriD,EAAYjgC,GAAGsd,OAE9C1C,GACFi+D,EAAG,GAAK34C,EACR24C,EAAG,GAAK+U,EAAS3oF,EACjB6zE,EAAG,GAAK54C,EACR44C,EAAG,GAAK8U,EAAS3oF,EAAI2oF,EAASnkF,SAE9BovE,EAAG,GAAK+U,EAAS5oF,EACjB6zE,EAAG,GAAK34C,EACR44C,EAAG,GAAK8U,EAAS5oF,EAAI4oF,EAASrkF,MAC9BuvE,EAAG,GAAK54C,GAGV,IAAIL,EAAaguD,IAAcF,EAAWruF,OAC1CmgC,EAAWI,GAAcJ,EAAWI,IAAe,GACnDJ,EAAWI,GAAY5/B,KAAK,IAAI,QAAa,CAC3C8tF,kBAAkB,EAClB1lF,MAAO,CACLwpB,GAAIgnD,EAAG,GACP/mD,GAAI+mD,EAAG,GACPxzE,GAAIyzE,EAAG,GACPxzE,GAAIwzE,EAAG,IAETtvD,QAAQ,KAIZ,IAAIuN,EAAYmI,EAAerF,aAAa,CAAC,UAE7C,IAAS75B,EAAI,EAAGA,EAAIy/B,EAAWngC,SAAUU,EACvC8R,EAAMzF,IAAIwnB,GAAA,aAAkB4L,EAAWz/B,GAAI,CACzCtB,MAAO,cAAgB,CACrBkE,OAAQ+qF,EAAW3tF,EAAI2tF,EAAWruF,SACjCy3B,GACHvN,QAAQ,OAId0U,UAAW,SAAUsvD,EAAU17E,EAAO27E,EAAWznE,GAC/C,gBAA4BwnE,EAAUC,EAAWznE,EAAWA,KAGjD,MChHX,GAEJ,SAAUjY,GAGR,SAASigF,IACP,IAAI3gF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO6qF,EAAgB7qF,KACtBkK,EAiDT,OAvDA,gBAAU2gF,EAAiBjgF,GAS3BigF,EAAgBtpF,UAAU++D,iBAAmB,WAC3C,OAAO7+D,MAGTopF,EAAgB7qF,KAAO,aACvB6qF,EAAgBr/C,WAAa,MAC7Bq/C,EAAgBlzE,cAAgB,CAC9BlR,KAAM,KACN4sB,IAAK,KACL3sB,MAAO,KACP4sB,OAAQ,KACRtzB,KAAM,QACNurB,SAAU,SACVspB,OAAQ,aACRnb,SAAU,CACRzG,MAAM,EACNW,UAAW,CACTxtB,MAAO,EACPpG,KAAM,UAMV8qE,QAAS,CACP73C,MAAM,GAER0G,SAAU,CACR1G,MAAM,EACN92B,OAAQ,EACRy3B,UAAW,CACTxtB,MAAO,IAGXwzB,UAAW,CACT3G,MAAM,EACN4L,SAAU,QAEZ/D,UAAW,CACT7H,MAAM,EACNW,UAAW,CACT5zB,KAAM,SACNM,QAAS,MAIRuqF,EAxDT,CAyDE7vD,GAAA,MAEF,mBAAM,GAAiB,QAAqBz5B,WAC7B,UChEX,GAEJ,SAAUqJ,GAGR,SAASkgF,EAAW7uE,EAAKiE,EAAO87C,EAAatE,EAAUnsC,GACrD,IAAIrhB,EAAQU,EAAOE,KAAKrJ,KAAMwa,EAAKiE,EAAO87C,IAAgBv6D,KAI1D,OAFAyI,EAAMlK,KAAO03D,GAAY,QACzBxtD,EAAMqhB,SAAWA,GAAY,SACtBrhB,EAgBT,OAvBA,gBAAU4gF,EAAYlgF,GActBkgF,EAAWvpF,UAAUkW,aAAe,WAClC,IAAI8T,EAAW9pB,KAAK8pB,SACpB,MAAoB,QAAbA,GAAmC,WAAbA,GAG/Bu/D,EAAWvpF,UAAUw8B,YAAc,SAAUjM,EAAOi5D,GAClD,OAAOtpF,KAAKsV,iBAAiBgnB,YAAYjM,GAAO,IAG3Cg5D,EAxBT,CAyBErtD,GAAA,MAEa,MCpBX,GAEJ,WACE,SAASutD,EAAOnoE,EAAWpM,EAASoE,GAClCpZ,KAAKzB,KAAO,SACZyB,KAAKy5C,UAAY,SAKjBz5C,KAAKg2B,WAAa,CAAC,UACnBh2B,KAAKwpF,oBAAqB,EAC1BxpF,KAAKsc,MAAQ8E,EAEbphB,KAAK66D,MAAMz5C,EAAWpM,EAASoE,GAsKjC,OA/JAmwE,EAAOzpF,UAAU+6D,MAAQ,SAAUz5C,EAAWpM,EAASoE,GACrD,IAAIoB,EAAMxa,KAAKy5C,UACXpyB,EAAO,IAAI,GAAW7M,EAAKsgD,GAAA,KAA8B15C,GAAY,CAAC,EAAG,GAAIA,EAAUpW,IAAI,QAASoW,EAAUpW,IAAI,aAClH+vD,EAA2B,aAAd1zC,EAAK9oB,KACtB8oB,EAAKvO,OAASiiD,GAAc35C,EAAUpW,IAAI,eAC1Cqc,EAAK2zC,QAAU55C,EAAUpW,IAAI,WAC7Bqc,EAAK+rB,OAAShyB,EAAUpW,IAAI,UAC5BoW,EAAUiG,KAAOA,EACjBA,EAAK/K,MAAQ8E,EACbiG,EAAK/R,iBAAmBtV,KACxBA,KAAKypF,MAAQpiE,GAOfkiE,EAAOzpF,UAAUkK,OAAS,SAAUgL,EAASoE,GAC3CpE,EAAQ+4B,YAAW,SAAU50B,GAC3B,GAAIA,EAAY7D,mBAAqBtV,KAAM,CACzC,IAAIm3B,EAAShe,EAAYxD,UACzB,kBAAKwhB,EAAO00C,iBAAiB7rE,KAAKy5C,YAAY,SAAUj/B,GACtDxa,KAAKypF,MAAMhrE,MAAMye,oBAAoB/F,EAAQ3c,KAC5Cxa,MACH86D,GAAA,KAA2B96D,KAAKypF,MAAMhrE,MAAOze,KAAKypF,MAAMntE,UAEzDtc,OAOLupF,EAAOzpF,UAAU+Q,OAAS,SAAUuQ,EAAWhI,GAC7CpZ,KAAK07D,MAAQ,gBAAc,CACzB12D,KAAMoc,EAAUpW,IAAI,QACpB4mB,IAAKxQ,EAAUpW,IAAI,OACnB/F,MAAOmc,EAAUpW,IAAI,SACrB6mB,OAAQzQ,EAAUpW,IAAI,UACtBrG,MAAOyc,EAAUpW,IAAI,SACrBnG,OAAQuc,EAAUpW,IAAI,WACrB,CACDrG,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,cAGdhS,KAAK0pF,eAGPH,EAAOzpF,UAAU+1D,QAAU,WACzB,OAAO71D,KAAK07D,OAGd6tB,EAAOzpF,UAAU4pF,YAAc,WAC7B,IAAItnF,EAAOpC,KAAK07D,MACZr0C,EAAOrnB,KAAKypF,MACZzzE,EAAeqR,EAAKrR,eACpBwJ,EAASxJ,EAAe,CAAC,EAAG5T,EAAKuC,OAAS,CAAC,EAAGvC,EAAKyC,QACnD4Y,EAAM4J,EAAKqU,QAAU,EAAI,EAC7BrU,EAAK0V,UAAUvd,EAAO/B,GAAM+B,EAAO,EAAI/B,IAEvCzd,KAAK2pF,qBAAqBtiE,EAAMrR,EAAe5T,EAAKhC,EAAIgC,EAAK/B,IAG/DkpF,EAAOzpF,UAAU6pF,qBAAuB,SAAUtiE,EAAMuiE,GACtD,IAAIztB,EAAa90C,EAAK5H,YAClBoqE,EAAY1tB,EAAW,GAAKA,EAAW,GACvCnmD,EAAeqR,EAAKrR,eACxBqR,EAAKq2D,cAAgB1nE,EAAe,SAAU0C,GAC5C,OAAOA,EAAQkxE,GACb,SAAUlxE,GACZ,OAAOmxE,EAAYnxE,EAAQkxE,GAE7BviE,EAAKyiE,aAAe9zE,EAAe,SAAU0C,GAC3C,OAAOA,EAAQkxE,GACb,SAAUlxE,GACZ,OAAOmxE,EAAYnxE,EAAQkxE,IAQ/BL,EAAOzpF,UAAUk2D,QAAU,WACzB,OAAOh2D,KAAKypF,OAOdF,EAAOzpF,UAAUiW,YAAc,WAC7B,OAAO/V,KAAKypF,OAGdF,EAAOzpF,UAAUiqF,QAAU,WACzB,MAAO,CAAC/pF,KAAKypF,QAGfF,EAAOzpF,UAAUkqF,eAAiB,WAChC,MAAO,CACLC,SAAU,CAACjqF,KAAKg2D,WAEhBk0B,UAAW,KAQfX,EAAOzpF,UAAUswB,aAAe,SAAUC,GACxC,IAAIjuB,EAAOpC,KAAK61D,UACZxuC,EAAOrnB,KAAKg2D,UACZ5iB,EAAS/rB,EAAK+rB,OAElB,MAAe,eAAXA,EACK/rB,EAAKolB,QAAQplB,EAAKyiE,aAAaz5D,EAAM,MAAQA,EAAM,IAAMjuB,EAAK/B,GAAKgwB,EAAM,IAAMjuB,EAAK/B,EAAI+B,EAAKyC,OAE7FwiB,EAAKolB,QAAQplB,EAAKyiE,aAAaz5D,EAAM,MAAQA,EAAM,IAAMjuB,EAAK/B,GAAKgwB,EAAM,IAAMjuB,EAAK/B,EAAI+B,EAAKyC,QAIxG0kF,EAAOzpF,UAAUw8B,YAAc,SAAUjM,GACvC,IAAIhJ,EAAOrnB,KAAKg2D,UAChB,MAAO,CAAC3uC,EAAKuV,YAAYvV,EAAKyiE,aAAaz5D,EAAsB,eAAhBhJ,EAAK+rB,OAA0B,EAAI,OAQtFm2C,EAAOzpF,UAAU0V,YAAc,SAAU9X,GACvC,IAAI2pB,EAAOrnB,KAAKg2D,UACZ5zD,EAAOpC,KAAK61D,UACZtgD,EAAK,GACLkI,EAAsB,eAAhB4J,EAAK+rB,OAA0B,EAAI,EAQ7C,OANI11C,aAAegzE,QACjBhzE,EAAMA,EAAI,IAGZ6X,EAAGkI,GAAO4J,EAAKq2D,cAAcr2D,EAAKkQ,aAAa75B,IAC/C6X,EAAG,EAAIkI,GAAe,IAARA,EAAYrb,EAAK/B,EAAI+B,EAAKyC,OAAS,EAAIzC,EAAKhC,EAAIgC,EAAKuC,MAAQ,EACpE4Q,GAGTg0E,EAAOzpF,UAAUq+B,eAAiB,SAAUnpB,EAASopB,EAAQp1B,GAC3D,IAAIqM,EAAW,GAAY+oB,GAC3B,OAAO/oB,IAAarV,KAAOA,KAAKwV,YAAYxM,GAAS,MAGvDugF,EAAOzpF,UAAUy+B,iBAAmB,SAAUvpB,EAASopB,EAAQI,GAC7D,IAAInpB,EAAW,GAAY+oB,GAC3B,OAAO/oB,IAAarV,KAAOA,KAAKs8B,YAAYkC,GAAS,MAGhD+qD,EAlLT,GAqLA,SAAS,GAAYnrD,GACnB,IAAIjlB,EAAcilB,EAAOjlB,YACrBgxE,EAAc/rD,EAAO0kD,gBACzB,OAAOqH,GAAeA,EAAY70E,kBAAoB6D,GAAeA,EAAY7D,iBAGpE,UC/Lf,SAASmpB,GAAOzpB,EAASoE,GACvB,IAAIgxE,EAAU,GAcd,OAbAp1E,EAAQiS,cAAc,cAAc,SAAU7F,EAAW3D,GACvD,IAAIylE,EAAS,IAAI,GAAO9hE,EAAWpM,EAASoE,GAC5C8pE,EAAOlpF,KAAO,UAAYyjB,EAC1BylE,EAAOryE,OAAOuQ,EAAWhI,GACzBgI,EAAU9L,iBAAmB4tE,EAC7BkH,EAAQ/uF,KAAK6nF,MAEfluE,EAAQ+4B,YAAW,SAAU50B,GAC3B,GAA4C,eAAxCA,EAAYnO,IAAI,oBAAsC,CACxD,IAAI83E,EAAkB3pE,EAAY8zB,uBAAuB,aAAc,SAAkBC,OAAO,GAChG/zB,EAAY7D,iBAAmBwtE,GAAmBA,EAAgBxtE,qBAG/D80E,EAGT,IAAIC,GAAgB,CAClB5rD,OAAQA,GACRzI,WAAY,GAAOl2B,UAAUk2B,YAEhB,M,uCC5BXs0D,GAAK,CAAC,IAAK,KACXC,GAAK,CAAC,QAAS,UAEf,GAEJ,SAAUphF,GAGR,SAASqhF,IACP,OAAkB,OAAXrhF,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAyE7D,OA5EA,gBAAUwqF,EAAmBrhF,GAU7BqhF,EAAkB1qF,UAAU2qF,aAAe,SAAUC,EAAU1hF,EAAOoY,EAAWupE,EAAkBvxE,GACjG,IAAIiO,EAAOjG,EAAUiG,KACjBhS,EAAWgS,EAAK/R,iBAChBs1E,EAAcC,GAAgBx1E,EAAU,EAAIy1E,GAAiBzjE,IAC7D0jE,EAAa11E,EAASG,YAAYxM,GAAO,GACzCgiF,EAAkBL,EAAiB3/E,IAAI,QAE3C,GAAIggF,GAAuC,SAApBA,EAA4B,CACjD,IAAIC,EAAUC,GAAA,KAAwBP,GAClCQ,EAAgBC,GAAoBJ,GAAiB3jE,EAAM0jE,EAAYH,GAC3EO,EAAcrxF,MAAQmxF,EACtBP,EAASW,WAAaF,EAAc5sF,KACpCmsF,EAASY,QAAUH,EAGrB,IAAIx3C,EAAa,GAAwBvyB,GACzC8pE,GAAA,KACAliF,EAAO0hF,EAAU/2C,EAAYvyB,EAAWupE,EAAkBvxE,IAO5DoxE,EAAkB1qF,UAAUyrF,mBAAqB,SAAUviF,EAAOoY,EAAWupE,GAC3E,IAAIh3C,EAAa,GAAwBvyB,EAAW,CAClDinE,aAAa,IAGf10C,EAAW63C,YAAcb,EAAiB3/E,IAAI,CAAC,SAAU,WACzD,IAAI8e,EAAWohE,GAAA,KAAkC9pE,EAAUiG,KAAMre,EAAO2qC,GACxE,MAAO,CACLvzC,EAAG0pB,EAAS,GACZzpB,EAAGypB,EAAS,GACZne,SAAUgoC,EAAWhoC,UAAYgoC,EAAW3Z,eAAiB,EAAIj9B,KAAKM,GAAK,KAQ/EmtF,EAAkB1qF,UAAU2rF,sBAAwB,SAAUtnF,EAAW44C,EAAO37B,EAAWupE,GACzF,IAAItjE,EAAOjG,EAAUiG,KACjBhS,EAAWgS,EAAK/R,iBAChBglE,EAAWwQ,GAAiBzjE,GAC5B80C,EAAa0uB,GAAgBx1E,EAAUilE,GACvCoR,EAAe,CAACvnF,EAAU/D,EAAG+D,EAAU9D,GAC3CqrF,EAAapR,IAAav9B,EAAMu9B,GAChCoR,EAAapR,GAAYv9E,KAAKyb,IAAI2jD,EAAW,GAAIuvB,EAAapR,IAC9DoR,EAAapR,GAAYv9E,KAAKub,IAAI6jD,EAAW,GAAIuvB,EAAapR,IAC9D,IAAIsQ,EAAcC,GAAgBx1E,EAAU,EAAIilE,GAC5CqR,GAAoBf,EAAY,GAAKA,EAAY,IAAM,EACvDgB,EAAc,CAACD,EAAkBA,GAErC,OADAC,EAAYtR,GAAYoR,EAAapR,GAC9B,CACLl6E,EAAGsrF,EAAa,GAChBrrF,EAAGqrF,EAAa,GAChB//E,SAAUxH,EAAUwH,SACpBigF,YAAaA,EACbC,cAAe,CACbx+D,cAAe,YAKdm9D,EA7ET,CA8EEsB,GAAA,MAEEV,GAAsB,CACxBh2B,KAAM,SAAU/tC,EAAM0jE,EAAYH,GAChC,IAAImB,EAAcb,GAAA,KAAyB,CAACH,EAAYH,EAAY,IAAK,CAACG,EAAYH,EAAY,IAAKE,GAAiBzjE,IACxH,MAAO,CACL9oB,KAAM,OACN4qF,kBAAkB,EAClB1lF,MAAOsoF,IAGXC,OAAQ,SAAU3kE,EAAM0jE,EAAYH,GAClC,IAAI7f,EAAY1jD,EAAK6jD,eACjB+gB,EAAOrB,EAAY,GAAKA,EAAY,GACxC,MAAO,CACLrsF,KAAM,OACNkF,MAAOynF,GAAA,KAAyB,CAACH,EAAahgB,EAAY,EAAG6f,EAAY,IAAK,CAAC7f,EAAWkhB,GAAOnB,GAAiBzjE,OAKxH,SAASyjE,GAAiBzjE,GACxB,OAAOA,EAAKrR,eAAiB,EAAI,EAGnC,SAAS60E,GAAgBx1E,EAAUilE,GACjC,IAAIl4E,EAAOiT,EAASwgD,UACpB,MAAO,CAACzzD,EAAKkoF,GAAGhQ,IAAYl4E,EAAKkoF,GAAGhQ,IAAal4E,EAAKmoF,GAAGjQ,KAG5C,UC1GX,GAEJ,SAAUnxE,GAGR,SAAS+iF,IACP,IAAIzjF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO2tF,EAAW3tF,KACjBkK,EAIT,OAVA,gBAAUyjF,EAAY/iF,GAStB+iF,EAAW3tF,KAAO,SACX2tF,EAXT,CAYE,SAEK,SAAS,GAAQx3E,GACtB,eAAI,SACJi0E,GAAA,KAASwD,yBAAyB,oBAAqB,IACvDz3E,EAAUmqB,sBAAsB,IAEhCnqB,EAAUmqB,sBAAsB,IAChCnqB,EAAUkqB,uBAAuB,IACjC,OAAAgiC,GAAA,MAAiBlsD,EAAW,SAAU,GAAiB,GAAgBwB,eACvExB,EAAUiqB,yBAAyB,SAAU,I,8BCf3C,GAAQ,UACRytD,GAA2B,CAE7B1vF,KAAM,KACNwlC,aAAc,KAEdh1B,MAAO,QACP7I,MAAO,OACPmB,KAAM,SAKJ6mF,GAAe,SAAUt3E,GAC3B,IAAIu3E,EAAgBv3E,EAAOka,QAOvB,aAAeq9D,GACZA,EAAc,IAAOA,EAAc,GAAGC,SAOzCx3E,EAAOka,QAAU,CAACla,EAAOka,QAAQ,IANjCla,EAAOka,QAAU,CAAC,CAChBs9D,SAAUD,IAOLA,IAAkBA,EAAcC,WACzCx3E,EAAOka,QAAU,CAAC,CAChBs9D,SAAU,CAACD,OAOb,GAEJ,SAAUnjF,GAGR,SAASqjF,IACP,IAAI/jF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAOiuF,EAAsBjuF,KACnCkK,EAAMgkF,cAAe,EACdhkF,EAuGT,OA9GA,gBAAU+jF,EAAuBrjF,GAUjCqjF,EAAsB1sF,UAAU+wB,YAAc,SAAU9b,EAAQC,GAE9D,IAAIu3E,EAAWvsF,KAAK+U,OAAOw3E,SAC3BvsF,KAAK+U,OAAOw3E,SAAW,KAEvBpjF,EAAOrJ,UAAU+wB,YAAYxnB,KAAKrJ,KAAM+U,EAAQC,GAEhDhV,KAAK+U,OAAOw3E,SAAWA,GAGzBC,EAAsB1sF,UAAUg4B,cAAgB,SAAUwhC,EAAW5kC,GACnE,IAAI6kC,EAAav5D,KAAK+U,OAClB23E,GAAWh4D,EAAS6kC,EAAaD,GAAWizB,SAC5CI,EAAYpzB,EAAWgzB,SAAW73D,EAAS,GAAK6kC,EAAWgzB,SAC3DK,EAAgB,GAEpB5sF,KAAK6sF,SAASH,EAASE,EAAe,MAEtC,IAAIE,EAAgB,QAA0BH,EAAWC,EAAe,eAEpEG,EAAoB/sF,KAAKgtF,mBAAqB,GAClD,UAAYF,GAAe,SAAUG,EAAYltE,GAC/C,IAAImtE,EAAcD,EAAW3zB,UAMxB4zB,IAILH,EAAkB1xF,KAAK6xF,GACvBC,GAAwBF,EAAYC,GACpCE,GAAwBT,EAAW5sE,EAAOmtE,GAC1CG,GAAqBV,EAAU5sE,GAAQmtE,MACtCltF,MAEH,IAAK,IAAI5E,EAAIuxF,EAAUjyF,OAAS,EAAGU,GAAK,EAAGA,IACrB,MAAhBuxF,EAAUvxF,GACZuxF,EAAU9oC,OAAOzoD,EAAG,UAIbuxF,EAAUvxF,GAAGkyF,SAoB1Bd,EAAsB1sF,UAAU+sF,SAAW,SAAUU,EAAY9iD,EAAQ+iD,GACvE,UAAYD,GAAY,SAAUx4E,GAChC,GAAKA,EAAL,CAIIy4E,IACFz4E,EAAOy4E,aAAeA,GAGxB/iD,EAAOpvC,KAAK0Z,GACZ,IAAI3N,EAAW2N,EAAO3N,SAEF,UAAhB2N,EAAOxW,MAAoB6I,GAC7BpH,KAAK6sF,SAASzlF,EAAUqjC,EAAQ11B,UAI3BA,EAAO3N,YACbpH,OAKLwsF,EAAsB1sF,UAAU2tF,qBAAuB,WACrD,IAAItpD,EAAMnkC,KAAKgtF,mBAGf,OADAhtF,KAAKgtF,mBAAqB,KACnB7oD,GAGTqoD,EAAsBjuF,KAAO,UAC7BiuF,EAAsBt2E,cAAgB,CACpCq2E,SAAU,IAGLC,EA/GT,CAgHEjzD,GAAA,MAKE,GAEJ,SAAUpwB,GAGR,SAASukF,IACP,IAAIjlF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOmvF,EAAqBnvF,KAC3BkK,EAiMT,OAvMA,gBAAUilF,EAAsBvkF,GAShCukF,EAAqB5tF,UAAU+vB,KAAO,WACpC7vB,KAAK2tF,OAAS,sBAGhBD,EAAqB5tF,UAAUoZ,OAAS,SAAU00E,EAAc54E,EAASoE,GAUnEw0E,IAAiB5tF,KAAK6tF,mBACxB7tF,KAAK8Z,SAGP9Z,KAAK6tF,kBAAoBD,EAEzB5tF,KAAK8tF,gBAAgBF,GAErB5tF,KAAK+tF,UAAUH,EAAcx0E,IAO/Bs0E,EAAqB5tF,UAAUguF,gBAAkB,SAAUF,GACzD,IAAIb,EAAoBa,EAAaH,uBAErC,GAAKV,EAAL,CAIA,IAAIiB,EAAQhuF,KAAK2tF,OACbM,EAAYjuF,KAAKkN,MAErB,UAAY6/E,GAAmB,SAAUrC,GACvC,IAAI7gF,EAAK,QAA8B6gF,EAAS7gF,GAAI,MAChDqkF,EAAmB,MAANrkF,EAAamkF,EAAMhjF,IAAInB,GAAM,KAC1CskF,EAAW,QAA8BzD,EAASyD,SAAU,MAC5DC,EAA6B,MAAZD,EAAmBH,EAAMhjF,IAAImjF,GAAYF,EAC1DI,EAAS3D,EAASnsF,KAClB+vF,EAAgB5D,EAAS5wF,MAEd,SAAXu0F,GAAqBC,GAGnB5D,EAAS6D,IAAM7D,EAAS6D,GAAG,KAC7BD,EAAcE,kBAAoBF,EAAchpF,aAAegpF,EAAcjhE,cAAgBihE,EAAchhE,MAAQ,MAIvH,IAAImhE,EAAoB/D,EAAS9kF,YAC7BmhC,EAAa2jD,EAAS3jD,WAE1B,GAAIunD,GAAiB,gBAAqBA,EAAeD,IAAUtnD,IAAc0nD,GAAoB,CACnG,IAAIC,EAAgB,gBAA8BJ,EAAeD,GAAQ,IAEpEtnD,GAAc2nD,EAAc3nD,aAC/BA,EAAa2jD,EAAS3jD,WAAa2nD,EAAc3nD,aAG9C0nD,GAAqBC,EAAc9oF,cACtC6oF,EAAoBC,EAAc9oF,aAKtC,IAAI+oF,EAAkBC,GAAmBlE,GAMzC,IAAI4C,EAAU5C,EAAS4C,SAAW,QAElB,UAAZA,EACFY,EAAaA,EAAW9vF,KAAKuwF,GAAmBE,GAAShlF,EAAIukF,EAAgBO,EAAiBX,GACzE,YAAZV,GACTwB,GAASZ,EAAYF,GACrBa,GAAShlF,EAAIukF,EAAgBO,EAAiBX,IACzB,WAAZV,GACTwB,GAASZ,EAAYF,GAGvB,IAAI3vF,EAAK2vF,EAAMhjF,IAAInB,GAEnB,GAAIxL,GAAMowF,EACR,GAAgB,UAAZnB,EAAqB,CACvB,IAAIyB,EAAsB1wF,EAAGolB,iBAC7BsrE,EAAsBA,EAAoB3wF,KAAKqwF,GAAqBpwF,EAAGuwB,eAAe,IAAI,QAAiB6/D,QACtF,YAAZnB,GACTjvF,EAAGuwB,eAAe,IAAI,QAAiB6/D,IAI3C,GAAIpwF,EAAI,CACN,IAAI2wF,EAAU,GAAM3wF,GACpB2wF,EAAQC,uBAAyBvE,EAAS/lF,MAC1CqqF,EAAQE,wBAA0BxE,EAAS7lF,OAC3CsqF,GAAa9wF,EAAIuvF,EAAclD,GAC/Bz7D,GAAA,oBAA6B,CAC3B5wB,GAAIA,EACJ+oB,eAAgBwmE,EAChBtmD,SAAUjpC,EAAGrE,KACbutC,kBAAmBmjD,EAASrhB,gBAUpCqkB,EAAqB5tF,UAAUiuF,UAAY,SAAUH,EAAcx0E,GAOjE,IANA,IAAIg2E,EAAYxB,EAAa74E,OAAOw3E,SAChC0B,EAAYjuF,KAAKkN,MACjB8gF,EAAQhuF,KAAK2tF,OACb0B,EAAWj2E,EAAIrH,WACfu9E,EAAYl2E,EAAIpH,YAEX5W,EAAI,EAAGA,EAAIg0F,EAAU10F,OAAQU,IAAK,CACzC,IAAIsvF,EAAW0E,EAAUh0F,GACrByO,EAAK,QAA8B6gF,EAAS7gF,GAAI,MAChDxL,EAAW,MAANwL,EAAamkF,EAAMhjF,IAAInB,GAAM,KAEtC,GAAKxL,GAAOA,EAAGmmC,QAAf,CAIA,IAAI53B,EAAWvO,EAAG4Q,OACdsgF,EAAe3iF,IAAaqhF,EAE5Be,EAAU,GAAM3wF,GAChBmxF,EAAgB,GAAM5iF,GAC1BoiF,EAAQS,iBAAmB,gBAAaT,EAAQC,uBAAwBM,EAAeF,EAAWG,EAAcC,mBAAqB,EACrIT,EAAQU,kBAAoB,gBAAaV,EAAQE,wBAAyBK,EAAeD,EAAYE,EAAcE,oBAAsB,GAI3I,IAASt0F,EAAIg0F,EAAU10F,OAAS,EAAGU,GAAK,EAAGA,IAAK,CAC1CsvF,EAAW0E,EAAUh0F,GACrByO,EAAK,QAA8B6gF,EAAS7gF,GAAI,MAChDxL,EAAW,MAANwL,EAAamkF,EAAMhjF,IAAInB,GAAM,KAEtC,GAAKxL,EAAL,CAIIuO,EAAWvO,EAAG4Q,OACdugF,EAAgB,GAAM5iF,GAD1B,IAEI+iF,EAAgB/iF,IAAaqhF,EAAY,CAC3CtpF,MAAO0qF,EACPxqF,OAAQyqF,GACN,CACF3qF,MAAO6qF,EAAcC,iBACrB5qF,OAAQ2qF,EAAcE,mBAMxB,QAA2BrxF,EAAIqsF,EAAUiF,EAAe,KAAM,CAC5DpB,GAAI7D,EAAS6D,GACbqB,aAAclF,EAASmF,cAS7BnC,EAAqB5tF,UAAUga,OAAS,WACtC,IAAIk0E,EAAQhuF,KAAK2tF,OACjBK,EAAM/vE,MAAK,SAAU5f,GACnBywF,GAASzwF,EAAI2vF,MAEfhuF,KAAK2tF,OAAS,sBAGhBD,EAAqB5tF,UAAUmU,QAAU,WACvCjU,KAAK8Z,UAGP4zE,EAAqBnvF,KAAO,UACrBmvF,EAxMT,CAyME,SAEF,SAASmB,GAAShlF,EAAIukF,EAAgB1D,EAAUsD,GAC9C,IAAI8B,EAAcpF,EAASnsF,KAM3B,IAAIwxF,EAAM,YAAc3D,GAA0B0D,GAEhD1D,GAAyB0D,GAAe7gE,GAAA,iBAA0B6gE,GAMpE,IAAIzxF,EAAK,IAAI0xF,EAAIrF,GACjB0D,EAAe3mF,IAAIpJ,GACnB2vF,EAAMliF,IAAIjC,EAAIxL,GACd,GAAMA,GAAI2xF,cAAgBnmF,EAG5B,SAASilF,GAASZ,EAAYF,GAC5B,IAAIiC,EAAgB/B,GAAcA,EAAWj/E,OAEzCghF,IACkB,UAApB/B,EAAW3vF,MAAoB2vF,EAAW3pD,UAAS,SAAUlmC,GAC3DywF,GAASzwF,EAAI2vF,MAEfA,EAAMkC,UAAU,GAAMhC,GAAY8B,eAClCC,EAAcniF,OAAOogF,IAKzB,SAASU,GAAmBlE,GAK1B,OAJAA,EAAW,YAAc,GAAIA,GAC7B,UAAY,CAAC,KAAM,WAAY,UAAW,KAAM,WAAY,eAAejvD,OAAO,UAA6B,SAAUzhC,UAChH0wF,EAAS1wF,MAEX0wF,EAGT,SAASyF,GAASC,EAAKC,GACrB,IAAIC,EAIJ,OAHA,UAAYD,GAAO,SAAUE,GACd,MAAbH,EAAIG,IAA+B,SAAdH,EAAIG,KAAqBD,GAAQ,MAEjDA,EAGT,SAASnD,GAAwBF,EAAYC,GAC3C,IAAIsD,EAAgBvD,EAAWwD,SAK/B,GAHAvD,EAAYrjF,GAAKojF,EAAWyD,QAAQ7mF,IACnCqjF,EAAY3uF,MAAQiyF,IAAkBtD,EAAY3uF,KAAOiyF,EAAcjyF,MAE5C,MAAxB2uF,EAAYiB,SAAkB,CAChC,IAAIwC,EAAoBzD,EAAYM,aAEhCmD,EACFzD,EAAYiB,SAAWwC,EAAkB9mF,GAChC2mF,IACTtD,EAAYiB,SAAWqC,EAAcrC,UAKzCjB,EAAYM,aAAe,KAG7B,SAASJ,GAAwBT,EAAW5sE,EAAOmtE,GAEjD,IAAI0D,EAAe,YAAc,GAAI1D,GACjCsD,EAAgB7D,EAAU5sE,GAC1ButE,EAAUJ,EAAYI,SAAW,QAErB,UAAZA,EACEkD,GAQF,WAAaA,EAAeI,GAAc,GAE1C,QAA4BJ,EAAeI,EAAc,CACvDC,YAAY,IAGd,QAA4B3D,EAAasD,IAEzC7D,EAAU5sE,GAAS6wE,EAEA,YAAZtD,EACTX,EAAU5sE,GAAS6wE,EACE,WAAZtD,GAETkD,IAAkB7D,EAAU5sE,GAAS,MAIzC,SAASstE,GAAqByD,EAAW5D,GACvC,GAAK4D,IAILA,EAAUvC,GAAKrB,EAAYqB,GAAK,CAChC4B,GAASjD,EAAa,CAAC,OAAQ,UAC/BiD,GAASjD,EAAa,CAAC,MAAO,YAEP,UAAnB4D,EAAUvyF,MAAkB,CAC9B,IAAIwyF,EAAmBD,EACnBE,EAAc9D,EACQ,MAA1B6D,EAAiBpsF,QAAkBosF,EAAiBpsF,MAAQqsF,EAAYrsF,MAAQ,GACrD,MAA3BosF,EAAiBlsF,SAAmBksF,EAAiBlsF,OAASmsF,EAAYnsF,OAAS,IAIvF,SAASsqF,GAAa9wF,EAAIuvF,EAAclD,GACtC,IAAItjD,EAAY,gBAAU/oC,GAAI+oC,UAEzB/oC,EAAGumB,QAAWvmB,EAAGqe,QAAW0qB,IAC/BA,EAAY,gBAAU/oC,GAAI+oC,UAAY,CACpCvnB,cAAe,UACfmZ,eAAgB40D,EAAa50D,eAC7Bh/B,KAAMqE,EAAGrE,OAMTotC,IACFA,EAAUppB,KAAO0sE,EAAS1sE,MAIvB,SAAS,GAAQtJ,GACtBA,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAChCnqB,EAAUuqB,qBAAqBotD,I,8BC3gB7B4E,GAAuB,CAAC,OAAQ,UAAW,OAAQ,SACxC,SAASC,GAAkBn8E,EAAQo8E,GAChD,IAAIC,EAAkB,gBAAiBr8E,EAASA,EAAO5R,MAAQ,IAE/D,GAAKiuF,EAAgB12F,OAArB,CAIA,IAAI22F,EAA8B,GAClC,UAAYD,GAAiB,SAAUE,GACrC,IAAIC,EAAMD,EAAS53B,eAAe,WAAa43B,EAASE,QAAU,GAE9DD,aAAe7gB,QACjB2gB,EAA8BA,EAA4B51D,OAAO81D,OAGrE,IAAIC,EAAUz8E,GAAUA,EAAOy8E,QAE3B,aAAeA,KACjBA,EAAUA,EAAQ,IAGfA,IACHA,EAAU,CACRC,QAAS,IAEX18E,EAAOy8E,QAAU,CAACA,IAGpB,IAAIE,EAAiBF,EAAQC,UAAYD,EAAQC,QAAU,IACvDE,EAAeD,EAAevuF,QAAUuuF,EAAevuF,MAAQ,IAC/DyuF,EAAaD,EAAapzF,OAASozF,EAAapzF,KAAO,IAC3DqzF,EAAWv2F,KAAKwZ,MAAM+8E,EAAYP,GAClCQ,GAAgBD,GAEZT,IAAUS,EAAWl3F,QACvBk3F,EAAWv2F,KAAKwZ,MAAM+8E,EAAYX,KAItC,SAASY,GAAgBC,GACvB,IAAIzuD,EAAM,GACV,UAAYyuD,GAAK,SAAUp0F,GACzB2lC,EAAI3lC,GAAO,KAEbo0F,EAAIp3F,OAAS,EACb,UAAY2oC,GAAK,SAAU0uD,EAAMr0F,GAC/Bo0F,EAAIz2F,KAAKqC,M,8BC9CN,SAASs0F,GAAiC9hC,GAC/C,IAAI2P,EAAY3P,EAAK2P,UAEjBxoD,EAAY,CACdgZ,MAAO,SAAUC,GACf,OAAO2hE,GAASpyB,GAAWxvC,MAAMC,EAAYjZ,EAAW64C,IAE1D9tD,KAAM,SAAUkuB,GACd,OAAO2hE,GAASpyB,GAAWz9D,KAAKkuB,EAAYjZ,EAAW64C,KAG3D,OAAO74C,EAET,IAAI46E,GAAW,CACbC,MAAOC,GAAiB,GACxBC,MAAOD,GAAiB,GACxB/vF,KAAM,CACJiuB,MAAO,SAAUC,EAAYjZ,EAAW64C,GACtC,OAAO5/B,GAAc4/B,EAAKpkB,aAAaW,QAAQnc,EAAW,GAAIA,EAAW,KAE3EluB,KAAM,SAAUkuB,EAAYjZ,EAAW64C,GACrC,OAAO5/B,GAAc4/B,EAAKpkB,aAAainB,UAAUziC,KAGrDwE,QAAS,CACPzE,MAAO,SAAUC,EAAYjZ,EAAW64C,GACtC,OAAO5/B,GAAc4/B,EAAKpkB,aAAaW,QAAQnc,EAAW,GAAIA,EAAW,KAAO,QAAuB4/B,EAAKxB,MAAOp+B,EAAW,GAAIA,EAAW,KAE/IluB,KAAM,SAAUkuB,EAAYjZ,EAAW64C,GACrC,IAAI/rC,EAAS+rC,EAAKxB,MAElB,IAAKp+B,GAAcnM,EAAOzpB,QAAU,EAClC,OAAO,EAGT,IAAI0F,EAAIkwB,EAAWlwB,EACfC,EAAIiwB,EAAWjwB,EACfsE,EAAQ2rB,EAAW3rB,MACnBE,EAASyrB,EAAWzrB,OACpB0nE,EAAIpoD,EAAO,GAEf,SAAI,QAAuBA,EAAQ/jB,EAAGC,IAAM,QAAuB8jB,EAAQ/jB,EAAIuE,EAAOtE,IAAM,QAAuB8jB,EAAQ/jB,EAAGC,EAAIwE,IAAW,QAAuBsf,EAAQ/jB,EAAIuE,EAAOtE,EAAIwE,IAAWunC,GAAA,KAAa3N,OAAOnO,GAAYmc,QAAQ8/B,EAAE,GAAIA,EAAE,KAAO,mCAAqBnsE,EAAGC,EAAGD,EAAIuE,EAAOtE,EAAG8jB,IAAW,mCAAqB/jB,EAAGC,EAAGD,EAAGC,EAAIwE,EAAQsf,IAAW,mCAAqB/jB,EAAIuE,EAAOtE,EAAGD,EAAIuE,EAAOtE,EAAIwE,EAAQsf,IAAW,mCAAqB/jB,EAAGC,EAAIwE,EAAQzE,EAAIuE,EAAOtE,EAAIwE,EAAQsf,UAAte,KAON,SAASguE,GAAiBE,GACxB,IAAIrgC,EAAK,CAAC,IAAK,KACXv+C,EAAK,CAAC,QAAS,UACnB,MAAO,CACL4c,MAAO,SAAUC,EAAYjZ,EAAW64C,GACtC,GAAI5/B,EAAY,CACd,IAAIo+B,EAAQwB,EAAKxB,MACb6d,EAAIj8C,EAAW+hE,GACnB,OAAOC,GAAY/lB,EAAG7d,KAG1BtsD,KAAM,SAAUkuB,EAAYjZ,EAAW64C,GACrC,GAAI5/B,EAAY,CACd,IAAIo+B,EAAQwB,EAAKxB,MACb6jC,EAAc,CAACjiE,EAAW0hC,EAAGqgC,IAAW/hE,EAAW0hC,EAAGqgC,IAAY/hE,EAAW7c,EAAG4+E,KAEpF,OADAE,EAAY,GAAKA,EAAY,IAAMA,EAAY72D,UACxC42D,GAAYC,EAAY,GAAI7jC,IAAU4jC,GAAYC,EAAY,GAAI7jC,IAAU4jC,GAAY5jC,EAAM,GAAI6jC,IAAgBD,GAAY5jC,EAAM,GAAI6jC,MAMvJ,SAASD,GAAY/lB,EAAG7d,GACtB,OAAOA,EAAM,IAAM6d,GAAKA,GAAK7d,EAAM,GAGtB,I,aCvEX8jC,GAAa,CAAC,UAAW,cACzBC,GAAkB,kBAClBC,GAAgB,yBAEb,SAASC,GAAa39E,GAC3BA,EAAQiS,cAAc,CACpBC,SAAU,UACT,SAAU0rE,GACX,IAAIC,EAAqBD,EAAWC,mBAAqB,IAAIC,GAAA,KAAmBF,EAAW79E,OAAQC,GACnG69E,EAAmBE,eAAeH,EAAWxyB,MAAOprD,MAOzC,SAASg+E,GAAYh+E,EAASoE,EAAKC,GAChD,IACI45E,EACAC,EAFAC,EAAgB,GAGpBn+E,EAAQiS,cAAc,CACpBC,SAAU,UACT,SAAU0rE,GACXv5E,GAA4B,qBAAjBA,EAAQ9a,MAA+Bq0F,EAAWQ,eAA+B,UAAhB/5E,EAAQ/a,IAAkB+a,EAAQg6E,YAAc,CAC1HxzB,WAAW,OAGf8yB,GAAa39E,GACbA,EAAQiS,cAAc,CACpBC,SAAU,UACT,SAAU0rE,EAAYU,GACvB,IAAIC,EAAoB,CACtBC,QAASZ,EAAW/oF,GACpBypF,WAAYA,EACZG,UAAWb,EAAW54F,KACtBomE,MAAO,WAAawyB,EAAWxyB,OAC/BvxB,SAAU,IAIZskD,EAAc93F,KAAKk4F,GACnB,IAAIF,EAAcT,EAAW79E,OACzB2+E,EAAYL,EAAYK,UACxBC,EAAkB,GAClBC,EAA2B,GAC3BC,EAAoB,GACpBC,GAAiB,EAEhBR,IAEHL,EAAeI,EAAYJ,aAC3BC,EAAgBG,EAAYH,eAI9B,IAAI9yB,EAAQ,SAAWwyB,EAAWxyB,OAAO,SAAUlQ,GACjD,IAAI6jC,EAAUC,GAAqB9jC,EAAK2P,WACpCo0B,EAAiB,cAAgB,CACnCnoD,aAAcioD,EAAUA,EAAQ7jC,QAAQ,GACvCA,GAEH,OADA+jC,EAAe58E,UAAY26E,GAAiCiC,GACrDA,KAELC,EAAiBC,GAAA,KAAoCvB,EAAW79E,OAAQy9E,IAAY,SAAU4B,GAChGA,EAAczlC,cAAgB,WAMhC,SAAS0lC,EAAWpvE,GAClB,MAAqB,QAAdyuE,KAAyBC,EAAgB1uE,GAKlD,SAASqvE,EAAQC,GACf,QAASA,EAAc75F,OAsBzB,SAAS85F,EAAcr7E,EAAa8L,GAClC,IAAI5P,EAAW8D,EAAY7D,iBAC3Bw+E,EAAiBA,GAAkBz+E,EAAS6nD,iBAC5Cm3B,EAAWpvE,IAAgB5P,EAASmhD,gBAAgBr9C,EAAYxD,WAAW,SAAU4gD,EAAan/C,GAChF,WAAhBm/C,IAA6Bq9B,EAAyBx8E,GAAa,MAIvE,SAASq9E,EAAYt7E,EAAa8L,EAAasvE,GAC7C,GAAKp7E,EAAYhC,gBAAiBu9E,GAAsB9B,EAAY3tE,KAIpE,UAAYm7C,GAAO,SAAUlQ,GACvB0iC,EAAWC,mBAAmB8B,cAAczkC,EAAM/2C,EAAanE,IACjEu/E,EAAcl5F,KAAK60D,GAGrB4jC,EAAiBA,GAAkBQ,EAAQC,MAGzCF,EAAWpvE,IAAgBqvE,EAAQC,IAAgB,CACrD,IAAIp9D,EAAShe,EAAYxD,UACzBwhB,EAAOlZ,MAAK,SAAU7G,GAChBw9E,GAAaz7E,EAAao7E,EAAep9D,EAAQ/f,KACnDw8E,EAAyBx8E,GAAa,OA1D9C,aAAes8E,IAAc,UAAYA,GAAW,SAAUzuE,GAC5D0uE,EAAgB1uE,GAAe,KA2BjCjQ,EAAQ+4B,YAAW,SAAU50B,EAAa8L,GACxC,IAAIsvE,EAAgBV,EAAkB5uE,GAAe,GAC7B,aAAxB9L,EAAYinB,QAAyBo0D,EAAcr7E,EAAa8L,GAAewvE,EAAYt7E,EAAa8L,EAAasvE,MAmCvHv/E,EAAQ+4B,YAAW,SAAU50B,EAAa8L,GACxC,IAAI4vE,EAAsB,CACxB/sD,SAAU3uB,EAAYtP,GACtBob,YAAaA,EACb8+B,WAAY5qC,EAAYnf,KACxBod,UAAW,IAIbm8E,EAAkB1kD,SAASxzC,KAAKw5F,GAChC,IAAIN,EAAgBV,EAAkB5uE,GAClCvP,EAAOyD,EAAYxD,UACnBm/E,EAAgBT,EAAWpvE,GAAe,SAAU7N,GACtD,OAAOw8E,EAAyBx8E,IAAcy9E,EAAoBz9E,UAAU/b,KAAKqa,EAAKokC,YAAY1iC,IAAa,WAAa,cAC1H,SAAUA,GACZ,OAAOw9E,GAAaz7E,EAAao7E,EAAe7+E,EAAM0B,IAAcy9E,EAAoBz9E,UAAU/b,KAAKqa,EAAKokC,YAAY1iC,IAAa,WAAa,eAGnJi9E,EAAWpvE,GAAe6uE,EAAiBQ,EAAQC,KAAmBJ,GAAA,KAA2B3B,GAAY0B,EAAgBx+E,EAAMo/E,SAGxIl1E,GAAexG,EAAK65E,EAAcC,EAAeC,EAAe95E,GAIlE,SAASuG,GAAexG,EAAK65E,EAAcC,EAAeC,EAAe95E,GASvE,GAAKA,EAAL,CAIA,IAAIw+D,EAAKz+D,EAAIwE,QAEb,IAAIi6D,EAAG6a,IAAP,CAIK7a,EAAG4a,MACN5a,EAAG4a,IAAmBsC,IAGxB,IAAIC,EAAK7vE,GAAA,KAA4B0yD,EAAI4a,GAAiBS,EAAeD,GACzE+B,EAAG57E,EAAK+5E,KAGV,SAAS4B,GAAW37E,EAAK+5E,GACvB,IAAK/5E,EAAI67E,aAAc,CACrB,IAAIpd,EAAKz+D,EAAIwE,QACbi6D,EAAG6a,KAAiB,EACpBt5E,EAAIwG,eAAe,CACjBrhB,KAAM,cACN22F,MAAO/B,IAETtb,EAAG6a,KAAiB,GAIxB,SAASkC,GAAaz7E,EAAao7E,EAAe7+E,EAAM0B,GACtD,IAAK,IAAIhc,EAAI,EAAGiP,EAAMkqF,EAAc75F,OAAQU,EAAIiP,EAAKjP,IAAK,CACxD,IAAI80D,EAAOqkC,EAAcn5F,GAEzB,GAAI+d,EAAYhC,cAAcC,EAAW1B,EAAMw6C,EAAK74C,UAAW64C,GAC7D,OAAO,GAKb,SAASwkC,GAAsB9B,EAAY3tE,GACzC,IAAIkwE,EAAgBvC,EAAW79E,OAAOkQ,YACtC,OAAwB,MAAjBkwE,GAA2C,QAAlBA,IAA4B,aAAeA,GAAiB,aAAeA,EAAelwE,GAAe,EAAIA,IAAgBkwE,GAG/J,IAAInB,GAAuB,CACzB5xF,KAAM,SAAU8tD,GACd,OAAOklC,GAA0BllC,EAAKxB,QAExC55B,QAAS,SAAUo7B,GAIjB,IAHA,IAAImlC,EACA3mC,EAAQwB,EAAKxB,MAERtzD,EAAI,EAAGiP,EAAMqkD,EAAMh0D,OAAQU,EAAIiP,EAAKjP,IAAK,CAChDi6F,EAASA,GAAU,CAAC,CAAC/+D,KAAWA,KAAW,CAACA,KAAWA,MACvD,IAAIg/D,EAAK5mC,EAAMtzD,GACfk6F,EAAG,GAAKD,EAAO,GAAG,KAAOA,EAAO,GAAG,GAAKC,EAAG,IAC3CA,EAAG,GAAKD,EAAO,GAAG,KAAOA,EAAO,GAAG,GAAKC,EAAG,IAC3CA,EAAG,GAAKD,EAAO,GAAG,KAAOA,EAAO,GAAG,GAAKC,EAAG,IAC3CA,EAAG,GAAKD,EAAO,GAAG,KAAOA,EAAO,GAAG,GAAKC,EAAG,IAG7C,OAAOD,GAAUD,GAA0BC,KAI/C,SAASD,GAA0BC,GACjC,OAAO,IAAIjpD,GAAA,KAAaipD,EAAO,GAAG,GAAIA,EAAO,GAAG,GAAIA,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAIA,EAAO,GAAG,GAAKA,EAAO,GAAG,ICxO5G,IAAI,GAEJ,SAAUlsF,GAGR,SAASosF,IACP,IAAI9sF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOg3F,EAAUh3F,KAChBkK,EAkET,OAxEA,gBAAU8sF,EAAWpsF,GASrBosF,EAAUz1F,UAAU+vB,KAAO,SAAU7a,EAASoE,GAC5CpZ,KAAKgV,QAAUA,EACfhV,KAAKoZ,IAAMA,EACXpZ,KAAKsc,OACJtc,KAAKs+D,iBAAmB,IAAIC,GAAA,KAAgBnlD,EAAIwE,UAAUC,GAAG,QAAS,UAAY7d,KAAKw+D,SAAUx+D,OAAOq/D,SAG3Gk2B,EAAUz1F,UAAUoZ,OAAS,SAAU05E,EAAY59E,EAASoE,EAAKC,GAC/DrZ,KAAKsc,MAAQs2E,EAEb5yF,KAAKqhC,kBAAkBuxD,EAAY59E,EAASoE,EAAKC,IAGnDk8E,EAAUz1F,UAAU04E,gBAAkB,SAAUoa,EAAY59E,EAASoE,EAAKC,GAIxEs5E,GAAa39E,GAEbhV,KAAKqhC,kBAAkBuxD,EAAY59E,EAASoE,EAAKC,IAGnDk8E,EAAUz1F,UAAU01F,aAAe,SAAU5C,EAAY59E,EAASoE,EAAKC,GACrErZ,KAAKw4E,gBAAgBoa,EAAY59E,EAASoE,EAAKC,IAGjDk8E,EAAUz1F,UAAU21F,WAAa,SAAU7C,EAAY59E,EAASoE,EAAKC,GACnErZ,KAAKqhC,kBAAkBuxD,EAAY59E,EAASoE,EAAKC,IAGnDk8E,EAAUz1F,UAAUuhC,kBAAoB,SAAUuxD,EAAY59E,EAASoE,EAAKC,KAExEA,GAAWA,EAAQq8E,QAAU9C,EAAW/oF,KAAO7J,KAAKs+D,iBAAiBiB,UAAUqzB,EAAWC,mBAAmB8C,cAAcv8E,IAAMwmD,YAAYgzB,EAAWS,aAAarzB,aAAa4yB,EAAWxyB,MAAM5lE,UAKvM+6F,EAAUz1F,UAAUmU,QAAU,WAC5BjU,KAAKs+D,iBAAiBrqD,WAGxBshF,EAAUz1F,UAAU0+D,SAAW,SAAU0B,GACvC,IAAI01B,EAAU51F,KAAKsc,MAAMzS,GACrBu2D,EAAQpgE,KAAKsc,MAAMu2E,mBAAmBgD,gBAAgB31B,EAAWE,MAAOpgE,KAAKgV,WAK/EkrD,EAAWK,OAASL,EAAWH,gBAAkB//D,KAAKoZ,IAAIwG,eAAe,CACzErhB,KAAM,QACNi1F,QAASoC,EACTx1B,MAAO,WAAaA,GACpBs1B,MAAOE,IAET11B,EAAWK,OAASvgE,KAAKoZ,IAAIwG,eAAe,CAC1CrhB,KAAM,WACNi1F,QAASoC,EACTx1B,MAAO,WAAaA,GACpBs1B,MAAOE,KAIXL,EAAUh3F,KAAO,QACVg3F,EAzET,CA0EE,SAEa,MC/EXO,GAA6B,OAE7B,GAEJ,SAAU3sF,GAGR,SAAS4sF,IACP,IAAIttF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAchE,OAZAyI,EAAMlK,KAAOw3F,EAAWx3F,KAKxBkK,EAAM23D,MAAQ,GAMd33D,EAAM4qF,YAAc,GACb5qF,EAqET,OAtFA,gBAAUstF,EAAY5sF,GAoBtB4sF,EAAWj2F,UAAUg4B,cAAgB,SAAUwhC,EAAW5kC,GACxD,IAAI6kC,EAAav5D,KAAK+U,QACrB2f,GAAUy/D,GAAA,KAAmC56B,EAAYD,EAAW,CAAC,UAAW,eACjF,IAAI08B,EAAUz8B,EAAWy8B,QAAUz8B,EAAWy8B,SAAW,GAEzDz8B,EAAW08B,WAAa18B,EAAW08B,YAAc,CAC/CzrF,MAAOsrF,IAGJE,EAAQt8B,eAAe,WAG1Bs8B,EAAQE,MAAQ,IAQpBH,EAAWj2F,UAAUq2F,SAAW,SAAU/1B,GAWnCA,IAILpgE,KAAKogE,MAAQ,SAAWA,GAAO,SAAUlQ,GACvC,OAAOkmC,GAAoBp2F,KAAK+U,OAAQm7C,KACvClwD,QAOL+1F,EAAWj2F,UAAUszF,eAAiB,SAAUC,GAC9CrzF,KAAKqzF,YAAc+C,GAAoBp2F,KAAK+U,OAAQs+E,GACpDrzF,KAAK6/D,UAAY7/D,KAAKqzF,YAAYxzB,WAGpCk2B,EAAWx3F,KAAO,QAClBw3F,EAAWx+E,aAAe,CAAC,MAAO,OAAQ,QAAS,QAAS,WAAY,UACxEw+E,EAAW7/E,cAAgB,CACzB+O,YAAa,MACb46C,UAAW,OACXw2B,UAAW,SACXC,eAAe,EACfx2B,WAAY,CACVjoD,YAAa,EACbrN,MAAO,wBACPoN,YAAa,WAEfq7E,aAAc,UACdC,cAAe,EACfnzB,eAAe,EACf3pD,EAAG,KAEE2/E,EAvFT,CAwFEx8D,GAAA,MAEF,SAAS68D,GAAoBrhF,EAAQs+E,GACnC,OAAO,WAAa,CAClBxzB,UAAW9qD,EAAO8qD,UAClBw2B,UAAWthF,EAAOshF,UAClBC,cAAevhF,EAAOuhF,cACtBx2B,WAAY,IAAI/mC,GAAA,KAAMhkB,EAAO+qD,YAAYhkD,eACzCikD,cAAehrD,EAAOgrD,cACtB3pD,EAAGrB,EAAOqB,GACTi9E,GAAa,GAGH,U,aC3GXkD,GAAa,CAAC,OAAQ,UAAW,QAAS,QAAS,OAAQ,SAE3D,GAEJ,SAAUptF,GAGR,SAASqtF,IACP,OAAkB,OAAXrtF,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KA2F7D,OA9FA,gBAAUw2F,EAAcrtF,GAMxBqtF,EAAa12F,UAAUoZ,OAAS,SAAUu9E,EAAczhF,EAASoE,GAC/D,IAAIymD,EACAw2B,EACAK,EACJ1hF,EAAQiS,cAAc,CACpBC,SAAU,UACT,SAAU0rE,GACX/yB,EAAY+yB,EAAW/yB,UACvBw2B,EAAYzD,EAAWS,YAAYgD,WAAa,SAChDK,EAAYA,KAAe9D,EAAWxyB,MAAM1lE,UAE9CsF,KAAK22F,WAAa92B,EAClB7/D,KAAK42F,WAAaP,EAClB,UAAYI,EAAazrF,IAAI,QAAQ,IAAO,SAAUzM,GACpDk4F,EAAaI,cAAct4F,GAAgB,SAATA,EAAgC,aAAd83F,EAAoC,UAAT93F,EAAmBm4F,EAAYn4F,IAASshE,GAAa,WAAa,cAIrJ22B,EAAa12F,UAAU21F,WAAa,SAAUgB,EAAczhF,EAASoE,GACnEpZ,KAAKkZ,OAAOu9E,EAAczhF,EAASoE,IAGrCo9E,EAAa12F,UAAUg3F,SAAW,WAChC,IAAIx6E,EAAQtc,KAAKsc,MACby6E,EAAiBz6E,EAAMtR,IAAI,QAAQ,GACnCgsF,EAAQ,GAMZ,OALA,UAAY16E,EAAMtR,IAAI,QAAQ,IAAO,SAAUzM,GACzCw4F,EAAex4F,KACjBy4F,EAAMz4F,GAAQw4F,EAAex4F,OAG1By4F,GAKTR,EAAa12F,UAAU2jD,QAAU,SAAUzuC,EAASoE,EAAK7a,GACvD,IAAIshE,EAAY7/D,KAAK22F,WACjBN,EAAYr2F,KAAK42F,WAER,UAATr4F,GAEF6a,EAAIwG,eAAe,CACjBrhB,KAAM,iBACN4/D,UAAW,KAEb/kD,EAAIwG,eAAe,CACjBrhB,KAAM,QACN04F,QAAS,QAET72B,MAAO,MAGThnD,EAAIwG,eAAe,CACjBrhB,KAAM,mBACND,IAAK,QACL+0F,YAAa,CACXxzB,UAAoB,SAATthE,EAAkBshE,EAAYA,IAActhE,GAAeA,EACtE83F,UAAoB,SAAT93F,EAAgC,aAAd83F,EAA2B,SAAW,WAAaA,MAQxFG,EAAaU,iBAAmB,SAAUliF,GACxC,IAAIkB,EAAgB,CAClBsb,MAAM,EACNjzB,KAAMg4F,GAAW/7F,QACjB28F,KAAM,CAEJ/0F,KAAM,iQACN0yB,QAAS,ubACTo9D,MAAO,iNACPE,MAAO,gMACPgF,KAAM,4KACNljF,MAAO,0MAMTmjF,MAAOriF,EAAQsiF,UAAU,CAAC,UAAW,QAAS,WAEhD,OAAOphF,GAGFsgF,EA/FT,CAgGE,SAEae,GAAA,GClGR,SAAS,GAAQ7iF,GACtBA,EAAUmqB,sBAAsB,IAChCnqB,EAAUkqB,uBAAuB,IACjClqB,EAAUuqB,qBAAqBiyD,IAC/Bx8E,EAAUoqB,eAAepqB,EAAU8R,SAASC,OAAOo6C,MAAOmyB,IAC1Dt+E,EAAUsS,eAAe,CACvBzoB,KAAM,QACN6mB,MAAO,QACPpb,OAAQ,iBACP,SAAUqP,EAASrE,GACpBA,EAAQiS,cAAc,CACpBC,SAAU,QACVC,MAAO9N,IACN,SAAUu5E,GACXA,EAAWuD,SAAS98E,EAAQ+mD,aAyBhC1rD,EAAUsS,eAAe,CACvBzoB,KAAM,cACN6mB,MAAO,gBACPpb,OAAQ,SACP,eACH0K,EAAUsS,eAAe,CACvBzoB,KAAM,WACN6mB,MAAO,WACPpb,OAAQ,SACP,eACH,gBAAgB,QAASutF,I,8BCvDZ,SAASC,GAAoBC,EAAYzgE,GACtD,IAAKygE,EACH,OAAO,EAKT,IAFA,IAAIC,EAAe,qBAAQD,GAAcA,EAAa,CAACA,GAE9Ch6E,EAAM,EAAGA,EAAMi6E,EAAah9F,OAAQ+iB,IAC3C,GAAIi6E,EAAaj6E,IAAQi6E,EAAaj6E,GAAKuZ,GACzC,OAAO,EAIX,OAAO,E,8BCNT,SAAS2gE,GAAU//D,GACjB,gBAAgBA,EAAK,QAAS,CAAC,SAIjC,IAAI,GAAQ,kBAER,GAEJ,SAAUzuB,GAGR,SAASyuF,IACP,IAAInvF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAQhE,OANAyI,EAAMlK,KAAOq5F,EAAYr5F,KAKzBkK,EAAMovF,eAAgB,EACfpvF,EAoHT,OA/HA,gBAAUmvF,EAAazuF,GAkBvByuF,EAAY93F,UAAU+vB,KAAO,SAAU9a,EAAQsgB,EAAargB,GAO1DhV,KAAKwuC,qBAAqBz5B,EAAQC,GAElChV,KAAK83F,aAAa/iF,EAAQC,GAAS,GAAO,IAG5C4iF,EAAY93F,UAAU4a,mBAAqB,WACzC,GAAIq9E,GAAA,KAAItoD,KACN,OAAO,EAGT,IAAIuoD,EAAah4F,KAAKi4F,aACtB,OAAOj4F,KAAK+iB,WAAW,cAAgBi1E,GAAcA,EAAWt9E,sBAOlEk9E,EAAY93F,UAAU+wB,YAAc,SAAUqnE,EAAQljF,GACpDhV,KAAK83F,aAAaI,EAAQljF,GAAS,GAAO,IAG5C4iF,EAAY93F,UAAUg4F,aAAe,SAAUI,EAAQljF,EAAS6iF,EAAenjE,GAC7E,IAAI7U,EAAgB7f,KAAKknB,SAEpB2wE,GACH7iF,EAAQ+4B,YAAW,SAAU50B,GAE3B,IAAIg/E,EAAYh/E,EAAYnO,IAAIhL,KAAKknB,UAAU,GAC3CkxE,EAAc,GAAMj/E,GAAa0G,GAEhCs4E,GAAcA,EAAUziF,MAKxB0iF,EA4BHA,EAAYN,aAAaK,EAAWnjF,GAAS,IA3BzC0f,GAEFijE,GAAUQ,GAGZ,UAAYA,EAAUziF,MAAM,SAAUzC,GAEhCA,aAAgBy9D,OAClBinB,GAAU1kF,EAAK,IACf0kF,GAAU1kF,EAAK,KAEf0kF,GAAU1kF,MAGdmlF,EAAcp4F,KAAKq4F,4BAA4BF,EAAWn4F,KAAMgV,GAIhE,YAAcojF,EAAa,CACzBlxE,SAAUlnB,KAAKknB,SAEfjC,YAAa9L,EAAY8L,YACzBjrB,KAAMmf,EAAYnf,KAClB69F,eAAe,IAEjBO,EAAYH,aAAe9+E,GAK7B,GAAMA,GAAa0G,GAAiBu4E,GAnClC,GAAMj/E,GAAa0G,GAAiB,OAoCrC7f,OAIP43F,EAAY93F,UAAUy2B,cAAgB,SAAUnf,EAAWof,EAAgBC,GACzE,IAAI/gB,EAAO1V,KAAK2V,UACZ3M,EAAQhJ,KAAK0jB,YAAYtM,GACzBkwB,EAAW5xB,EAAK4T,QAAQlS,GAC5B,OAAO,gBAAoB,UAAW,CACpCyf,OAAQ72B,KAAKhG,KACb+8B,OAAQ,CAAC,gBAAoB,YAAa,CACxC/8B,KAAMstC,EACNt+B,MAAOA,EACPsvF,QAAShxD,EACT6U,QAAkB,MAATnzC,QAKf4uF,EAAY93F,UAAU6V,QAAU,WAC9B,OAAO3V,KAAKua,OAGdq9E,EAAY93F,UAAUgrC,QAAU,SAAUp1B,GACxC1V,KAAKua,MAAQ7E,GAGfkiF,EAAYW,yBAA2B,SAAUp/E,EACjD0G,GACE,OAAO,GAAM1G,GAAa0G,IAG5B+3E,EAAYr5F,KAAO,SACnBq5F,EAAYrgF,aAAe,CAAC,SAAU,OAAQ,QAAS,OAChDqgF,EAhIT,CAiIEr+D,GAAA,MAEF,WAAa,GAAa,QAAgBz5B,WAC3B,UClJX,GAEJ,SAAUqJ,GAGR,SAASqvF,IACP,IAAI/vF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOi6F,EAAej6F,KACrBkK,EA+BT,OArCA,gBAAU+vF,EAAgBrvF,GAS1BqvF,EAAe14F,UAAUu4F,4BAA8B,SAAUF,EAAWM,EAAmBzjF,GAC7F,OAAO,IAAIwjF,EAAeL,EAAWM,EAAmBzjF,IAG1DwjF,EAAej6F,KAAO,YACtBi6F,EAAetiF,cAAgB,CAC7BC,OAAQ,EACRC,EAAG,EACHuzB,OAAQ,MACR3V,WAAY,GAGZq1C,QAAS,CACPqvB,QAAS,QAEXl1E,MAAO,CACLgO,MAAM,EACN1H,SAAU,UAEZ7R,UAAW,CACTJ,YAAa,GAEf0Z,SAAU,CACR/N,MAAO,CACLgO,MAAM,KAILgnE,EAtCT,CAuCE,IAEa,M,0BC1Cf,SAASG,GAAQ1lF,GACf,QAAS9Q,MAAM0R,WAAWZ,EAAK7S,KAAO+B,MAAM0R,WAAWZ,EAAK5S,KAG9D,SAASu4F,GAAS3lF,GAChB,OAAQ9Q,MAAM0R,WAAWZ,EAAK7S,MAAQ+B,MAAM0R,WAAWZ,EAAK5S,IAyB9D,SAASw4F,GAA+B7hE,EAAYthB,EAAMojF,EAAcC,EAAeC,EAAiBC,GACtG,IAAIC,EAAW,GACXC,EAAU,gBAAmBzjF,EAAMqjF,GAGnCK,EAAcD,EAAUzjF,EAAK2jF,mBAAmB,wBAA0BN,EAC1E/vF,EAAQswF,GAAa5jF,EAAM0jF,EAAapiE,GACxC5f,EAAY1B,EAAK6jF,iBAAiBH,EAAapwF,GAAO,GAC1DkwF,EAASF,GAAmBtjF,EAAK1K,IAAI8tF,EAAc1hF,GACnD8hF,EAASD,GAAoBvjF,EAAK1K,IAAIouF,EAAahiF,GACnD,IAAIoiF,EAAgB9jF,EAAK1K,IAAI+tF,EAAe3hF,GAExCqiF,EAAY38D,GAAA,KAAwBpnB,EAAK1K,IAAI+tF,EAAe3hF,IAOhE,OANAqiF,EAAY18F,KAAKyb,IAAIihF,EAAW,IAE5BA,GAAa,IACfP,EAASD,IAAqBC,EAASD,GAAkBpqF,QAAQ4qF,IAG5D,CAACP,EAAUM,GAIpB,IAAIE,GAAuB,CACzBlhF,IAAK,mBAAMqgF,GAAgC,OAC3CvgF,IAAK,mBAAMugF,GAAgC,OAC3Cc,QAAS,mBAAMd,GAAgC,WAC/C9sB,OAAQ,mBAAM8sB,GAAgC,WAYzC,SAASe,GAAczgF,EAAalG,GACzC,IAAIyC,EAAOyD,EAAYxD,UACnBN,EAAW8D,EAAY7D,iBAK3B,GAAIrC,IAAS2lF,GAAS3lF,KAAU,qBAAQA,EAAKyF,QAAUrD,EAAU,CAC/D,IAAIwkF,EAAOxkF,EAAS2gB,WAChB8jE,EAAWC,GAAY9mF,EAAMyC,EAAML,EAAU8D,GAKjD,GAFAlG,EAAO,mBAAMA,GAETA,EAAK1U,MAAQm7F,GAAqBzmF,EAAK1U,OAASu7F,EAASjhF,UAAYihF,EAAStc,UAAW,CAC3F,IAAIwb,EAAkB,qBAAQa,EAAMC,EAASjhF,SAAS2B,KAClDy+E,EAAmB,qBAAQY,EAAMC,EAAStc,UAAUhjE,KACpDw/E,EAAYN,GAAqBzmF,EAAK1U,MAAMmX,EAAMokF,EAASG,YAAaH,EAASI,aAAclB,EAAiBC,GACpHhmF,EAAKyF,MAAQshF,EAAU,GAGvB/mF,EAAKjK,MAAQgxF,EAAU,OAClB,CAIL,IAFA,IAAIthF,EAAQ,CAAe,MAAdzF,EAAKknF,MAAgBlnF,EAAKknF,MAAQlnF,EAAKmnF,WAA0B,MAAdnnF,EAAKonF,MAAgBpnF,EAAKonF,MAAQpnF,EAAKqnF,WAE9Fl/F,EAAI,EAAGA,EAAI,EAAGA,IACjBs+F,GAAqBhhF,EAAMtd,MAC7Bsd,EAAMtd,GAAKk+F,GAAa5jF,EAAMA,EAAKwI,aAAa27E,EAAKz+F,IAAKsd,EAAMtd,KAIpE6X,EAAKyF,MAAQA,GAIjB,OAAOzF,EAEF,SAAS8mF,GAAY9mF,EAAMyC,EAAML,EAAU8D,GAChD,IAAI/c,EAAM,GAcV,OAZuB,MAAnB6W,EAAKsnF,YAAuC,MAAjBtnF,EAAK4U,UAClCzrB,EAAI89F,aAAkC,MAAnBjnF,EAAKsnF,WAAqB7kF,EAAKgkC,aAAazmC,EAAKsnF,YAActnF,EAAK4U,SACvFzrB,EAAIohF,UAAYnoE,EAAS2gD,QAAQwkC,GAAkBrhF,EAAa/c,EAAI89F,eACpE99F,EAAIyc,SAAWxD,EAAS6M,aAAa9lB,EAAIohF,WACzCphF,EAAI69F,YAAcvkF,EAAKwI,aAAa9hB,EAAIyc,SAAS2B,OAEjDpe,EAAIyc,SAAWM,EAAYpD,cAC3B3Z,EAAIohF,UAAYnoE,EAAS6M,aAAa9lB,EAAIyc,UAC1Czc,EAAI69F,YAAcvkF,EAAKwI,aAAa9hB,EAAIyc,SAAS2B,KACjDpe,EAAI89F,aAAexkF,EAAKwI,aAAa9hB,EAAIohF,UAAUhjE,MAG9Cpe,EAGT,SAASo+F,GAAkBrhF,EAAashF,GACtC,IAAI/kF,EAAOyD,EAAYxD,UACnBqgB,EAAatgB,EAAKsgB,WACtBykE,EAAU/kF,EAAKgkC,aAAa+gD,GAE5B,IAAK,IAAIr/F,EAAI,EAAGA,EAAI46B,EAAWt7B,OAAQU,IAAK,CAC1C,IAAIs/F,EAAUhlF,EAAKilF,iBAAiB3kE,EAAW56B,IAE/C,GAAIs/F,EAAQ1gG,OAASygG,EACnB,OAAOC,EAAQE,UAUd,SAAS,GAChBvlF,EAAUpC,GAER,QAAOoC,GAAYA,EAASwlF,aAAe5nF,EAAKyF,QAAUigF,GAAQ1lF,KAAQoC,EAASwlF,YAAY5nF,EAAKyF,OAE/F,SAAS,GAAezF,EAAM6iD,EAAS1+C,EAAWkjE,GAEvD,OAAIA,EAAW,EACNrnE,EAAKyF,OAASzF,EAAKyF,MAAM4hE,GAG3BrnE,EAAKjK,MAEP,SAASswF,GAAa5jF,EAAMwkF,EAAc37F,GAC/C,GAAa,YAATA,EAAoB,CACtB,IAAIu8F,EAAQ,EACRC,EAAU,EAOd,OANArlF,EAAKuI,KAAKi8E,GAAc,SAAUx8F,EAAK+f,GAChCtb,MAAMzE,KACTo9F,GAASp9F,EACTq9F,QAGGD,EAAQC,EACV,MAAa,WAATx8F,EACFmX,EAAKslF,UAAUd,GAGfxkF,EAAK6S,cAAc2xE,GAAuB,QAAT37F,EAAiB,EAAI,GC1KjE,IAAI,GAAQ,kBAER,GAEJ,SAAU4K,GAGR,SAAS8xF,IACP,IAAIxyF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO08F,EAAW18F,KACjBkK,EA6CT,OAnDA,gBAAUwyF,EAAY9xF,GAStB8xF,EAAWn7F,UAAU+vB,KAAO,WAC1B7vB,KAAKk7F,eAAiB,8BAGxBD,EAAWn7F,UAAUoZ,OAAS,SAAUk/E,EAAapjF,EAASoE,GAC5D,IAAI3Q,EAAQzI,KAERk7F,EAAiBl7F,KAAKk7F,eAC1BA,EAAej9E,MAAK,SAAUhL,GAC5B,GAAMA,GAAMmkF,MAAO,KAErBpiF,EAAQ+4B,YAAW,SAAU50B,GAC3B,IAAIi/E,EAAc,GAAYG,yBAAyBp/E,EAAa1Q,EAAMlK,MAC1E65F,GAAe3vF,EAAM0yF,aAAahiF,EAAai/E,EAAapjF,EAASoE,MAEvE8hF,EAAej9E,MAAK,SAAUhL,IAC3B,GAAMA,GAAMmkF,MAAQ3uF,EAAMyE,MAAMY,OAAOmF,EAAK/F,WAIjD+tF,EAAWn7F,UAAUs7F,SAAW,SAAUC,GACxC,GAAMA,GAAWjE,MAAO,GAG1B6D,EAAWn7F,UAAUw7F,WAAa,SAAUC,GAC1C,IAAI9yF,EAAQzI,KAEZ,kBAAKu7F,GAAiB,SAAUpiF,GAC9B,IAAIi/E,EAAc,GAAYG,yBAAyBp/E,EAAa1Q,EAAMlK,MAE1E,GAAI65F,EAAa,CACf,IAAI1iF,EAAO0iF,EAAYziF,UACvBD,EAAK2K,mBAAkB,SAAUhiB,GAC3BA,GACF,gBAAUA,WAOpB48F,EAAW18F,KAAO,SACX08F,EApDT,CAqDE,SAEa,M,aCtDf,SAASO,GAAmBC,EAAQtiF,EAAaC,GAC/C,IAAI/D,EAAW8D,EAAY7D,iBAC3BmmF,EAAOx9E,MAAK,SAAUR,GACpB,IACI4S,EADArU,EAAYy/E,EAAOx/E,aAAawB,GAEhCi+E,EAAM5+D,GAAA,KAAwB9gB,EAAUhR,IAAI,KAAMoO,EAAIrH,YACtD4pF,EAAM7+D,GAAA,KAAwB9gB,EAAUhR,IAAI,KAAMoO,EAAIpH,aAE1D,GAAK7P,MAAMu5F,IAASv5F,MAAMw5F,IAGrB,GAAIxiF,EAAY/D,kBAEjBib,EAAQlX,EAAY/D,kBAAkBqmF,EAAOpkE,UAAUokE,EAAOzlE,WAAYvY,SACrE,GAAIpI,EAAU,CACnB,IAAIjV,EAAIq7F,EAAOzwF,IAAIqK,EAAS2gB,WAAW,GAAIvY,GACvCpd,EAAIo7F,EAAOzwF,IAAIqK,EAAS2gB,WAAW,GAAIvY,GAC3C4S,EAAQhb,EAASG,YAAY,CAACpV,EAAGC,UARnCgwB,EAAQ,CAACqrE,EAAKC,GAYXx5F,MAAMu5F,KACTrrE,EAAM,GAAKqrE,GAGRv5F,MAAMw5F,KACTtrE,EAAM,GAAKsrE,GAGbF,EAAO3yE,cAAcrL,EAAK4S,MAI9B,IAAI,GAEJ,SAAUlnB,GAGR,SAASyyF,IACP,IAAInzF,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOq9F,EAAcr9F,KACpBkK,EA6ET,OAnFA,gBAAUmzF,EAAezyF,GASzByyF,EAAc97F,UAAU04E,gBAAkB,SAAUqjB,EAAgB7mF,EAASoE,GAC3EpE,EAAQ+4B,YAAW,SAAU50B,GAC3B,IAAI2iF,EAAU,GAAYvD,yBAAyBp/E,EAAa,aAE5D2iF,IACFN,GAAmBM,EAAQnmF,UAAWwD,EAAaC,GACnDpZ,KAAKk7F,eAAelwF,IAAImO,EAAYtP,IAAI6qE,kBAEzC10E,OAGL47F,EAAc97F,UAAUq7F,aAAe,SAAUhiF,EAAa2iF,EAAS9mF,EAASoE,GAC9E,IAAI/D,EAAW8D,EAAY7D,iBACvBwyB,EAAW3uB,EAAYtP,GACvBkyF,EAAa5iF,EAAYxD,UACzBqmF,EAAgBh8F,KAAKk7F,eACrBe,EAAaD,EAAchxF,IAAI88B,IAAak0D,EAAclwF,IAAIg8B,EAAU,IAAIo0D,GAAA,MAC5ET,EAASU,GAAW9mF,EAAU8D,EAAa2iF,GAE/CA,EAAQhxD,QAAQ2wD,GAChBD,GAAmBM,EAAQnmF,UAAWwD,EAAaC,GACnDqiF,EAAOx9E,MAAK,SAAUR,GACpB,IAAIzB,EAAYy/E,EAAOx/E,aAAawB,GAChCksB,EAAS3tB,EAAU+G,WAAW,UAC9BiR,EAAahY,EAAU+G,WAAW,cAClCsR,EAAerY,EAAU+G,WAAW,gBAExC,GAAI,wBAAW4mB,IAAW,wBAAW3V,IAAe,wBAAWK,GAAe,CAC5E,IAAIpV,EAAS68E,EAAQp4E,YAAYjG,GAC7B2+E,EAAaN,EAAQ7qE,cAAcxT,GAEnC,wBAAWksB,KACbA,EAASA,EAAO1qB,EAAQm9E,IAGtB,wBAAWpoE,KAEbA,EAAaA,EAAW/U,EAAQm9E,IAG9B,wBAAW/nE,KACbA,EAAeA,EAAapV,EAAQm9E,IAIxC,IAAItiG,EAAQkiB,EAAUd,SAAS,aAAaY,eACxCtR,EAAQ,gBAAkBuxF,EAAY,SAErCjiG,EAAMgE,OACThE,EAAMgE,KAAO0M,GAGfixF,EAAO18D,cAActhB,EAAK,CACxBksB,OAAQA,EACR3V,WAAYA,EACZK,aAAcA,EACdv6B,MAAOA,OAIXmiG,EAAWptE,WAAW4sE,GACtBz7F,KAAKkN,MAAMzF,IAAIw0F,EAAW/uF,OAG1BuuF,EAAOp7E,mBAAkB,SAAUhiB,GACjCA,EAAGkmC,UAAS,SAAUr1B,GACpB,gBAAUA,GAAOmtF,UAAYP,QAGjC97F,KAAKo7F,SAASa,GACdA,EAAW/uF,MAAM0X,OAASk3E,EAAQ9wF,IAAI,WAAamO,EAAYnO,IAAI,WAGrE4wF,EAAcr9F,KAAO,YACdq9F,EApFT,CAqFE,IAEF,SAASO,GAAW9mF,EAAU8D,EAAa2iF,GACzC,IAAIQ,EAGFA,EADEjnF,EACe,iBAAIA,GAAYA,EAAS2gB,YAAY,SAAU4kE,GAC9D,IAAI58E,EAAO7E,EAAYxD,UAAUglF,iBAAiBxhF,EAAYxD,UAAUuI,aAAa08E,KAAc,GAEnG,OAAO,sBAAS,CACd5gG,KAAM4gG,GACL58E,MAGY,CAAC,CAChBhkB,KAAM,QACNuE,KAAM,UAIV,IAAIk9F,EAAS,IAAIxgD,GAAA,KAAKqhD,EAAgBR,GAClCS,EAAU,iBAAIT,EAAQ9wF,IAAI,QAAS,mBAAM,GAA4BmO,IASzE,OAPI9D,IACFknF,EAAU,oBAAOA,EAAS,mBAAM,GAAyBlnF,KAG3DomF,EAAOvgD,SAASqhD,EAAS,KAAMlnF,EAAW,GAA8B,SAAUpC,GAChF,OAAOA,EAAKjK,QAEPyyF,EAGM,UCnLR,SAAS,GAAQ/mF,GACtBA,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAChCnqB,EAAUuqB,sBAAqB,SAAUrH,GACnC4/D,GAAoB5/D,EAAIjE,OAAQ,eAElCiE,EAAI4kE,UAAY5kE,EAAI4kE,WAAa,OCYvC,IAAI,GAEJ,SAAUrzF,GAGR,SAASszF,IACP,IAAIh0F,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOk+F,EAAcl+F,KACpBkK,EAqCT,OA3CA,gBAAUg0F,EAAetzF,GASzBszF,EAAc38F,UAAUu4F,4BAA8B,SAAUF,EAAWM,EAAmBzjF,GAC5F,OAAO,IAAIynF,EAActE,EAAWM,EAAmBzjF,IAGzDynF,EAAcl+F,KAAO,WACrBk+F,EAAcvmF,cAAgB,CAC5BC,OAAQ,EACRC,EAAG,EACHuzB,OAAQ,CAAC,SAAU,SACnB3V,WAAY,CAAC,EAAG,IAEhBkpD,aAAc,EACduc,UAAW,EACXpwB,QAAS,CACPqvB,QAAS,QAEXl1E,MAAO,CACLgO,MAAM,EACN1H,SAAU,MACV62B,SAAU,GAEZxuB,UAAW,CACT5zB,KAAM,UAERgzB,SAAU,CACR/N,MAAO,CACLgO,MAAM,GAERW,UAAW,CACTxtB,MAAO,IAGXiuB,gBAAiB,UAEZ6pE,EA5CT,CA6CE,IAEa,MCvCX,GAAQ,kBAERC,GAAoB,SAAUvjF,EAAa9D,EAAUsnF,EAAS1pF,GAChE,IACI2pF,EADAlnF,EAAOyD,EAAYxD,UAGvB,GAAK,qBAAQ1C,GAuDX2pF,EAAY3pF,MAvDM,CAElB,IAAI4pF,EAAS5pF,EAAK1U,KAElB,GAAe,QAAXs+F,GAA+B,QAAXA,GAA+B,YAAXA,GAAmC,WAAXA,GAInD,MAAd5pF,EAAKknF,OAA+B,MAAdlnF,EAAKonF,MAAe,CAC3C,IAAI7c,OAAY,EACZx0E,OAAQ,EAEZ,GAAkB,MAAdiK,EAAKonF,OAA+B,MAAdpnF,EAAKknF,MAC7B3c,EAAYnoE,EAAS2gD,QAAsB,MAAd/iD,EAAKonF,MAAgB,IAAM,KACxDrxF,EAAQ,sBAASiK,EAAKonF,MAAOpnF,EAAKknF,WAC7B,CACL,IAAIL,EAAW,GAAyB7mF,EAAMyC,EAAML,EAAU8D,GAC9DqkE,EAAYsc,EAAStc,UACrB,IAAI0c,EAAe,gBAAoBxkF,EAAMokF,EAASI,cACtDlxF,EAAQ,GAA0B0M,EAAMwkF,EAAc2C,GAGxD,IAAItC,EAA+B,MAAlB/c,EAAUhjE,IAAc,EAAI,EACzCsiF,EAAY,EAAIvC,EAEhBwC,EAAS,mBAAM9pF,GACf+pF,EAAO,CACTtkF,MAAO,IAETqkF,EAAOx+F,KAAO,KACdw+F,EAAOrkF,MAAQ,GACfqkF,EAAOrkF,MAAMokF,IAAcxmE,IAC3B0mE,EAAKtkF,MAAMokF,GAAaxmE,IACxB,IAAImjE,EAAYkD,EAAQ3xF,IAAI,aAExByuF,GAAa,GAAsB,kBAAVzwF,IAC3BA,GAASA,EAAM6F,QAAQ9R,KAAKyb,IAAIihF,EAAW,MAG7CsD,EAAOrkF,MAAM6hF,GAAcyC,EAAKtkF,MAAM6hF,GAAcvxF,EACpD4zF,EAAY,CAACG,EAAQC,EAAM,CACzBz+F,KAAMs+F,EACNtC,WAAYtnF,EAAKsnF,WAEjBvxF,MAAOA,SAQT4zF,EAAY,GAMhB,IAAIK,EAAiB,CAAC,GAA2B9jF,EAAayjF,EAAU,IAAK,GAA2BzjF,EAAayjF,EAAU,IAAK,oBAAO,GAAIA,EAAU,KAMzJ,OAJAK,EAAe,GAAG1+F,KAAO0+F,EAAe,GAAG1+F,MAAQ,KAEnD,mBAAM0+F,EAAe,GAAIA,EAAe,IACxC,mBAAMA,EAAe,GAAIA,EAAe,IACjCA,GAGT,SAASC,GAAYx/F,GACnB,OAAQyE,MAAMzE,KAASqgC,SAASrgC,GAIlC,SAASy/F,GAAqB7iB,EAAU8iB,EAAWC,EAAShoF,GAC1D,IAAIioF,EAAgB,EAAIhjB,EACpBxkB,EAAUzgD,EAAS2gB,WAAWskD,GAClC,OAAO4iB,GAAYE,EAAUE,KAAmBJ,GAAYG,EAAQC,KAAmBF,EAAU9iB,KAAc+iB,EAAQ/iB,IAAajlE,EAAS2gD,QAAQF,GAAS+kC,YAAYuC,EAAU9iB,IAGtL,SAASijB,GAAeloF,EAAUpC,GAChC,GAAsB,gBAAlBoC,EAAS9W,KAAwB,CACnC,IAAI6+F,EAAYnqF,EAAK,GAAGyF,MACpB2kF,EAAUpqF,EAAK,GAAGyF,MAOtB,GAAI0kF,GAAaC,IAAYF,GAAqB,EAAGC,EAAWC,EAAShoF,IAAa8nF,GAAqB,EAAGC,EAAWC,EAAShoF,IAChI,OAAO,EAIX,OAAO,GAAwBA,EAAUpC,EAAK,KAAO,GAAwBoC,EAAUpC,EAAK,IAG9F,SAASuqF,GAA4B9nF,EAAM+H,EAAKggF,EAAQtkF,EAAaC,GACnE,IAEIiX,EAFAhb,EAAW8D,EAAY7D,iBACvB0G,EAAYtG,EAAKuG,aAAawB,GAE9Bi+E,EAAM5+D,GAAA,KAAwB9gB,EAAUhR,IAAI,KAAMoO,EAAIrH,YACtD4pF,EAAM7+D,GAAA,KAAwB9gB,EAAUhR,IAAI,KAAMoO,EAAIpH,aAE1D,GAAK7P,MAAMu5F,IAASv5F,MAAMw5F,GAEnB,CAEL,GAAIxiF,EAAY/D,kBAEdib,EAAQlX,EAAY/D,kBAAkBM,EAAK2hB,UAAU3hB,EAAKsgB,WAAYvY,QACjE,CACL,IAAIo8E,EAAOxkF,EAAS2gB,WAChB51B,EAAIsV,EAAK1K,IAAI6uF,EAAK,GAAIp8E,GACtBpd,EAAIqV,EAAK1K,IAAI6uF,EAAK,GAAIp8E,GAC1B4S,EAAQhb,EAASG,YAAY,CAACpV,EAAGC,IAYnC,GAAI,gBAAuBgV,EAAU,eAAgB,CAEnD,IAAI8kF,EAAQ9kF,EAAS2gD,QAAQ,KACzBqkC,EAAQhlF,EAAS2gD,QAAQ,KACzB6jC,EAAOxkF,EAAS2gB,WAEhBknE,GAAYxnF,EAAK1K,IAAI6uF,EAAK,GAAIp8E,IAChC4S,EAAM,GAAK8pE,EAAMzc,cAAcyc,EAAM16E,YAAYg+E,EAAS,EAAI,IACrDP,GAAYxnF,EAAK1K,IAAI6uF,EAAK,GAAIp8E,MACvC4S,EAAM,GAAKgqE,EAAM3c,cAAc2c,EAAM56E,YAAYg+E,EAAS,EAAI,KAK7Dt7F,MAAMu5F,KACTrrE,EAAM,GAAKqrE,GAGRv5F,MAAMw5F,KACTtrE,EAAM,GAAKsrE,QAzCbtrE,EAAQ,CAACqrE,EAAKC,GA6ChBjmF,EAAKoT,cAAcrL,EAAK4S,GAG1B,IAAI,GAEJ,SAAUlnB,GAGR,SAASu0F,IACP,IAAIj1F,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOm/F,EAAan/F,KACnBkK,EA8HT,OApIA,gBAAUi1F,EAAcv0F,GASxBu0F,EAAa59F,UAAU04E,gBAAkB,SAAUmlB,EAAe3oF,EAASoE,GACzEpE,EAAQ+4B,YAAW,SAAU50B,GAC3B,IAAIwjF,EAAU,GAAYpE,yBAAyBp/E,EAAa,YAEhE,GAAIwjF,EAAS,CACX,IAAIiB,EAAWjB,EAAQhnF,UACnBkoF,EAAa,GAAMlB,GAAS/0D,KAC5Bk2D,EAAW,GAAMnB,GAAShwB,GAE9BkxB,EAAW5/E,MAAK,SAAUR,GACxB+/E,GAA4BK,EAAYpgF,GAAK,EAAMtE,EAAaC,GAChEokF,GAA4BM,EAAUrgF,GAAK,EAAOtE,EAAaC,MAGjEwkF,EAAS3/E,MAAK,SAAUR,GACtBmgF,EAAS90E,cAAcrL,EAAK,CAACogF,EAAWvmF,cAAcmG,GAAMqgF,EAASxmF,cAAcmG,QAErFzd,KAAKk7F,eAAelwF,IAAImO,EAAYtP,IAAI6qE,kBAEzC10E,OAGL09F,EAAa59F,UAAUq7F,aAAe,SAAUhiF,EAAawjF,EAAS3nF,EAASoE,GAC7E,IAAI/D,EAAW8D,EAAY7D,iBACvBwyB,EAAW3uB,EAAYtP,GACvBkyF,EAAa5iF,EAAYxD,UACzBooF,EAAc/9F,KAAKk7F,eACnBxjB,EAAWqmB,EAAY/yF,IAAI88B,IAAai2D,EAAYjyF,IAAIg8B,EAAU,IAAI+wC,GAAA,MAC1E74E,KAAKkN,MAAMzF,IAAIiwE,EAASxqE,OACxB,IAAI8wF,EAAS,GAAW3oF,EAAU8D,EAAawjF,GAC3CsB,EAAWD,EAAOp2D,KAClBs2D,EAASF,EAAOrxB,GAChB2F,EAAW0rB,EAAO5oC,KACtB,GAAMunC,GAAS/0D,KAAOq2D,EACtB,GAAMtB,GAAShwB,GAAKuxB,EAEpBvB,EAAQ7xD,QAAQwnC,GAChB,IAAIn+C,EAAawoE,EAAQ3xF,IAAI,UACzBgpB,EAAa2oE,EAAQ3xF,IAAI,cACzBqpB,EAAesoE,EAAQ3xF,IAAI,gBAC3BkyE,EAAeyf,EAAQ3xF,IAAI,gBA0D/B,SAASmzF,EAA0BzoF,EAAM+H,EAAKggF,GAC5C,IAAIzhF,EAAYtG,EAAKuG,aAAawB,GAClC+/E,GAA4B9nF,EAAM+H,EAAKggF,EAAQtkF,EAAaC,GAC5D,IAAItf,EAAQkiB,EAAUd,SAAS,aAAaY,eAE1B,MAAdhiB,EAAMgE,OACRhE,EAAMgE,KAAO,gBAAkBi+F,EAAY,UAG7CrmF,EAAKqpB,cAActhB,EAAK,CACtBqsB,iBAAkB9tB,EAAUhR,IAAI,oBAEhCkyE,aAAc,uBAAUlhE,EAAUhR,IAAI,gBAAiBkyE,EAAaugB,EAAS,EAAI,IACjFppE,aAAc,uBAAUrY,EAAUhR,IAAI,gBAAgB,GAAOqpB,EAAaopE,EAAS,EAAI,IACvFzpE,WAAY,uBAAUhY,EAAUhR,IAAI,cAAegpB,EAAWypE,EAAS,EAAI,IAC3E9zD,OAAQ,uBAAU3tB,EAAUhR,IAAI,UAAU,GAAOmpB,EAAWspE,EAAS,EAAI,IACzE3jG,MAAOA,IAxEN,qBAAQq6B,KACXA,EAAa,CAACA,EAAYA,IAGvB,qBAAQH,KACXA,EAAa,CAACA,EAAYA,IAGvB,qBAAQK,KACXA,EAAe,CAACA,EAAcA,IAG3B,qBAAQ6oD,KACXA,EAAe,CAACA,EAAcA,IAIhC8gB,EAAOp2D,KAAK3pB,MAAK,SAAUR,GACzB0gF,EAA0BF,EAAUxgF,GAAK,GACzC0gF,EAA0BD,EAAQzgF,GAAK,MAGzC60D,EAASr0D,MAAK,SAAUR,GACtB,IAAI0U,EAAYmgD,EAASr2D,aAAawB,GAAKvC,SAAS,aAAa+Z,eAIjEq9C,EAASxpD,cAAcrL,EAAK,CAACwgF,EAAS3mF,cAAcmG,GAAMygF,EAAO5mF,cAAcmG,KAEvD,MAApB0U,EAAUn0B,SACZm0B,EAAUn0B,OAASigG,EAASp7E,cAAcpF,EAAK,SAAS3f,MAG1Dw0E,EAASvzC,cAActhB,EAAK,CAC1B2gF,qBAAsBH,EAASp7E,cAAcpF,EAAK,oBAClD4gF,iBAAkBJ,EAASp7E,cAAcpF,EAAK,gBAC9C6gF,iBAAkBL,EAASp7E,cAAcpF,EAAK,gBAC9C8gF,eAAgBN,EAASp7E,cAAcpF,EAAK,cAC5C+gF,WAAYP,EAASp7E,cAAcpF,EAAK,UACxCghF,mBAAoBP,EAAOr7E,cAAcpF,EAAK,oBAC9CihF,eAAgBR,EAAOr7E,cAAcpF,EAAK,gBAC1CkhF,eAAgBT,EAAOr7E,cAAcpF,EAAK,gBAC1CmhF,aAAcV,EAAOr7E,cAAcpF,EAAK,cACxCohF,SAAUX,EAAOr7E,cAAcpF,EAAK,UACpC3jB,MAAOq4B,OAGXulD,EAAS7oD,WAAWyjD,GAGpB0rB,EAAO5oC,KAAK/0C,mBAAkB,SAAUhiB,EAAIof,GAC1Cpf,EAAGkmC,UAAS,SAAUr1B,GACpB,gBAAUA,GAAOmtF,UAAYM,QAwBjC38F,KAAKo7F,SAAS1jB,GACdA,EAASxqE,MAAM0X,OAAS+3E,EAAQ3xF,IAAI,WAAamO,EAAYnO,IAAI,WAGnE0yF,EAAan/F,KAAO,WACbm/F,EArIT,CAsIE,IAEF,SAAS,GAAWroF,EAAU8D,EAAawjF,GACzC,IAAIL,EAGFA,EADEjnF,EACe,iBAAIA,GAAYA,EAAS2gB,YAAY,SAAU4kE,GAC9D,IAAI58E,EAAO7E,EAAYxD,UAAUglF,iBAAiBxhF,EAAYxD,UAAUuI,aAAa08E,KAAc,GAEnG,OAAO,sBAAS,CACd5gG,KAAM4gG,GACL58E,MAGY,CAAC,CAChBhkB,KAAM,QACNuE,KAAM,UAIV,IAAI0/F,EAAW,IAAIhjD,GAAA,KAAKqhD,EAAgBK,GACpCuB,EAAS,IAAIjjD,GAAA,KAAKqhD,EAAgBK,GAElCrqB,EAAW,IAAIr3B,GAAA,KAAK,GAAI0hD,GACxBmC,EAAU,iBAAInC,EAAQ3xF,IAAI,QAAS,mBAAM0xF,GAAmBvjF,EAAa9D,EAAUsnF,IAEnFtnF,IACFypF,EAAU,oBAAOA,EAAS,mBAAMvB,GAAgBloF,KAGlD,IAAI0pF,EAAiB1pF,EAAW,GAA8B,SAAUpC,GACtE,OAAOA,EAAKjK,OAYd,OAVAi1F,EAAS/iD,SAAS,iBAAI4jD,GAAS,SAAU7rF,GACvC,OAAOA,EAAK,MACV,KAAM8rF,GACVb,EAAOhjD,SAAS,iBAAI4jD,GAAS,SAAU7rF,GACrC,OAAOA,EAAK,MACV,KAAM8rF,GACVzsB,EAASp3B,SAAS,iBAAI4jD,GAAS,SAAU7rF,GACvC,OAAOA,EAAK,OAEdq/D,EAAS/a,eAAgB,EAClB,CACL3vB,KAAMq2D,EACNtxB,GAAIuxB,EACJ9oC,KAAMkd,GAIK,UCpXR,SAAS,GAAQ59D,GACtBA,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAChCnqB,EAAUuqB,sBAAqB,SAAUrH,GACnC4/D,GAAoB5/D,EAAIjE,OAAQ,cAElCiE,EAAIonE,SAAWpnE,EAAIonE,UAAY,OCYrC,IAAI,GAEJ,SAAU71F,GAGR,SAAS81F,IACP,IAAIx2F,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO0gG,EAAc1gG,KACpBkK,EAkCT,OAxCA,gBAAUw2F,EAAe91F,GASzB81F,EAAcn/F,UAAUu4F,4BAA8B,SAAUF,EAAWM,EAAmBzjF,GAC5F,OAAO,IAAIiqF,EAAc9G,EAAWM,EAAmBzjF,IAGzDiqF,EAAc1gG,KAAO,WACrB0gG,EAAc/oF,cAAgB,CAC5BC,OAAQ,EAERC,EAAG,EACHizD,QAAS,CACPqvB,QAAS,QAGXx4E,WAAW,EACXsD,MAAO,CACLgO,MAAM,EACN1H,SAAU,OAEZ7R,UAAW,CAITJ,YAAa,GAEf0Z,SAAU,CACR/N,MAAO,CACLgO,MAAM,EACN1H,SAAU,SAITm1E,EAzCT,CA0CE,IAEa,MCjCX,GAAQ,kBAERC,GAAoB,SAAU/lF,EAAa9D,EAAU8pF,EAASlsF,GAChE,IAAImsF,EAAK,GAA2BjmF,EAAalG,EAAK,IAClDosF,EAAK,GAA2BlmF,EAAalG,EAAK,IAElDqsF,EAAUF,EAAG1mF,MACb6mF,EAAUF,EAAG3mF,MACjB4mF,EAAQ,GAAK,sBAASA,EAAQ,IAAKhpE,KACnCgpE,EAAQ,GAAK,sBAASA,EAAQ,IAAKhpE,KACnCipE,EAAQ,GAAK,sBAASA,EAAQ,GAAIjpE,KAClCipE,EAAQ,GAAK,sBAASA,EAAQ,GAAIjpE,KAElC,IAAImU,EAAS,sBAAS,CAAC,GAAI20D,EAAIC,IAM/B,OALA50D,EAAO/xB,MAAQ,CAAC0mF,EAAG1mF,MAAO2mF,EAAG3mF,OAC7B+xB,EAAOxoC,GAAKm9F,EAAGh/F,EACfqqC,EAAOvoC,GAAKk9F,EAAG/+F,EACfoqC,EAAOxd,GAAKoyE,EAAGj/F,EACfqqC,EAAOvd,GAAKmyE,EAAGh/F,EACRoqC,GAGT,SAAS,GAAY/sC,GACnB,OAAQyE,MAAMzE,KAASqgC,SAASrgC,GAIlC,SAAS8hG,GAAqBllB,EAAU8iB,EAAWC,EAAShoF,GAC1D,IAAIioF,EAAgB,EAAIhjB,EACxB,OAAO,GAAY8iB,EAAUE,KAAmB,GAAYD,EAAQC,IAGtE,SAASmC,GAAepqF,EAAUpC,GAChC,IAAImqF,EAAYnqF,EAAKyF,MAAM,GACvB2kF,EAAUpqF,EAAKyF,MAAM,GAEzB,SAAI,gBAAuBrD,EAAU,gBAO/B+nF,GAAaC,IAAYmC,GAAqB,EAAGpC,EAAWC,EAAShoF,IAAamqF,GAAqB,EAAGpC,EAAWC,EAAShoF,OAK7H,GAAwBA,EAAU,CACvCqD,MAAO0kF,EACPh9F,EAAG6S,EAAKhR,GACR5B,EAAG4S,EAAK/Q,MACJ,GAAwBmT,EAAU,CACtCqD,MAAO2kF,EACPj9F,EAAG6S,EAAKga,GACR5sB,EAAG4S,EAAKia,MAKZ,SAASwyE,GAAwBhqF,EAAM+H,EAAKo8E,EAAM1gF,EAAaC,GAC7D,IAEIiX,EAFAhb,EAAW8D,EAAY7D,iBACvB0G,EAAYtG,EAAKuG,aAAawB,GAE9Bi+E,EAAM5+D,GAAA,KAAwB9gB,EAAUhR,IAAI6uF,EAAK,IAAKzgF,EAAIrH,YAC1D4pF,EAAM7+D,GAAA,KAAwB9gB,EAAUhR,IAAI6uF,EAAK,IAAKzgF,EAAIpH,aAE9D,GAAK7P,MAAMu5F,IAASv5F,MAAMw5F,GAEnB,CAEL,GAAIxiF,EAAY/D,kBAEdib,EAAQlX,EAAY/D,kBAAkBM,EAAK2hB,UAAUwiE,EAAMp8E,QACtD,CACL,IAAIrd,EAAIsV,EAAK1K,IAAI6uF,EAAK,GAAIp8E,GACtBpd,EAAIqV,EAAK1K,IAAI6uF,EAAK,GAAIp8E,GACtBlI,EAAK,CAACnV,EAAGC,GACbgV,EAASI,WAAaJ,EAASI,UAAUF,EAAIA,GAC7C8a,EAAQhb,EAASG,YAAYD,GAAI,GAGnC,GAAI,gBAAuBF,EAAU,eAAgB,CAEnD,IAAI8kF,EAAQ9kF,EAAS2gD,QAAQ,KACzBqkC,EAAQhlF,EAAS2gD,QAAQ,KACzB51D,EAAIsV,EAAK1K,IAAI6uF,EAAK,GAAIp8E,GACtBpd,EAAIqV,EAAK1K,IAAI6uF,EAAK,GAAIp8E,GAEtB,GAAYrd,GACdiwB,EAAM,GAAK8pE,EAAMzc,cAAcyc,EAAM16E,YAAwB,OAAZo6E,EAAK,GAAc,EAAI,IAC/D,GAAYx5F,KACrBgwB,EAAM,GAAKgqE,EAAM3c,cAAc2c,EAAM56E,YAAwB,OAAZo6E,EAAK,GAAc,EAAI,KAKvE13F,MAAMu5F,KACTrrE,EAAM,GAAKqrE,GAGRv5F,MAAMw5F,KACTtrE,EAAM,GAAKsrE,QAlCbtrE,EAAQ,CAACqrE,EAAKC,GAsChB,OAAOtrE,EAGT,IAAIsvE,GAAkB,CAAC,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,CAAC,KAAM,MAAO,CAAC,KAAM,OAEpE,GAEJ,SAAUx2F,GAGR,SAASy2F,IACP,IAAIn3F,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOqhG,EAAarhG,KACnBkK,EAsIT,OA5IA,gBAAUm3F,EAAcz2F,GASxBy2F,EAAa9/F,UAAU04E,gBAAkB,SAAUqnB,EAAe7qF,EAASoE,GACzEpE,EAAQ+4B,YAAW,SAAU50B,GAC3B,IAAIgmF,EAAU,GAAY5G,yBAAyBp/E,EAAa,YAEhE,GAAIgmF,EAAS,CACX,IAAIW,EAAaX,EAAQxpF,UACzBmqF,EAAW7hF,MAAK,SAAUR,GACxB,IAAI0G,EAAS,iBAAIw7E,IAAiB,SAAUnlF,GAC1C,OAAOklF,GAAwBI,EAAYriF,EAAKjD,EAAKrB,EAAaC,MAGpE0mF,EAAWh3E,cAAcrL,EAAK0G,GAC9B,IAAI9lB,EAAKyhG,EAAWhjF,iBAAiBW,GACrCpf,EAAG0d,SAAS,SAAUoI,SAGzBnkB,OAGL4/F,EAAa9/F,UAAUq7F,aAAe,SAAUhiF,EAAagmF,EAASnqF,EAASoE,GAC7E,IAAI/D,EAAW8D,EAAY7D,iBACvBwyB,EAAW3uB,EAAYtP,GACvBkyF,EAAa5iF,EAAYxD,UACzBoqF,EAAe//F,KAAKk7F,eACpB8E,EAAeD,EAAa/0F,IAAI88B,IAAai4D,EAAaj0F,IAAIg8B,EAAU,CAC1E56B,MAAO,IAAI,UAEblN,KAAKkN,MAAMzF,IAAIu4F,EAAa9yF,OAC5BlN,KAAKo7F,SAAS4E,GACd,IAAIC,EAAW,GAAW5qF,EAAU8D,EAAagmF,GAEjDA,EAAQr0D,QAAQm1D,GAEhBA,EAAShiF,MAAK,SAAUR,GAEtB,IAAI0G,EAAS,iBAAIw7E,IAAiB,SAAUnlF,GAC1C,OAAOklF,GAAwBO,EAAUxiF,EAAKjD,EAAKrB,EAAaC,MAE9D8mF,EAAa7qF,EAAS2gD,QAAQ,KAAKv3C,MACnC0hF,EAAa9qF,EAAS2gD,QAAQ,KAAKv3C,MACnC2hF,EAAcF,EAAWzgF,YACzB4gF,EAAcF,EAAW1gF,YACzB6gF,EAAe,CAACJ,EAAWpiB,MAAMmiB,EAASj1F,IAAI,KAAMyS,IAAOyiF,EAAWpiB,MAAMmiB,EAASj1F,IAAI,KAAMyS,KAC/F8iF,EAAe,CAACJ,EAAWriB,MAAMmiB,EAASj1F,IAAI,KAAMyS,IAAO0iF,EAAWriB,MAAMmiB,EAASj1F,IAAI,KAAMyS,KACnGqf,GAAA,KAAewjE,GACfxjE,GAAA,KAAeyjE,GACf,IAAIC,IAAeJ,EAAY,GAAKE,EAAa,IAAMF,EAAY,GAAKE,EAAa,IAAMD,EAAY,GAAKE,EAAa,IAAMF,EAAY,GAAKE,EAAa,IAGzJE,GAAcD,EAClBP,EAASn3E,cAAcrL,EAAK,CAC1B0G,OAAQA,EACRs8E,WAAYA,IAEd,IAAI3mG,EAAQmmG,EAAShkF,aAAawB,GAAKvC,SAAS,aAAaY,eACzDtR,EAAQ,gBAAkBuxF,EAAY,SAErCjiG,EAAMgE,OACThE,EAAMgE,KAAO0M,EAEa,kBAAf1Q,EAAMgE,OACfhE,EAAMgE,KAAO,kBAAsBhE,EAAMgE,KAAM,MAI9ChE,EAAMkE,SACTlE,EAAMkE,OAASwM,GAIjBy1F,EAASlhE,cAActhB,EAAK,QAAS3jB,MAEvCmmG,EAASjtF,KAAK,GAAMgtF,GAActqF,MAAMjO,KAAI,SAAUgW,GACpD,IAAIvB,EAAS+jF,EAAS3oF,cAAcmG,GAEpC,IAAKvB,EAAOukF,WAAY,CACtB,IAAI3rE,EAAU,IAAI,QAAgB,CAChCrxB,MAAO,CACL0gB,OAAQjI,EAAOiI,UAGnB87E,EAASxjF,iBAAiBgB,EAAKqX,GAC/BkrE,EAAa9yF,MAAMzF,IAAIqtB,OAExB9qB,QAAO,SAAUkmB,EAAQC,GAC1B,IAAI2E,EAAU,GAAMkrE,GAActqF,KAAKoH,iBAAiBqT,GACpDjU,EAAS+jF,EAAS3oF,cAAc4Y,GAE/BhU,EAAOukF,WAiBD3rE,GACTkrE,EAAa9yF,MAAMY,OAAOgnB,IAjBtBA,EACF7F,GAAA,eAAoB6F,EAAS,CAC3BrxB,MAAO,CACL0gB,OAAQjI,EAAOiI,SAEhBg7E,EAASjvE,GAEZ4E,EAAU,IAAI,QAAgB,CAC5BrxB,MAAO,CACL0gB,OAAQjI,EAAOiI,UAKrB87E,EAASxjF,iBAAiByT,EAAQ4E,GAClCkrE,EAAa9yF,MAAMzF,IAAIqtB,OAIxBhnB,QAAO,SAAU2P,GAClB,IAAIqX,EAAU,GAAMkrE,GAActqF,KAAKoH,iBAAiBW,GACxDuiF,EAAa9yF,MAAMY,OAAOgnB,MACzB/X,UACHkjF,EAAS5/E,mBAAkB,SAAUyU,EAASrX,GAC5C,IAAIzB,EAAYikF,EAAShkF,aAAawB,GAClC3jB,EAAQmmG,EAASp9E,cAAcpF,EAAK,SACxCqX,EAAQjZ,SAASokF,EAASp9E,cAAcpF,EAAK,UAC7C,gBAAcqX,EAAS,gBAAqB9Y,GAAY,CACtDkH,aAAci8E,EACdh8E,eAAgB1F,EAChB2F,YAAa68E,EAAS32E,QAAQ7L,IAAQ,GACtC4F,aAAoC,kBAAfvpB,EAAMgE,KAAoB,kBAAsBhE,EAAMgE,KAAM,GAAK,SAExF,gBAAyBg3B,EAAS9Y,GAClC,gBAAoB8Y,GACpB,gBAAUA,GAASunE,UAAY8C,KAEjC,GAAMa,GAActqF,KAAOuqF,EAC3BD,EAAa9yF,MAAM0X,OAASu6E,EAAQn0F,IAAI,WAAamO,EAAYnO,IAAI,WAGvE40F,EAAarhG,KAAO,WACbqhG,EA7IT,CA8IE,IAEF,SAAS,GAAWvqF,EAAU8D,EAAagmF,GACzC,IAAI7C,EACA2D,EACApG,EAAO,CAAC,KAAM,KAAM,KAAM,MAE1BxkF,GACFinF,EAAiB,iBAAIjnF,GAAYA,EAAS2gB,YAAY,SAAU4kE,GAC9D,IAAIllF,EAAOyD,EAAYxD,UACnBqI,EAAOtI,EAAKilF,iBAAiBjlF,EAAKwI,aAAa08E,KAAc,GAEjE,OAAO,sBAAS,CACd5gG,KAAM4gG,GACL58E,MAELiiF,EAAW,IAAIhlD,GAAA,KAAK,iBAAI4+C,GAAM,SAAUr/E,EAAKiD,GAC3C,MAAO,CACLzjB,KAAMwgB,EACNjc,KAAM+9F,EAAe7+E,EAAM,GAAGlf,SAE9B4gG,KAEJ7C,EAAiB,CAAC,CAChBtiG,KAAM,QACNuE,KAAM,UAER0hG,EAAW,IAAIhlD,GAAA,KAAKqhD,EAAgB6C,IAGtC,IAAIL,EAAU,iBAAIK,EAAQn0F,IAAI,QAAS,mBAAMk0F,GAAmB/lF,EAAa9D,EAAU8pF,IAEnF9pF,IACFypF,EAAU,oBAAOA,EAAS,mBAAMW,GAAgBpqF,KAGlD,IAAI0pF,EAAiB1pF,EAAW,SAAUpC,EAAM6iD,EAAS1+C,EAAWkjE,GAElE,OAAOrnE,EAAKyF,MAAM3b,KAAKwgC,MAAM+8C,EAAW,IAAIA,EAAW,IACrD,SAAUrnE,GACZ,OAAOA,EAAKjK,OAId,OAFAi3F,EAAS/kD,SAAS4jD,EAAS,KAAMC,GACjCkB,EAAS1oC,eAAgB,EAClB0oC,EAGM,UC3TR,SAAS,GAAQvrF,GACtBA,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAChCnqB,EAAUuqB,sBAAqB,SAAUrH,GACnC4/D,GAAoB5/D,EAAIjE,OAAQ,cAElCiE,EAAI8oE,SAAW9oE,EAAI8oE,UAAY,O,8BCLjC,GAEJ,SAAUv3F,GAGR,SAASw3F,IACP,IAAIl4F,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOoiG,EAAgBpiG,KACtBkK,EAYT,OAlBA,gBAAUk4F,EAAiBx3F,GAS3Bw3F,EAAgBpiG,KAAO,kBACvBoiG,EAAgBzqF,cAAgB,gBAAqB0qF,GAAA,KAAc1qF,cAAe,CAChF2qF,UAAU,EACVC,UAAU,EACVC,kBAAkB,EAClBC,iBAAiB,EACjBC,kBAAkB,EAClBC,yBAAyB,IAEpBP,EAnBT,CAoBEC,GAAA,MAEa,M,0BClBX,GAAQ,kBACL,SAASO,GAA4B/nF,EAAKgoF,EAAeC,GAC9D,GAAMjoF,GAAKkoF,kBAAkBrjF,MAAK,SAAUsjF,GAC1C,IAAIC,EAASD,EAAeE,gBAAgBz2F,IAAIo2F,EAAc1hE,KAE1D8hE,IACFA,EAAOH,SAAWA,MAIjB,SAASK,GAA8BtoF,EAAKgoF,GAIjD,IAHA,IAAIE,EAAoB,GAAMloF,GAAKkoF,kBAC/BK,EAAiBL,EAAkBt6B,OAE9B5rE,EAAI,EAAGA,EAAIumG,EAAejnG,OAAQU,IAAK,CAC9C,IAAIwmG,EAAcD,EAAevmG,GAC7BmmG,EAAiBD,EAAkBt2F,IAAI42F,GACvCH,EAAkBF,EAAeE,gBAErC,GAAIA,EAAiB,CACnB,IAAII,EAAQT,EAAc1hE,IACtB8hE,EAASC,EAAgBz2F,IAAI62F,GAE7BL,IACFC,EAAgBvR,UAAU2R,GAErBJ,EAAgBz6B,OAAOtsE,QAC1BonG,GAAsBR,EAAmBC,MAOnD,SAASO,GAAsBR,EAAmBC,GAChD,GAAIA,EAAgB,CAClBD,EAAkBpR,UAAUqR,EAAejlF,MAAMojB,KACjD,IAAIyF,EAAao8D,EAAep8D,WAChCA,GAAcA,EAAWlxB,WAI7B,SAAS8tF,GAAqB3oF,EAAKwlD,GAEjC,IAAI2iC,EAAiB,CACnBjlF,MAAOsiD,EACPojC,cAAe,mBAAMA,GAAepjC,GACpCh/C,eAAgB,mBAAM,GAAgBxG,GACtCqoF,gBAAiB,KACjBt8D,WAAY,MAIVA,EAAao8D,EAAep8D,WAAa,IAAIvF,GAAA,KAAexmB,EAAIwE,SAsBpE,OArBA,kBAAK,CAAC,MAAO,OAAQ,eAAe,SAAU06C,GAC5CnzB,EAAWtnB,GAAGy6C,GAAW,SAAUlzC,GACjC,IAAI8vE,EAAQ,GACZqM,EAAeE,gBAAgBxjF,MAAK,SAAUujF,GAG5C,GAAKp8E,EAAM68E,oBAAoBT,EAAOllF,MAAMvH,QAA5C,CAIA,IAAIP,GAAUgtF,EAAOH,UAAY,IAAI/oC,GACjC5J,EAAQl6C,GAAUA,EAAOgtF,EAAOU,oBAAqBX,EAAejlF,MAAM4K,SAAUq6E,EAAep8D,WAAY/f,IAClHo8E,EAAOllF,MAAMtR,IAAI,YAAY,IAAS0jD,GAASwmC,EAAM75F,KAAK,CACzD8mG,WAAYX,EAAOllF,MAAMzS,GACzB06C,MAAOmK,EAAM,GACbiG,IAAKjG,EAAM,SAGfwmC,EAAMx6F,QAAU6mG,EAAe3hF,eAAes1E,SAG3CqM,EAOT,SAAS,GAAenoF,EAAK87E,GAC3B97E,EAAIwG,eAAe,CACjBrhB,KAAM,WACN2hB,UAAW,CACTs3B,OAAQ,WACRr3B,SAAU,KAEZ+0E,MAAOA,IAIX,SAAS8M,GAAcpjC,EAAej8D,EAAGvC,EAAGC,GAC1C,OAAOu+D,EAActpD,iBAAiB8a,aAAa,CAAChwB,EAAGC,IAOzD,SAAS+hG,GAAsBX,GAC7B,IAAIY,EAGAC,EAAS,QACTC,EAAe,CACjB,UAAa,EACb,UAAa,EACb,WAAc,EACd,gBAAmB,GAEjBrB,GAA0B,EAa9B,OAZAO,EAAgBxjF,MAAK,SAAUukF,GAC7B,IAAIpB,EAAgBoB,EAAalmF,MAC7BmmF,GAAUrB,EAAcp2F,IAAI,YAAY,MAAgBo2F,EAAcp2F,IAAI,YAAY,IAAQ,QAE9Fu3F,EAAaD,EAASG,GAAWF,EAAaD,EAASD,KACzDA,EAAcI,GAKhBvB,EAA0BA,GAA2BE,EAAcp2F,IAAI,2BAA2B,MAE7F,CACLq3F,YAAaA,EACbzqE,IAAK,CAIHmpE,kBAAkB,EAClBC,iBAAiB,EACjBC,kBAAkB,EAClBC,0BAA2BA,IAK1B,SAASwB,GAA6BhuF,GAC3CA,EAAUkS,kBAAkBlS,EAAU8R,SAASK,UAAU87E,QAAQ,SAAU3tF,EAASoE,GAClF,IAAIwpF,EAAW,GAAMxpF,GACjBkoF,EAAoBsB,EAAStB,oBAAsBsB,EAAStB,kBAAoB,8BACpFA,EAAkBrjF,MAAK,SAAUsjF,GAG/BA,EAAeE,gBAAkB,QAEnCzsF,EAAQiS,cAAc,CACpBC,SAAU,WACVkZ,QAAS,WACR,SAAUghE,GACX,IAAIyB,EAAsB,gBAA8BzB,GACxD,kBAAKyB,EAAoBC,UAAU,SAAUC,GAC3C,IAAIC,EAAcD,EAAezmF,MAAMojB,IACnC6hE,EAAiBD,EAAkBt2F,IAAIg4F,IAAgB1B,EAAkBx1F,IAAIk3F,EAAajB,GAAqB3oF,EAAK2pF,EAAezmF,QACnImlF,EAAkBF,EAAeE,kBAAoBF,EAAeE,gBAAkB,8BAE1FA,EAAgB31F,IAAIs1F,EAAc1hE,IAAK,CACrCwiE,oBAAqBa,EACrBzmF,MAAO8kF,EACPC,SAAU,aAMhBC,EAAkBrjF,MAAK,SAAUsjF,GAC/B,IACI0B,EADA99D,EAAao8D,EAAep8D,WAE5Bs8D,EAAkBF,EAAeE,gBAErC,GAAIA,EAAiB,CACnB,IAAIyB,EAAazB,EAAgBz6B,OAAO,GAEtB,MAAdk8B,IACFD,EAAcxB,EAAgBz2F,IAAIk4F,IAItC,GAAKD,EAAL,CAKA,IAAIE,EAAmBf,GAAsBX,GAC7Ct8D,EAAWK,OAAO29D,EAAiBd,YAAac,EAAiBvrE,KACjEuN,EAAWY,kBAAkBw7D,EAAeS,eAC5C78E,GAAA,KAA4Bo8E,EAAgB,iBAAkB0B,EAAY3mF,MAAMtR,IAAI,YAAY,GAAO,gBAPrG82F,GAAsBR,EAAmBC,SCzLjD,IAAI,GAEJ,SAAUp4F,GAGR,SAASi6F,IACP,IAAI36F,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAO,kBACNkK,EAoCT,OA1CA,gBAAU26F,EAAgBj6F,GAS1Bi6F,EAAetjG,UAAUoZ,OAAS,SAAUkoF,EAAepsF,EAASoE,GAClEjQ,EAAOrJ,UAAUoZ,OAAOrE,MAAM7U,KAAM8C,WAEhCs+F,EAAciC,WAChBrjG,KAAK8Z,UAQP9Z,KAAK0uD,MAAQ0yC,EAAckC,kBAE3B,GAAkClqF,EAAKgoF,EAAe,CACpDmC,IAAK,kBAAKC,GAAiBD,IAAKvjG,MAChCslC,KAAM,kBAAKk+D,GAAiBl+D,KAAMtlC,MAClCyjG,WAAY,kBAAKD,GAAiBC,WAAYzjG,UAIlDojG,EAAetjG,UAAUmU,QAAU,WACjCjU,KAAK8Z,SAEL3Q,EAAOrJ,UAAUmU,QAAQY,MAAM7U,KAAM8C,YAGvCsgG,EAAetjG,UAAUga,OAAS,WAChC,GAAoC9Z,KAAKoZ,IAAKpZ,KAAKohG,eACnDphG,KAAK0uD,MAAQ,MAGf00C,EAAe7kG,KAAO,kBACf6kG,EA3CT,CA4CEM,GAAA,MAEEF,GAAmB,CACrBl+D,KAAM,SAAUq+D,EAAcC,EAAkBz+D,EAAYxiC,GAC1D,IAAIkhG,EAAY7jG,KAAK0uD,MACjBA,EAAQm1C,EAAUrpG,QAElB4mB,EAAYuiF,EAAa/pC,WAAW,GAExC,GAAKx4C,EAAL,CAIA,IAAI0iF,EAAgBC,GAAiBH,GAAkB,KAAM,CAACjhG,EAAEkjC,QAASljC,EAAEmjC,SAAU1kB,EAAW+jB,EAAYw+D,GACxGK,GAAgBF,EAAcG,OAAS,EAAIH,EAAcI,WAAaJ,EAAcK,YAAcL,EAActlE,MAAQslE,EAActlE,MAAQslE,EAAcI,YAAcJ,EAAcK,aAAez1C,EAAM,GAAKA,EAAM,IAAMA,EAAM,GACpOjwC,EAAQ1hB,KAAKub,IAAI,EAAI3V,EAAE8b,MAAO,GAClCiwC,EAAM,IAAMA,EAAM,GAAKs1C,GAAgBvlF,EAAQulF,EAC/Ct1C,EAAM,IAAMA,EAAM,GAAKs1C,GAAgBvlF,EAAQulF,EAE/C,IAAII,EAAapkG,KAAKohG,cAAciD,8BAA8BC,gBAIlE,OAHA,OAAA5mC,GAAA,MAAW,EAAGhP,EAAO,CAAC,EAAG,KAAM,EAAG01C,EAAWG,QAASH,EAAWI,SACjExkG,KAAK0uD,MAAQA,EAETm1C,EAAU,KAAOn1C,EAAM,IAAMm1C,EAAU,KAAOn1C,EAAM,GAC/CA,OADT,IAIF60C,IAAKkB,IAAU,SAAU/1C,EAAOttC,EAAWuiF,EAAcC,EAAkBz+D,EAAYxiC,GACrF,IAAImhG,EAAgBC,GAAiBH,GAAkB,CAACjhG,EAAE6lD,KAAM7lD,EAAE8lD,MAAO,CAAC9lD,EAAE+hG,KAAM/hG,EAAEgiG,MAAOvjF,EAAW+jB,EAAYw+D,GAClH,OAAOG,EAAcG,QAAUv1C,EAAM,GAAKA,EAAM,IAAMo1C,EAActlE,MAAQslE,EAAcK,eAE5FV,WAAYgB,IAAU,SAAU/1C,EAAOttC,EAAWuiF,EAAcC,EAAkBz+D,EAAYxiC,GAC5F,IAAImhG,EAAgBC,GAAiBH,GAAkB,CAAC,EAAG,GAAI,CAACjhG,EAAEiiG,YAAajiG,EAAEiiG,aAAcxjF,EAAW+jB,EAAYw+D,GACtH,OAAOG,EAAcG,QAAUv1C,EAAM,GAAKA,EAAM,IAAM/rD,EAAEiiG,gBAI5D,SAASH,GAAUI,GACjB,OAAO,SAAUlB,EAAcC,EAAkBz+D,EAAYxiC,GAC3D,IAAIkhG,EAAY7jG,KAAK0uD,MACjBA,EAAQm1C,EAAUrpG,QAElB4mB,EAAYuiF,EAAa/pC,WAAW,GAExC,GAAKx4C,EAAL,CAIA,IAAI0jF,EAAeD,EAAgBn2C,EAAOttC,EAAWuiF,EAAcC,EAAkBz+D,EAAYxiC,GAIjG,OAHA,OAAA+6D,GAAA,MAAWonC,EAAcp2C,EAAO,CAAC,EAAG,KAAM,OAC1C1uD,KAAK0uD,MAAQA,EAETm1C,EAAU,KAAOn1C,EAAM,IAAMm1C,EAAU,KAAOn1C,EAAM,GAC/CA,OADT,IAMJ,IAAIq1C,GAAmB,CACrBgB,KAAM,SAAUC,EAAUC,EAAU7jF,EAAW+jB,EAAYw+D,GACzD,IAAIt8E,EAAOjG,EAAUiG,KACjBjrB,EAAM,GACNgG,EAAOuhG,EAAarnF,MAAMhH,iBAAiBugD,UAgB/C,OAfAmvC,EAAWA,GAAY,CAAC,EAAG,GAEV,MAAb39E,EAAK7M,KACPpe,EAAIoiC,MAAQymE,EAAS,GAAKD,EAAS,GACnC5oG,EAAI+nG,YAAc/hG,EAAKuC,MACvBvI,EAAI8nG,WAAa9hG,EAAKhC,EACtBhE,EAAI6nG,OAAS58E,EAAK2zC,QAAU,GAAK,IAGjC5+D,EAAIoiC,MAAQymE,EAAS,GAAKD,EAAS,GACnC5oG,EAAI+nG,YAAc/hG,EAAKyC,OACvBzI,EAAI8nG,WAAa9hG,EAAK/B,EACtBjE,EAAI6nG,OAAS58E,EAAK2zC,SAAW,EAAI,GAG5B5+D,GAET2kB,MAAO,SAAUikF,EAAUC,EAAU7jF,EAAW+jB,EAAYw+D,GAC1D,IAAIt8E,EAAOjG,EAAUiG,KACjBjrB,EAAM,GACN2kB,EAAQ4iF,EAAarnF,MAAMhH,iBAC3BymB,EAAehb,EAAMmkF,gBAAgBzlF,YACrC0lF,EAAcpkF,EAAMqkF,eAAe3lF,YAqBvC,OApBAulF,EAAWA,EAAWjkF,EAAMskF,aAAaL,GAAY,CAAC,EAAG,GACzDC,EAAWlkF,EAAMskF,aAAaJ,GAEH,eAAvB7jF,EAAU8F,UACZ9qB,EAAIoiC,MAAQymE,EAAS,GAAKD,EAAS,GAGnC5oG,EAAI+nG,YAAcpoE,EAAa,GAAKA,EAAa,GACjD3/B,EAAI8nG,WAAanoE,EAAa,GAC9B3/B,EAAI6nG,OAAS58E,EAAK2zC,QAAU,GAAK,IAGjC5+D,EAAIoiC,MAAQymE,EAAS,GAAKD,EAAS,GAGnC5oG,EAAI+nG,YAAcgB,EAAY,GAAKA,EAAY,GAC/C/oG,EAAI8nG,WAAaiB,EAAY,GAC7B/oG,EAAI6nG,OAAS58E,EAAK2zC,SAAW,EAAI,GAG5B5+D,GAETkpG,WAAY,SAAUN,EAAUC,EAAU7jF,EAAW+jB,EAAYw+D,GAC/D,IAAIt8E,EAAOjG,EAAUiG,KACjBjlB,EAAOuhG,EAAarnF,MAAMhH,iBAAiBugD,UAC3Cz5D,EAAM,GAgBV,OAfA4oG,EAAWA,GAAY,CAAC,EAAG,GAEP,eAAhB39E,EAAK+rB,QACPh3C,EAAIoiC,MAAQymE,EAAS,GAAKD,EAAS,GACnC5oG,EAAI+nG,YAAc/hG,EAAKuC,MACvBvI,EAAI8nG,WAAa9hG,EAAKhC,EACtBhE,EAAI6nG,OAAS58E,EAAK2zC,QAAU,GAAK,IAGjC5+D,EAAIoiC,MAAQymE,EAAS,GAAKD,EAAS,GACnC5oG,EAAI+nG,YAAc/hG,EAAKyC,OACvBzI,EAAI8nG,WAAa9hG,EAAK/B,EACtBjE,EAAI6nG,OAAS58E,EAAK2zC,SAAW,EAAI,GAG5B5+D,IAGI,M,aClLR,SAAS,GAAQsY,GACtB,OAAA6wF,GAAA,MAAc7wF,GACdA,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAChC6jE,GAA6BhuF,GCJ/B,IAAI,GAEJ,SAAUvL,GAGR,SAASq8F,IACP,IAAI/8F,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAGhE,OADAyI,EAAMlK,KAAOinG,EAAgBjnG,KACtBkK,EAyET,OA/EA,gBAAU+8F,EAAiBr8F,GAS3Bq8F,EAAgBjnG,KAAO,kBACvBinG,EAAgBz7D,WAAa,MAC7By7D,EAAgBtvF,cAAgB,gBAAqB0qF,GAAA,KAAc1qF,cAAe,CAChFsb,MAAM,EAENvsB,MAAO,KACP2sB,IAAK,KACLjtB,MAAO,KACPE,OAAQ,KACRG,KAAM,KACN6sB,OAAQ,KACRja,YAAa,UACbG,aAAc,EACdnG,gBAAiB,mBAEjB6zF,eAAgB,CACdtzE,UAAW,CACT3nB,MAAO,UACP7F,MAAO,IAETg3B,UAAW,CACTnxB,MAAO,UACP3L,QAAS,KAGb6mG,uBAAwB,CACtBvzE,UAAW,CACT3nB,MAAO,UACP7F,MAAO,IAETg3B,UAAW,CACTnxB,MAAO,UACP3L,QAAS,KAIb8mG,YAAa,wBACbC,WAAY,kHAEZC,WAAY,OACZC,YAAa,CACXt7F,MAAO,OACPoN,YAAa,WAEfmuF,eAAgB,EAChBC,eAAgB,maAChBC,gBAAiB,CACfz7F,MAAO,UACP3L,QAAS,IAEXqnG,YAAY,EACZC,eAAgB,OAChB7lC,UAAU,EACVwgC,UAAU,EACVpgD,UAAW,CACTl2C,MAAO,WAET47F,aAAa,EACbtmC,WAAY,CACVt1D,MAAO,0BAET+mB,SAAU,CACRu0E,YAAa,CACXluF,YAAa,WAEfquF,gBAAiB,CACfz7F,MAAO,cAINg7F,EAhFT,CAiFE5E,GAAA,MAEa,M,aC3EX,GAAO,QAEPyF,GAA4B,EAC5BC,GAA6B,EAC7BC,GAAsB,GACtBC,GAA2B,EAC3BC,GAAa,aACbC,GAAW,WACXC,GAAY,EACZC,GAA+B,CAAC,OAAQ,MAAO,cAAe,WAC9DC,GAA4B,CAC9BrvD,OAAQ,WACRr3B,SAAU,KAGR,GAEJ,SAAUhX,GAGR,SAAS29F,IACP,IAAIr+F,EAAmB,OAAXU,GAAmBA,EAAO0L,MAAM7U,KAAM8C,YAAc9C,KAIhE,OAFAyI,EAAMlK,KAAOuoG,EAAevoG,KAC5BkK,EAAMs+F,cAAgB,GACft+F,EAgzBT,OAvzBA,gBAAUq+F,EAAgB39F,GAU1B29F,EAAehnG,UAAU+vB,KAAO,SAAU7a,EAASoE,GACjDpZ,KAAKoZ,IAAMA,EAEXpZ,KAAKw+D,SAAW,kBAAKx+D,KAAKw+D,SAAUx+D,MACpCA,KAAKgnG,YAAc,kBAAKhnG,KAAKgnG,YAAahnG,OAG5C8mG,EAAehnG,UAAUoZ,OAAS,SAAUkoF,EAAepsF,EAASoE,EAAKC,GAMvE,GALAlQ,EAAOrJ,UAAUoZ,OAAOrE,MAAM7U,KAAM8C,WAEpCqiB,GAAA,KAAwBnlB,KAAM,sBAAuBohG,EAAcp2F,IAAI,YAAa,WACpFhL,KAAKinG,QAAU7F,EAAcnqD,aAEK,IAA9BmqD,EAAcp2F,IAAI,QAAtB,CAKA,GAAIo2F,EAAciC,WAIhB,OAHArjG,KAAK8Z,cAEL9Z,KAAKkN,MAAMiQ,YAOR9D,GAA4B,aAAjBA,EAAQ9a,MAAuB8a,EAAQuuB,OAAS5nC,KAAK0/B,KACnE1/B,KAAKknG,aAGPlnG,KAAKmnG,mBAlBHnnG,KAAKkN,MAAMiQ,aAqBf2pF,EAAehnG,UAAUmU,QAAU,WACjCjU,KAAK8Z,SAEL3Q,EAAOrJ,UAAUmU,QAAQY,MAAM7U,KAAM8C,YAGvCgkG,EAAehnG,UAAUga,OAAS,WAChCqL,GAAA,KAAenlB,KAAM,uBACrB,IAAI63E,EAAK73E,KAAKoZ,IAAIwE,QAClBi6D,EAAGz3D,IAAI,YAAapgB,KAAKw+D,UACzBqZ,EAAGz3D,IAAI,UAAWpgB,KAAKgnG,cAGzBF,EAAehnG,UAAUonG,WAAa,WACpC,IAAIzkD,EAAYziD,KAAKkN,MACrBu1C,EAAUtlC,YACVnd,KAAKonG,WAAY,EACjBpnG,KAAK+mG,cAAc33B,UAAY,KAE/BpvE,KAAKqnG,iBAELrnG,KAAKsnG,iBAEL,IAAIC,EAAWvnG,KAAK+mG,cAAcS,YAAc,IAAI,QAEpDxnG,KAAKynG,oBAELznG,KAAK0nG,gBAEL1nG,KAAK2nG,oBAELllD,EAAUh7C,IAAI8/F,GAEdvnG,KAAK4nG,kBAGPd,EAAehnG,UAAUunG,eAAiB,WACxC,IAAIjG,EAAgBphG,KAAKohG,cACrBhoF,EAAMpZ,KAAKoZ,IACXyuF,EAAiBzG,EAAcp2F,IAAI,eACnC+6F,EAAiB8B,EAAiBrB,GAA2B,EAG7DsB,EAAY9nG,KAAK+nG,iBAEjBvsB,EAAS,CACX72E,MAAOyU,EAAIrH,WACXlN,OAAQuU,EAAIpH,aAGVg2F,EAAehoG,KAAKinG,UAAYR,GAAa,CAG/CxhG,MAAOu2E,EAAO72E,MAAQmjG,EAAU1nG,EAAI0nG,EAAUnjG,MAC9CitB,IAAK4pD,EAAO32E,OAAS0hG,GAAsBF,GAA4BN,EACvEphG,MAAOmjG,EAAUnjG,MACjBE,OAAQ0hG,IACN,CACFthG,MAAOohG,GACPz0E,IAAKk2E,EAAUznG,EACfsE,MAAO4hG,GACP1hG,OAAQijG,EAAUjjG,QAIhBojG,EAAe,QAAuB7G,EAAcrsF,QAExD,kBAAK,CAAC,QAAS,MAAO,QAAS,WAAW,SAAU/a,GACvB,OAAvBiuG,EAAajuG,KACfiuG,EAAajuG,GAAQguG,EAAahuG,OAGtC,IAAIkyD,EAAa,QAAqB+7C,EAAczsB,GACpDx7E,KAAKkoG,UAAY,CACf9nG,EAAG8rD,EAAW9rD,EACdC,EAAG6rD,EAAW7rD,GAEhBL,KAAKmoG,MAAQ,CAACj8C,EAAWvnD,MAAOunD,EAAWrnD,QAC3C7E,KAAKinG,UAAYP,IAAY1mG,KAAKmoG,MAAMzsE,WAG1CorE,EAAehnG,UAAU8nG,eAAiB,WACxC,IAAInlD,EAAYziD,KAAKkN,MACjBk7F,EAAWpoG,KAAKkoG,UAChB90D,EAASpzC,KAAKinG,QAEdoB,EAAkBroG,KAAKohG,cAAckH,0BACrCttC,EAAUqtC,GAAmBA,EAAgBr9F,IAAI,WACjDw8F,EAAcxnG,KAAK+mG,cAAcS,YACjCe,GAAoBvoG,KAAKwoG,iBAAmB,IAAID,iBAEpDf,EAAYppG,KAAKg1C,IAAWqzD,IAAezrC,EAGvC5nB,IAAWqzD,IAAczrC,EAAU,CACrCnvD,OAAQ08F,EAAmB,GAAK,EAChC38F,QAAS,GACPwnC,IAAWszD,IAAa1rC,EAK1B,CACAnvD,OAAQ08F,GAAoB,EAAI,EAChC38F,QAAS,EACTD,SAAU5O,KAAKM,GAAK,GARgB,CACpCwO,OAAQ08F,GAAoB,EAAI,EAChC38F,OAAQ,EACRD,SAAU5O,KAAKM,GAAK,GAT+B,CACnDwO,OAAQ08F,EAAmB,GAAK,EAChC38F,OAAQ,IAeV,IAAIxJ,EAAOqgD,EAAUh1B,gBAAgB,CAAC+5E,IACtC/kD,EAAUriD,EAAIgoG,EAAShoG,EAAIgC,EAAKhC,EAChCqiD,EAAUpiD,EAAI+nG,EAAS/nG,EAAI+B,EAAK/B,EAChCoiD,EAAUmI,cAGZk8C,EAAehnG,UAAU2oG,eAAiB,WACxC,MAAO,CAAC,EAAGzoG,KAAKmoG,MAAM,KAGxBrB,EAAehnG,UAAU2nG,kBAAoB,WAC3C,IAAIrG,EAAgBphG,KAAKohG,cACrBvrF,EAAO7V,KAAKmoG,MACZZ,EAAWvnG,KAAK+mG,cAAcS,YAC9BpB,EAAchF,EAAcp2F,IAAI,eACpCu8F,EAAS9/F,IAAI,IAAI,GAAK,CACpBmd,QAAQ,EACRnhB,MAAO,CACLrD,EAAG,EACHC,EAAG,EACHsE,MAAOkR,EAAK,GACZhR,OAAQgR,EAAK,IAEf/b,MAAO,CACLgE,KAAMsjG,EAAcp2F,IAAI,oBAE1BuW,IAAK,MAGP,IAAImnF,EAAa,IAAI,GAAK,CACxBjlG,MAAO,CACLrD,EAAG,EACHC,EAAG,EACHsE,MAAOkR,EAAK,GACZhR,OAAQgR,EAAK,IAEf/b,MAAO,CACLgE,KAAM,eAERyjB,GAAI,EACJkiC,QAAS,kBAAKzjD,KAAK2oG,cAAe3oG,QAEhC63E,EAAK73E,KAAKoZ,IAAIwE,QAEdwoF,GACFsC,EAAW7qF,GAAG,YAAa7d,KAAK4oG,cAAe5oG,MAC/C0oG,EAAW1lC,OAAS,YACpB6U,EAAGh6D,GAAG,YAAa7d,KAAKw+D,UACxBqZ,EAAGh6D,GAAG,UAAW7d,KAAKgnG,eAEtBnvB,EAAGz3D,IAAI,YAAapgB,KAAKw+D,UACzBqZ,EAAGz3D,IAAI,UAAWpgB,KAAKgnG,cAGzBO,EAAS9/F,IAAIihG,IAGf5B,EAAehnG,UAAU6nG,kBAAoB,WAC3C,IAAI3pF,EAAOhe,KAAKwoG,gBAAkBxoG,KAAK6oG,yBAIvC,GAFA7oG,KAAK+mG,cAAc+B,eAAiB,GAE/B9qF,EAAL,CAIA,IAAInI,EAAO7V,KAAKmoG,MACZhvF,EAAc6E,EAAK2V,OACnBje,EAAOyD,EAAYwX,aACnB2iB,EAAWn6B,EAAYg2D,aAAeh2D,EAAYg2D,eACpDnxD,EAAKs1B,SAEP,GAAgB,MAAZA,EAAJ,CAIA,IAAIy1D,EAAkBrzF,EAAK6S,cAAc+qB,GAErC01D,EAA0D,IAA3CD,EAAgB,GAAKA,EAAgB,IACxDA,EAAkB,CAACA,EAAgB,GAAKC,EAAaD,EAAgB,GAAKC,GAC1E,IAQIC,EARAC,EAAoB,CAAC,EAAGrzF,EAAK,IAC7BszF,EAAmB,CAAC,EAAGtzF,EAAK,IAC5BuzF,EAAa,CAAC,CAACvzF,EAAK,GAAI,GAAI,CAAC,EAAG,IAChCoU,EAAa,GACbkoC,EAAOg3C,EAAiB,IAAMzzF,EAAKpa,QAAU,GAC7C+tG,EAAY,EAEZC,EAASvsG,KAAKC,MAAM0Y,EAAKpa,QAAUua,EAAK,IAE5CH,EAAKuI,KAAK,CAACq1B,IAAW,SAAUtqC,EAAO+W,GACrC,GAAIupF,EAAS,GAAKvpF,EAAQupF,EACxBD,GAAal3C,MADf,CASA,IAAI/8B,EAAmB,MAATpsB,GAAiB7G,MAAM6G,IAAoB,KAAVA,EAE3CugG,EAAan0E,EAAU,EAAI,gBAAUpsB,EAAO+/F,EAAiBG,GAAmB,GAEhF9zE,IAAY6zE,GAAelpF,GAC7BqpF,EAAW/tG,KAAK,CAAC+tG,EAAWA,EAAW1uG,OAAS,GAAG,GAAI,IACvDuvB,EAAW5uB,KAAK,CAAC4uB,EAAWA,EAAWvvB,OAAS,GAAG,GAAI,MAC7C06B,GAAW6zE,IACrBG,EAAW/tG,KAAK,CAACguG,EAAW,IAC5Bp/E,EAAW5uB,KAAK,CAACguG,EAAW,KAG9BD,EAAW/tG,KAAK,CAACguG,EAAWE,IAC5Bt/E,EAAW5uB,KAAK,CAACguG,EAAWE,IAC5BF,GAAal3C,EACb82C,EAAc7zE,MA+BhB,IA7BA,IAAIgsE,EAAgBphG,KAAKohG,cA6BhBhmG,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAI8R,EAAQs8F,EAA4B,IAANpuG,GAElC4E,KAAK+mG,cAAcS,YAAY//F,IAAIyF,GAEnClN,KAAK+mG,cAAc+B,eAAeztG,KAAK6R,KAhCzC,SAASs8F,EAAsBC,GAC7B,IAAIntF,EAAQ8kF,EAAclmF,SAASuuF,EAAiB,yBAA2B,kBAC3Ev8F,EAAQ,IAAI,QACZ4nB,EAAU,IAAI,QAAgB,CAChCrxB,MAAO,CACL0gB,OAAQilF,GAEVjnE,uBAAwB,EACxBroC,MAAOwiB,EAAMpB,SAAS,aAAaua,eACnC7Q,QAAQ,EACRrD,IAAK,KAEHkO,EAAW,IAAI,QAAiB,CAClChsB,MAAO,CACL0gB,OAAQ8F,GAEVkY,uBAAwB,EACxBroC,MAAOwiB,EAAMpB,SAAS,aAAa+Z,eACnCrQ,QAAQ,EACRrD,IAAK,KAIP,OAFArU,EAAMzF,IAAIqtB,GACV5nB,EAAMzF,IAAIgoB,GACHviB,IAaX45F,EAAehnG,UAAU+oG,uBAAyB,WAChD,IAAIzH,EAAgBphG,KAAKohG,cACrB+E,EAAiB/E,EAAcp2F,IAAI,kBAEvC,IAAuB,IAAnBm7F,EAAJ,CAKA,IAAI17D,EACAz1B,EAAUhV,KAAKgV,QA+BnB,OA9BAosF,EAAcsI,gBAAe,SAAU5yC,EAAS7jC,GAC9C,IAAIw3C,EAAe22B,EAAcuI,aAAa7yC,EAAS7jC,GAAW22E,wBAClE,kBAAKn/B,GAAc,SAAUtxD,GAC3B,IAAIsxB,MAImB,IAAnB07D,GAA2B,qBAAQS,GAA8BztF,EAAYnO,IAAI,SAAW,GAAhG,CAIA,IAEIu9F,EAFAsB,EAAW70F,EAAQioB,aAAa,gBAAgB65B,GAAU7jC,GAAW5L,KACrEisB,EAAWw2D,GAAYhzC,GAEvBzhD,EAAW8D,EAAY7D,iBAEX,MAAZg+B,GAAoBj+B,EAAS6M,eAC/BqmF,EAAmBlzF,EAAS6M,aAAa2nF,GAAU7uC,SAGrD1nB,EAAWn6B,EAAYxD,UAAUuI,aAAao1B,GAC9C7I,EAAS,CACPo/D,SAAUA,EACVl2E,OAAQxa,EACR4wF,QAASjzC,EACTxjB,SAAUA,EACVi1D,iBAAkBA,MAEnBvoG,QACFA,MACIyqC,IAGTq8D,EAAehnG,UAAU4nG,cAAgB,WACvC,IAAIjlD,EAAYziD,KAAKkN,MACjB88F,EAAehqG,KAAK+mG,cACpBkD,EAAUD,EAAaC,QAAU,CAAC,KAAM,MACxCC,EAAeF,EAAaE,aAAe,CAAC,KAAM,MAClD1C,EAAcxnG,KAAK+mG,cAAcS,YACjC3xF,EAAO7V,KAAKmoG,MACZ/G,EAAgBphG,KAAKohG,cACrBhoF,EAAMpZ,KAAKoZ,IACXrB,EAAeqpF,EAAcp2F,IAAI,iBAAmB,EACpDo7F,EAAchF,EAAcp2F,IAAI,eAChCm/F,EAASH,EAAaG,OAAS,IAAI,GAAK,CAC1CvlF,OAAQwhF,EACRtsG,MAAO,CACLgE,KAAMsjG,EAAcp2F,IAAI,gBAE1B+7B,WAAY,CACVjd,SAAU,YAGd09E,EAAY//F,IAAI0iG,GAEhB3C,EAAY//F,IAAI,IAAI,GAAK,CACvBmd,QAAQ,EACRukE,kBAAkB,EAClB1lF,MAAO,CACLrD,EAAG,EACHC,EAAG,EACHsE,MAAOkR,EAAK,GACZhR,OAAQgR,EAAK,GACb5U,EAAG8W,GAELje,MAAO,CACLkE,OAAQojG,EAAcp2F,IAAI,wBACvBo2F,EAAcp2F,IAAI,eACrBhM,UAAWsnG,GACXxoG,KAAM,oBAIV,kBAAK,CAAC,EAAG,IAAI,SAAUssG,GACrB,IAAIC,EAAUjJ,EAAcp2F,IAAI,eAE3B,QAAmBq/F,IAAYA,EAAQ5/F,QAAQ,WAAa,GAAK4/F,EAAQ5/F,QAAQ,YAAc,IAElG4/F,EAAU,UAAYA,GAOxB,IAAI3tG,EAAO,gBAAa2tG,GAAU,EAAG,EAAG,EAAG,EAAG,MAAM,GACpD3tG,EAAK0B,KAAK,CACR4kE,OAAQsnC,GAAUtqG,KAAKinG,SACvBlkC,WAAW,EACXJ,MAAO,kBAAK3iE,KAAKuqG,YAAavqG,KAAMoqG,GACpCtnC,UAAW,kBAAK9iE,KAAKwqG,WAAYxqG,MACjCyqG,YAAa,kBAAKzqG,KAAK0qG,cAAe1qG,MAAM,GAC5C2qG,WAAY,kBAAK3qG,KAAK0qG,cAAe1qG,MAAM,GAC3CuhB,GAAI,IAEN,IAAIqpF,EAAQluG,EAAK+wB,kBACbo4E,EAAazE,EAAcp2F,IAAI,cACnChL,KAAK6qG,cAAgB,gBAAahF,EAAY7lG,KAAKmoG,MAAM,IACzDnoG,KAAK8qG,aAAeF,EAAMjmG,MAAQimG,EAAM/lG,OAAS7E,KAAK6qG,cACtDnuG,EAAK0wB,SAASg0E,EAAclmF,SAAS,eAAeY,gBACpDpf,EAAK5C,MAAMoF,eAAgB,EAC3BxC,EAAK25E,WAAY,EACjB35E,EAAKyyB,YAAY,YAAYr1B,MAAQsnG,EAAclmF,SAAS,CAAC,WAAY,gBAAgBY,eACzF,gBAAoBpf,GACpB,IAAIquG,EAAc3J,EAAcp2F,IAAI,eAGjB,MAAf+/F,IACFruG,EAAK5C,MAAMgE,KAAOitG,GAGpBvD,EAAY//F,IAAIwiG,EAAQG,GAAe1tG,GACvC,IAAIgmD,EAAiB0+C,EAAclmF,SAAS,aAC5CunC,EAAUh7C,IAAIyiG,EAAaE,GAAe,IAAI,QAAa,CACzDxlF,QAAQ,EACRjS,WAAW,EACX7Y,MAAO,gBAAgB4oD,EAAgB,CACrCtiD,EAAG,EACHC,EAAG,EACHmF,KAAM,GACN6nB,cAAe,SACfC,MAAO,SACPxvB,KAAM4kD,EAAea,eACrB79C,KAAMg9C,EAAec,YAEvBjiC,GAAI,QAELvhB,MAEH,IAAIgrG,EAAiBb,EAErB,GAAI/D,EAAa,CACf,IAAI6E,EAAmB,gBAAa7J,EAAcp2F,IAAI,kBAAmB6K,EAAK,IAC1Eq1F,EAAelB,EAAamB,WAAa,IAAI,QAAa,CAC5DrxG,MAAOsnG,EAAclmF,SAAS,mBAAmBY,eACjD8I,QAAQ,EACRnhB,MAAO,CACLxC,EAAG,CAAC,EAAG,EAAG,EAAG,GACbZ,EAAGwV,EAAK,GAAK,GACbhR,OAAQomG,KAGRG,EAA8B,GAAnBH,EACXjF,EAAiBgE,EAAahE,eAAiB,gBAAa5E,EAAcp2F,IAAI,mBAAoBogG,EAAW,GAAIA,EAAW,EAAGA,EAAUA,EAAU,QAAQ,GAC/JpF,EAAephF,QAAS,EACxBohF,EAAe3lG,EAAIwV,EAAK,GAAKo1F,EAAmB,EAAI,GACpDC,EAAa/7E,YAAY,YAAYr1B,MAAQsnG,EAAclmF,SAAS,CAAC,WAAY,oBAAoBY,eACrG,IAAIuvF,EAAqBtuG,KAAKyb,IAAI3C,EAAK,GAAK,EAAG9Y,KAAKub,IAAI2yF,EAAkB,KAC1ED,EAAiBhB,EAAasB,SAAW,IAAI,QAAa,CACxD34F,WAAW,EACXlP,MAAO,CACLpD,EAAGwV,EAAK,GAAKw1F,EACbxmG,OAAQomG,EAAmBI,KAG/BL,EAAentF,GAAG,aAAa,WAC7BzE,EAAImyF,cAAcL,MACjBrtF,GAAG,YAAY,WAChBzE,EAAIoyF,cAAcN,MAEpB1D,EAAY//F,IAAIyjG,GAChB1D,EAAY//F,IAAIu+F,GAChBwB,EAAY//F,IAAIujG,GAGlBA,EAAe5sG,KAAK,CAClB2kE,WAAW,EACXC,OAAQsnC,GAAUtqG,KAAKinG,SACvBtkC,MAAO,kBAAK3iE,KAAKuqG,YAAavqG,KAAM,OACpCyrG,YAAa,kBAAKzrG,KAAK0qG,cAAe1qG,MAAM,GAC5C8iE,UAAW,kBAAK9iE,KAAKwqG,WAAYxqG,MACjCyqG,YAAa,kBAAKzqG,KAAK0qG,cAAe1qG,MAAM,GAC5C2qG,WAAY,kBAAK3qG,KAAK0qG,cAAe1qG,MAAM,MAI/C8mG,EAAehnG,UAAUwnG,eAAiB,WACxC,IAAI54C,EAAQ1uD,KAAK0rG,OAAS1rG,KAAKohG,cAAckC,kBAEzCqI,EAAa3rG,KAAKyoG,iBAEtBzoG,KAAK4rG,YAAc,CAAC,gBAAUl9C,EAAM,GAAI,CAAC,EAAG,KAAMi9C,GAAY,GAAO,gBAAUj9C,EAAM,GAAI,CAAC,EAAG,KAAMi9C,GAAY,KAGjH7E,EAAehnG,UAAU+rG,gBAAkB,SAAUzB,EAAartD,GAChE,IAAIqkD,EAAgBphG,KAAKohG,cACrB0K,EAAa9rG,KAAK4rG,YAElBG,EAAa/rG,KAAKyoG,iBAElBrE,EAAahD,EAAciD,8BAA8BC,gBACzD0H,EAAgB,CAAC,EAAG,KACxB,OAAAtuC,GAAA,MAAW3gB,EAAO+uD,EAAYC,EAAY3K,EAAcp2F,IAAI,YAAc,MAAQo/F,EAAmC,MAAtBhG,EAAWG,QAAkB,gBAAUH,EAAWG,QAASyH,EAAeD,GAAY,GAAQ,KAA4B,MAAtB3H,EAAWI,QAAkB,gBAAUJ,EAAWI,QAASwH,EAAeD,GAAY,GAAQ,MACjS,IAAIlI,EAAY7jG,KAAK0rG,OACjBh9C,EAAQ1uD,KAAK0rG,OAAS,gBAAI,CAAC,gBAAUI,EAAW,GAAIC,EAAYC,GAAe,GAAO,gBAAUF,EAAW,GAAIC,EAAYC,GAAe,KAC9I,OAAQnI,GAAaA,EAAU,KAAOn1C,EAAM,IAAMm1C,EAAU,KAAOn1C,EAAM,IAG3Eo4C,EAAehnG,UAAUqnG,YAAc,SAAU8E,GAC/C,IAAIC,EAAclsG,KAAK+mG,cACnB+E,EAAa9rG,KAAK4rG,YAClBO,EAAiB,gBAAIL,EAAWtxG,SAChCqb,EAAO7V,KAAKmoG,MAChB,kBAAK,CAAC,EAAG,IAAI,SAAUiC,GAErB,IAAIgC,EAASF,EAAYjC,QAAQG,GAC7BiC,EAAersG,KAAK6qG,cACxBuB,EAAOhuG,KAAK,CACVwN,OAAQygG,EAAe,EACvBxgG,OAAQwgG,EAAe,EAGvBjsG,EAAG0rG,EAAW1B,IAAgBA,GAAe,EAAI,GACjD/pG,EAAGwV,EAAK,GAAK,EAAIw2F,EAAe,MAEjCrsG,MAEHksG,EAAY/B,OAAOpuF,SAAS,CAC1B3b,EAAG+rG,EAAe,GAClB9rG,EAAG,EACHsE,MAAOwnG,EAAe,GAAKA,EAAe,GAC1CtnG,OAAQgR,EAAK,KAEf,IAAI81F,EAAa,CACfvrG,EAAG+rG,EAAe,GAClBxnG,MAAOwnG,EAAe,GAAKA,EAAe,IAGxCD,EAAYf,aACde,EAAYf,WAAWpvF,SAAS4vF,GAChCO,EAAYZ,SAASvvF,SAAS4vF,GAE9BO,EAAYZ,SAAS79E,kBACrBy+E,EAAYlG,gBAAkBkG,EAAYlG,eAAe5nG,KAAK,IAAKutG,EAAWvrG,EAAIurG,EAAWhnG,MAAQ,IAOvG,IAHA,IAAImkG,EAAiBoD,EAAYpD,eAC7BwD,EAAe,CAAC,EAAGH,EAAe,GAAIA,EAAe,GAAIt2F,EAAK,IAEzDza,EAAI,EAAGA,EAAI0tG,EAAepuG,OAAQU,IAAK,CAC9C,IAAImxG,EAAWzD,EAAe1tG,GAC1B6Q,EAAWsgG,EAASC,cAEnBvgG,IACHA,EAAW,IAAI,QACfsgG,EAASjvF,YAAYrR,IAGvBA,EAAS8P,SAAS,CAChB3b,EAAGksG,EAAalxG,GAChBiF,EAAG,EACHsE,MAAO2nG,EAAalxG,EAAI,GAAKkxG,EAAalxG,GAC1CyJ,OAAQgR,EAAK,KAIjB7V,KAAKysG,gBAAgBR,IAGvBnF,EAAehnG,UAAU2sG,gBAAkB,SAAUR,GACnD,IAAI7K,EAAgBphG,KAAKohG,cACrB8K,EAAclsG,KAAK+mG,cACnBmD,EAAegC,EAAYhC,aAC3B92D,EAASpzC,KAAKinG,QACdyF,EAAa,CAAC,GAAI,IAGtB,GAAItL,EAAcp2F,IAAI,cAAe,CACnC,IAAI2hG,EAAYvL,EAAciD,8BAE9B,GAAIsI,EAAW,CACb,IAAItlF,EAAOslF,EAAUC,eAAevlF,KAChCqnC,EAAQ1uD,KAAK0rG,OACbmB,EAAeZ,EACjBU,EAAUG,oBAAoB,CAC9BvoD,MAAOmK,EAAM,GACbiG,IAAKjG,EAAM,KACVq+C,YAAcJ,EAAUK,qBAC3BN,EAAa,CAAC1sG,KAAKitG,aAAaJ,EAAa,GAAIxlF,GAAOrnB,KAAKitG,aAAaJ,EAAa,GAAIxlF,KAI/F,IAAI6lF,EAAoB,gBAAIltG,KAAK4rG,YAAYpxG,SAI7C,SAAS2yG,EAAS/C,GAIhB,IAAIgD,EAAen+E,GAAA,gBAAqBi9E,EAAYjC,QAAQG,GAAan7F,OAAQjP,KAAKkN,OAClF4xC,EAAY7vB,GAAA,sBAA2C,IAAhBm7E,EAAoB,QAAU,OAAQgD,GAC7E7iG,EAASvK,KAAK8qG,aAAe,EAAInE,GACjC0G,EAAYp+E,GAAA,kBAAuB,CAACi+E,EAAkB9C,IAAgC,IAAhBA,GAAqB7/F,EAASA,GAASvK,KAAKmoG,MAAM,GAAK,GAAIiF,GACrIlD,EAAaE,GAAah9E,SAAS,CACjChtB,EAAGitG,EAAU,GACbhtG,EAAGgtG,EAAU,GACbhgF,cAAe+lB,IAAWqzD,GAAa,SAAW3nD,EAClDxxB,MAAO8lB,IAAWqzD,GAAa3nD,EAAY,SAC3Ct5C,KAAMknG,EAAWtC,KAhBrB+C,EAAS9jG,KAAKrJ,KAAM,GACpBmtG,EAAS9jG,KAAKrJ,KAAM,IAoBtB8mG,EAAehnG,UAAUmtG,aAAe,SAAUjkG,EAAOqe,GACvD,IAAI+5E,EAAgBphG,KAAKohG,cACrBkM,EAAiBlM,EAAcp2F,IAAI,kBACnCuiG,EAAiBnM,EAAcp2F,IAAI,kBAEjB,MAAlBuiG,GAA6C,SAAnBA,IAC5BA,EAAiBlmF,EAAKmmF,qBAGxB,IAAIC,EAAoB,MAATzkG,GAAiB7G,MAAM6G,GAAS,GAC/B,aAAdqe,EAAK9oB,MAAqC,SAAd8oB,EAAK9oB,KAAkB8oB,EAAK5I,MAAMivF,SAAS,CACvE1kG,MAAOjM,KAAKC,MAAMgM,KAElBA,EAAM6F,QAAQ9R,KAAKyb,IAAI+0F,EAAgB,KACzC,OAAO,wBAAWD,GAAkBA,EAAetkG,EAAOykG,GAAY,sBAASH,GAAkBA,EAAe/4F,QAAQ,UAAWk5F,GAAYA,GAOjJ3G,EAAehnG,UAAU4qG,cAAgB,SAAUiD,GAEjDA,EAAa3tG,KAAK4tG,WAAaD,EAC/B,IAAI3D,EAAehqG,KAAK+mG,cACpBmD,EAAeF,EAAaE,aAChCA,EAAa,GAAG9rG,KAAK,aAAcuvG,GACnCzD,EAAa,GAAG9rG,KAAK,aAAcuvG,GAEnC3D,EAAamB,YAAcnrG,KAAKoZ,IAAIu0F,EAAa,gBAAkB,iBAAiB3D,EAAamB,WAAY,IAG/GrE,EAAehnG,UAAUyqG,YAAc,SAAUH,EAAapgF,EAAIO,EAAInF,GACpEplB,KAAK4tG,WAAY,EAEjB,QAAexoF,EAAMA,OAErB,IAAIgoF,EAAeptG,KAAK+mG,cAAcS,YAAYqG,oBAE9CC,EAAS7+E,GAAA,kBAAuB,CAACjF,EAAIO,GAAK6iF,GAAc,GAExDW,EAAU/tG,KAAK6rG,gBAAgBzB,EAAa0D,EAAO,IAEnDxtC,EAAWtgE,KAAKohG,cAAcp2F,IAAI,YAEtChL,KAAKmnG,aAAa7mC,GAIlBytC,GAAWztC,GAAYtgE,KAAKguG,qBAAoB,IAGlDlH,EAAehnG,UAAU0qG,WAAa,WACpCxqG,KAAK4tG,WAAY,EAEjB5tG,KAAK0qG,eAAc,GAInB,IAAIpqC,EAAWtgE,KAAKohG,cAAcp2F,IAAI,aACrCs1D,GAAYtgE,KAAKguG,qBAAoB,IAGxClH,EAAehnG,UAAU6oG,cAAgB,SAAUhmG,GACjD,IAAIkT,EAAO7V,KAAKmoG,MAEZ8F,EAAajuG,KAAK+mG,cAAcS,YAAY79C,sBAAsBhnD,EAAEuL,QAASvL,EAAEyL,SAEnF,KAAI6/F,EAAW,GAAK,GAAKA,EAAW,GAAKp4F,EAAK,IAAMo4F,EAAW,GAAK,GAAKA,EAAW,GAAKp4F,EAAK,IAA9F,CAIA,IAAIi2F,EAAa9rG,KAAK4rG,YAClB1mG,GAAU4mG,EAAW,GAAKA,EAAW,IAAM,EAE3CiC,EAAU/tG,KAAK6rG,gBAAgB,MAAOoC,EAAW,GAAK/oG,GAE1DlF,KAAKmnG,cAEL4G,GAAW/tG,KAAKguG,qBAAoB,KAGtClH,EAAehnG,UAAU8oG,cAAgB,SAAUjmG,GACjD,IAAIvC,EAAIuC,EAAEuL,QACN7N,EAAIsC,EAAEyL,QACVpO,KAAKkuG,YAAc,IAAI,QAAc9tG,EAAGC,GACxCL,KAAKonG,WAAY,EACjBpnG,KAAKmuG,iBAAmB,IAAIC,MAG9BtH,EAAehnG,UAAUknG,YAAc,SAAUrkG,GAC/C,GAAK3C,KAAKonG,UAAV,CAIA,IAAIh4B,EAAYpvE,KAAK+mG,cAAc33B,UAGnC,GAFApvE,KAAKonG,WAAY,EAEZh4B,EAAL,CAIAA,EAAUhxE,KAAK,UAAU,GACzB,IAAIiwG,EAAaj/B,EAAU3rE,MACvB6qG,GAAgB,IAAIF,KAExB,KAAIE,EAAetuG,KAAKmuG,gBAAkB,KAAOpxG,KAAK8E,IAAIwsG,EAAW1pG,OAAS,GAA9E,CAKA,IAAIonG,EAAa/rG,KAAKyoG,iBAElBuD,EAAgB,CAAC,EAAG,KACxBhsG,KAAK0rG,OAAS,gBAAI,CAAC,gBAAU2C,EAAWjuG,EAAG2rG,EAAYC,GAAe,GAAO,gBAAUqC,EAAWjuG,EAAIiuG,EAAW1pG,MAAOonG,EAAYC,GAAe,KACnJhsG,KAAK4rG,YAAc,CAACyC,EAAWjuG,EAAGiuG,EAAWjuG,EAAIiuG,EAAW1pG,OAE5D3E,KAAKmnG,cAELnnG,KAAKguG,qBAAoB,OAG3BlH,EAAehnG,UAAU0+D,SAAW,SAAU77D,GACxC3C,KAAKonG,YAEP,QAAezkG,EAAEyiB,OAEjBplB,KAAKuuG,iBAAiB5rG,EAAEuL,QAASvL,EAAEyL,WAIvC04F,EAAehnG,UAAUyuG,iBAAmB,SAAUvlD,EAAQC,GAC5D,IAAI+gD,EAAehqG,KAAK+mG,cACpB3F,EAAgBphG,KAAKohG,cACrBhyB,EAAY46B,EAAa56B,UAExBA,IACHA,EAAY46B,EAAa56B,UAAY,IAAI,GAAK,CAC5CxqD,QAAQ,EACR9qB,MAAOsnG,EAAclmF,SAAS,cAAcY,iBAE9CkuF,EAAaxC,YAAY//F,IAAI2nE,IAG/BA,EAAUhxE,KAAK,UAAU,GACzB,IAAIowG,EAAaxuG,KAAKkuG,YAClB1G,EAAcxnG,KAAK+mG,cAAcS,YACjCiH,EAAWjH,EAAY79C,sBAAsBX,EAAQC,GACrD7kC,EAAaojF,EAAY79C,sBAAsB6kD,EAAWpuG,EAAGouG,EAAWnuG,GACxEwV,EAAO7V,KAAKmoG,MAChBsG,EAAS,GAAK1xG,KAAKub,IAAIvb,KAAKyb,IAAI3C,EAAK,GAAI44F,EAAS,IAAK,GACvDr/B,EAAUrzD,SAAS,CACjB3b,EAAGgkB,EAAW,GACd/jB,EAAG,EACHsE,MAAO8pG,EAAS,GAAKrqF,EAAW,GAChCvf,OAAQgR,EAAK,MAQjBixF,EAAehnG,UAAUkuG,oBAAsB,SAAU1tC,GACvD,IAAI5R,EAAQ1uD,KAAK0rG,OACjB1rG,KAAKoZ,IAAIwG,eAAe,CACtBrhB,KAAM,WACNqpC,KAAM5nC,KAAK0/B,IACXyiE,WAAYniG,KAAKohG,cAAcv3F,GAC/BqW,UAAWogD,EAAWumC,GAA4B,KAClDtiD,MAAOmK,EAAM,GACbiG,IAAKjG,EAAM,MAIfo4C,EAAehnG,UAAUioG,eAAiB,WAExC,IAAI3lG,EACAssG,EAAmB,gBAA8B1uG,KAAKohG,eAAe0B,SAEzE,IAAK1gG,GAAQssG,EAAiBh0G,OAAQ,CACpC,IAAI2a,EAAWq5F,EAAiB,GAAGpyF,MAAMhH,iBACzClT,EAAOiT,EAASwgD,SAAWxgD,EAASwgD,UAGtC,IAAKzzD,EAAM,CACT,IAAIuC,EAAQ3E,KAAKoZ,IAAIrH,WACjBlN,EAAS7E,KAAKoZ,IAAIpH,YACtB5P,EAAO,CACLhC,EAAW,GAARuE,EACHtE,EAAY,GAATwE,EACHF,MAAe,GAARA,EACPE,OAAiB,GAATA,GAIZ,OAAOzC,GAGT0kG,EAAevoG,KAAO,kBACfuoG,EAxzBT,CAyzBEpD,GAAA,MAEF,SAASoG,GAAYC,GAGnB,IAAI1mE,EAAM,CACRjjC,EAAG,IACHC,EAAG,IACH0nB,OAAQ,QACRc,MAAO,UAET,OAAOwa,EAAI0mE,GAGb,SAASO,GAAUl3D,GACjB,MAAkB,aAAXA,EAAwB,YAAc,YAGhC,UCv2BR,SAAS,GAAQ1+B,GACtBA,EAAUkqB,uBAAuB,IACjClqB,EAAUmqB,sBAAsB,IAChC,OAAA0mE,GAAA,MAAc7wF,GCHT,SAAS,GAAQA,GACtB,eAAI,IACJ,eAAI,I,wDCDFi6F,GAAiB,CACnBnrF,MAAO,CACLorF,SAAS,GAEXl5E,MAAO,CACLlE,MAAM,IAGN,GAAQ,kBACR,GAAoB,GACT,SAASq9E,GAAW75F,EAASoE,GAC1C,IAAI01F,EAAY95F,EAAQkG,SAAS,QAEjC,GAAK4zF,EAAU9jG,IAAI,WAAnB,CAIA,IAAIkL,EAAgB,WAAay4F,IACjC,WAAaz4F,EAAcsN,MAAOxO,EAAQ+5F,iBAAiB/jG,IAAI,SAAS,GACxE,WAAa8jG,EAAU/5F,OAAQmB,GAAe,GAC9C84F,IACA7B,IAEA,SAAS6B,IACP,IAAIC,EAAaH,EAAU5zF,SAAS,SAChCg0F,EAAWD,EAAWjkG,IAAI,QAE9B,GAAIkkG,EAAU,CAGZ,IAAIC,EAA4B,qBAChCn6F,EAAQ+4B,YAAW,SAAU50B,GAC3B,GAAKA,EAAYqX,sBAAjB,CAIA,IAAI4+E,EAAaD,EAA0BnkG,IAAImO,EAAY5a,MAEtD6wG,IACHA,EAAa,GACbD,EAA0BrjG,IAAIqN,EAAY5a,KAAM6wG,IAGlD,GAAMj2F,GAAak2F,MAAQD,MAE7Bp6F,EAAQs6F,eAAc,SAAUn2F,GAC9B,IAAInE,EAAQs7D,iBAAiBn3D,GAI7B,GAA2C,oBAAhCA,EAAY8mC,gBAAvB,CAMA,IAAIvqC,EAAOyD,EAAYxD,UAEvB,GAAIwD,EAAYqX,sBAAuB,CACrC,IAAI++E,EAAYp2F,EAAYwX,aACxB6+E,EAAW,GACXC,EAAe,GAAMt2F,GAAak2F,MACtC35F,EAAKuI,MAAK,SAAUR,GAClB,IAAIwB,EAASvJ,EAAKokC,YAAYr8B,GAC9B+xF,EAASvwF,GAAUxB,KAErB,IAAIiyF,EAAcH,EAAUj0G,QAC5Bi0G,EAAUtxF,MAAK,SAAUgB,GACvB,IAAIxB,EAAM+xF,EAASvwF,GACfjlB,EAAOu1G,EAAUjmF,QAAQrK,IAAWA,EAAS,GAC7C0wF,EAAe,gBAAoBx2F,EAAYnE,QAAShb,EAAMy1G,EAAcC,GAC5EE,EAAiBl6F,EAAKmN,cAAcpF,EAAK,SAC7C/H,EAAKqpB,cAActhB,EAAK,QAASoyF,EAAWD,EAAgBD,WAEzD,CACL,IAAIA,EAAe,gBAAoBx2F,EAAYnE,QAASmE,EAAYnf,KAAM,GAAmBgb,EAAQ86F,kBACrGF,EAAiBl6F,EAAKwQ,UAAU,SACpCxQ,EAAKspB,UAAU,QAAS6wE,EAAWD,EAAgBD,UAzBnDx2F,EAAY8mC,kBA4Bd,SAAS4vD,EAAWD,EAAgBD,GAGlC,IAAII,EAAcH,EAAiB,YAAc,YAAc,GAAID,GAAeC,GAAkBD,EAEpG,OADAI,EAAYtkG,OAAQ,EACbskG,OAMf,SAAS5C,IACP,IAAI6C,EAAch7F,EAAQ+5F,iBAAiB/jG,IAAI,QAC3CqhB,EAAayiF,EAAU5zF,SAAS,SAGpC,GAFAmR,EAAWtX,OAAS,cAAgBsX,EAAWtX,OAAQi7F,GAElD3jF,EAAWrhB,IAAI,WAApB,CAIA,IAAIxD,EAAM4R,EAAIwE,QAAQpW,IAEtB,GAAI6kB,EAAWrhB,IAAI,eACjBxD,EAAIhJ,aAAa,aAAc6tB,EAAWrhB,IAAI,oBADhD,CAKA,IAIIilG,EAJAC,EAAYl7F,EAAQ86F,iBACpBK,EAAa9jF,EAAWrhB,IAAI,CAAC,OAAQ,cAAgB,GACrDolG,EAAe/jF,EAAWrhB,IAAI,CAAC,SAAU,cAAgB,GACzDqlG,EAAmBtzG,KAAKyb,IAAI03F,EAAWE,GAG3C,KAAIF,EAAY,GAAhB,CAIE,IAAI7Y,EAAQiZ,IAEZ,GAAIjZ,EAAO,CACT,IAAIkZ,EAAYlkF,EAAWrhB,IAAI,CAAC,UAAW,cAC3CilG,EAAY17F,EAAQg8F,EAAW,CAC7BlZ,MAAOA,SAGT4Y,EAAY5jF,EAAWrhB,IAAI,CAAC,UAAW,iBAGzC,IAAIwlG,EAAiB,GACjBlO,EAAS4N,EAAY,EAAI7jF,EAAWrhB,IAAI,CAAC,SAAU,WAAY,WAAaqhB,EAAWrhB,IAAI,CAAC,SAAU,SAAU,WACpHilG,GAAa17F,EAAQ+tF,EAAQ,CAC3Bt3B,YAAaklC,IAEfl7F,EAAQ+4B,YAAW,SAAU50B,EAAasE,GACxC,GAAIA,EAAM4yF,EAAkB,CAC1B,IAAII,OAAc,EACd1sD,EAAa5qC,EAAYnO,IAAI,QAC7B0lG,EAAW3sD,EAAa,WAAa,cACzC0sD,EAAcP,EAAY,EAAI7jF,EAAWrhB,IAAI,CAAC,SAAU,WAAY0lG,IAAarkF,EAAWrhB,IAAI,CAAC,SAAU,SAAU0lG,IACrHD,EAAcl8F,EAAQk8F,EAAa,CACjC3oE,SAAU3uB,EAAY8L,YACtB8+B,WAAY5qC,EAAYnO,IAAI,QAC5B2c,WAAYgpF,EAAkBx3F,EAAYinB,WAE5C,IAAI1qB,EAAOyD,EAAYxD,UAEvB,GAAID,EAAKpa,QAAU60G,EAAY,CAE7B,IAAIS,EAAevkF,EAAWrhB,IAAI,CAAC,OAAQ,gBAC3CylG,GAAel8F,EAAQq8F,EAAc,CACnCC,WAAYV,SAGdM,GAAepkF,EAAWrhB,IAAI,CAAC,OAAQ,YAKzC,IAFA,IAAI8lG,EAAa,GAER11G,EAAI,EAAGA,EAAIsa,EAAKpa,QAASF,IAChC,GAAIA,EAAI+0G,EAAY,CAClB,IAAI7nE,EAAS5yB,EAAK4T,QAAQluB,GACtB4N,EAAQ,gBAAiB0M,EAAMta,GAC/B21G,EAAY1kF,EAAWrhB,IAAI,CAAC,OAAQs9B,EAAS,WAAa,gBAC9DwoE,EAAWz1G,KAAKkZ,EAAQw8F,EAAW,CACjC/2G,KAAMsuC,EACNt/B,MAAOA,KAKb,IAAIgoG,EAAoB3kF,EAAWrhB,IAAI,CAAC,OAAQ,YAAa,WACzDimG,EAAiB5kF,EAAWrhB,IAAI,CAAC,OAAQ,YAAa,QAC1DylG,GAAeK,EAAWrxG,KAAKuxG,GAAqBC,EACpDT,EAAen1G,KAAKo1G,OAGxB,IAAIS,EAAiB7kF,EAAWnR,SAAS,CAAC,SAAU,WAAY,cAC5Di2F,EAAkBD,EAAelmG,IAAI,UACrComG,EAAeF,EAAelmG,IAAI,OACtCilG,GAAaO,EAAe/wG,KAAK0xG,GAAmBC,EACpD5pG,EAAIhJ,aAAa,aAAcyxG,MAInC,SAAS17F,EAAQ88F,EAAKC,GACpB,GAAmB,kBAARD,EACT,OAAOA,EAGT,IAAI5mE,EAAS4mE,EAIb,OAHA,UAAYC,GAAW,SAAUtoG,EAAO1K,GACtCmsC,EAASA,EAAOl2B,QAAQ,IAAIg9F,OAAO,UAAYjzG,EAAM,UAAW,KAAM0K,MAEjEyhC,EAGT,SAAS6lE,IACP,IAAIjZ,EAAQriF,EAAQhK,IAAI,SAMxB,OAJIqsF,GAASA,EAAM38F,SACjB28F,EAAQA,EAAM,IAGTA,GAASA,EAAM7xF,KAGxB,SAASmrG,EAAkBpyG,GACzB,OAAOyW,EAAQ+5F,iBAAiB/jG,IAAI,CAAC,SAAU,cAAczM,IAAS,QClN3D,SAASizG,GAAiBz8F,GACvC,GAAKA,GAAWA,EAAO08F,KAAvB,CAIA,IAAIA,EAAO18F,EAAO08F,KAED,MAAbA,EAAKjgF,OACPigF,EAAK7C,QAAU6C,EAAKjgF,MAGtBigF,EAAKjuF,MAAQiuF,EAAKjuF,OAAS,GAE3B,UAAY,CAAC,cAAe,UAAW,SAAU,SAAS,SAAUxpB,GAChD,MAAdy3G,EAAKz3G,KACPy3G,EAAKjuF,MAAMxpB,GAAQy3G,EAAKz3G,QCdvB,SAAS,GAAQ0a,GACtBA,EAAUuqB,qBAAqBuyE,IAC/B98F,EAAUoqB,eAAepqB,EAAU8R,SAASC,OAAOirF,KAAM7C,I,iBCAvD8C,GAAqC,CACvC3oG,MAAO,KAEP,IAAK,KACL,KAAM,MACN,IAAK,KACL,KAAM,MACN,IAAK,KACL,KAAM,KACN,KAAM,MAYJ,GAEJ,WACE,SAAS4oG,EAAgBC,GAEvB,IAAIC,EAAY9xG,KAAK+xG,SAAW,sBAASF,GAAQ,IAAIN,OAAOM,GAAQ,sBAASA,GAAQA,EAAO,KAE5F,GAAiB,MAAbC,EAAmB,CACrB,IAAIhkC,EAAS,GAET,EAIJ,gBAAWA,IASf,OALA8jC,EAAgB9xG,UAAUkyG,SAAW,SAAUC,GAC7C,IAAI1zG,SAAc0zG,EAClB,MAAgB,WAAT1zG,EAAoByB,KAAK+xG,SAASG,KAAKD,GAAiB,WAAT1zG,GAAoByB,KAAK+xG,SAASG,KAAKD,EAAO,KAG/FL,EArBT,GAwBIO,GAEJ,WACE,SAASA,KAMT,OAJAA,EAAuBryG,UAAUkyG,SAAW,WAC1C,OAAOhyG,KAAKgJ,OAGPmpG,EAPT,GAUIC,GAEJ,WACE,SAASA,KAcT,OAZAA,EAAqBtyG,UAAUkyG,SAAW,WAGxC,IAFA,IAAI5qG,EAAWpH,KAAKoH,SAEXhM,EAAI,EAAGA,EAAIgM,EAAS1M,OAAQU,IACnC,IAAKgM,EAAShM,GAAG42G,WACf,OAAO,EAIX,OAAO,GAGFI,EAfT,GAkBIC,GAEJ,WACE,SAASA,KAcT,OAZAA,EAAoBvyG,UAAUkyG,SAAW,WAGvC,IAFA,IAAI5qG,EAAWpH,KAAKoH,SAEXhM,EAAI,EAAGA,EAAIgM,EAAS1M,OAAQU,IACnC,GAAIgM,EAAShM,GAAG42G,WACd,OAAO,EAIX,OAAO,GAGFK,EAfT,GAkBIC,GAEJ,WACE,SAASA,KAMT,OAJAA,EAAqBxyG,UAAUkyG,SAAW,WACxC,OAAQhyG,KAAKkP,MAAM8iG,YAGdM,EAPT,GAUIC,GAEJ,WACE,SAASA,KAkBT,OAhBAA,EAA4BzyG,UAAUkyG,SAAW,WAO/C,IANA,IAAIQ,IAAcxyG,KAAKyyG,YAEnBj5D,EAAWx5C,KAAKw5C,SAChBk5D,EAAYl5D,EAASx5C,KAAK2yG,kBAC1BC,EAAeJ,EAAYxyG,KAAKyyG,YAAYC,GAAa,KAEpDt3G,EAAI,EAAGA,EAAI4E,KAAK6yG,YAAYn4G,OAAQU,IAC3C,IAAK4E,KAAK6yG,YAAYz3G,GAAG42G,SAASQ,EAAYI,EAAeF,GAC3D,OAAO,EAIX,OAAO,GAGFH,EAnBT,GAsBA,SAASO,GAAYC,EAAYC,GAC/B,IAAmB,IAAfD,IAAsC,IAAfA,EAAsB,CAC/C,IAAIE,EAAO,IAAId,GAEf,OADAc,EAAKjqG,MAAQ+pG,EACNE,EAGT,IAAInlC,EAAS,GAUb,OARKolC,GAAiBH,IAKpB,gBAAWjlC,GAGTilC,EAAWI,IACNC,GAAiB,MAAOL,EAAYC,GAClCD,EAAWM,GACbD,GAAiB,KAAML,EAAYC,GACjCD,EAAWO,IACbC,GAAeR,EAAYC,GAG7BQ,GAAsBT,EAAYC,GAG3C,SAASI,GAAiBK,EAAIV,EAAYC,GACxC,IAAIU,EAAeX,EAAWU,GAC1B3lC,EAAS,GAMR,qBAAQ4lC,IACX,gBAAW5lC,GAGR4lC,EAAah5G,QAChB,gBAAWozE,GAGb,IAAImlC,EAAc,QAAPQ,EAAe,IAAIrB,GAAyB,IAAIC,GAS3D,OARAY,EAAK7rG,SAAW,iBAAIssG,GAAc,SAAUC,GAC1C,OAAOb,GAAYa,EAAWX,MAG3BC,EAAK7rG,SAAS1M,QACjB,gBAAWozE,GAGNmlC,EAGT,SAASM,GAAeR,EAAYC,GAClC,IAAIW,EAAYZ,EAAWO,IACvBxlC,EAAS,GAMRolC,GAAiBS,IACpB,gBAAW7lC,GAGb,IAAImlC,EAAO,IAAIX,GAOf,OANAW,EAAK/jG,MAAQ4jG,GAAYa,EAAWX,GAE/BC,EAAK/jG,OACR,gBAAW4+D,GAGNmlC,EAGT,SAASO,GAAsBT,EAAYC,GAQzC,IAPA,IAAIllC,EAAS,GACT6kC,EAAmBK,EAAQY,gBAAgBb,GAC3CF,EAAc,GACdgB,EAAW,kBAAKd,GAChBe,EAAaf,EAAWgB,OACxBtB,EAAcqB,EAAa,gBAAkBA,GAAc,KAEtD14G,EAAI,EAAGA,EAAIy4G,EAASn5G,OAAQU,IAAK,CACxC,IAAI44G,EAASH,EAASz4G,GAEtB,GAAe,WAAX44G,IAAuBhB,EAAQiB,mBAAmBjpG,IAAIgpG,GAA1D,CAIA,IAAIP,EAAK,oBAAO9B,GAAoCqC,GAAUrC,GAAmCqC,GAAUA,EACvGE,EAAenB,EAAWiB,GAC1BG,EAAkB1B,EAAcA,EAAYyB,GAAgBA,EAC5DE,EAAY,gBAAuBX,EAAIU,IAA2B,QAAPV,GAAgB,IAAI,GAAgBU,GAE9FC,GAKH,gBAAWtmC,GAGb+kC,EAAYx3G,KAAK+4G,IAGdvB,EAAYn4G,QAMf,gBAAWozE,GAGb,IAAImlC,EAAO,IAAIV,GAKf,OAJAU,EAAKN,iBAAmBA,EACxBM,EAAKR,YAAcA,EACnBQ,EAAKz5D,SAAWw5D,EAAQx5D,SACxBy5D,EAAKJ,YAAcA,EACZI,EAGT,SAASC,GAAiBx1G,GACxB,OAAO,sBAASA,KAAS,yBAAYA,GAGvC,IAAI22G,GAEJ,WACE,SAASA,EAA4BtB,EAAYC,GAC/ChzG,KAAKs0G,MAAQxB,GAAYC,EAAYC,GAOvC,OAJAqB,EAA4Bv0G,UAAUkyG,SAAW,WAC/C,OAAOhyG,KAAKs0G,MAAMtC,YAGbqC,EATT,GAaO,SAASE,GAA2BxB,EAAYC,GACrD,OAAO,IAAIqB,GAA4BtB,EAAYC,GC1R9C,IAAIwB,GAAkB,CAC3Bj2G,KAAM,iBAEN4F,UAAW,SAAU8V,GA2CnB,IAtCA,IACIw6F,EADA7mC,EAAW3zD,EAAO2zD,SAElB8mC,EAAYH,GAA2Bt6F,EAAO8zD,OAAQ,CACxDkmC,mBAAoB,2BAAc,CAChCx6D,WAAW,IAEbm6D,gBAAiB,SAAUb,GACzB,IAAIjlC,EAAS,GACT6mC,EAAW5B,EAAWt5D,UAErB,oBAAOs5D,EAAY,cAKtB,gBAAWjlC,GAGb,IAAI8mC,EAAUhnC,EAAS+sB,iBAAiBga,GAUxC,OARKC,GAKH,gBAAW9mC,GAGN,CACL+mC,OAAQD,EAAQ70F,QAGpBy5B,SAAU,SAAUs7D,GAClB,OAAOlnC,EAASmnC,sBAAsBN,EAASK,EAAMD,WAGrDG,EAAa,GAER55G,EAAI,EAAGiP,EAAMujE,EAAStyE,QAASF,EAAIiP,EAAKjP,IAC/Cq5G,EAAU7mC,EAAS3xB,eAAe7gD,GAE9Bs5G,EAAU1C,YACZgD,EAAW35G,KAAKo5G,GAIpB,MAAO,CACL/+F,KAAMs/F,KC/CL,IAAIC,GAAgB,CACzB12G,KAAM,eACN4F,UAAW,SAAU8V,GACnB,IAAI2zD,EAAW3zD,EAAO2zD,SAClBG,EAAS9zD,EAAO8zD,OAChBD,EAAS,GAKTonC,EAAgB,gBAAiBnnC,GAEhCmnC,EAAcx6G,QAKjB,gBAAWozE,GAGb,IAAIqnC,EAAe,GACnB,kBAAKD,GAAe,SAAUE,GAC5B,IAAIT,EAAWS,EAAU37D,UACrBX,EAAQs8D,EAAUt8D,MAClBg7D,EAAasB,EAAUrB,OACvBsB,EAAeD,EAAUC,aAkB7B,GAhBgB,MAAZV,GAKF,gBAAW7mC,GAGC,QAAVh1B,GAA6B,SAAVA,GAKrB,gBAAWg1B,GAGTunC,GAAiC,QAAjBA,GAA2C,QAAjBA,EAAwB,CACpE,IAAIC,EAAW,GAEX,EAIJ,gBAAWA,GAGb,GAAc,QAAVx8D,GAA6B,SAAVA,EAAkB,CACvC,IAAIy8D,EAAW,GAEX,EAIJ,gBAAWA,GAGb,IAAIX,EAAUhnC,EAAS+sB,iBAAiBga,GAEnCC,GAKH,gBAAW9mC,GAGb,IAAIimC,EAASD,EAAa,gBAAkBA,GAAc,KAEtDA,IAAeC,GAKjB,gBAAWjmC,GAGbqnC,EAAa95G,KAAK,CAChBw5G,OAAQD,EAAQ70F,MAChBg0F,OAAQA,EACRyB,WAAY,IAAI,QAAoB18D,EAAOu8D,QAI/C,IAAIxnC,EAAeD,EAASC,aAExBA,IAAiB,SAA4BA,IAAiB,SAKhE,gBAAWC,GAMb,IAFA,IAAIknC,EAAa,GAER55G,EAAI,EAAGiP,EAAMujE,EAAStyE,QAASF,EAAIiP,EAAKjP,IAC/C45G,EAAW35G,KAAKuyE,EAAS3xB,eAAe7gD,IAuB1C,OApBA45G,EAAW12F,MAAK,SAAUm3F,EAAOC,GAC/B,IAAK,IAAIt6G,EAAI,EAAGA,EAAI+5G,EAAaz6G,OAAQU,IAAK,CAC5C,IAAIu6G,EAAWR,EAAa/5G,GACxBw6G,EAAOhoC,EAASmnC,sBAAsBU,EAAOE,EAASd,QACtDgB,EAAOjoC,EAASmnC,sBAAsBW,EAAOC,EAASd,QAEtDc,EAAS5B,SACX6B,EAAOD,EAAS5B,OAAO6B,GACvBC,EAAOF,EAAS5B,OAAO8B,IAGzB,IAAIprE,EAASkrE,EAASH,WAAWxD,SAAS4D,EAAMC,GAEhD,GAAe,IAAXprE,EACF,OAAOA,EAIX,OAAO,KAEF,CACL/0B,KAAMs/F,KCzIL,SAAS,GAAQtgG,GACtBA,EAAUs5D,kBAAkBwmC,IAC5B9/F,EAAUs5D,kBAAkBinC,I,iBCa9B,eAAI,CAAC,SAGL,eAAI,CAAC,KAUL,eAAI,CAAC,QAAW,GAAU,GAAU,QAAc,GAAY,GAAU,GAAW,GAAc,QAAY,QAAY,GAAa,GAAe,GAAa,GAAc,GAAkB,QAAoB,GAAY,QAAc,GAAmB,GAAiB,GAAe,UAenS,eAAI,SAUJ,eAAI,SAQJ,eAAI,IAOJ,eAAI,IASJ,eAAI,IAQJ,eAAI,SAQJ,eAAI,IAKJ,eAAI,SAKJ,eAAI,SASJ,eAAI,SASJ,eAAI,IAKJ,eAAI,SAKJ,eAAI,SAKJ,eAAI,IAKJ,eAAI,IAKJ,eAAI,IAKJ,eAAI,SAEJ,eAAI,IAMJ,eAAI,IAKJ,eAAI,IAEJ,eAAI,SAKJ,eAAI,SAKJ,eAAI,SAKJ,eAAI,IAOJ,eAAI,IACJ,eAAI,S,iBtK/NW,IACbj7G,KAAM,QACN87G,QAFa,WAGX91G,KAAK+1G,gBAEPC,QAAS,CACPD,aADO,WAEL,IAAME,EAAS,kBACPC,EAAW,OAAal2G,KAAKm2G,MAAMC,UACzCF,EAASG,UAAU,OAAMC,iBACzBC,OAAOC,iBAAiB,UAAS,WAC/BN,EAASrlG,YAETqlG,EAASr4F,GAAG,SAAQ,SAAU5D,GAC5B,IAAI64D,EAAO9yE,KACX8yE,EAAK2jC,QAAUx8F,EAAO7C,UACJ,IAAf07D,EAAK2jC,SACNR,EAAO56G,KAAK,CACVrB,KAAM,SAGQ,IAAf84E,EAAK2jC,SACNR,EAAO56G,KAAK,CACVrB,KAAM,mB,UuK7BtB,GAAOkf,OAASA,EAChB,GAAOw9F,UAAY,kBAEJ,iB","file":"js/chunk-1588bf45.e1abc6bf.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=08526227&scoped=true&lang=css\"","<template>\r\n  <div class=\"mainBox\">\r\n    <div ref=\"topology\" style=\"min-height: 800px;margin: 30px;top:100px\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {state} from \"@/store/state\";\r\nimport * as echarts from 'echarts';\r\nimport {useRouter} from \"vue-router\"\r\n/* eslint-disable */\r\nexport default {\r\n  name: \"index\",\r\n  mounted() {\r\n    this.initTopology()\r\n  },\r\n  methods: {\r\n    initTopology(){\r\n      const router = useRouter()\r\n        const Topology = echarts.init(this.$refs.topology)\r\n        Topology.setOption(state.topologyOpition)\r\n        window.addEventListener(\"resize\",()=>{\r\n          Topology.resize()\r\n        })\r\n          Topology.on('click',function (params){\r\n            let self = this\r\n            self.nodeIdx = params.dataIndex\r\n            if(self.nodeIdx===2){\r\n              router.push({\r\n                name: 'Show'\r\n              })\r\n            }\r\n            if(self.nodeIdx===0){\r\n              router.push({\r\n                name: 'dataList'\r\n              })\r\n            }\r\n          })\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.mainBox{\r\n  margin: 0 auto;\r\n  top: 70px;\r\n  min-height: 1100px;\r\n  width: 80%;\r\n  position:relative;\r\n  z-index:5;\r\n  border-radius: 20px;\r\n  /*background-color: #d8ebe4;*/\r\n  background-color: #dddddd;\r\n}\r\n\r\n</style>\r\n","export function createElement(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n","function diff(oldArr, newArr, equals) {\n    if (!equals) {\n        equals = function (a, b) {\n            return a === b;\n        };\n    }\n    oldArr = oldArr.slice();\n    newArr = newArr.slice();\n    var newLen = newArr.length;\n    var oldLen = oldArr.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n    var bestPath = [{ newPos: -1, components: [] }];\n    var oldPos = extractCommon(bestPath[0], newArr, oldArr, 0, equals);\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n        var indices = [];\n        for (var i = 0; i < newArr.length; i++) {\n            indices.push(i);\n        }\n        return [{\n                indices: indices,\n                count: newArr.length,\n                added: false,\n                removed: false\n            }];\n    }\n    function execEditLength() {\n        for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n            var basePath;\n            var addPath = bestPath[diagonalPath - 1];\n            var removePath = bestPath[diagonalPath + 1];\n            var oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n            if (addPath) {\n                bestPath[diagonalPath - 1] = undefined;\n            }\n            var canAdd = addPath && addPath.newPos + 1 < newLen;\n            var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n            if (!canAdd && !canRemove) {\n                bestPath[diagonalPath] = undefined;\n                continue;\n            }\n            if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n                basePath = clonePath(removePath);\n                pushComponent(basePath.components, false, true);\n            }\n            else {\n                basePath = addPath;\n                basePath.newPos++;\n                pushComponent(basePath.components, true, false);\n            }\n            oldPos = extractCommon(basePath, newArr, oldArr, diagonalPath, equals);\n            if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n                return buildValues(basePath.components);\n            }\n            else {\n                bestPath[diagonalPath] = basePath;\n            }\n        }\n        editLength++;\n    }\n    while (editLength <= maxEditLength) {\n        var ret = execEditLength();\n        if (ret) {\n            return ret;\n        }\n    }\n}\nfunction extractCommon(basePath, newArr, oldArr, diagonalPath, equals) {\n    var newLen = newArr.length;\n    var oldLen = oldArr.length;\n    var newPos = basePath.newPos;\n    var oldPos = newPos - diagonalPath;\n    var commonCount = 0;\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && equals(newArr[newPos + 1], oldArr[oldPos + 1])) {\n        newPos++;\n        oldPos++;\n        commonCount++;\n    }\n    if (commonCount) {\n        basePath.components.push({\n            count: commonCount,\n            added: false,\n            removed: false,\n            indices: []\n        });\n    }\n    basePath.newPos = newPos;\n    return oldPos;\n}\nfunction pushComponent(components, added, removed) {\n    var last = components[components.length - 1];\n    if (last && last.added === added && last.removed === removed) {\n        components[components.length - 1] = {\n            count: last.count + 1,\n            added: added,\n            removed: removed,\n            indices: []\n        };\n    }\n    else {\n        components.push({\n            count: 1,\n            added: added,\n            removed: removed,\n            indices: []\n        });\n    }\n}\nfunction buildValues(components) {\n    var componentPos = 0;\n    var componentLen = components.length;\n    var newPos = 0;\n    var oldPos = 0;\n    for (; componentPos < componentLen; componentPos++) {\n        var component = components[componentPos];\n        if (!component.removed) {\n            var indices = [];\n            for (var i = newPos; i < newPos + component.count; i++) {\n                indices.push(i);\n            }\n            component.indices = indices;\n            newPos += component.count;\n            if (!component.added) {\n                oldPos += component.count;\n            }\n        }\n        else {\n            for (var i = oldPos; i < oldPos + component.count; i++) {\n                component.indices.push(i);\n            }\n            oldPos += component.count;\n        }\n    }\n    return components;\n}\nfunction clonePath(path) {\n    return { newPos: path.newPos, components: path.components.slice(0) };\n}\nexport default function arrayDiff(oldArr, newArr, equal) {\n    return diff(oldArr, newArr, equal);\n}\n","import { createElement } from './core';\nimport ZRImage from '../graphic/Image';\nimport { DEFAULT_FONT, getLineHeight } from '../contain/text';\nimport { map } from '../core/util';\nimport { normalizeLineDash } from '../graphic/helper/dashStyle';\nvar NONE = 'none';\nvar mathRound = Math.round;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar EPSILON = 1e-4;\nfunction round3(val) {\n    return mathRound(val * 1e3) / 1e3;\n}\nfunction round4(val) {\n    return mathRound(val * 1e4) / 1e4;\n}\nfunction isAroundZero(val) {\n    return val < EPSILON && val > -EPSILON;\n}\nfunction pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n}\nfunction pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n}\nfunction setTransform(svgEl, m) {\n    if (m) {\n        attr(svgEl, 'transform', 'matrix('\n            + round3(m[0]) + ','\n            + round3(m[1]) + ','\n            + round3(m[2]) + ','\n            + round3(m[3]) + ','\n            + round4(m[4]) + ','\n            + round4(m[5])\n            + ')');\n    }\n}\nfunction attr(el, key, val) {\n    if (!val || val.type !== 'linear' && val.type !== 'radial') {\n        el.setAttribute(key, val);\n    }\n}\nfunction attrXLink(el, key, val) {\n    el.setAttributeNS('http://www.w3.org/1999/xlink', key, val);\n}\nfunction attrXML(el, key, val) {\n    el.setAttributeNS('http://www.w3.org/XML/1998/namespace', key, val);\n}\nfunction bindStyle(svgEl, style, el) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n    if (el instanceof ZRImage) {\n        svgEl.style.opacity = opacity + '';\n        return;\n    }\n    if (pathHasFill(style)) {\n        var fill = style.fill;\n        fill = fill === 'transparent' ? NONE : fill;\n        attr(svgEl, 'fill', fill);\n        attr(svgEl, 'fill-opacity', (style.fillOpacity != null ? style.fillOpacity * opacity : opacity) + '');\n    }\n    else {\n        attr(svgEl, 'fill', NONE);\n    }\n    if (pathHasStroke(style)) {\n        var stroke = style.stroke;\n        stroke = stroke === 'transparent' ? NONE : stroke;\n        attr(svgEl, 'stroke', stroke);\n        var strokeWidth = style.lineWidth;\n        var strokeScale_1 = style.strokeNoScale\n            ? el.getLineScale()\n            : 1;\n        attr(svgEl, 'stroke-width', (strokeScale_1 ? strokeWidth / strokeScale_1 : 0) + '');\n        attr(svgEl, 'paint-order', style.strokeFirst ? 'stroke' : 'fill');\n        attr(svgEl, 'stroke-opacity', (style.strokeOpacity != null ? style.strokeOpacity * opacity : opacity) + '');\n        var lineDash = style.lineDash && strokeWidth > 0 && normalizeLineDash(style.lineDash, strokeWidth);\n        if (lineDash) {\n            var lineDashOffset = style.lineDashOffset;\n            if (strokeScale_1 && strokeScale_1 !== 1) {\n                lineDash = map(lineDash, function (rawVal) {\n                    return rawVal / strokeScale_1;\n                });\n                if (lineDashOffset) {\n                    lineDashOffset /= strokeScale_1;\n                    lineDashOffset = mathRound(lineDashOffset);\n                }\n            }\n            attr(svgEl, 'stroke-dasharray', lineDash.join(','));\n            attr(svgEl, 'stroke-dashoffset', (lineDashOffset || 0) + '');\n        }\n        else {\n            attr(svgEl, 'stroke-dasharray', '');\n        }\n        style.lineCap && attr(svgEl, 'stroke-linecap', style.lineCap);\n        style.lineJoin && attr(svgEl, 'stroke-linejoin', style.lineJoin);\n        style.miterLimit && attr(svgEl, 'stroke-miterlimit', style.miterLimit + '');\n    }\n    else {\n        attr(svgEl, 'stroke', NONE);\n    }\n}\nvar SVGPathRebuilder = (function () {\n    function SVGPathRebuilder() {\n    }\n    SVGPathRebuilder.prototype.reset = function () {\n        this._d = [];\n        this._str = '';\n    };\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n        this._add('M', x, y);\n    };\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n        this._add('C', x, y, x2, y2, x3, y3);\n    };\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n        this._add('Q', x, y, x2, y2);\n    };\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n        var firstCmd = this._d.length === 0;\n        var dTheta = endAngle - startAngle;\n        var clockwise = !anticlockwise;\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2)\n            || (clockwise ? dTheta >= PI2 : -dTheta >= PI2);\n        var unifiedTheta = dTheta > 0 ? dTheta % PI2 : (dTheta % PI2 + PI2);\n        var large = false;\n        if (isCircle) {\n            large = true;\n        }\n        else if (isAroundZero(dThetaPositive)) {\n            large = false;\n        }\n        else {\n            large = (unifiedTheta >= PI) === !!clockwise;\n        }\n        var x0 = round4(cx + rx * mathCos(startAngle));\n        var y0 = round4(cy + ry * mathSin(startAngle));\n        if (isCircle) {\n            if (clockwise) {\n                dTheta = PI2 - 1e-4;\n            }\n            else {\n                dTheta = -PI2 + 1e-4;\n            }\n            large = true;\n            if (firstCmd) {\n                this._d.push('M', x0, y0);\n            }\n        }\n        var x = round4(cx + rx * mathCos(startAngle + dTheta));\n        var y = round4(cy + ry * mathSin(startAngle + dTheta));\n        if (isNaN(x0) || isNaN(y0) || isNaN(rx) || isNaN(ry) || isNaN(psi) || isNaN(degree) || isNaN(x) || isNaN(y)) {\n            return '';\n        }\n        this._d.push('A', round4(rx), round4(ry), mathRound(psi * degree), +large, +clockwise, x, y);\n    };\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n        this._add('M', x, y);\n        this._add('L', x + w, y);\n        this._add('L', x + w, y + h);\n        this._add('L', x, y + h);\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.closePath = function () {\n        if (this._d.length > 0) {\n            this._add('Z');\n        }\n    };\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n        this._d.push(cmd);\n        for (var i = 1; i < arguments.length; i++) {\n            var val = arguments[i];\n            if (isNaN(val)) {\n                this._invalid = true;\n                return;\n            }\n            this._d.push(round4(val));\n        }\n    };\n    SVGPathRebuilder.prototype.generateStr = function () {\n        this._str = this._invalid ? '' : this._d.join(' ');\n        this._d = [];\n    };\n    SVGPathRebuilder.prototype.getStr = function () {\n        return this._str;\n    };\n    return SVGPathRebuilder;\n}());\nvar svgPath = {\n    brush: function (el) {\n        var style = el.style;\n        var svgEl = el.__svgEl;\n        if (!svgEl) {\n            svgEl = createElement('path');\n            el.__svgEl = svgEl;\n        }\n        if (!el.path) {\n            el.createPathProxy();\n        }\n        var path = el.path;\n        if (el.shapeChanged()) {\n            path.beginPath();\n            el.buildPath(path, el.shape);\n            el.pathUpdated();\n        }\n        var pathVersion = path.getVersion();\n        var elExt = el;\n        var svgPathBuilder = elExt.__svgPathBuilder;\n        if (elExt.__svgPathVersion !== pathVersion || !svgPathBuilder || el.style.strokePercent < 1) {\n            if (!svgPathBuilder) {\n                svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n            }\n            svgPathBuilder.reset();\n            path.rebuildPath(svgPathBuilder, el.style.strokePercent);\n            svgPathBuilder.generateStr();\n            elExt.__svgPathVersion = pathVersion;\n        }\n        attr(svgEl, 'd', svgPathBuilder.getStr());\n        bindStyle(svgEl, style, el);\n        setTransform(svgEl, el.transform);\n    }\n};\nexport { svgPath as path };\nvar svgImage = {\n    brush: function (el) {\n        var style = el.style;\n        var image = style.image;\n        if (image instanceof HTMLImageElement) {\n            image = image.src;\n        }\n        else if (image instanceof HTMLCanvasElement) {\n            image = image.toDataURL();\n        }\n        if (!image) {\n            return;\n        }\n        var x = style.x || 0;\n        var y = style.y || 0;\n        var dw = style.width;\n        var dh = style.height;\n        var svgEl = el.__svgEl;\n        if (!svgEl) {\n            svgEl = createElement('image');\n            el.__svgEl = svgEl;\n        }\n        if (image !== el.__imageSrc) {\n            attrXLink(svgEl, 'href', image);\n            el.__imageSrc = image;\n        }\n        attr(svgEl, 'width', dw + '');\n        attr(svgEl, 'height', dh + '');\n        attr(svgEl, 'x', x + '');\n        attr(svgEl, 'y', y + '');\n        bindStyle(svgEl, style, el);\n        setTransform(svgEl, el.transform);\n    }\n};\nexport { svgImage as image };\nvar TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n};\nfunction adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n        y += lineHeight / 2;\n    }\n    else if (textBaseline === 'bottom') {\n        y -= lineHeight / 2;\n    }\n    return y;\n}\nvar svgText = {\n    brush: function (el) {\n        var style = el.style;\n        var text = style.text;\n        text != null && (text += '');\n        if (!text || isNaN(style.x) || isNaN(style.y)) {\n            return;\n        }\n        var textSvgEl = el.__svgEl;\n        if (!textSvgEl) {\n            textSvgEl = createElement('text');\n            attrXML(textSvgEl, 'xml:space', 'preserve');\n            el.__svgEl = textSvgEl;\n        }\n        var font = style.font || DEFAULT_FONT;\n        var textSvgElStyle = textSvgEl.style;\n        textSvgElStyle.font = font;\n        textSvgEl.textContent = text;\n        bindStyle(textSvgEl, style, el);\n        setTransform(textSvgEl, el.transform);\n        var x = style.x || 0;\n        var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n        var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\n            || style.textAlign;\n        attr(textSvgEl, 'dominant-baseline', 'central');\n        attr(textSvgEl, 'text-anchor', textAlign);\n        attr(textSvgEl, 'x', x + '');\n        attr(textSvgEl, 'y', y + '');\n    }\n};\nexport { svgText as text };\n","import { createElement } from '../core';\nimport * as zrUtil from '../../core/util';\nimport Path from '../../graphic/Path';\nimport ZRImage from '../../graphic/Image';\nimport TSpan from '../../graphic/TSpan';\nimport { path as svgPath, image as svgImage, text as svgText } from '../graphic';\nvar MARK_UNUSED = '0';\nvar MARK_USED = '1';\nvar Definable = (function () {\n    function Definable(zrId, svgRoot, tagNames, markLabel, domName) {\n        this.nextId = 0;\n        this._domName = '_dom';\n        this.createElement = createElement;\n        this._zrId = zrId;\n        this._svgRoot = svgRoot;\n        this._tagNames = typeof tagNames === 'string' ? [tagNames] : tagNames;\n        this._markLabel = markLabel;\n        if (domName) {\n            this._domName = domName;\n        }\n    }\n    Definable.prototype.getDefs = function (isForceCreating) {\n        var svgRoot = this._svgRoot;\n        var defs = this._svgRoot.getElementsByTagName('defs');\n        if (defs.length === 0) {\n            if (isForceCreating) {\n                var defs_1 = svgRoot.insertBefore(this.createElement('defs'), svgRoot.firstChild);\n                if (!defs_1.contains) {\n                    defs_1.contains = function (el) {\n                        var children = defs_1.children;\n                        if (!children) {\n                            return false;\n                        }\n                        for (var i = children.length - 1; i >= 0; --i) {\n                            if (children[i] === el) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    };\n                }\n                return defs_1;\n            }\n            else {\n                return null;\n            }\n        }\n        else {\n            return defs[0];\n        }\n    };\n    Definable.prototype.doUpdate = function (target, onUpdate) {\n        if (!target) {\n            return;\n        }\n        var defs = this.getDefs(false);\n        if (target[this._domName] && defs.contains(target[this._domName])) {\n            if (typeof onUpdate === 'function') {\n                onUpdate(target);\n            }\n        }\n        else {\n            var dom = this.add(target);\n            if (dom) {\n                target[this._domName] = dom;\n            }\n        }\n    };\n    Definable.prototype.add = function (target) {\n        return null;\n    };\n    Definable.prototype.addDom = function (dom) {\n        var defs = this.getDefs(true);\n        if (dom.parentNode !== defs) {\n            defs.appendChild(dom);\n        }\n    };\n    Definable.prototype.removeDom = function (target) {\n        var defs = this.getDefs(false);\n        if (defs && target[this._domName]) {\n            defs.removeChild(target[this._domName]);\n            target[this._domName] = null;\n        }\n    };\n    Definable.prototype.getDoms = function () {\n        var defs = this.getDefs(false);\n        if (!defs) {\n            return [];\n        }\n        var doms = [];\n        zrUtil.each(this._tagNames, function (tagName) {\n            var tags = defs.getElementsByTagName(tagName);\n            for (var i = 0; i < tags.length; i++) {\n                doms.push(tags[i]);\n            }\n        });\n        return doms;\n    };\n    Definable.prototype.markAllUnused = function () {\n        var doms = this.getDoms();\n        var that = this;\n        zrUtil.each(doms, function (dom) {\n            dom[that._markLabel] = MARK_UNUSED;\n        });\n    };\n    Definable.prototype.markDomUsed = function (dom) {\n        dom && (dom[this._markLabel] = MARK_USED);\n    };\n    ;\n    Definable.prototype.markDomUnused = function (dom) {\n        dom && (dom[this._markLabel] = MARK_UNUSED);\n    };\n    ;\n    Definable.prototype.isDomUnused = function (dom) {\n        return dom && dom[this._markLabel] !== MARK_USED;\n    };\n    Definable.prototype.removeUnused = function () {\n        var _this = this;\n        var defs = this.getDefs(false);\n        if (!defs) {\n            return;\n        }\n        var doms = this.getDoms();\n        zrUtil.each(doms, function (dom) {\n            if (_this.isDomUnused(dom)) {\n                defs.removeChild(dom);\n            }\n        });\n    };\n    Definable.prototype.getSvgProxy = function (displayable) {\n        if (displayable instanceof Path) {\n            return svgPath;\n        }\n        else if (displayable instanceof ZRImage) {\n            return svgImage;\n        }\n        else if (displayable instanceof TSpan) {\n            return svgText;\n        }\n        else {\n            return svgPath;\n        }\n    };\n    Definable.prototype.getSvgElement = function (displayable) {\n        return displayable.__svgEl;\n    };\n    return Definable;\n}());\nexport default Definable;\n","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport * as colorTool from '../../tool/color';\nfunction isLinearGradient(value) {\n    return value.type === 'linear';\n}\nfunction isRadialGradient(value) {\n    return value.type === 'radial';\n}\nfunction isGradient(value) {\n    return value && (value.type === 'linear'\n        || value.type === 'radial');\n}\nvar GradientManager = (function (_super) {\n    __extends(GradientManager, _super);\n    function GradientManager(zrId, svgRoot) {\n        return _super.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__') || this;\n    }\n    GradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n        if (displayable && displayable.style) {\n            var that_1 = this;\n            zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n                var value = displayable.style[fillOrStroke];\n                if (isGradient(value)) {\n                    var gradient = value;\n                    var defs = that_1.getDefs(true);\n                    var dom = void 0;\n                    if (gradient.__dom) {\n                        dom = gradient.__dom;\n                        if (!defs.contains(gradient.__dom)) {\n                            that_1.addDom(dom);\n                        }\n                    }\n                    else {\n                        dom = that_1.add(gradient);\n                    }\n                    that_1.markUsed(displayable);\n                    var id = dom.getAttribute('id');\n                    svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n                }\n            });\n        }\n    };\n    GradientManager.prototype.add = function (gradient) {\n        var dom;\n        if (isLinearGradient(gradient)) {\n            dom = this.createElement('linearGradient');\n        }\n        else if (isRadialGradient(gradient)) {\n            dom = this.createElement('radialGradient');\n        }\n        else {\n            zrUtil.logError('Illegal gradient type.');\n            return null;\n        }\n        gradient.id = gradient.id || this.nextId++;\n        dom.setAttribute('id', 'zr' + this._zrId\n            + '-gradient-' + gradient.id);\n        this.updateDom(gradient, dom);\n        this.addDom(dom);\n        return dom;\n    };\n    GradientManager.prototype.update = function (gradient) {\n        if (!isGradient(gradient)) {\n            return;\n        }\n        var that = this;\n        this.doUpdate(gradient, function () {\n            var dom = gradient.__dom;\n            if (!dom) {\n                return;\n            }\n            var tagName = dom.tagName;\n            var type = gradient.type;\n            if (type === 'linear' && tagName === 'linearGradient'\n                || type === 'radial' && tagName === 'radialGradient') {\n                that.updateDom(gradient, gradient.__dom);\n            }\n            else {\n                that.removeDom(gradient);\n                that.add(gradient);\n            }\n        });\n    };\n    GradientManager.prototype.updateDom = function (gradient, dom) {\n        if (isLinearGradient(gradient)) {\n            dom.setAttribute('x1', gradient.x + '');\n            dom.setAttribute('y1', gradient.y + '');\n            dom.setAttribute('x2', gradient.x2 + '');\n            dom.setAttribute('y2', gradient.y2 + '');\n        }\n        else if (isRadialGradient(gradient)) {\n            dom.setAttribute('cx', gradient.x + '');\n            dom.setAttribute('cy', gradient.y + '');\n            dom.setAttribute('r', gradient.r + '');\n        }\n        else {\n            zrUtil.logError('Illegal gradient type.');\n            return;\n        }\n        if (gradient.global) {\n            dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n        }\n        else {\n            dom.setAttribute('gradientUnits', 'objectBoundingBox');\n        }\n        dom.innerHTML = '';\n        var colors = gradient.colorStops;\n        for (var i = 0, len = colors.length; i < len; ++i) {\n            var stop_1 = this.createElement('stop');\n            stop_1.setAttribute('offset', colors[i].offset * 100 + '%');\n            var color = colors[i].color;\n            if (color.indexOf('rgba') > -1) {\n                var opacity = colorTool.parse(color)[3];\n                var hex = colorTool.toHex(color);\n                stop_1.setAttribute('stop-color', '#' + hex);\n                stop_1.setAttribute('stop-opacity', opacity + '');\n            }\n            else {\n                stop_1.setAttribute('stop-color', colors[i].color);\n            }\n            dom.appendChild(stop_1);\n        }\n        gradient.__dom = dom;\n    };\n    GradientManager.prototype.markUsed = function (displayable) {\n        if (displayable.style) {\n            var gradient = displayable.style.fill;\n            if (gradient && gradient.__dom) {\n                _super.prototype.markDomUsed.call(this, gradient.__dom);\n            }\n            gradient = displayable.style.stroke;\n            if (gradient && gradient.__dom) {\n                _super.prototype.markDomUsed.call(this, gradient.__dom);\n            }\n        }\n    };\n    return GradientManager;\n}(Definable));\nexport default GradientManager;\n","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport { createOrUpdateImage } from '../../graphic/helper/image';\nimport WeakMap from '../../core/WeakMap';\nfunction isPattern(value) {\n    return value && (!!value.image || !!value.svgElement);\n}\nvar patternDomMap = new WeakMap();\nvar PatternManager = (function (_super) {\n    __extends(PatternManager, _super);\n    function PatternManager(zrId, svgRoot) {\n        return _super.call(this, zrId, svgRoot, ['pattern'], '__pattern_in_use__') || this;\n    }\n    PatternManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n        if (displayable && displayable.style) {\n            var that_1 = this;\n            zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n                var pattern = displayable.style[fillOrStroke];\n                if (isPattern(pattern)) {\n                    var defs = that_1.getDefs(true);\n                    var dom = patternDomMap.get(pattern);\n                    if (dom) {\n                        if (!defs.contains(dom)) {\n                            that_1.addDom(dom);\n                        }\n                    }\n                    else {\n                        dom = that_1.add(pattern);\n                    }\n                    that_1.markUsed(displayable);\n                    var id = dom.getAttribute('id');\n                    svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n                }\n            });\n        }\n    };\n    PatternManager.prototype.add = function (pattern) {\n        if (!isPattern(pattern)) {\n            return;\n        }\n        var dom = this.createElement('pattern');\n        pattern.id = pattern.id == null ? this.nextId++ : pattern.id;\n        dom.setAttribute('id', 'zr' + this._zrId\n            + '-pattern-' + pattern.id);\n        dom.setAttribute('x', '0');\n        dom.setAttribute('y', '0');\n        dom.setAttribute('patternUnits', 'userSpaceOnUse');\n        this.updateDom(pattern, dom);\n        this.addDom(dom);\n        return dom;\n    };\n    PatternManager.prototype.update = function (pattern) {\n        if (!isPattern(pattern)) {\n            return;\n        }\n        var that = this;\n        this.doUpdate(pattern, function () {\n            var dom = patternDomMap.get(pattern);\n            that.updateDom(pattern, dom);\n        });\n    };\n    PatternManager.prototype.updateDom = function (pattern, patternDom) {\n        var svgElement = pattern.svgElement;\n        if (svgElement instanceof SVGElement) {\n            if (svgElement.parentNode !== patternDom) {\n                patternDom.innerHTML = '';\n                patternDom.appendChild(svgElement);\n                patternDom.setAttribute('width', pattern.svgWidth + '');\n                patternDom.setAttribute('height', pattern.svgHeight + '');\n            }\n        }\n        else {\n            var img = void 0;\n            var prevImage = patternDom.getElementsByTagName('image');\n            if (prevImage.length) {\n                if (pattern.image) {\n                    img = prevImage[0];\n                }\n                else {\n                    patternDom.removeChild(prevImage[0]);\n                    return;\n                }\n            }\n            else if (pattern.image) {\n                img = this.createElement('image');\n            }\n            if (img) {\n                var imageSrc = void 0;\n                if (typeof pattern.image === 'string') {\n                    imageSrc = pattern.image;\n                }\n                else if (pattern.image instanceof HTMLImageElement) {\n                    imageSrc = pattern.image.src;\n                }\n                else if (pattern.image instanceof HTMLCanvasElement) {\n                    imageSrc = pattern.image.toDataURL();\n                }\n                if (imageSrc) {\n                    img.setAttribute('href', imageSrc);\n                    img.setAttribute('x', '0');\n                    img.setAttribute('y', '0');\n                    var hostEl = {\n                        dirty: function () { }\n                    };\n                    var createdImage = createOrUpdateImage(imageSrc, img, hostEl, function (img) {\n                        patternDom.setAttribute('width', img.width + '');\n                        patternDom.setAttribute('height', img.height + '');\n                    });\n                    if (createdImage && createdImage.width && createdImage.height) {\n                        patternDom.setAttribute('width', createdImage.width + '');\n                        patternDom.setAttribute('height', createdImage.height + '');\n                    }\n                    patternDom.appendChild(img);\n                }\n            }\n        }\n        var x = pattern.x || 0;\n        var y = pattern.y || 0;\n        var rotation = (pattern.rotation || 0) / Math.PI * 180;\n        var scaleX = pattern.scaleX || 1;\n        var scaleY = pattern.scaleY || 1;\n        var transform = \"translate(\" + x + \", \" + y + \") rotate(\" + rotation + \") scale(\" + scaleX + \", \" + scaleY + \")\";\n        patternDom.setAttribute('patternTransform', transform);\n        patternDomMap.set(pattern, patternDom);\n    };\n    PatternManager.prototype.markUsed = function (displayable) {\n        if (displayable.style) {\n            if (isPattern(displayable.style.fill)) {\n                _super.prototype.markDomUsed.call(this, patternDomMap.get(displayable.style.fill));\n            }\n            if (isPattern(displayable.style.stroke)) {\n                _super.prototype.markDomUsed.call(this, patternDomMap.get(displayable.style.stroke));\n            }\n        }\n    };\n    return PatternManager;\n}(Definable));\nexport default PatternManager;\n","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport { isClipPathChanged } from '../../canvas/helper';\nfunction generateClipPathsKey(clipPaths) {\n    var key = [];\n    if (clipPaths) {\n        for (var i = 0; i < clipPaths.length; i++) {\n            var clipPath = clipPaths[i];\n            key.push(clipPath.id);\n        }\n    }\n    return key.join(',');\n}\nexport function hasClipPath(displayable) {\n    var clipPaths = displayable.__clipPaths;\n    return clipPaths && clipPaths.length > 0;\n}\nvar ClippathManager = (function (_super) {\n    __extends(ClippathManager, _super);\n    function ClippathManager(zrId, svgRoot) {\n        var _this = _super.call(this, zrId, svgRoot, 'clipPath', '__clippath_in_use__') || this;\n        _this._refGroups = {};\n        _this._keyDuplicateCount = {};\n        return _this;\n    }\n    ClippathManager.prototype.markAllUnused = function () {\n        _super.prototype.markAllUnused.call(this);\n        for (var key in this._refGroups) {\n            this.markDomUnused(this._refGroups[key]);\n        }\n        this._keyDuplicateCount = {};\n    };\n    ClippathManager.prototype._getClipPathGroup = function (displayable, prevDisplayable) {\n        if (!hasClipPath(displayable)) {\n            return;\n        }\n        var clipPaths = displayable.__clipPaths;\n        var keyDuplicateCount = this._keyDuplicateCount;\n        var clipPathKey = generateClipPathsKey(clipPaths);\n        if (isClipPathChanged(clipPaths, prevDisplayable && prevDisplayable.__clipPaths)) {\n            keyDuplicateCount[clipPathKey] = keyDuplicateCount[clipPathKey] || 0;\n            keyDuplicateCount[clipPathKey] && (clipPathKey += '-' + keyDuplicateCount[clipPathKey]);\n            keyDuplicateCount[clipPathKey]++;\n        }\n        return this._refGroups[clipPathKey]\n            || (this._refGroups[clipPathKey] = this.createElement('g'));\n    };\n    ClippathManager.prototype.update = function (displayable, prevDisplayable) {\n        var clipGroup = this._getClipPathGroup(displayable, prevDisplayable);\n        if (clipGroup) {\n            this.markDomUsed(clipGroup);\n            this.updateDom(clipGroup, displayable.__clipPaths);\n        }\n        return clipGroup;\n    };\n    ;\n    ClippathManager.prototype.updateDom = function (parentEl, clipPaths) {\n        if (clipPaths && clipPaths.length > 0) {\n            var defs = this.getDefs(true);\n            var clipPath = clipPaths[0];\n            var clipPathEl = void 0;\n            var id = void 0;\n            if (clipPath._dom) {\n                id = clipPath._dom.getAttribute('id');\n                clipPathEl = clipPath._dom;\n                if (!defs.contains(clipPathEl)) {\n                    defs.appendChild(clipPathEl);\n                }\n            }\n            else {\n                id = 'zr' + this._zrId + '-clip-' + this.nextId;\n                ++this.nextId;\n                clipPathEl = this.createElement('clipPath');\n                clipPathEl.setAttribute('id', id);\n                defs.appendChild(clipPathEl);\n                clipPath._dom = clipPathEl;\n            }\n            var svgProxy = this.getSvgProxy(clipPath);\n            svgProxy.brush(clipPath);\n            var pathEl = this.getSvgElement(clipPath);\n            clipPathEl.innerHTML = '';\n            clipPathEl.appendChild(pathEl);\n            parentEl.setAttribute('clip-path', 'url(#' + id + ')');\n            if (clipPaths.length > 1) {\n                this.updateDom(clipPathEl, clipPaths.slice(1));\n            }\n        }\n        else {\n            if (parentEl) {\n                parentEl.setAttribute('clip-path', 'none');\n            }\n        }\n    };\n    ;\n    ClippathManager.prototype.markUsed = function (displayable) {\n        var _this = this;\n        if (displayable.__clipPaths) {\n            zrUtil.each(displayable.__clipPaths, function (clipPath) {\n                if (clipPath._dom) {\n                    _super.prototype.markDomUsed.call(_this, clipPath._dom);\n                }\n            });\n        }\n    };\n    ;\n    ClippathManager.prototype.removeUnused = function () {\n        _super.prototype.removeUnused.call(this);\n        var newRefGroupsMap = {};\n        for (var key in this._refGroups) {\n            var group = this._refGroups[key];\n            if (!this.isDomUnused(group)) {\n                newRefGroupsMap[key] = group;\n            }\n            else if (group.parentNode) {\n                group.parentNode.removeChild(group);\n            }\n        }\n        this._refGroups = newRefGroupsMap;\n    };\n    return ClippathManager;\n}(Definable));\nexport default ClippathManager;\n","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nvar ShadowManager = (function (_super) {\n    __extends(ShadowManager, _super);\n    function ShadowManager(zrId, svgRoot) {\n        var _this = _super.call(this, zrId, svgRoot, ['filter'], '__filter_in_use__', '_shadowDom') || this;\n        _this._shadowDomMap = {};\n        _this._shadowDomPool = [];\n        return _this;\n    }\n    ShadowManager.prototype._getFromPool = function () {\n        var shadowDom = this._shadowDomPool.pop();\n        if (!shadowDom) {\n            shadowDom = this.createElement('filter');\n            shadowDom.setAttribute('id', 'zr' + this._zrId + '-shadow-' + this.nextId++);\n            var domChild = this.createElement('feDropShadow');\n            shadowDom.appendChild(domChild);\n            this.addDom(shadowDom);\n        }\n        return shadowDom;\n    };\n    ShadowManager.prototype.update = function (svgElement, displayable) {\n        var style = displayable.style;\n        if (hasShadow(style)) {\n            var shadowKey = getShadowKey(displayable);\n            var shadowDom = displayable._shadowDom = this._shadowDomMap[shadowKey];\n            if (!shadowDom) {\n                shadowDom = this._getFromPool();\n                this._shadowDomMap[shadowKey] = shadowDom;\n            }\n            this.updateDom(svgElement, displayable, shadowDom);\n        }\n        else {\n            this.remove(svgElement, displayable);\n        }\n    };\n    ShadowManager.prototype.remove = function (svgElement, displayable) {\n        if (displayable._shadowDom != null) {\n            displayable._shadowDom = null;\n            svgElement.style.filter = '';\n        }\n    };\n    ShadowManager.prototype.updateDom = function (svgElement, displayable, shadowDom) {\n        var domChild = shadowDom.children[0];\n        var style = displayable.style;\n        var globalScale = displayable.getGlobalScale();\n        var scaleX = globalScale[0];\n        var scaleY = globalScale[1];\n        if (!scaleX || !scaleY) {\n            return;\n        }\n        var offsetX = style.shadowOffsetX || 0;\n        var offsetY = style.shadowOffsetY || 0;\n        var blur = style.shadowBlur;\n        var color = style.shadowColor;\n        domChild.setAttribute('dx', offsetX / scaleX + '');\n        domChild.setAttribute('dy', offsetY / scaleY + '');\n        domChild.setAttribute('flood-color', color);\n        var stdDx = blur / 2 / scaleX;\n        var stdDy = blur / 2 / scaleY;\n        var stdDeviation = stdDx + ' ' + stdDy;\n        domChild.setAttribute('stdDeviation', stdDeviation);\n        shadowDom.setAttribute('x', '-100%');\n        shadowDom.setAttribute('y', '-100%');\n        shadowDom.setAttribute('width', '300%');\n        shadowDom.setAttribute('height', '300%');\n        displayable._shadowDom = shadowDom;\n        var id = shadowDom.getAttribute('id');\n        svgElement.style.filter = 'url(#' + id + ')';\n    };\n    ShadowManager.prototype.removeUnused = function () {\n        var defs = this.getDefs(false);\n        if (!defs) {\n            return;\n        }\n        var shadowDomsPool = this._shadowDomPool;\n        for (var key in this._shadowDomMap) {\n            var dom = this._shadowDomMap[key];\n            shadowDomsPool.push(dom);\n        }\n        this._shadowDomMap = {};\n    };\n    return ShadowManager;\n}(Definable));\nexport default ShadowManager;\nfunction hasShadow(style) {\n    return style\n        && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\nfunction getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [\n        style.shadowColor,\n        (style.shadowBlur || 0).toFixed(2),\n        (style.shadowOffsetX || 0).toFixed(2),\n        (style.shadowOffsetY || 0).toFixed(2),\n        globalScale[0],\n        globalScale[1]\n    ].join(',');\n}\n","import { createElement } from './core';\nimport * as util from '../core/util';\nimport Path from '../graphic/Path';\nimport ZRImage from '../graphic/Image';\nimport TSpan from '../graphic/TSpan';\nimport arrayDiff from '../core/arrayDiff';\nimport GradientManager from './helper/GradientManager';\nimport PatternManager from './helper/PatternManager';\nimport ClippathManager, { hasClipPath } from './helper/ClippathManager';\nimport ShadowManager from './helper/ShadowManager';\nimport { path as svgPath, image as svgImage, text as svgText } from './graphic';\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nfunction getSvgProxy(el) {\n    if (el instanceof Path) {\n        return svgPath;\n    }\n    else if (el instanceof ZRImage) {\n        return svgImage;\n    }\n    else if (el instanceof TSpan) {\n        return svgText;\n    }\n    else {\n        return svgPath;\n    }\n}\nfunction checkParentAvailable(parent, child) {\n    return child && parent && child.parentNode !== parent;\n}\nfunction insertAfter(parent, child, prevSibling) {\n    if (checkParentAvailable(parent, child) && prevSibling) {\n        var nextSibling = prevSibling.nextSibling;\n        nextSibling ? parent.insertBefore(child, nextSibling)\n            : parent.appendChild(child);\n    }\n}\nfunction prepend(parent, child) {\n    if (checkParentAvailable(parent, child)) {\n        var firstChild = parent.firstChild;\n        firstChild ? parent.insertBefore(child, firstChild)\n            : parent.appendChild(child);\n    }\n}\nfunction remove(parent, child) {\n    if (child && parent && child.parentNode === parent) {\n        parent.removeChild(child);\n    }\n}\nfunction removeFromMyParent(child) {\n    if (child && child.parentNode) {\n        child.parentNode.removeChild(child);\n    }\n}\nfunction getSvgElement(displayable) {\n    return displayable.__svgEl;\n}\nvar SVGPainter = (function () {\n    function SVGPainter(root, storage, opts, zrId) {\n        this.type = 'svg';\n        this.refreshHover = createMethodNotSupport('refreshHover');\n        this.pathToImage = createMethodNotSupport('pathToImage');\n        this.configLayer = createMethodNotSupport('configLayer');\n        this.root = root;\n        this.storage = storage;\n        this._opts = opts = util.extend({}, opts || {});\n        var svgDom = createElement('svg');\n        svgDom.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns', 'http://www.w3.org/2000/svg');\n        svgDom.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n        svgDom.setAttribute('version', '1.1');\n        svgDom.setAttribute('baseProfile', 'full');\n        svgDom.style.cssText = 'user-select:none;position:absolute;left:0;top:0;';\n        var bgRoot = createElement('g');\n        svgDom.appendChild(bgRoot);\n        var svgRoot = createElement('g');\n        svgDom.appendChild(svgRoot);\n        this._gradientManager = new GradientManager(zrId, svgRoot);\n        this._patternManager = new PatternManager(zrId, svgRoot);\n        this._clipPathManager = new ClippathManager(zrId, svgRoot);\n        this._shadowManager = new ShadowManager(zrId, svgRoot);\n        var viewport = document.createElement('div');\n        viewport.style.cssText = 'overflow:hidden;position:relative';\n        this._svgDom = svgDom;\n        this._svgRoot = svgRoot;\n        this._backgroundRoot = bgRoot;\n        this._viewport = viewport;\n        root.appendChild(viewport);\n        viewport.appendChild(svgDom);\n        this.resize(opts.width, opts.height);\n        this._visibleList = [];\n    }\n    SVGPainter.prototype.getType = function () {\n        return 'svg';\n    };\n    SVGPainter.prototype.getViewportRoot = function () {\n        return this._viewport;\n    };\n    SVGPainter.prototype.getSvgDom = function () {\n        return this._svgDom;\n    };\n    SVGPainter.prototype.getSvgRoot = function () {\n        return this._svgRoot;\n    };\n    SVGPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    SVGPainter.prototype.refresh = function () {\n        var list = this.storage.getDisplayList(true);\n        this._paintList(list);\n    };\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this._backgroundRoot && this._backgroundNode) {\n            this._backgroundRoot.removeChild(this._backgroundNode);\n        }\n        var bgNode = createElement('rect');\n        bgNode.setAttribute('width', this.getWidth());\n        bgNode.setAttribute('height', this.getHeight());\n        bgNode.setAttribute('x', 0);\n        bgNode.setAttribute('y', 0);\n        bgNode.setAttribute('id', 0);\n        bgNode.style.fill = backgroundColor;\n        this._backgroundRoot.appendChild(bgNode);\n        this._backgroundNode = bgNode;\n    };\n    SVGPainter.prototype.createSVGElement = function (tag) {\n        return createElement(tag);\n    };\n    SVGPainter.prototype.paintOne = function (el) {\n        var svgProxy = getSvgProxy(el);\n        svgProxy && svgProxy.brush(el);\n        return getSvgElement(el);\n    };\n    SVGPainter.prototype._paintList = function (list) {\n        var gradientManager = this._gradientManager;\n        var patternManager = this._patternManager;\n        var clipPathManager = this._clipPathManager;\n        var shadowManager = this._shadowManager;\n        gradientManager.markAllUnused();\n        patternManager.markAllUnused();\n        clipPathManager.markAllUnused();\n        shadowManager.markAllUnused();\n        var svgRoot = this._svgRoot;\n        var visibleList = this._visibleList;\n        var listLen = list.length;\n        var newVisibleList = [];\n        for (var i = 0; i < listLen; i++) {\n            var displayable = list[i];\n            var svgProxy = getSvgProxy(displayable);\n            var svgElement = getSvgElement(displayable);\n            if (!displayable.invisible) {\n                if (displayable.__dirty || !svgElement) {\n                    svgProxy && svgProxy.brush(displayable);\n                    svgElement = getSvgElement(displayable);\n                    if (svgElement && displayable.style) {\n                        gradientManager.update(displayable.style.fill);\n                        gradientManager.update(displayable.style.stroke);\n                        patternManager.update(displayable.style.fill);\n                        patternManager.update(displayable.style.stroke);\n                        shadowManager.update(svgElement, displayable);\n                    }\n                    displayable.__dirty = 0;\n                }\n                if (svgElement) {\n                    newVisibleList.push(displayable);\n                }\n            }\n        }\n        var diff = arrayDiff(visibleList, newVisibleList);\n        var prevSvgElement;\n        var topPrevSvgElement;\n        for (var i = 0; i < diff.length; i++) {\n            var item = diff[i];\n            if (item.removed) {\n                for (var k = 0; k < item.count; k++) {\n                    var displayable = visibleList[item.indices[k]];\n                    var svgElement = getSvgElement(displayable);\n                    hasClipPath(displayable) ? removeFromMyParent(svgElement)\n                        : remove(svgRoot, svgElement);\n                }\n            }\n        }\n        var prevDisplayable;\n        var currentClipGroup;\n        for (var i = 0; i < diff.length; i++) {\n            var item = diff[i];\n            if (item.removed) {\n                continue;\n            }\n            for (var k = 0; k < item.count; k++) {\n                var displayable = newVisibleList[item.indices[k]];\n                var clipGroup = clipPathManager.update(displayable, prevDisplayable);\n                if (clipGroup !== currentClipGroup) {\n                    prevSvgElement = topPrevSvgElement;\n                    if (clipGroup) {\n                        prevSvgElement ? insertAfter(svgRoot, clipGroup, prevSvgElement)\n                            : prepend(svgRoot, clipGroup);\n                        topPrevSvgElement = clipGroup;\n                        prevSvgElement = null;\n                    }\n                    currentClipGroup = clipGroup;\n                }\n                var svgElement = getSvgElement(displayable);\n                prevSvgElement\n                    ? insertAfter(currentClipGroup || svgRoot, svgElement, prevSvgElement)\n                    : prepend(currentClipGroup || svgRoot, svgElement);\n                prevSvgElement = svgElement || prevSvgElement;\n                if (!currentClipGroup) {\n                    topPrevSvgElement = prevSvgElement;\n                }\n                gradientManager.markUsed(displayable);\n                gradientManager.addWithoutUpdate(svgElement, displayable);\n                patternManager.markUsed(displayable);\n                patternManager.addWithoutUpdate(svgElement, displayable);\n                clipPathManager.markUsed(displayable);\n                prevDisplayable = displayable;\n            }\n        }\n        gradientManager.removeUnused();\n        patternManager.removeUnused();\n        clipPathManager.removeUnused();\n        shadowManager.removeUnused();\n        this._visibleList = newVisibleList;\n    };\n    SVGPainter.prototype.resize = function (width, height) {\n        var viewport = this._viewport;\n        viewport.style.display = 'none';\n        var opts = this._opts;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        width = this._getSize(0);\n        height = this._getSize(1);\n        viewport.style.display = '';\n        if (this._width !== width || this._height !== height) {\n            this._width = width;\n            this._height = height;\n            var viewportStyle = viewport.style;\n            viewportStyle.width = width + 'px';\n            viewportStyle.height = height + 'px';\n            var svgRoot = this._svgDom;\n            svgRoot.setAttribute('width', width + '');\n            svgRoot.setAttribute('height', height + '');\n        }\n        if (this._backgroundNode) {\n            this._backgroundNode.setAttribute('width', width);\n            this._backgroundNode.setAttribute('height', height);\n        }\n    };\n    SVGPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    SVGPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    SVGPainter.prototype._getSize = function (whIdx) {\n        var opts = this._opts;\n        var wh = ['width', 'height'][whIdx];\n        var cwh = ['clientWidth', 'clientHeight'][whIdx];\n        var plt = ['paddingLeft', 'paddingTop'][whIdx];\n        var prb = ['paddingRight', 'paddingBottom'][whIdx];\n        if (opts[wh] != null && opts[wh] !== 'auto') {\n            return parseFloat(opts[wh]);\n        }\n        var root = this.root;\n        var stl = document.defaultView.getComputedStyle(root);\n        return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n            - (parseInt10(stl[plt]) || 0)\n            - (parseInt10(stl[prb]) || 0)) | 0;\n    };\n    SVGPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this._svgRoot\n            = this._backgroundRoot\n                = this._svgDom\n                    = this._backgroundNode\n                        = this._viewport\n                            = this.storage\n                                = null;\n    };\n    SVGPainter.prototype.clear = function () {\n        var viewportNode = this._viewport;\n        if (viewportNode && viewportNode.parentNode) {\n            viewportNode.parentNode.removeChild(viewportNode);\n        }\n    };\n    SVGPainter.prototype.toDataURL = function () {\n        this.refresh();\n        var svgDom = this._svgDom;\n        var outerHTML = svgDom.outerHTML\n            || (svgDom.parentNode && svgDom.parentNode).innerHTML;\n        var html = encodeURIComponent(outerHTML.replace(/></g, '>\\n\\r<'));\n        return 'data:image/svg+xml;charset=UTF-8,' + html;\n    };\n    return SVGPainter;\n}());\nfunction createMethodNotSupport(method) {\n    return function () {\n        util.logError('In SVG mode painter not support method \"' + method + '\"');\n    };\n}\nexport default SVGPainter;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SVGPainter from 'zrender/lib/svg/Painter';\nexport function install(registers) {\n  registers.registerPainter('svg', SVGPainter);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createListFromArray from '../helper/createListFromArray';\n\nvar BaseBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BaseBarSeriesModel, _super);\n\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(coordSys.clampData(value));\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  };\n\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\n\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries';\nimport createListFromArray from '../helper/createListFromArray';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar BarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BarSeriesModel, _super);\n\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  };\n\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default BarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path';\nimport Group from 'zrender/lib/graphic/Group';\nimport { extend, defaults, each, map } from 'zrender/lib/core/util';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut } from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { enableHoverEmphasis, setStatesStylesFromModel } from '../../util/states';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation } from '../../label/labelStyle';\nimport { throttle } from '../../util/throttle';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nimport Sausage from '../../util/shape/sausage';\nimport ChartView from '../../view/Chart';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper';\nimport { warn } from '../../util/log';\nvar _eventPos = [0, 0];\nvar mathMax = Math.max;\nvar mathMin = Math.min;\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar BarView =\n/** @class */\nfunction (_super) {\n  __extends(BarView, _super);\n\n  function BarView() {\n    var _this = _super.call(this) || this;\n\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n\n    this._removeOnRenderedListener(api);\n\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      }\n\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (drawBackground) {\n        createBackground(dataIndex);\n      } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n\n\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (drawBackground) {\n        var bgEl = void 0;\n\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          }\n\n          bgEls[newIndex] = bgEl;\n        }\n\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(el);\n        el = null;\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } // Not change anything if only order changed.\n      // Especially not change label.\n\n\n      if (!isChangeOrder) {\n        updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      }\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n\n    createLarge(seriesModel, this.group, true);\n  };\n\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this; // If no data in the first frame, wait for data to initSort\n\n\n    if (!data.count()) {\n      return;\n    }\n\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n\n        if (el) {\n          var shape = el.shape; // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n\n          return (baseAxis.isHorizontal() // The result should be consistent with the initial sort by data value.\n          // Do not support the case that both positive and negative exist.\n          ? Math.abs(shape.height) : Math.abs(shape.width)) || 0;\n        } else {\n          return 0;\n        }\n      };\n\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n\n      if (value > lastValue) {\n        return true;\n      }\n\n      lastValue = value;\n    }\n\n    return false;\n  };\n  /*\n   * Consider the case when A and B changed order, whose representing\n   * bars are both out of sight, we don't wish to trigger reorder action\n   * as long as the order in the view doesn't change.\n   */\n\n\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult,\n      animation: {\n        // Update the axis label from the natural initial layout to\n        // sorted layout should has no animation.\n        duration: 0\n      }\n    });\n  };\n\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\n\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Beause if data changed and the bar show again, its transition animaiton\n    // will begin at this place.\n\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0; // Reverse back\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    // Keep the same logic with bar in catesion: use end value to control\n    // direction. Notice that if clockwise is true (by default), the sector\n    // will always draw clockwisely, no matter whether endAngle is greater\n    // or less than startAngle.\n    var clockwise = layout.startAngle < layout.endAngle;\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: defaults({\n        clockwise: clockwise\n      }, layout),\n      z2: 1\n    });\n    sector.name = 'item'; // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n\n      }, animationModel);\n    }\n\n    return sector;\n  }\n};\n\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\n\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\n\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle\n    };\n  }\n};\n\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontal, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n\n  if (!isPolar) {\n    el.setShape('r', itemModel.get(['itemStyle', 'borderRadius']) || 0);\n  }\n\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n\n  if (!isPolar) {\n    var labelPositionOutside = isHorizontal ? layout.height > 0 ? 'bottom' : 'top' : layout.width > 0 ? 'left' : 'right';\n    var labelStatesModels = getLabelStatesModels(itemModel);\n    setLabelStyle(el, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: dataIndex,\n      defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n      inheritColor: style.fill,\n      defaultOpacity: style.opacity,\n      defaultOutsidePosition: labelPositionOutside\n    });\n    var label = el.getTextContent();\n    setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n      return getDefaultInterpolatedLabel(data, value);\n    });\n  }\n\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  enableHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  setStatesStylesFromModel(el, itemModel);\n\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\n\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\n\nvar LagePathShape =\n/** @class */\nfunction () {\n  function LagePathShape() {}\n\n  return LagePathShape;\n}();\n\nvar LargePath =\n/** @class */\nfunction (_super) {\n  __extends(LargePath, _super);\n\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeBar';\n    return _this;\n  }\n\n  ;\n\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var startPoint = this.__startPoint;\n    var baseDimIdx = this.__baseDimIdx;\n\n    for (var i = 0; i < points.length; i += 2) {\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      ctx.moveTo(startPoint[0], startPoint[1]);\n      ctx.lineTo(points[i], points[i + 1]);\n    }\n  };\n\n  return LargePath;\n}(Path);\n\nfunction createLarge(seriesModel, group, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var startPoint = [];\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  startPoint[1 - baseDimIdx] = data.getLayout('valueAxisStart');\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('barWidth');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var drawBackground = seriesModel.get('showBackground', true);\n\n  if (drawBackground) {\n    var points = data.getLayout('largeBackgroundPoints');\n    var backgroundStartPoint = [];\n    backgroundStartPoint[1 - baseDimIdx] = data.getLayout('backgroundStart');\n    var bgEl = new LargePath({\n      shape: {\n        points: points\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.__startPoint = backgroundStartPoint;\n    bgEl.__baseDimIdx = baseDimIdx;\n    bgEl.__largeDataIndices = largeDataIndices;\n    bgEl.__barWidth = barWidth;\n    setLargeBackgroundStyle(bgEl, backgroundModel, data);\n    group.add(bgEl);\n  }\n\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental\n  });\n  el.__startPoint = startPoint;\n  el.__baseDimIdx = baseDimIdx;\n  el.__largeDataIndices = largeDataIndices;\n  el.__barWidth = barWidth;\n  group.add(el);\n  setLargeStyle(el, seriesModel, data); // Enable tooltip and user mouse/touch event handlers.\n\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.__baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.__largeDataIndices;\n  var barWidthHalf = Math.abs(largePath.__barWidth / 2);\n  var startValueVal = largePath.__startPoint[valueDimIdx];\n  _eventPos[0] = x;\n  _eventPos[1] = y;\n  var pointerBaseVal = _eventPos[baseDimIdx];\n  var pointerValueVal = _eventPos[1 - baseDimIdx];\n  var baseLowerBound = pointerBaseVal - barWidthHalf;\n  var baseUpperBound = pointerBaseVal + barWidthHalf;\n\n  for (var i = 0, len = points.length / 2; i < len; i++) {\n    var ii = i * 2;\n    var barBaseVal = points[ii + baseDimIdx];\n    var barValueVal = points[ii + valueDimIdx];\n\n    if (barBaseVal >= baseLowerBound && barBaseVal <= baseUpperBound && (startValueVal <= barValueVal ? pointerValueVal >= startValueVal && pointerValueVal <= barValueVal : pointerValueVal >= barValueVal && pointerValueVal <= startValueVal)) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction setLargeStyle(el, seriesModel, data) {\n  var globalStyle = data.getVisual('style');\n  el.useStyle(extend({}, globalStyle)); // Use stroke instead of fill.\n\n  el.style.fill = null;\n  el.style.stroke = globalStyle.fill;\n  el.style.lineWidth = data.getLayout('barWidth');\n}\n\nfunction setLargeBackgroundStyle(el, backgroundModel, data) {\n  var borderColor = backgroundModel.get('borderColor') || backgroundModel.get('color');\n  var itemStyle = backgroundModel.getItemStyle();\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n  el.style.lineWidth = data.getLayout('barWidth');\n}\n\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\n\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\n\nexport default BarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { layout, largeLayout } from '../../layout/barGrid';\nimport dataSample from '../../processor/dataSample';\nimport BarSeries from './BarSeries';\nimport BarView from './BarView';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Use higher prority to avoid to be blocked by other overall layout, which do not\n  // only exist in this module, but probably also exist in other modules, like `barPolar`.\n\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, largeLayout); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent, linearMap } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport * as zrUtil from 'zrender/lib/core/util';\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport default function pieLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = parsePercent(viewRect.width, api.getWidth());\n    var height = parsePercent(viewRect.height, api.getHeight());\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width) + viewRect.x;\n    var cy = parsePercent(center[1], height) + viewRect.y;\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.setLayout({\n      viewRect: viewRect,\n      r: r\n    });\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle_1 = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_1 = data.getItemLayout(idx);\n            layout_1.angle = angle_1;\n            layout_1.startAngle = startAngle + dir * idx * angle_1;\n            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_2 = data.getItemLayout(idx);\n            var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\n            layout_2.startAngle = currentAngle;\n            layout_2.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nimport { parsePercent } from '../../util/number';\nimport { Point } from '../../util/graphic';\nimport { each } from 'zrender/lib/core/util';\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper';\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper';\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  if (list.length < 2) {\n    return;\n  }\n\n  ;\n\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n    var rB = semi.rB;\n    var rB2 = rB * rB;\n\n    for (var i = 0; i < semi.list.length; i++) {\n      var item = semi.list[i];\n      var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\n\n      var rA = r + item.len;\n      var rA2 = rA * rA; // Use ellipse implicit function to calculate x\n\n      var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\n      item.label.x = cx + (dx + item.len2) * dir;\n    }\n  } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n\n\n  function recalculateX(items) {\n    // Extremes of\n    var topSemi = {\n      list: [],\n      maxY: 0\n    };\n    var bottomSemi = {\n      list: [],\n      maxY: 0\n    };\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var item = items[i];\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\n      var dy = Math.abs(item.label.y - cy);\n\n      if (dy > semi.maxY) {\n        var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\n\n        var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\n\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n        semi.rB = rB;\n        semi.maxY = dy;\n      }\n\n      semi.list.push(item);\n    }\n\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n  }\n\n  var len = list.length;\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].label.x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].label.x = farthestX;\n    }\n  }\n\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n    recalculateX(list);\n  }\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var label = labelLayoutList[i].label;\n\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (label.x < cx) {\n      leftmostX = Math.min(leftmostX, label.x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, label.x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n\n    if (isPositionCenter(layout)) {\n      continue;\n    }\n\n    var linePoints = layout.linePoints;\n\n    if (linePoints) {\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var realTextWidth = layout.rect.width;\n      var targetTextWidth = void 0;\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n        }\n      }\n\n      if (targetTextWidth < layout.rect.width) {\n        // TODOTODO\n        // layout.text = textContain.truncateText(layout.text, targetTextWidth, layout.font);\n        layout.label.style.width = targetTextWidth;\n\n        if (layout.labelAlignTo === 'edge') {\n          realTextWidth = targetTextWidth; // realTextWidth = textContain.getWidth(layout.text, layout.font);\n        }\n      }\n\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          linePoints[2][0] = label.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = label.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = label.y;\n    }\n  }\n}\n\nfunction isPositionCenter(sectorShape) {\n  // Not change x for center label\n  return sectorShape.position === 'center';\n}\n\nexport default function pieLabelLayout(seriesModel) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  var viewRect = data.getLayout('viewRect');\n  var r = data.getLayout('r');\n  var viewWidth = viewRect.width;\n  var viewLeft = viewRect.x;\n  var viewTop = viewRect.y;\n  var viewHeight = viewRect.height;\n\n  function setNotShow(el) {\n    el.ignore = true;\n  }\n\n  function isLabelShown(label) {\n    if (!label.ignore) {\n      return true;\n    }\n\n    for (var key in label.states) {\n      if (label.states[key].ignore === false) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  data.each(function (idx) {\n    var sector = data.getItemGraphicEl(idx);\n    var sectorShape = sector.shape;\n    var label = sector.getTextContent();\n    var labelLine = sector.getTextGuideLine();\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n      each(label.states, setNotShow);\n      label.ignore = true;\n      return;\n    }\n\n    if (!isLabelShown(label)) {\n      return;\n    }\n\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n    var nx = Math.cos(midAngle);\n    var ny = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = sectorShape.cx;\n    cy = sectorShape.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = sectorShape.cx;\n      textY = sectorShape.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n      textX = x1 + nx * 3;\n      textY = y1 + ny * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n        } else {\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n    }\n\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else {\n      labelRotate = rotate ? nx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    }\n\n    hasLabelRotate = !!labelRotate;\n    label.x = textX;\n    label.y = textY;\n    label.rotation = labelRotate;\n    label.setStyle({\n      verticalAlign: 'middle'\n    }); // Not sectorShape the inside label\n\n    if (!isLabelInside) {\n      var textRect = label.getBoundingRect().clone();\n      textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\n\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.y -= margin / 2;\n      textRect.height += margin;\n      labelLayoutList.push({\n        label: label,\n        labelLine: labelLine,\n        position: labelPosition,\n        len: labelLineLen,\n        len2: labelLineLen2,\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n        surfaceNormal: new Point(nx, ny),\n        linePoints: linePoints,\n        textAlign: textAlign,\n        labelDistance: labelDistance,\n        labelAlignTo: labelAlignTo,\n        edgeDistance: edgeDistance,\n        bleedMargin: bleedMargin,\n        rect: textRect\n      });\n    } else {\n      label.setStyle({\n        align: textAlign\n      });\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    sector.setTextConfig({\n      inside: isLabelInside\n    });\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n    var labelLine = layout.labelLine;\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\n\n    if (label) {\n      label.setStyle({\n        align: layout.textAlign\n      });\n\n      if (notShowLabel) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n      }\n\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    if (labelLine) {\n      var linePoints = layout.linePoints;\n\n      if (notShowLabel || !linePoints) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      } else {\n        limitTurnAngle(linePoints, layout.minTurnAngle);\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n        labelLine.setShape({\n          points: linePoints\n        }); // Set the anchor to the midpoint of sector\n\n        label.__hostTarget.textGuideLineConfig = {\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\n        };\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\nimport { parsePercent } from 'zrender/lib/contain/text';\nexport function getSectorCornerRadius(model, shape) {\n  var cornerRadius = model.get('borderRadius');\n\n  if (cornerRadius == null) {\n    return null;\n  }\n\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius];\n  }\n\n  return {\n    innerCornerRadius: parsePercent(cornerRadius[0], shape.r0),\n    cornerRadius: parsePercent(cornerRadius[1], shape.r)\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __assign, __extends } from \"tslib\";\nimport { extend, retrieve3 } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport labelLayout from './labelLayout';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getSectorCornerRadius } from '../helper/pieHelper';\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar PiePiece =\n/** @class */\nfunction (_super) {\n  __extends(PiePiece, _super);\n\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = 2;\n    var text = new graphic.Text();\n\n    _this.setTextContent(text);\n\n    _this.updateData(data, idx, startAngle, true);\n\n    return _this;\n  }\n\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx);\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout) || {}, layout); // Ignore NaN data.\n\n    if (isNaN(sectorShape.startAngle)) {\n      // Use NaN shape to avoid drawing shape.\n      sector.setShape(sectorShape);\n      return;\n    }\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n\n      if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      } // Expansion\n      else {\n          if (startAngle != null) {\n            sector.setShape({\n              startAngle: startAngle,\n              endAngle: startAngle\n            });\n            graphic.initProps(sector, {\n              shape: {\n                startAngle: layout.startAngle,\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          } else {\n            sector.shape.endAngle = layout.startAngle;\n            graphic.updateProps(sector, {\n              shape: {\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          }\n        }\n    } else {\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n\n    this._updateLabel(seriesModel, data, idx);\n\n    sector.ensureState('emphasis').shape = __assign({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    extend(sector.ensureState('blur'), {\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    labelLine && extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    }); // TODO: needs dx, dy in zrender?\n\n    extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  };\n\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent(); // Set textConfig on sector.\n\n    sector.setTextConfig({\n      // reset position, rotation\n      position: null,\n      rotation: null\n    }); // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    labelText.attr({\n      z2: 10\n    });\n    var labelPosition = seriesModel.get(['label', 'position']);\n\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n      sector.removeTextGuideLine();\n    } else {\n      var polyline = this.getTextGuideLine();\n\n      if (!polyline) {\n        polyline = new graphic.Polyline();\n        this.setTextGuideLine(polyline);\n      } // Default use item visual color\n\n\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n        stroke: visualColor,\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n      });\n    }\n  };\n\n  return PiePiece;\n}(graphic.Sector); // Pie view\n\n\nvar PieView =\n/** @class */\nfunction (_super) {\n  __extends(PieView, _super);\n\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  PieView.prototype.init = function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  };\n\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle; // First render\n\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout(seriesModel); // Always use initial animation.\n\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n\n  PieView.prototype.dispose = function () {};\n\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  PieView.type = 'pie';\n  return PieView;\n}(ChartView);\n\nexport default PieView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createListSimply from '../helper/createListSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nimport { getPercentWithPrecision } from '../../util/number';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\n\nvar PieSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PieSeriesModel, _super);\n\n  function PieSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.useColorPaletteOnData = true;\n    return _this;\n  }\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n\n    this._defaultLabelLine(option);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.mergeOption = function () {\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getInitialData = function () {\n    return createListSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex); // FIXME toFixed?\n\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  };\n\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n\n  PieSeriesModel.type = 'series.pie';\n  PieSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // color: 'inherit',\n      // If rotate around circle\n      rotate: 0,\n      show: true,\n      overflow: 'truncate',\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      edgeDistance: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见TEXTSTYLE\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      minTurnAngle: 90,\n      maxSurfaceAngle: 90,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1\n    },\n    labelLayout: {\n      // Hide the overlapped label.\n      hideOverlap: true\n    },\n    emphasis: {\n      scale: true,\n      scaleSize: 5\n    },\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasingUpdate: 'cubicInOut',\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut'\n  };\n  return PieSeriesModel;\n}(SeriesModel);\n\nexport default PieSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction';\nimport pieLayout from '../pie/pieLayout';\nimport dataFilter from '../../processor/dataFilter';\nimport { curry } from 'zrender/lib/core/util';\nimport PieView from './PieView';\nimport PieSeriesModel from './PieSeries';\nexport function install(registers) {\n  registers.registerChartView(PieView);\n  registers.registerSeriesModel(PieSeriesModel);\n  createLegacyDataSelectAction('pie', registers.registerAction);\n  registers.registerLayout(curry(pieLayout, 'pie'));\n  registers.registerProcessor(dataFilter('pie'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function radarLayout(ecModel) {\n  ecModel.eachSeriesByType('radar', function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (!coordSys) {\n      return;\n    }\n\n    var axes = coordSys.getIndicatorAxes();\n    zrUtil.each(axes, function (axis, axisIndex) {\n      data.each(data.mapDimension(axes[axisIndex].dim), function (val, dataIndex) {\n        points[dataIndex] = points[dataIndex] || [];\n        var point = coordSys.dataToPoint(val, axisIndex);\n        points[dataIndex][axisIndex] = isValidPoint(point) ? point : getValueMissingPoint(coordSys);\n      });\n    }); // Close polygon\n\n    data.each(function (idx) {\n      // TODO\n      // Is it appropriate to connect to the next data when some data is missing?\n      // Or, should trade it like `connectNull` in line chart?\n      var firstPoint = zrUtil.find(points[idx], function (point) {\n        return isValidPoint(point);\n      }) || getValueMissingPoint(coordSys); // Copy the first actual point to the end of the array\n\n      points[idx].push(firstPoint.slice());\n      data.setItemLayout(idx, points[idx]);\n    });\n  });\n}\n\nfunction isValidPoint(point) {\n  return !isNaN(point[0]) && !isNaN(point[1]);\n}\n\nfunction getValueMissingPoint(coordSys) {\n  // It is error-prone to input [NaN, NaN] into polygon, polygon.\n  // (probably cause problem when refreshing or animating)\n  return [coordSys.cx, coordSys.cy];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\n// Backward compat for radar chart in 2\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function radarBackwardCompat(option) {\n  var polarOptArr = option.polar;\n\n  if (polarOptArr) {\n    if (!zrUtil.isArray(polarOptArr)) {\n      polarOptArr = [polarOptArr];\n    }\n\n    var polarNotRadar_1 = [];\n    zrUtil.each(polarOptArr, function (polarOpt, idx) {\n      if (polarOpt.indicator) {\n        if (polarOpt.type && !polarOpt.shape) {\n          polarOpt.shape = polarOpt.type;\n        }\n\n        option.radar = option.radar || [];\n\n        if (!zrUtil.isArray(option.radar)) {\n          option.radar = [option.radar];\n        }\n\n        option.radar.push(polarOpt);\n      } else {\n        polarNotRadar_1.push(polarOpt);\n      }\n    });\n    option.polar = polarNotRadar_1;\n  }\n\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'radar' && seriesOpt.polarIndex) {\n      seriesOpt.radarIndex = seriesOpt.polarIndex;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as symbolUtil from '../../util/symbol';\nimport ChartView from '../../view/Chart';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\n\nfunction normalizeSymbolSize(symbolSize) {\n  if (!zrUtil.isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n\n  return symbolSize;\n}\n\nvar RadarView =\n/** @class */\nfunction (_super) {\n  __extends(RadarView, _super);\n\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarView.type;\n    return _this;\n  }\n\n  RadarView.prototype.render = function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n\n      if (symbolType === 'none') {\n        return;\n      }\n\n      var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2);\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate') || 0;\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2,\n        rotation: symbolRotate * Math.PI / 180 || 0\n      });\n      return symbolPath;\n    }\n\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n\n          if (oldPoints[i]) {\n            symbolPath.setPosition(oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              x: newPoints[i][0],\n              y: newPoints[i][1]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.setPosition(newPoints[i]);\n          }\n\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n\n      if (!points) {\n        return;\n      }\n\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n\n      if (!target.shape.points) {\n        return;\n      }\n\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2); // Radar uses the visual encoded from itemStyle.\n\n      var itemStyle = data.getItemVisual(idx, 'style');\n      var color = itemStyle.fill;\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      setStatesStylesFromModel(polyline, itemModel, 'lineStyle');\n      setStatesStylesFromModel(polygon, itemModel, 'areaStyle');\n      var areaStyleModel = itemModel.getModel('areaStyle');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      polygon.ignore = polygonIgnore;\n      zrUtil.each(['emphasis', 'select', 'blur'], function (stateName) {\n        var stateModel = itemModel.getModel([stateName, 'areaStyle']);\n        var stateIgnore = stateModel.isEmpty() && stateModel.parentModel.isEmpty(); // Won't be ignore if normal state is not ignore.\n\n        polygon.ensureState(stateName).ignore = stateIgnore && polygonIgnore;\n      });\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7,\n        decal: itemStyle.decal\n      }));\n      var emphasisModel = itemModel.getModel('emphasis');\n      var itemHoverStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      symbolGroup.eachChild(function (symbolPath) {\n        if (symbolPath instanceof ZRImage) {\n          var pathStyle = symbolPath.style;\n          symbolPath.useStyle(zrUtil.extend({\n            // TODO other properties like x, y ?\n            image: pathStyle.image,\n            x: pathStyle.x,\n            y: pathStyle.y,\n            width: pathStyle.width,\n            height: pathStyle.height\n          }, itemStyle));\n        } else {\n          symbolPath.useStyle(itemStyle);\n          symbolPath.setColor(color);\n        }\n\n        var pathEmphasisState = symbolPath.ensureState('emphasis');\n        pathEmphasisState.style = zrUtil.clone(itemHoverStyle);\n        var defaultText = data.get(data.dimensions[symbolPath.__dimIdx], idx);\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\n        setLabelStyle(symbolPath, getLabelStatesModels(itemModel), {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: defaultText,\n          inheritColor: color,\n          defaultOpacity: itemStyle.opacity\n        });\n      });\n      enableHoverEmphasis(itemGroup, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n    });\n    this._data = data;\n  };\n\n  RadarView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  RadarView.type = 'radar';\n  return RadarView;\n}(ChartView);\n\nexport default RadarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createListSimply from '../helper/createListSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport { createTooltipMarkup, retrieveVisualColorForTooltipMarker } from '../../component/tooltip/tooltipMarkup';\n\nvar RadarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(RadarSeriesModel, _super);\n\n  function RadarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarSeriesModel.type;\n    _this.useColorPaletteOnData = true;\n    _this.hasSymbolVisual = true;\n    return _this;\n  } // Overwrite\n\n\n  RadarSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n\n  RadarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createListSimply(this, {\n      generateCoord: 'indicator_',\n      generateCoordCount: Infinity\n    });\n  };\n\n  RadarSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var coordSys = this.coordinateSystem;\n    var indicatorAxes = coordSys.getIndicatorAxes();\n    var name = this.getData().getName(dataIndex);\n    var nameToDisplay = name === '' ? this.name : name;\n    var markerColor = retrieveVisualColorForTooltipMarker(this, dataIndex);\n    return createTooltipMarkup('section', {\n      header: nameToDisplay,\n      sortBlocks: true,\n      blocks: zrUtil.map(indicatorAxes, function (axis) {\n        var val = data.get(data.mapDimension(axis.dim), dataIndex);\n        return createTooltipMarkup('nameValue', {\n          markerType: 'subItem',\n          markerColor: markerColor,\n          name: axis.name,\n          value: val,\n          sortParam: val\n        });\n      })\n    });\n  };\n\n  RadarSeriesModel.prototype.getTooltipPosition = function (dataIndex) {\n    if (dataIndex != null) {\n      var data_1 = this.getData();\n      var coordSys = this.coordinateSystem;\n      var values = data_1.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data_1.mapDimension(dim);\n      }), dataIndex);\n\n      for (var i = 0, len = values.length; i < len; i++) {\n        if (!isNaN(values[i])) {\n          var indicatorAxes = coordSys.getIndicatorAxes();\n          return coordSys.coordToPoint(indicatorAxes[i].dataToCoord(values[i]), i);\n        }\n      }\n    }\n  };\n\n  RadarSeriesModel.type = 'series.radar';\n  RadarSeriesModel.dependencies = ['radar'];\n  RadarSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'radar',\n    legendHoverLink: true,\n    radarIndex: 0,\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    label: {\n      position: 'top'\n    },\n    // areaStyle: {\n    // },\n    // itemStyle: {}\n    symbolSize: 8 // symbolRotate: null\n\n  };\n  return RadarSeriesModel;\n}(SeriesModel);\n\nexport default RadarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport axisDefault from '../axisDefault';\nimport Model from '../../model/Model';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport ComponentModel from '../../model/Component';\nvar valueAxisDefault = axisDefault.value;\n\nfunction defaultsShow(opt, show) {\n  return zrUtil.defaults({\n    show: show\n  }, opt);\n}\n\nvar RadarModel =\n/** @class */\nfunction (_super) {\n  __extends(RadarModel, _super);\n\n  function RadarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarModel.type;\n    return _this;\n  }\n\n  RadarModel.prototype.optionUpdated = function () {\n    var boundaryGap = this.get('boundaryGap');\n    var splitNumber = this.get('splitNumber');\n    var scale = this.get('scale');\n    var axisLine = this.get('axisLine');\n    var axisTick = this.get('axisTick'); // let axisType = this.get('axisType');\n\n    var axisLabel = this.get('axisLabel');\n    var nameTextStyle = this.get('axisName');\n    var showName = this.get(['axisName', 'show']);\n    var nameFormatter = this.get(['axisName', 'formatter']);\n    var nameGap = this.get('axisNameGap');\n    var triggerEvent = this.get('triggerEvent');\n    var indicatorModels = zrUtil.map(this.get('indicator') || [], function (indicatorOpt) {\n      // PENDING\n      if (indicatorOpt.max != null && indicatorOpt.max > 0 && !indicatorOpt.min) {\n        indicatorOpt.min = 0;\n      } else if (indicatorOpt.min != null && indicatorOpt.min < 0 && !indicatorOpt.max) {\n        indicatorOpt.max = 0;\n      }\n\n      var iNameTextStyle = nameTextStyle;\n\n      if (indicatorOpt.color != null) {\n        iNameTextStyle = zrUtil.defaults({\n          color: indicatorOpt.color\n        }, nameTextStyle);\n      } // Use same configuration\n\n\n      var innerIndicatorOpt = zrUtil.merge(zrUtil.clone(indicatorOpt), {\n        boundaryGap: boundaryGap,\n        splitNumber: splitNumber,\n        scale: scale,\n        axisLine: axisLine,\n        axisTick: axisTick,\n        // axisType: axisType,\n        axisLabel: axisLabel,\n        // Compatible with 2 and use text\n        name: indicatorOpt.text,\n        nameLocation: 'end',\n        nameGap: nameGap,\n        // min: 0,\n        nameTextStyle: iNameTextStyle,\n        triggerEvent: triggerEvent\n      }, false);\n\n      if (!showName) {\n        innerIndicatorOpt.name = '';\n      }\n\n      if (typeof nameFormatter === 'string') {\n        var indName = innerIndicatorOpt.name;\n        innerIndicatorOpt.name = nameFormatter.replace('{value}', indName != null ? indName : '');\n      } else if (typeof nameFormatter === 'function') {\n        innerIndicatorOpt.name = nameFormatter(innerIndicatorOpt.name, innerIndicatorOpt);\n      }\n\n      var model = new Model(innerIndicatorOpt, null, this.ecModel);\n      zrUtil.mixin(model, AxisModelCommonMixin.prototype); // For triggerEvent.\n\n      model.mainType = 'radar';\n      model.componentIndex = this.componentIndex;\n      return model;\n    }, this);\n    this._indicatorModels = indicatorModels;\n  };\n\n  RadarModel.prototype.getIndicatorModels = function () {\n    return this._indicatorModels;\n  };\n\n  RadarModel.type = 'radar';\n  RadarModel.defaultOption = {\n    zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '75%',\n    startAngle: 90,\n    axisName: {\n      show: true // formatter: null\n      // textStyle: {}\n\n    },\n    boundaryGap: [0, 0],\n    splitNumber: 5,\n    axisNameGap: 15,\n    scale: false,\n    // Polygon or circle\n    shape: 'polygon',\n    axisLine: zrUtil.merge({\n      lineStyle: {\n        color: '#bbb'\n      }\n    }, valueAxisDefault.axisLine),\n    axisLabel: defaultsShow(valueAxisDefault.axisLabel, false),\n    axisTick: defaultsShow(valueAxisDefault.axisTick, false),\n    // axisType: 'value',\n    splitLine: defaultsShow(valueAxisDefault.splitLine, true),\n    splitArea: defaultsShow(valueAxisDefault.splitArea, true),\n    // {text, min, max}\n    indicator: []\n  };\n  return RadarModel;\n}(ComponentModel);\n\nexport default RadarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport AxisBuilder from '../axis/AxisBuilder';\nimport * as graphic from '../../util/graphic';\nimport ComponentView from '../../view/Component';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\n\nvar RadarView =\n/** @class */\nfunction (_super) {\n  __extends(RadarView, _super);\n\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarView.type;\n    return _this;\n  }\n\n  RadarView.prototype.render = function (radarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n\n    this._buildAxes(radarModel);\n\n    this._buildSplitLineAndArea(radarModel);\n  };\n\n  RadarView.prototype._buildAxes = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    var axisBuilders = zrUtil.map(indicatorAxes, function (indicatorAxis) {\n      var axisBuilder = new AxisBuilder(indicatorAxis.model, {\n        position: [radar.cx, radar.cy],\n        rotation: indicatorAxis.angle,\n        labelDirection: -1,\n        tickDirection: -1,\n        nameDirection: 1\n      });\n      return axisBuilder;\n    });\n    zrUtil.each(axisBuilders, function (axisBuilder) {\n      zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n      this.group.add(axisBuilder.getGroup());\n    }, this);\n  };\n\n  RadarView.prototype._buildSplitLineAndArea = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n\n    if (!indicatorAxes.length) {\n      return;\n    }\n\n    var shape = radarModel.get('shape');\n    var splitLineModel = radarModel.getModel('splitLine');\n    var splitAreaModel = radarModel.getModel('splitArea');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var showSplitLine = splitLineModel.get('show');\n    var showSplitArea = splitAreaModel.get('show');\n    var splitLineColors = lineStyleModel.get('color');\n    var splitAreaColors = areaStyleModel.get('color');\n    var splitLineColorsArr = zrUtil.isArray(splitLineColors) ? splitLineColors : [splitLineColors];\n    var splitAreaColorsArr = zrUtil.isArray(splitAreaColors) ? splitAreaColors : [splitAreaColors];\n    var splitLines = [];\n    var splitAreas = [];\n\n    function getColorIndex(areaOrLine, areaOrLineColorList, idx) {\n      var colorIndex = idx % areaOrLineColorList.length;\n      areaOrLine[colorIndex] = areaOrLine[colorIndex] || [];\n      return colorIndex;\n    }\n\n    if (shape === 'circle') {\n      var ticksRadius = indicatorAxes[0].getTicksCoords();\n      var cx = radar.cx;\n      var cy = radar.cy;\n\n      for (var i = 0; i < ticksRadius.length; i++) {\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Circle({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r: ticksRadius[i].coord\n            }\n          }));\n        }\n\n        if (showSplitArea && i < ticksRadius.length - 1) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i);\n          splitAreas[colorIndex].push(new graphic.Ring({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r0: ticksRadius[i].coord,\n              r: ticksRadius[i + 1].coord\n            }\n          }));\n        }\n      }\n    } // Polyyon\n    else {\n        var realSplitNumber_1;\n        var axesTicksPoints = zrUtil.map(indicatorAxes, function (indicatorAxis, idx) {\n          var ticksCoords = indicatorAxis.getTicksCoords();\n          realSplitNumber_1 = realSplitNumber_1 == null ? ticksCoords.length - 1 : Math.min(ticksCoords.length - 1, realSplitNumber_1);\n          return zrUtil.map(ticksCoords, function (tickCoord) {\n            return radar.coordToPoint(tickCoord.coord, idx);\n          });\n        });\n        var prevPoints = [];\n\n        for (var i = 0; i <= realSplitNumber_1; i++) {\n          var points = [];\n\n          for (var j = 0; j < indicatorAxes.length; j++) {\n            points.push(axesTicksPoints[j][i]);\n          } // Close\n\n\n          if (points[0]) {\n            points.push(points[0].slice());\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              console.error('Can\\'t draw value axis ' + i);\n            }\n          }\n\n          if (showSplitLine) {\n            var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n            splitLines[colorIndex].push(new graphic.Polyline({\n              shape: {\n                points: points\n              }\n            }));\n          }\n\n          if (showSplitArea && prevPoints) {\n            var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i - 1);\n            splitAreas[colorIndex].push(new graphic.Polygon({\n              shape: {\n                points: points.concat(prevPoints)\n              }\n            }));\n          }\n\n          prevPoints = points.slice().reverse();\n        }\n      }\n\n    var lineStyle = lineStyleModel.getLineStyle();\n    var areaStyle = areaStyleModel.getAreaStyle(); // Add splitArea before splitLine\n\n    zrUtil.each(splitAreas, function (splitAreas, idx) {\n      this.group.add(graphic.mergePath(splitAreas, {\n        style: zrUtil.defaults({\n          stroke: 'none',\n          fill: splitAreaColorsArr[idx % splitAreaColorsArr.length]\n        }, areaStyle),\n        silent: true\n      }));\n    }, this);\n    zrUtil.each(splitLines, function (splitLines, idx) {\n      this.group.add(graphic.mergePath(splitLines, {\n        style: zrUtil.defaults({\n          fill: 'none',\n          stroke: splitLineColorsArr[idx % splitLineColorsArr.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }, this);\n  };\n\n  RadarView.type = 'radar';\n  return RadarView;\n}(ComponentView);\n\nexport default RadarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar IndicatorAxis =\n/** @class */\nfunction (_super) {\n  __extends(IndicatorAxis, _super);\n\n  function IndicatorAxis(dim, scale, radiusExtent) {\n    var _this = _super.call(this, dim, scale, radiusExtent) || this;\n\n    _this.type = 'value';\n    _this.angle = 0;\n    _this.name = '';\n    return _this;\n  }\n\n  return IndicatorAxis;\n}(Axis);\n\nexport default IndicatorAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO clockwise\nimport IndicatorAxis from './IndicatorAxis';\nimport IntervalScale from '../../scale/Interval';\nimport * as numberUtil from '../../util/number';\nimport { getScaleExtent, niceScaleExtent } from '../axisHelper';\nimport { parseAxisModelMinMax } from '../scaleRawExtentInfo';\nimport { map, each } from 'zrender/lib/core/util';\n\nvar Radar =\n/** @class */\nfunction () {\n  function Radar(radarModel, ecModel, api) {\n    /**\n     *\n     * Radar dimensions\n     */\n    this.dimensions = [];\n    this._model = radarModel;\n    this._indicatorAxes = map(radarModel.getIndicatorModels(), function (indicatorModel, idx) {\n      var dim = 'indicator_' + idx;\n      var indicatorAxis = new IndicatorAxis(dim, new IntervalScale() // (indicatorModel.get('axisType') === 'log') ? new LogScale() : new IntervalScale()\n      );\n      indicatorAxis.name = indicatorModel.get('name'); // Inject model and axis\n\n      indicatorAxis.model = indicatorModel;\n      indicatorModel.axis = indicatorAxis;\n      this.dimensions.push(dim);\n      return indicatorAxis;\n    }, this);\n    this.resize(radarModel, api);\n  }\n\n  Radar.prototype.getIndicatorAxes = function () {\n    return this._indicatorAxes;\n  };\n\n  Radar.prototype.dataToPoint = function (value, indicatorIndex) {\n    var indicatorAxis = this._indicatorAxes[indicatorIndex];\n    return this.coordToPoint(indicatorAxis.dataToCoord(value), indicatorIndex);\n  }; // TODO: API should be coordToPoint([coord, indicatorIndex])\n\n\n  Radar.prototype.coordToPoint = function (coord, indicatorIndex) {\n    var indicatorAxis = this._indicatorAxes[indicatorIndex];\n    var angle = indicatorAxis.angle;\n    var x = this.cx + coord * Math.cos(angle);\n    var y = this.cy - coord * Math.sin(angle);\n    return [x, y];\n  };\n\n  Radar.prototype.pointToData = function (pt) {\n    var dx = pt[0] - this.cx;\n    var dy = pt[1] - this.cy;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx); // Find the closest angle\n    // FIXME index can calculated directly\n\n    var minRadianDiff = Infinity;\n    var closestAxis;\n    var closestAxisIdx = -1;\n\n    for (var i = 0; i < this._indicatorAxes.length; i++) {\n      var indicatorAxis = this._indicatorAxes[i];\n      var diff = Math.abs(radian - indicatorAxis.angle);\n\n      if (diff < minRadianDiff) {\n        closestAxis = indicatorAxis;\n        closestAxisIdx = i;\n        minRadianDiff = diff;\n      }\n    }\n\n    return [closestAxisIdx, +(closestAxis && closestAxis.coordToData(radius))];\n  };\n\n  Radar.prototype.resize = function (radarModel, api) {\n    var center = radarModel.get('center');\n    var viewWidth = api.getWidth();\n    var viewHeight = api.getHeight();\n    var viewSize = Math.min(viewWidth, viewHeight) / 2;\n    this.cx = numberUtil.parsePercent(center[0], viewWidth);\n    this.cy = numberUtil.parsePercent(center[1], viewHeight);\n    this.startAngle = radarModel.get('startAngle') * Math.PI / 180; // radius may be single value like `20`, `'80%'`, or array like `[10, '80%']`\n\n    var radius = radarModel.get('radius');\n\n    if (typeof radius === 'string' || typeof radius === 'number') {\n      radius = [0, radius];\n    }\n\n    this.r0 = numberUtil.parsePercent(radius[0], viewSize);\n    this.r = numberUtil.parsePercent(radius[1], viewSize);\n    each(this._indicatorAxes, function (indicatorAxis, idx) {\n      indicatorAxis.setExtent(this.r0, this.r);\n      var angle = this.startAngle + idx * Math.PI * 2 / this._indicatorAxes.length; // Normalize to [-PI, PI]\n\n      angle = Math.atan2(Math.sin(angle), Math.cos(angle));\n      indicatorAxis.angle = angle;\n    }, this);\n  };\n\n  Radar.prototype.update = function (ecModel, api) {\n    var indicatorAxes = this._indicatorAxes;\n    var radarModel = this._model;\n    each(indicatorAxes, function (indicatorAxis) {\n      indicatorAxis.scale.setExtent(Infinity, -Infinity);\n    });\n    ecModel.eachSeriesByType('radar', function (radarSeries, idx) {\n      if (radarSeries.get('coordinateSystem') !== 'radar' // @ts-ignore\n      || ecModel.getComponent('radar', radarSeries.get('radarIndex')) !== radarModel) {\n        return;\n      }\n\n      var data = radarSeries.getData();\n      each(indicatorAxes, function (indicatorAxis) {\n        indicatorAxis.scale.unionExtentFromData(data, data.mapDimension(indicatorAxis.dim));\n      });\n    }, this);\n    var splitNumber = radarModel.get('splitNumber');\n\n    function increaseInterval(interval) {\n      var exp10 = Math.pow(10, Math.floor(Math.log(interval) / Math.LN10)); // Increase interval\n\n      var f = interval / exp10;\n\n      if (f === 2) {\n        f = 5;\n      } else {\n        // f is 2 or 5\n        f *= 2;\n      }\n\n      return f * exp10;\n    } // Force all the axis fixing the maxSplitNumber.\n\n\n    each(indicatorAxes, function (indicatorAxis, idx) {\n      var rawExtent = getScaleExtent(indicatorAxis.scale, indicatorAxis.model).extent;\n      niceScaleExtent(indicatorAxis.scale, indicatorAxis.model);\n      var axisModel = indicatorAxis.model;\n      var scale = indicatorAxis.scale;\n      var fixedMin = parseAxisModelMinMax(scale, axisModel.get('min', true));\n      var fixedMax = parseAxisModelMinMax(scale, axisModel.get('max', true));\n      var interval = scale.getInterval();\n\n      if (fixedMin != null && fixedMax != null) {\n        // User set min, max, divide to get new interval\n        scale.setExtent(+fixedMin, +fixedMax);\n        scale.setInterval((fixedMax - fixedMin) / splitNumber);\n      } else if (fixedMin != null) {\n        var max = void 0; // User set min, expand extent on the other side\n\n        do {\n          max = fixedMin + interval * splitNumber;\n          scale.setExtent(+fixedMin, max); // Interval must been set after extent\n          // FIXME\n\n          scale.setInterval(interval);\n          interval = increaseInterval(interval);\n        } while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1]));\n      } else if (fixedMax != null) {\n        var min = void 0; // User set min, expand extent on the other side\n\n        do {\n          min = fixedMax - interval * splitNumber;\n          scale.setExtent(min, +fixedMax);\n          scale.setInterval(interval);\n          interval = increaseInterval(interval);\n        } while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0]));\n      } else {\n        var nicedSplitNumber = scale.getTicks().length - 1;\n\n        if (nicedSplitNumber > splitNumber) {\n          interval = increaseInterval(interval);\n        } // TODO\n\n\n        var max = Math.ceil(rawExtent[1] / interval) * interval;\n        var min = numberUtil.round(max - interval * splitNumber);\n        scale.setExtent(min, max);\n        scale.setInterval(interval);\n      }\n    });\n  };\n\n  Radar.prototype.convertToPixel = function (ecModel, finder, value) {\n    console.warn('Not implemented.');\n    return null;\n  };\n\n  Radar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    console.warn('Not implemented.');\n    return null;\n  };\n\n  Radar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n\n  Radar.create = function (ecModel, api) {\n    var radarList = [];\n    ecModel.eachComponent('radar', function (radarModel) {\n      var radar = new Radar(radarModel, ecModel, api);\n      radarList.push(radar);\n      radarModel.coordinateSystem = radar;\n    });\n    ecModel.eachSeriesByType('radar', function (radarSeries) {\n      if (radarSeries.get('coordinateSystem') === 'radar') {\n        // Inject coordinate system\n        // @ts-ignore\n        radarSeries.coordinateSystem = radarList[radarSeries.get('radarIndex') || 0];\n      }\n    });\n    return radarList;\n  };\n  /**\n   * Radar dimensions is based on the data\n   */\n\n\n  Radar.dimensions = [];\n  return Radar;\n}();\n\nexport default Radar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport RadarModel from '../../coord/radar/RadarModel';\nimport RadarView from './RadarView';\nimport Radar from '../../coord/radar/Radar';\nexport function install(registers) {\n  registers.registerCoordinateSystem('radar', Radar);\n  registers.registerComponentModel(RadarModel);\n  registers.registerComponentView(RadarView);\n  registers.registerVisual({\n    seriesType: 'radar',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData(); // itemVisual symbol is for selected data\n\n      data.each(function (idx) {\n        data.setItemVisual(idx, 'legendSymbol', 'roundRect');\n      }); // visual is for unselected data\n\n      data.setVisual('legendSymbol', 'roundRect');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport radarLayout from '../radar/radarLayout';\nimport dataFilter from '../../processor/dataFilter';\nimport backwardCompat from '../radar/backwardCompat';\nimport RadarView from './RadarView';\nimport RadarSeriesModel from './RadarSeries';\nimport { install as installRadarComponent } from '../../component/radar/install';\nexport function install(registers) {\n  use(installRadarComponent);\n  registers.registerChartView(RadarView);\n  registers.registerSeriesModel(RadarSeriesModel);\n  registers.registerLayout(radarLayout);\n  registers.registerProcessor(dataFilter('radar'));\n  registers.registerPreprocessor(backwardCompat);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport RoamController from './RoamController';\nimport * as roamHelper from '../../component/helper/roamHelper';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, enableComponentHighDownFeatures, setDefaultStateProxy } from '../../util/states';\nimport geoSourceManager from '../../coord/geo/geoSourceManager';\nimport { getUID } from '../../util/component';\nimport { setLabelStyle, getLabelStatesModels, enableLayoutLayoutFeatures } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal';\nimport Displayable from 'zrender/lib/graphic/Displayable';\nimport { makeInner } from '../../util/model';\n/**\n * Only these tags enable use `itemStyle` if they are named in SVG.\n * Other tags like <text> <tspan> <image> might not suitable for `itemStyle`.\n * They will not be considered to be styled until some requirements come.\n */\n\nvar OPTION_STYLE_ENABLED_TAGS = ['rect', 'circle', 'line', 'ellipse', 'polygon', 'polyline', 'path'];\nvar OPTION_STYLE_ENABLED_TAG_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS);\nvar STATE_TRIGGER_TAG_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(['g']));\nvar LABEL_HOST_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(['g']));\nvar mapLabelRaw = makeInner();\n\nfunction getFixedItemStyle(model) {\n  var itemStyle = model.getItemStyle();\n  var areaColor = model.get('areaColor'); // If user want the color not to be changed when hover,\n  // they should both set areaColor and color to be null.\n\n  if (areaColor != null) {\n    itemStyle.fill = areaColor;\n  }\n\n  return itemStyle;\n}\n\nvar MapDraw =\n/** @class */\nfunction () {\n  function MapDraw(api) {\n    var group = new graphic.Group();\n    this.uid = getUID('ec_map_draw');\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    this.group = group;\n    group.add(this._regionsGroup = new graphic.Group());\n    group.add(this._svgGroup = new graphic.Group());\n  }\n\n  MapDraw.prototype.draw = function (mapOrGeoModel, ecModel, api, fromView, payload) {\n    var isGeo = mapOrGeoModel.mainType === 'geo'; // Map series has data. GEO model that controlled by map series\n    // will be assigned with map data. Other GEO model has no data.\n\n    var data = mapOrGeoModel.getData && mapOrGeoModel.getData();\n    isGeo && ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'map'\n    }, function (mapSeries) {\n      if (!data && mapSeries.getHostGeoModel() === mapOrGeoModel) {\n        data = mapSeries.getData();\n      }\n    });\n    var geo = mapOrGeoModel.coordinateSystem;\n    var regionsGroup = this._regionsGroup;\n    var group = this.group;\n    var transformInfo = geo.getTransformInfo();\n    var transformInfoRaw = transformInfo.raw;\n    var transformInfoRoam = transformInfo.roam; // No animation when first draw or in action\n\n    var isFirstDraw = !regionsGroup.childAt(0) || payload;\n\n    if (isFirstDraw) {\n      group.x = transformInfoRoam.x;\n      group.y = transformInfoRoam.y;\n      group.scaleX = transformInfoRoam.scaleX;\n      group.scaleY = transformInfoRoam.scaleY;\n      group.dirty();\n    } else {\n      graphic.updateProps(group, transformInfoRoam, mapOrGeoModel);\n    }\n\n    var isVisualEncodedByVisualMap = data && data.getVisual('visualMeta') && data.getVisual('visualMeta').length > 0;\n    var viewBuildCtx = {\n      api: api,\n      geo: geo,\n      mapOrGeoModel: mapOrGeoModel,\n      data: data,\n      isVisualEncodedByVisualMap: isVisualEncodedByVisualMap,\n      isGeo: isGeo,\n      transformInfoRaw: transformInfoRaw\n    };\n\n    if (geo.resourceType === 'geoJSON') {\n      this._buildGeoJSON(viewBuildCtx);\n    } else if (geo.resourceType === 'geoSVG') {\n      this._buildSVG(viewBuildCtx);\n    }\n\n    this._updateController(mapOrGeoModel, ecModel, api);\n\n    this._updateMapSelectHandler(mapOrGeoModel, regionsGroup, api, fromView);\n  };\n\n  MapDraw.prototype._buildGeoJSON = function (viewBuildCtx) {\n    var nameMap = this._regionsGroupByName = zrUtil.createHashMap();\n    var regionsGroup = this._regionsGroup;\n    var transformInfoRaw = viewBuildCtx.transformInfoRaw;\n    var mapOrGeoModel = viewBuildCtx.mapOrGeoModel;\n    var data = viewBuildCtx.data;\n\n    var transformPoint = function (point) {\n      return [point[0] * transformInfoRaw.scaleX + transformInfoRaw.x, point[1] * transformInfoRaw.scaleY + transformInfoRaw.y];\n    };\n\n    regionsGroup.removeAll(); // Only when the resource is GeoJSON, there is `geo.regions`.\n\n    zrUtil.each(viewBuildCtx.geo.regions, function (region) {\n      var regionName = region.name;\n      var regionModel = mapOrGeoModel.getRegionModel(regionName);\n      var dataIdx = data ? data.indexOfName(regionName) : null; // Consider in GeoJson properties.name may be duplicated, for example,\n      // there is multiple region named \"United Kindom\" or \"France\" (so many\n      // colonies). And it is not appropriate to merge them in geo, which\n      // will make them share the same label and bring trouble in label\n      // location calculation.\n\n      var regionGroup = nameMap.get(regionName);\n      var hasRegionGroup = !!regionGroup;\n\n      if (!hasRegionGroup) {\n        regionGroup = nameMap.set(regionName, new graphic.Group());\n        regionsGroup.add(regionGroup);\n      }\n\n      var compoundPath = new graphic.CompoundPath({\n        segmentIgnoreThreshold: 1,\n        shape: {\n          paths: []\n        }\n      });\n      regionGroup.add(compoundPath);\n\n      if (!hasRegionGroup) {\n        // ensure children have been added to group before calling resetEventTriggerForRegion\n        resetEventTriggerForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel, dataIdx);\n        resetTooltipForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel);\n        resetStateTriggerForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel);\n      }\n\n      zrUtil.each(region.geometries, function (geometry) {\n        if (geometry.type !== 'polygon') {\n          return;\n        }\n\n        var points = [];\n\n        for (var i = 0; i < geometry.exterior.length; ++i) {\n          points.push(transformPoint(geometry.exterior[i]));\n        }\n\n        compoundPath.shape.paths.push(new graphic.Polygon({\n          segmentIgnoreThreshold: 1,\n          shape: {\n            points: points\n          }\n        }));\n\n        for (var i = 0; i < (geometry.interiors ? geometry.interiors.length : 0); ++i) {\n          var interior = geometry.interiors[i];\n          var points_1 = [];\n\n          for (var j = 0; j < interior.length; ++j) {\n            points_1.push(transformPoint(interior[j]));\n          }\n\n          compoundPath.shape.paths.push(new graphic.Polygon({\n            segmentIgnoreThreshold: 1,\n            shape: {\n              points: points_1\n            }\n          }));\n        }\n      });\n      applyOptionStyleForRegion(viewBuildCtx, compoundPath, dataIdx, regionModel);\n\n      if (compoundPath instanceof Displayable) {\n        compoundPath.culling = true;\n      }\n\n      var centerPt = transformPoint(region.getCenter());\n      resetLabelForRegion(viewBuildCtx, compoundPath, regionName, regionModel, mapOrGeoModel, dataIdx, centerPt);\n    }, this);\n  };\n\n  MapDraw.prototype._buildSVG = function (viewBuildCtx) {\n    var mapName = viewBuildCtx.geo.map;\n    var transformInfoRaw = viewBuildCtx.transformInfoRaw;\n    this._svgGroup.x = transformInfoRaw.x;\n    this._svgGroup.y = transformInfoRaw.y;\n    this._svgGroup.scaleX = transformInfoRaw.scaleX;\n    this._svgGroup.scaleY = transformInfoRaw.scaleY;\n\n    if (this._svgResourceChanged(mapName)) {\n      this._freeSVG();\n\n      this._useSVG(mapName);\n    }\n\n    var svgDispatcherMap = this._svgDispatcherMap = zrUtil.createHashMap();\n    var focusSelf = false;\n    zrUtil.each(this._svgGraphicRecord.named, function (namedItem) {\n      // Note that we also allow different elements have the same name.\n      // For example, a glyph of a city and the label of the city have\n      // the same name and their tooltip info can be defined in a single\n      // region option.\n      var regionName = namedItem.name;\n      var mapOrGeoModel = viewBuildCtx.mapOrGeoModel;\n      var data = viewBuildCtx.data;\n      var svgNodeTagLower = namedItem.svgNodeTagLower;\n      var el = namedItem.el;\n      var dataIdx = data ? data.indexOfName(regionName) : null;\n      var regionModel = mapOrGeoModel.getRegionModel(regionName);\n\n      if (OPTION_STYLE_ENABLED_TAG_MAP.get(svgNodeTagLower) != null && el instanceof Displayable) {\n        applyOptionStyleForRegion(viewBuildCtx, el, dataIdx, regionModel);\n      }\n\n      if (el instanceof Displayable) {\n        el.culling = true;\n      } // We do not know how the SVG like so we'd better not to change z2.\n      // Otherwise it might bring some unexpected result. For example,\n      // an area hovered that make some inner city can not be clicked.\n\n\n      el.z2EmphasisLift = 0; // If self named, that is, if tag is inside a named <g> (where `namedFrom` does not exists):\n\n      if (!namedItem.namedFrom) {\n        // label should batter to be displayed based on the center of <g>\n        // if it is named rather than displayed on each child.\n        if (LABEL_HOST_MAP.get(svgNodeTagLower) != null) {\n          resetLabelForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, dataIdx, null);\n        }\n\n        resetEventTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, dataIdx);\n        resetTooltipForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel);\n\n        if (STATE_TRIGGER_TAG_MAP.get(svgNodeTagLower) != null) {\n          var focus_1 = resetStateTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel);\n\n          if (focus_1 === 'self') {\n            focusSelf = true;\n          }\n\n          var els = svgDispatcherMap.get(regionName) || svgDispatcherMap.set(regionName, []);\n          els.push(el);\n        }\n      }\n    }, this);\n\n    this._enableBlurEntireSVG(focusSelf, viewBuildCtx);\n  };\n\n  MapDraw.prototype._enableBlurEntireSVG = function (focusSelf, viewBuildCtx) {\n    // It's a little complicated to support blurring the entire geoSVG in series-map.\n    // So do not suport it until some requirements come.\n    // At present, in series-map, only regions can be blurred.\n    if (focusSelf && viewBuildCtx.isGeo) {\n      var blurStyle = viewBuildCtx.mapOrGeoModel.getModel(['blur', 'itemStyle']).getItemStyle(); // Only suport `opacity` here. Because not sure that other props are suitable for\n      // all of the elements generated by SVG (especially for Text/TSpan/Image/... ).\n\n      var opacity_1 = blurStyle.opacity;\n\n      this._svgGraphicRecord.root.traverse(function (el) {\n        if (!el.isGroup) {\n          // PENDING: clear those settings to SVG elements when `_freeSVG`.\n          // (Currently it happen not to be needed.)\n          setDefaultStateProxy(el);\n          var style = el.ensureState('blur').style || {}; // Do not overwrite the region style that already set from region option.\n\n          if (style.opacity == null && opacity_1 != null) {\n            style.opacity = opacity_1;\n          } // If `ensureState('blur').style = {}`, there will be default opacity.\n          // Enable `stateTransition` (animation).\n\n\n          el.ensureState('emphasis');\n        }\n      });\n    }\n  };\n\n  MapDraw.prototype.remove = function () {\n    this._regionsGroup.removeAll();\n\n    this._regionsGroupByName = null;\n\n    this._svgGroup.removeAll();\n\n    this._freeSVG();\n\n    this._controller.dispose();\n\n    this._controllerHost = null;\n  };\n\n  MapDraw.prototype.findHighDownDispatchers = function (name, geoModel) {\n    if (name == null) {\n      return [];\n    }\n\n    var geo = geoModel.coordinateSystem;\n\n    if (geo.resourceType === 'geoJSON') {\n      var regionsGroupByName = this._regionsGroupByName;\n\n      if (regionsGroupByName) {\n        var regionGroup = regionsGroupByName.get(name);\n        return regionGroup ? [regionGroup] : [];\n      }\n    } else if (geo.resourceType === 'geoSVG') {\n      return this._svgDispatcherMap && this._svgDispatcherMap.get(name) || [];\n    }\n  };\n\n  MapDraw.prototype._svgResourceChanged = function (mapName) {\n    return this._svgMapName !== mapName;\n  };\n\n  MapDraw.prototype._useSVG = function (mapName) {\n    var resource = geoSourceManager.getGeoResource(mapName);\n\n    if (resource && resource.type === 'geoSVG') {\n      var svgGraphic = resource.useGraphic(this.uid);\n\n      this._svgGroup.add(svgGraphic.root);\n\n      this._svgGraphicRecord = svgGraphic;\n      this._svgMapName = mapName;\n    }\n  };\n\n  MapDraw.prototype._freeSVG = function () {\n    var mapName = this._svgMapName;\n\n    if (mapName == null) {\n      return;\n    }\n\n    var resource = geoSourceManager.getGeoResource(mapName);\n\n    if (resource && resource.type === 'geoSVG') {\n      resource.freeGraphic(this.uid);\n    }\n\n    this._svgGraphicRecord = null;\n    this._svgDispatcherMap = null;\n\n    this._svgGroup.removeAll();\n\n    this._svgMapName = null;\n  };\n\n  MapDraw.prototype._updateController = function (mapOrGeoModel, ecModel, api) {\n    var geo = mapOrGeoModel.coordinateSystem;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost; // @ts-ignore FIXME:TS\n\n    controllerHost.zoomLimit = mapOrGeoModel.get('scaleLimit');\n    controllerHost.zoom = geo.getZoom(); // roamType is will be set default true if it is null\n    // @ts-ignore FIXME:TS\n\n    controller.enable(mapOrGeoModel.get('roam') || false);\n    var mainType = mapOrGeoModel.mainType;\n\n    function makeActionBase() {\n      var action = {\n        type: 'geoRoam',\n        componentType: mainType\n      };\n      action[mainType + 'Id'] = mapOrGeoModel.id;\n      return action;\n    }\n\n    controller.off('pan').on('pan', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        dx: e.dx,\n        dy: e.dy\n      }));\n    }, this);\n    controller.off('zoom').on('zoom', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      }));\n    }, this);\n    controller.setPointerChecker(function (e, x, y) {\n      return geo.containPoint([x, y]) && !onIrrelevantElement(e, api, mapOrGeoModel);\n    });\n  };\n  /**\n   * FIXME: this is a temporarily workaround.\n   * When `geoRoam` the elements need to be reset in `MapView['render']`, because the props like\n   * `ignore` might have been modified by `LabelManager`, and `LabelManager#addLabelsOfSeries`\n   * will subsequently cache `defaultAttr` like `ignore`. If do not do this reset, the modified\n   * props will have no chance to be restored.\n   * Note: this reset should be after `clearStates` in `renderSeries` becuase `useStates` in\n   * `renderSeries` will cache the modified `ignore` to `el._normalState`.\n   * TODO:\n   * Use clone/immutable in `LabelManager`?\n   */\n\n\n  MapDraw.prototype.resetForLabelLayout = function () {\n    this.group.traverse(function (el) {\n      var label = el.getTextContent();\n\n      if (label) {\n        label.ignore = mapLabelRaw(label).ignore;\n      }\n    });\n  };\n\n  MapDraw.prototype._updateMapSelectHandler = function (mapOrGeoModel, regionsGroup, api, fromView) {\n    var mapDraw = this;\n    regionsGroup.off('mousedown');\n    regionsGroup.off('click'); // @ts-ignore FIXME:TS resolve type conflict\n\n    if (mapOrGeoModel.get('selectedMode')) {\n      regionsGroup.on('mousedown', function () {\n        mapDraw._mouseDownFlag = true;\n      });\n      regionsGroup.on('click', function (e) {\n        if (!mapDraw._mouseDownFlag) {\n          return;\n        }\n\n        mapDraw._mouseDownFlag = false;\n      });\n    }\n  };\n\n  return MapDraw;\n}();\n\n;\n\nfunction applyOptionStyleForRegion(viewBuildCtx, el, dataIndex, regionModel) {\n  // All of the path are using `itemStyle`, becuase\n  // (1) Some SVG also use fill on polyline (The different between\n  // polyline and polygon is \"open\" or \"close\" but not fill or not).\n  // (2) For the common props like opacity, if some use itemStyle\n  // and some use `lineStyle`, it might confuse users.\n  // (3) Most SVG use <path>, where can not detect wether draw a \"line\"\n  // or a filled shape, so use `itemStyle` for <path>.\n  var normalStyleModel = regionModel.getModel('itemStyle');\n  var emphasisStyleModel = regionModel.getModel(['emphasis', 'itemStyle']);\n  var blurStyleModel = regionModel.getModel(['blur', 'itemStyle']);\n  var selectStyleModel = regionModel.getModel(['select', 'itemStyle']); // NOTE: DONT use 'style' in visual when drawing map.\n  // This component is used for drawing underlying map for both geo component and map series.\n\n  var normalStyle = getFixedItemStyle(normalStyleModel);\n  var emphasisStyle = getFixedItemStyle(emphasisStyleModel);\n  var selectStyle = getFixedItemStyle(selectStyleModel);\n  var blurStyle = getFixedItemStyle(blurStyleModel); // Update the itemStyle if has data visual\n\n  var data = viewBuildCtx.data;\n\n  if (data) {\n    // Only visual color of each item will be used. It can be encoded by visualMap\n    // But visual color of series is used in symbol drawing\n    // Visual color for each series is for the symbol draw\n    var style = data.getItemVisual(dataIndex, 'style');\n    var decal = data.getItemVisual(dataIndex, 'decal');\n\n    if (viewBuildCtx.isVisualEncodedByVisualMap && style.fill) {\n      normalStyle.fill = style.fill;\n    }\n\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, viewBuildCtx.api);\n    }\n  } // SVG text, tspan and image can be named but not supporeted\n  // to be styled by region option yet.\n\n\n  el.setStyle(normalStyle);\n  el.style.strokeNoScale = true;\n  el.ensureState('emphasis').style = emphasisStyle;\n  el.ensureState('select').style = selectStyle;\n  el.ensureState('blur').style = blurStyle; // Enable blur\n\n  setDefaultStateProxy(el);\n}\n\nfunction resetLabelForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, // Exist only if `viewBuildCtx.data` exists.\ndataIdx, // If labelXY not provided, use `textConfig.position: 'inside'`\nlabelXY) {\n  var data = viewBuildCtx.data;\n  var isGeo = viewBuildCtx.isGeo;\n  var isDataNaN = data && isNaN(data.get(data.mapDimension('value'), dataIdx));\n  var itemLayout = data && data.getItemLayout(dataIdx); // In the following cases label will be drawn\n  // 1. In map series and data value is NaN\n  // 2. In geo component\n  // 3. Region has no series legendSymbol, which will be add a showLabel flag in mapSymbolLayout\n\n  if (isGeo || isDataNaN || itemLayout && itemLayout.showLabel) {\n    var query = !isGeo ? dataIdx : regionName;\n    var labelFetcher = void 0; // Consider dataIdx not found.\n\n    if (!data || dataIdx >= 0) {\n      labelFetcher = mapOrGeoModel;\n    }\n\n    var specifiedTextOpt = labelXY ? {\n      normal: {\n        align: 'center',\n        verticalAlign: 'middle'\n      }\n    } : null; // Caveat: must be called after `setDefaultStateProxy(el);` called.\n    // because textContent will be assign with `el.stateProxy` inside.\n\n    setLabelStyle(el, getLabelStatesModels(regionModel), {\n      labelFetcher: labelFetcher,\n      labelDataIndex: query,\n      defaultText: regionName\n    }, specifiedTextOpt);\n    var textEl = el.getTextContent();\n\n    if (textEl) {\n      mapLabelRaw(textEl).ignore = textEl.ignore;\n\n      if (el.textConfig) {\n        if (labelXY) {\n          // Compute a relative offset based on the el bounding rect.\n          var rect = el.getBoundingRect().clone();\n          el.textConfig.position = [(labelXY[0] - rect.x) / rect.width * 100 + '%', (labelXY[1] - rect.y) / rect.height * 100 + '%'];\n        }\n      }\n    }\n\n    enableLayoutLayoutFeatures(el, dataIdx, null);\n    el.disableLabelAnimation = true;\n  } else {\n    el.removeTextContent();\n    el.removeTextConfig();\n    el.disableLabelAnimation = null;\n  }\n}\n\nfunction resetEventTriggerForRegion(viewBuildCtx, eventTrigger, regionName, regionModel, mapOrGeoModel, // Exist only if `viewBuildCtx.data` exists.\ndataIdx) {\n  // setItemGraphicEl, setHoverStyle after all polygons and labels\n  // are added to the rigionGroup\n  if (viewBuildCtx.data) {\n    // FIXME: when series-map use a SVG map, and there are duplicated name specified\n    // on different SVG elements, after `data.setItemGraphicEl(...)`:\n    // (1) all of them will be mounted with `dataIndex`, `seriesIndex`, so that tooltip\n    // can be triggered only mouse hover. That's correct.\n    // (2) only the last element will be kept in `data`, so that if trigger tooltip\n    // by `dispatchAction`, only the last one can be found and triggered. That might be\n    // not correct. We will fix it in future if anyone demanding that.\n    viewBuildCtx.data.setItemGraphicEl(dataIdx, eventTrigger);\n  } // series-map will not trigger \"geoselectchange\" no matter it is\n  // based on a declared geo component. Becuause series-map will\n  // trigger \"selectchange\". If it trigger both the two events,\n  // If users call `chart.dispatchAction({type: 'toggleSelect'})`,\n  // it not easy to also fire event \"geoselectchanged\".\n  else {\n      // Package custom mouse event for geo component\n      getECData(eventTrigger).eventData = {\n        componentType: 'geo',\n        componentIndex: mapOrGeoModel.componentIndex,\n        geoIndex: mapOrGeoModel.componentIndex,\n        name: regionName,\n        region: regionModel && regionModel.option || {}\n      };\n    }\n}\n\nfunction resetTooltipForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel) {\n  if (!viewBuildCtx.data) {\n    graphic.setTooltipConfig({\n      el: el,\n      componentModel: mapOrGeoModel,\n      itemName: regionName,\n      // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n      itemTooltipOption: regionModel.get('tooltip')\n    });\n  }\n}\n\nfunction resetStateTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel) {\n  // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n  el.highDownSilentOnTouch = !!mapOrGeoModel.get('selectedMode'); // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n\n  var emphasisModel = regionModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  enableHoverEmphasis(el, focus, emphasisModel.get('blurScope'));\n\n  if (viewBuildCtx.isGeo) {\n    enableComponentHighDownFeatures(el, mapOrGeoModel, regionName);\n  }\n\n  return focus;\n}\n\nexport default MapDraw; // @ts-ignore FIXME:TS fix the \"compatible with each other\"?","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport MapDraw from '../../component/helper/MapDraw';\nimport ChartView from '../../view/Chart';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { setStatesFlag, Z2_EMPHASIS_LIFT } from '../../util/states';\n\nvar MapView =\n/** @class */\nfunction (_super) {\n  __extends(MapView, _super);\n\n  function MapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MapView.type;\n    return _this;\n  }\n\n  MapView.prototype.render = function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var group = this.group;\n    group.removeAll();\n\n    if (mapModel.getHostGeoModel()) {\n      return;\n    }\n\n    if (this._mapDraw && payload && payload.type === 'geoRoam') {\n      this._mapDraw.resetForLabelLayout();\n    } // Not update map if it is an roam action from self\n\n\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawed map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  };\n\n  MapView.prototype.remove = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  };\n\n  MapView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  };\n\n  MapView.prototype._renderSymbols = function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      var layout = originalData.getItemLayout(originalDataIndex);\n\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          // TODO\n          fill: mapModel.getData().getVisual('style').fill\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: 8 + (!offset ? Z2_EMPHASIS_LIFT + 1 : 0)\n      }); // Only the series that has the first value on the same region is in charge of rendering the label.\n      // But consider the case:\n      // series: [\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\n      // ]\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\n      // For backward compatibility, we follow the rule that render label `A` by the\n      // settings on series `X` but render label `C` by the settings on series `Y`.\n\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name_1 = originalData.getName(originalDataIndex);\n        var fullIndex_1 = fullData.indexOfName(name_1);\n        var itemModel = originalData.getItemModel(originalDataIndex);\n        var labelModel = itemModel.getModel('label');\n        var regionGroup = fullData.getItemGraphicEl(fullIndex_1); // `getFormattedLabel` needs to use `getData` inside. Here\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\n        // FIXME\n        // If this is not the `mainSeries`, the item model (like label formatter)\n        // set on original data item will never get. But it has been working\n        // like that from the begining, and this scenario is rarely encountered.\n        // So it won't be fixed until have to.\n\n        setLabelStyle(circle, getLabelStatesModels(itemModel), {\n          labelFetcher: {\n            getFormattedLabel: function (idx, state) {\n              return mapModel.getFormattedLabel(fullIndex_1, state);\n            }\n          }\n        });\n        circle.disableLabelAnimation = true;\n\n        if (!labelModel.get('position')) {\n          circle.setTextConfig({\n            position: 'bottom'\n          });\n        }\n\n        regionGroup.onHoverStateChange = function (toState) {\n          setStatesFlag(circle, toState);\n        };\n      }\n\n      group.add(circle);\n    });\n  };\n\n  MapView.type = 'map';\n  return MapView;\n}(ChartView);\n\nexport default MapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport createListSimply from '../helper/createListSimply';\nimport SeriesModel from '../../model/Series';\nimport geoSourceManager from '../../coord/geo/geoSourceManager';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport { createSymbol } from '../../util/symbol';\n\nvar MapSeries =\n/** @class */\nfunction (_super) {\n  __extends(MapSeries, _super);\n\n  function MapSeries() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MapSeries.type; // Only first map series of same mapType will drawMap.\n\n    _this.needsDrawMap = false; // Group of all map series with same mapType\n\n    _this.seriesGroup = [];\n\n    _this.getTooltipPosition = function (dataIndex) {\n      if (dataIndex != null) {\n        var name_1 = this.getData().getName(dataIndex);\n        var geo = this.coordinateSystem;\n        var region = geo.getRegion(name_1);\n        return region && geo.dataToPoint(region.getCenter());\n      }\n    };\n\n    return _this;\n  }\n\n  MapSeries.prototype.getInitialData = function (option) {\n    var data = createListSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n    var dataNameMap = zrUtil.createHashMap();\n    var toAppendNames = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var name_2 = data.getName(i);\n      dataNameMap.set(name_2, true);\n    }\n\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap, this.option.nameProperty);\n    zrUtil.each(geoSource.regions, function (region) {\n      var name = region.name;\n\n      if (!dataNameMap.get(name)) {\n        toAppendNames.push(name);\n      }\n    }); // Complete data with missing regions. The consequent processes (like visual\n    // map and render) can not be performed without a \"full data\". For example,\n    // find `dataIndex` by name.\n\n    data.appendValues([], toAppendNames);\n    return data;\n  };\n  /**\n   * If no host geo model, return null, which means using a\n   * inner exclusive geo model.\n   */\n\n\n  MapSeries.prototype.getHostGeoModel = function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.ecModel.getComponent('geo', geoIndex) : null;\n  };\n\n  MapSeries.prototype.getMapType = function () {\n    return (this.getHostGeoModel() || this).option.map;\n  }; // _fillOption(option, mapName) {\n  // Shallow clone\n  // option = zrUtil.extend({}, option);\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\n  // return option;\n  // }\n\n\n  MapSeries.prototype.getRawValue = function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    var data = this.getData();\n    return data.get(data.mapDimension('value'), dataIndex);\n  };\n  /**\n   * Get model of region\n   */\n\n\n  MapSeries.prototype.getRegionModel = function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  };\n  /**\n   * Map tooltip formatter\n   */\n\n\n  MapSeries.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n      var valueDim = data.mapDimension('value');\n\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\n        seriesNames.push(seriesGroup[i].name);\n      }\n    }\n\n    return createTooltipMarkup('section', {\n      header: seriesNames.join(', '),\n      noHeader: !seriesNames.length,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: name,\n        value: value\n      })]\n    });\n  };\n\n  MapSeries.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  MapSeries.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  MapSeries.prototype.getLegendIcon = function (opt) {\n    var symbolType = opt.symbolType || 'roundRect';\n    var symbol = createSymbol(symbolType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n    symbol.setStyle(opt.itemStyle); // Map do not use itemStyle.borderWidth as border width\n\n    symbol.style.stroke = 'none';\n\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = '#fff';\n      symbol.style.lineWidth = 2;\n    }\n\n    return symbol;\n  };\n\n  MapSeries.type = 'series.map';\n  MapSeries.dependencies = ['geo'];\n  MapSeries.layoutMode = 'box';\n  MapSeries.defaultOption = {\n    // 一级层叠\n    zlevel: 0,\n    // 二级层叠\n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    showLegendSymbol: true,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    selectedMode: true,\n    label: {\n      show: false,\n      color: '#000'\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444',\n      areaColor: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    nameProperty: 'name'\n  };\n  return MapSeries;\n}(SeriesModel);\n\nexport default MapSeries;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util'; // FIXME 公用？\n\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nexport default function mapDataStatistic(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function mapSymbolLayout(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each(data.mapDimension('value'), function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n\n          if (!region || isNaN(value)) {\n            return;\n          }\n\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.getCenter());\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    }); // Show label of those region not has legendSymbol(which is offset 0)\n\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport View from '../View';\nimport geoSourceManager from './geoSourceManager';\nimport { SINGLE_REFERRING } from '../../util/model';\nvar GEO_DEFAULT_PARAMS = {\n  'geoJSON': {\n    aspectScale: 0.75,\n    invertLongitute: true\n  },\n  'geoSVG': {\n    aspectScale: 1,\n    invertLongitute: false\n  }\n};\n\nvar Geo =\n/** @class */\nfunction (_super) {\n  __extends(Geo, _super);\n\n  function Geo(name, map, opt) {\n    var _this = _super.call(this, name) || this;\n\n    _this.dimensions = ['lng', 'lat'];\n    _this.type = 'geo'; // Only store specified name coord via `addGeoCoord`.\n\n    _this._nameCoordMap = zrUtil.createHashMap();\n    _this.map = map;\n    var source = geoSourceManager.load(map, opt.nameMap, opt.nameProperty);\n    var resource = geoSourceManager.getGeoResource(map);\n    _this.resourceType = resource ? resource.type : null;\n    var defaultParmas = GEO_DEFAULT_PARAMS[resource.type];\n    _this._regionsMap = source.regionsMap;\n    _this._invertLongitute = defaultParmas.invertLongitute;\n    _this.regions = source.regions;\n    _this.aspectScale = zrUtil.retrieve2(opt.aspectScale, defaultParmas.aspectScale);\n    var boundingRect = source.boundingRect;\n\n    _this.setBoundingRect(boundingRect.x, boundingRect.y, boundingRect.width, boundingRect.height);\n\n    return _this;\n  }\n  /**\n   * Whether contain the given [lng, lat] coord.\n   */\n  // Never used yet.\n  // containCoord(coord: number[]) {\n  //     const regions = this.regions;\n  //     for (let i = 0; i < regions.length; i++) {\n  //         const region = regions[i];\n  //         if (region.type === 'geoJSON' && (region as GeoJSONRegion).contain(coord)) {\n  //             return true;\n  //         }\n  //     }\n  //     return false;\n  // }\n\n\n  Geo.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var invertLongitute = this._invertLongitute;\n    rect = rect.clone();\n\n    if (invertLongitute) {\n      // Longitute is inverted\n      rect.y = -rect.y - rect.height;\n    }\n\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransformable.parent;\n    rawTransformable.parent = null;\n    rawTransformable.decomposeTransform();\n    rawTransformable.parent = rawParent;\n\n    if (invertLongitute) {\n      rawTransformable.scaleY = -rawTransformable.scaleY;\n    }\n\n    this._updateTransform();\n  };\n\n  Geo.prototype.getRegion = function (name) {\n    return this._regionsMap.get(name);\n  };\n\n  Geo.prototype.getRegionByCoord = function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      var region = regions[i];\n\n      if (region.type === 'geoJSON' && region.contain(coord)) {\n        return regions[i];\n      }\n    }\n  };\n  /**\n   * Add geoCoord for indexing by name\n   */\n\n\n  Geo.prototype.addGeoCoord = function (name, geoCoord) {\n    this._nameCoordMap.set(name, geoCoord);\n  };\n  /**\n   * Get geoCoord by name\n   */\n\n\n  Geo.prototype.getGeoCoord = function (name) {\n    var region = this._regionsMap.get(name); // calcualte center only on demand.\n\n\n    return this._nameCoordMap.get(name) || region && region.getCenter();\n  };\n\n  Geo.prototype.dataToPoint = function (data, noRoam, out) {\n    if (typeof data === 'string') {\n      // Map area name to geoCoord\n      data = this.getGeoCoord(data);\n    }\n\n    if (data) {\n      return View.prototype.dataToPoint.call(this, data, noRoam, out);\n    }\n  };\n\n  Geo.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  Geo.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n\n  return Geo;\n}(View);\n\n;\nzrUtil.mixin(Geo, View);\n\nfunction getCoordSys(finder) {\n  var geoModel = finder.geoModel;\n  var seriesModel = finder.seriesModel;\n  return geoModel ? geoModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem // For map series.\n  || (seriesModel.getReferringComponents('geo', SINGLE_REFERRING).models[0] || {}).coordinateSystem : null;\n}\n\nexport default Geo;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Geo from './Geo';\nimport * as layout from '../../util/layout';\nimport * as numberUtil from '../../util/number';\nimport geoSourceManager from './geoSourceManager';\n/**\n * Resize method bound to the geo\n */\n\nfunction resizeGeo(geoModel, api) {\n  var boundingCoords = geoModel.get('boundingCoords');\n\n  if (boundingCoords != null) {\n    var leftTop = boundingCoords[0];\n    var rightBottom = boundingCoords[1];\n\n    if (isNaN(leftTop[0]) || isNaN(leftTop[1]) || isNaN(rightBottom[0]) || isNaN(rightBottom[1])) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Invalid boundingCoords');\n      }\n    } else {\n      this.setBoundingRect(leftTop[0], leftTop[1], rightBottom[0] - leftTop[0], rightBottom[1] - leftTop[1]);\n    }\n  }\n\n  var rect = this.getBoundingRect();\n  var centerOption = geoModel.get('layoutCenter');\n  var sizeOption = geoModel.get('layoutSize');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var aspect = rect.width / rect.height * this.aspectScale;\n  var useCenterAndSize = false;\n  var center;\n  var size;\n\n  if (centerOption && sizeOption) {\n    center = [numberUtil.parsePercent(centerOption[0], viewWidth), numberUtil.parsePercent(centerOption[1], viewHeight)];\n    size = numberUtil.parsePercent(sizeOption, Math.min(viewWidth, viewHeight));\n\n    if (!isNaN(center[0]) && !isNaN(center[1]) && !isNaN(size)) {\n      useCenterAndSize = true;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.');\n      }\n    }\n  }\n\n  var viewRect;\n\n  if (useCenterAndSize) {\n    viewRect = {};\n\n    if (aspect > 1) {\n      // Width is same with size\n      viewRect.width = size;\n      viewRect.height = size / aspect;\n    } else {\n      viewRect.height = size;\n      viewRect.width = size * aspect;\n    }\n\n    viewRect.y = center[1] - viewRect.height / 2;\n    viewRect.x = center[0] - viewRect.width / 2;\n  } else {\n    // Use left/top/width/height\n    var boxLayoutOption = geoModel.getBoxLayoutParams();\n    boxLayoutOption.aspect = aspect;\n    viewRect = layout.getLayoutRect(boxLayoutOption, {\n      width: viewWidth,\n      height: viewHeight\n    });\n  }\n\n  this.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n  this.setCenter(geoModel.get('center'));\n  this.setZoom(geoModel.get('zoom'));\n} // Back compat for ECharts2, where the coord map is set on map series:\n// {type: 'map', geoCoord: {'cityA': [116.46,39.92], 'cityA': [119.12,24.61]}},\n\n\nfunction setGeoCoords(geo, model) {\n  zrUtil.each(model.get('geoCoord'), function (geoCoord, name) {\n    geo.addGeoCoord(name, geoCoord);\n  });\n}\n\nvar GeoCreator =\n/** @class */\nfunction () {\n  function GeoCreator() {\n    // For deciding which dimensions to use when creating list data\n    this.dimensions = Geo.prototype.dimensions;\n  }\n\n  GeoCreator.prototype.create = function (ecModel, api) {\n    var geoList = []; // FIXME Create each time may be slow\n\n    ecModel.eachComponent('geo', function (geoModel, idx) {\n      var name = geoModel.get('map');\n      var geo = new Geo(name + idx, name, {\n        nameMap: geoModel.get('nameMap'),\n        nameProperty: geoModel.get('nameProperty'),\n        aspectScale: geoModel.get('aspectScale')\n      });\n      geo.zoomLimit = geoModel.get('scaleLimit');\n      geoList.push(geo); // setGeoCoords(geo, geoModel);\n\n      geoModel.coordinateSystem = geo;\n      geo.model = geoModel; // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(geoModel, api);\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var coordSys = seriesModel.get('coordinateSystem');\n\n      if (coordSys === 'geo') {\n        var geoIndex = seriesModel.get('geoIndex') || 0;\n        seriesModel.coordinateSystem = geoList[geoIndex];\n      }\n    }); // If has map series\n\n    var mapModelGroupBySeries = {};\n    ecModel.eachSeriesByType('map', function (seriesModel) {\n      if (!seriesModel.getHostGeoModel()) {\n        var mapType = seriesModel.getMapType();\n        mapModelGroupBySeries[mapType] = mapModelGroupBySeries[mapType] || [];\n        mapModelGroupBySeries[mapType].push(seriesModel);\n      }\n    });\n    zrUtil.each(mapModelGroupBySeries, function (mapSeries, mapType) {\n      var nameMapList = zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('nameMap');\n      });\n      var geo = new Geo(mapType, mapType, {\n        nameMap: zrUtil.mergeAll(nameMapList),\n        nameProperty: mapSeries[0].get('nameProperty'),\n        aspectScale: mapSeries[0].get('aspectScale')\n      });\n      geo.zoomLimit = zrUtil.retrieve.apply(null, zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('scaleLimit');\n      }));\n      geoList.push(geo); // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(mapSeries[0], api);\n      zrUtil.each(mapSeries, function (singleMapSeries) {\n        singleMapSeries.coordinateSystem = geo;\n        setGeoCoords(geo, singleMapSeries);\n      });\n    });\n    return geoList;\n  };\n  /**\n   * Fill given regions array\n   */\n\n\n  GeoCreator.prototype.getFilledRegions = function (originRegionArr, mapName, nameMap, nameProperty) {\n    // Not use the original\n    var regionsArr = (originRegionArr || []).slice();\n    var dataNameMap = zrUtil.createHashMap();\n\n    for (var i = 0; i < regionsArr.length; i++) {\n      dataNameMap.set(regionsArr[i].name, regionsArr[i]);\n    }\n\n    var source = geoSourceManager.load(mapName, nameMap, nameProperty);\n    zrUtil.each(source.regions, function (region) {\n      var name = region.name;\n      !dataNameMap.get(name) && regionsArr.push({\n        name: name\n      });\n    });\n    return regionsArr;\n  };\n\n  return GeoCreator;\n}();\n\nvar geoCreator = new GeoCreator();\nexport default geoCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nimport ComponentModel from '../../model/Component';\nimport Model from '../../model/Model';\nimport geoCreator from './geoCreator';\nimport geoSourceManager from './geoSourceManager';\n;\n\nvar GeoModel =\n/** @class */\nfunction (_super) {\n  __extends(GeoModel, _super);\n\n  function GeoModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GeoModel.type;\n    return _this;\n  }\n\n  GeoModel.prototype.init = function (option, parentModel, ecModel) {\n    var source = geoSourceManager.getGeoResource(option.map);\n\n    if (source && source.type === 'geoJSON') {\n      var itemStyle = option.itemStyle = option.itemStyle || {};\n\n      if (!('color' in itemStyle)) {\n        itemStyle.color = '#eee';\n      }\n    }\n\n    this.mergeDefaultAndTheme(option, ecModel); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n  };\n\n  GeoModel.prototype.optionUpdated = function () {\n    var _this = this;\n\n    var option = this.option;\n    option.regions = geoCreator.getFilledRegions(option.regions, option.map, option.nameMap, option.nameProperty);\n    var selectedMap = {};\n    this._optionModelMap = zrUtil.reduce(option.regions || [], function (optionModelMap, regionOpt) {\n      var regionName = regionOpt.name;\n\n      if (regionName) {\n        optionModelMap.set(regionName, new Model(regionOpt, _this, _this.ecModel));\n\n        if (regionOpt.selected) {\n          selectedMap[regionName] = true;\n        }\n      }\n\n      return optionModelMap;\n    }, zrUtil.createHashMap());\n\n    if (!option.selectedMap) {\n      option.selectedMap = selectedMap;\n    }\n  };\n  /**\n   * Get model of region.\n   */\n\n\n  GeoModel.prototype.getRegionModel = function (name) {\n    return this._optionModelMap.get(name) || new Model(null, this, this.ecModel);\n  };\n  /**\n   * Format label\n   * @param name Region name\n   */\n\n\n  GeoModel.prototype.getFormattedLabel = function (name, status) {\n    var regionModel = this.getRegionModel(name);\n    var formatter = status === 'normal' ? regionModel.get(['label', 'formatter']) : regionModel.get(['emphasis', 'label', 'formatter']);\n    var params = {\n      name: name\n    };\n\n    if (typeof formatter === 'function') {\n      params.status = status;\n      return formatter(params);\n    } else if (typeof formatter === 'string') {\n      return formatter.replace('{a}', name != null ? name : '');\n    }\n  };\n\n  GeoModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GeoModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  }; // PENGING If selectedMode is null ?\n\n\n  GeoModel.prototype.select = function (name) {\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n\n    if (!selectedMode) {\n      return;\n    }\n\n    if (selectedMode !== 'multiple') {\n      option.selectedMap = null;\n    }\n\n    var selectedMap = option.selectedMap || (option.selectedMap = {});\n    selectedMap[name] = true;\n  };\n\n  GeoModel.prototype.unSelect = function (name) {\n    var selectedMap = this.option.selectedMap;\n\n    if (selectedMap) {\n      selectedMap[name] = false;\n    }\n  };\n\n  GeoModel.prototype.toggleSelected = function (name) {\n    this[this.isSelected(name) ? 'unSelect' : 'select'](name);\n  };\n\n  GeoModel.prototype.isSelected = function (name) {\n    var selectedMap = this.option.selectedMap;\n    return !!(selectedMap && selectedMap[name]);\n  };\n\n  GeoModel.type = 'geo';\n  GeoModel.layoutMode = 'box';\n  GeoModel.defaultOption = {\n    zlevel: 0,\n    z: 0,\n    show: true,\n    left: 'center',\n    top: 'center',\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    silent: false,\n    // Map type\n    map: '',\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ]\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    // selectedMode: false\n    label: {\n      show: false,\n      color: '#000'\n    },\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444' // Default color:\n      // + geoJSON: #eee\n      // + geoSVG: null (use SVG original `fill`)\n      // color: '#eee'\n\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    regions: [] // tooltip: {\n    //     show: false\n    // }\n\n  };\n  return GeoModel;\n}(ComponentModel);\n\nexport default GeoModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MapDraw from '../helper/MapDraw';\nimport ComponentView from '../../view/Component';\nimport { getECData } from '../../util/innerStore';\nimport { findEventDispatcher } from '../../util/event';\n\nvar GeoView =\n/** @class */\nfunction (_super) {\n  __extends(GeoView, _super);\n\n  function GeoView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GeoView.type;\n    _this.focusBlurEnabled = true;\n    return _this;\n  }\n\n  GeoView.prototype.init = function (ecModel, api) {\n    var mapDraw = new MapDraw(api);\n    this._mapDraw = mapDraw;\n    this.group.add(mapDraw.group);\n    this._api = api;\n  };\n\n  GeoView.prototype.render = function (geoModel, ecModel, api, payload) {\n    var mapDraw = this._mapDraw;\n\n    if (geoModel.get('show')) {\n      mapDraw.draw(geoModel, ecModel, api, this, payload);\n    } else {\n      this._mapDraw.group.removeAll();\n    }\n\n    mapDraw.group.on('click', this._handleRegionClick, this);\n    mapDraw.group.silent = geoModel.get('silent');\n    this._model = geoModel;\n    this.updateSelectStatus(geoModel, ecModel, api);\n  };\n\n  GeoView.prototype._handleRegionClick = function (e) {\n    var eventData;\n    findEventDispatcher(e.target, function (current) {\n      return (eventData = getECData(current).eventData) != null;\n    }, true);\n\n    if (eventData) {\n      this._api.dispatchAction({\n        type: 'geoToggleSelect',\n        geoId: this._model.id,\n        name: eventData.name\n      });\n    }\n  };\n\n  GeoView.prototype.updateSelectStatus = function (model, ecModel, api) {\n    var _this = this;\n\n    this._mapDraw.group.traverse(function (node) {\n      var eventData = getECData(node).eventData;\n\n      if (eventData) {\n        _this._model.isSelected(eventData.name) ? api.enterSelect(node) : api.leaveSelect(node); // No need to traverse children.\n\n        return true;\n      }\n    });\n  };\n\n  GeoView.prototype.findHighDownDispatchers = function (name) {\n    return this._mapDraw && this._mapDraw.findHighDownDispatchers(name, this._model);\n  };\n\n  GeoView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n  };\n\n  GeoView.type = 'geo';\n  return GeoView;\n}(ComponentView);\n\nexport default GeoView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport GeoModel from '../../coord/geo/GeoModel';\nimport geoCreator from '../../coord/geo/geoCreator';\nimport { each } from 'zrender/lib/core/util';\nimport { updateCenterAndZoom } from '../../action/roamHelper';\nimport GeoView from './GeoView';\nexport function install(registers) {\n  registers.registerCoordinateSystem('geo', geoCreator);\n  registers.registerComponentModel(GeoModel);\n  registers.registerComponentView(GeoView);\n\n  function makeAction(method, actionInfo) {\n    actionInfo.update = 'geo:updateSelectStatus';\n    registers.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      var allSelected = [];\n      ecModel.eachComponent({\n        mainType: 'geo',\n        query: payload\n      }, function (geoModel) {\n        geoModel[method](payload.name);\n        var geo = geoModel.coordinateSystem;\n        each(geo.regions, function (region) {\n          selected[region.name] = geoModel.isSelected(region.name) || false;\n        }); // Notice: there might be duplicated name in different regions.\n\n        var names = [];\n        each(selected, function (v, name) {\n          selected[name] && names.push(name);\n        });\n        allSelected.push({\n          geoIndex: geoModel.componentIndex,\n          // Use singular, the same naming convention as the event `selectchanged`.\n          name: names\n        });\n      });\n      return {\n        selected: selected,\n        allSelected: allSelected,\n        name: payload.name\n      };\n    });\n  }\n\n  makeAction('toggleSelected', {\n    type: 'geoToggleSelect',\n    event: 'geoselectchanged'\n  });\n  makeAction('select', {\n    type: 'geoSelect',\n    event: 'geoselected'\n  });\n  makeAction('unSelect', {\n    type: 'geoUnSelect',\n    event: 'geounselected'\n  });\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'geoRoam',\n    event: 'geoRoam',\n    update: 'updateTransform'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      var geo = componentModel.coordinateSystem;\n\n      if (geo.type !== 'geo') {\n        return;\n      }\n\n      var res = updateCenterAndZoom(geo, payload, componentModel.get('scaleLimit'));\n      componentModel.setCenter && componentModel.setCenter(res.center);\n      componentModel.setZoom && componentModel.setZoom(res.zoom); // All map series with same `map` use the same geo coordinate system\n      // So the center and zoom must be in sync. Include the series not selected by legend\n\n      if (componentType === 'series') {\n        each(componentModel.seriesGroup, function (seriesModel) {\n          seriesModel.setCenter(res.center);\n          seriesModel.setZoom(res.zoom);\n        });\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport MapView from './MapView';\nimport MapSeries from './MapSeries';\nimport mapDataStatistic from './mapDataStatistic';\nimport mapSymbolLayout from './mapSymbolLayout';\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction';\nimport { install as installGeo } from '../../component/geo/install';\nexport function install(registers) {\n  use(installGeo);\n  registers.registerChartView(MapView);\n  registers.registerSeriesModel(MapSeries);\n  registers.registerLayout(mapSymbolLayout);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\n  createLegacyDataSelectAction('map', registers.registerAction);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The tree layoutHelper implementation was originally copied from\n* \"d3.js\"(https://github.com/d3/d3-hierarchy) with\n* some modifications made for this project.\n* (see more details in the comment of the specific method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the licence of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n\n/**\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\n *       the tree.\n */\nimport * as layout from '../../util/layout';\n/**\n * Initialize all computational message for following algorithm.\n */\n\nexport function init(inRoot) {\n  var root = inRoot;\n  root.hierNode = {\n    defaultAncestor: null,\n    ancestor: root,\n    prelim: 0,\n    modifier: 0,\n    change: 0,\n    shift: 0,\n    i: 0,\n    thread: null\n  };\n  var nodes = [root];\n  var node;\n  var children;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    children = node.children;\n\n    if (node.isExpand && children.length) {\n      var n = children.length;\n\n      for (var i = n - 1; i >= 0; i--) {\n        var child = children[i];\n        child.hierNode = {\n          defaultAncestor: null,\n          ancestor: child,\n          prelim: 0,\n          modifier: 0,\n          change: 0,\n          shift: 0,\n          i: i,\n          thread: null\n        };\n        nodes.push(child);\n      }\n    }\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes a preliminary x coordinate for node. Before that, this function is\n * applied recursively to the children of node, as well as the function\n * apportion(). After spacing out the children by calling executeShifts(), the\n * node is placed to the midpoint of its outermost children.\n */\n\nexport function firstWalk(node, separation) {\n  var children = node.isExpand ? node.children : [];\n  var siblings = node.parentNode.children;\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\n\n  if (children.length) {\n    executeShifts(node);\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\n\n    if (subtreeW) {\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\n    } else {\n      node.hierNode.prelim = midPoint;\n    }\n  } else if (subtreeW) {\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n  }\n\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes all real x-coordinates by summing up the modifiers recursively.\n */\n\nexport function secondWalk(node) {\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\n  node.setLayout({\n    x: nodeX\n  }, true);\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\n}\nexport function separation(cb) {\n  return arguments.length ? cb : defaultSeparation;\n}\n/**\n * Transform the common coordinate to radial coordinate.\n */\n\nexport function radialCoordinate(rad, r) {\n  rad -= Math.PI / 2;\n  return {\n    x: r * Math.cos(rad),\n    y: r * Math.sin(rad)\n  };\n}\n/**\n * Get the layout position of the whole view.\n */\n\nexport function getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n/**\n * All other shifts, applied to the smaller subtrees between w- and w+, are\n * performed by this function.\n *\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\nfunction executeShifts(node) {\n  var children = node.children;\n  var n = children.length;\n  var shift = 0;\n  var change = 0;\n\n  while (--n >= 0) {\n    var child = children[n];\n    child.hierNode.prelim += shift;\n    child.hierNode.modifier += shift;\n    change += child.hierNode.change;\n    shift += child.hierNode.shift + change;\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * The core of the algorithm. Here, a new subtree is combined with the\n * previous subtrees. Threads are used to traverse the inside and outside\n * contours of the left and right subtree up to the highest common level.\n * Whenever two nodes of the inside contours conflict, we compute the left\n * one of the greatest uncommon ancestors using the function nextAncestor()\n * and call moveSubtree() to shift the subtree and prepare the shifts of\n * smaller subtrees. Finally, we add a new thread (if necessary).\n */\n\n\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\n  if (subtreeW) {\n    var nodeOutRight = subtreeV;\n    var nodeInRight = subtreeV;\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\n    var nodeInLeft = subtreeW;\n    var sumOutRight = nodeOutRight.hierNode.modifier;\n    var sumInRight = nodeInRight.hierNode.modifier;\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\n    var sumInLeft = nodeInLeft.hierNode.modifier;\n\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\n      nodeOutRight = nextRight(nodeOutRight);\n      nodeOutLeft = nextLeft(nodeOutLeft);\n      nodeOutRight.hierNode.ancestor = subtreeV;\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\n\n      if (shift > 0) {\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\n        sumInRight += shift;\n        sumOutRight += shift;\n      }\n\n      sumInLeft += nodeInLeft.hierNode.modifier;\n      sumInRight += nodeInRight.hierNode.modifier;\n      sumOutRight += nodeOutRight.hierNode.modifier;\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\n    }\n\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\n      nodeOutRight.hierNode.thread = nodeInLeft;\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\n    }\n\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\n      nodeOutLeft.hierNode.thread = nodeInRight;\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\n      ancestor = subtreeV;\n    }\n  }\n\n  return ancestor;\n}\n/**\n * This function is used to traverse the right contour of a subtree.\n * It returns the rightmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n */\n\n\nfunction nextRight(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\n}\n/**\n * This function is used to traverse the left contour of a subtree (or a subforest).\n * It returns the leftmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n */\n\n\nfunction nextLeft(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\n}\n/**\n * If nodeInLeft’s ancestor is a sibling of node, returns nodeInLeft’s ancestor.\n * Otherwise, returns the specified ancestor.\n */\n\n\nfunction nextAncestor(nodeInLeft, node, ancestor) {\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Shifts the current subtree rooted at wr.\n * This is done by increasing prelim(w+) and modifier(w+) by shift.\n */\n\n\nfunction moveSubtree(wl, wr, shift) {\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\n  wr.hierNode.change -= change;\n  wr.hierNode.shift += shift;\n  wr.hierNode.modifier += shift;\n  wr.hierNode.prelim += shift;\n  wl.hierNode.change += change;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\n\nfunction defaultSeparation(node1, node2) {\n  return node1.parentNode === node2.parentNode ? 1 : 2;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport SymbolClz from '../helper/Symbol';\nimport { radialCoordinate } from './layoutHelper';\nimport * as bbox from 'zrender/lib/core/bbox';\nimport View from '../../coord/View';\nimport * as roamHelper from '../../component/helper/roamHelper';\nimport RoamController from '../../component/helper/RoamController';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper';\nimport { parsePercent } from '../../util/number';\nimport ChartView from '../../view/Chart';\nimport Path from 'zrender/lib/graphic/Path';\nimport { setStatesStylesFromModel, setStatesFlag, setDefaultStateProxy, HOVER_STATE_BLUR } from '../../util/states';\n\nvar TreeEdgeShape =\n/** @class */\nfunction () {\n  function TreeEdgeShape() {\n    this.parentPoint = [];\n    this.childPoints = [];\n  }\n\n  return TreeEdgeShape;\n}();\n\nvar TreePath =\n/** @class */\nfunction (_super) {\n  __extends(TreePath, _super);\n\n  function TreePath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  TreePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  TreePath.prototype.getDefaultShape = function () {\n    return new TreeEdgeShape();\n  };\n\n  TreePath.prototype.buildPath = function (ctx, shape) {\n    var childPoints = shape.childPoints;\n    var childLen = childPoints.length;\n    var parentPoint = shape.parentPoint;\n    var firstChildPos = childPoints[0];\n    var lastChildPos = childPoints[childLen - 1];\n\n    if (childLen === 1) {\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\n      return;\n    }\n\n    var orient = shape.orient;\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\n    var otherDim = 1 - forkDim;\n    var forkPosition = parsePercent(shape.forkPosition, 1);\n    var tmpPoint = [];\n    tmpPoint[forkDim] = parentPoint[forkDim];\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\n    tmpPoint[forkDim] = firstChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    tmpPoint[forkDim] = lastChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\n\n    for (var i = 1; i < childLen - 1; i++) {\n      var point = childPoints[i];\n      ctx.moveTo(point[0], point[1]);\n      tmpPoint[forkDim] = point[forkDim];\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    }\n  };\n\n  return TreePath;\n}(Path);\n\nvar TreeView =\n/** @class */\nfunction (_super) {\n  __extends(TreeView, _super);\n\n  function TreeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreeView.type;\n    _this._mainGroup = new graphic.Group();\n    return _this;\n  }\n\n  TreeView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n\n  TreeView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n\n    if (layout === 'radial') {\n      group.x = layoutInfo.x + layoutInfo.width / 2;\n      group.y = layoutInfo.y + layoutInfo.height / 2;\n    } else {\n      group.x = layoutInfo.x;\n      group.y = layoutInfo.y;\n    }\n\n    this._updateViewCoordSys(seriesModel);\n\n    this._updateController(seriesModel, ecModel, api);\n\n    var oldData = this._data;\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n        return;\n      } // Update node and edge\n\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n\n    this._updateNodeAndLinkScale(seriesModel);\n\n    if (seriesModel.get('expandAndCollapse') === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n\n    this._data = data;\n  };\n\n  TreeView.prototype._updateViewCoordSys = function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n\n    var oldMin = this._min;\n    var oldMax = this._max; // If width or height is 0\n\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'));\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n\n    this.group.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n    this._min = min;\n    this._max = max;\n  };\n\n  TreeView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale(seriesModel); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  TreeView.prototype._updateNodeAndLinkScale = function (seriesModel) {\n    var data = seriesModel.getData();\n\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n\n  TreeView.prototype._getNodeGlobalScale = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupZoom = coordSys.scaleX || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  };\n\n  TreeView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  TreeView.prototype.remove = function () {\n    this._mainGroup.removeAll();\n\n    this._data = null;\n  };\n\n  TreeView.type = 'tree';\n  return TreeView;\n}(ChartView);\n\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y);\n}\n\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var visualColor = node.getVisual('style').fill;\n  var symbolInnerColor = node.isExpand === false && node.children.length !== 0 ? visualColor : '#fff';\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.__oldX,\n    y: sourceSymbolEl.__oldY,\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n    symbolEl.x = sourceOldLayout.x;\n    symbolEl.y = sourceOldLayout.y;\n  } else {\n    symbolEl.updateData(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n  }\n\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  symbolEl.__oldX = symbolEl.x;\n  symbolEl.__oldY = symbolEl.y;\n  graphic.updateProps(symbolEl, {\n    x: targetLayout.x,\n    y: targetLayout.y\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n\n  if (seriesModel.get('layout') === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length_1 = realRoot.children.length;\n    var rad = void 0;\n    var isLeft = void 0;\n\n    if (targetLayout.x === rootLayout.x && node.isExpand === true) {\n      var center = {\n        x: (realRoot.children[0].getLayout().x + realRoot.children[length_1 - 1].getLayout().x) / 2,\n        y: (realRoot.children[0].getLayout().y + realRoot.children[length_1 - 1].getLayout().y) / 2\n      };\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      isLeft = center.x < rootLayout.x;\n\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    var normalLabelModel = itemModel.getModel('label');\n    var rotate = normalLabelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    var textContent = symbolPath.getTextContent();\n\n    if (textContent) {\n      symbolPath.setTextConfig({\n        position: normalLabelModel.get('position') || textPosition,\n        rotation: rotate == null ? -rad : labelRotateRadian,\n        origin: 'center'\n      });\n      textContent.setStyle('verticalAlign', 'middle');\n    }\n  } // Handle status\n\n\n  var focus = itemModel.get(['emphasis', 'focus']);\n  var focusDataIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : null;\n\n  if (focusDataIndices) {\n    // Modify the focus to data indices.\n    getECData(symbolEl).focus = focusDataIndices;\n  }\n\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group);\n\n  if (symbolEl.__edge) {\n    symbolEl.onHoverStateChange = function (toState) {\n      if (toState !== 'blur') {\n        // NOTE: Ensure the parent elements will been blurred firstly.\n        // According to the return of getAncestorsIndices and getDescendantIndices\n        // TODO: A bit tricky.\n        var parentEl = node.parentNode && data.getItemGraphicEl(node.parentNode.dataIndex);\n\n        if (!(parentEl && parentEl.hoverState === HOVER_STATE_BLUR)) {\n          setStatesFlag(symbolEl.__edge, toState);\n        }\n      }\n    };\n  }\n}\n\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group) {\n  var itemModel = node.getModel();\n  var edgeShape = seriesModel.get('edgeShape');\n  var layout = seriesModel.get('layout');\n  var orient = seriesModel.getOrient();\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  var edgeForkPosition = seriesModel.get('edgeForkPosition');\n  var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  var edge = symbolEl.__edge;\n\n  if (edgeShape === 'curve') {\n    if (node.parentNode && node.parentNode !== virtualRoot) {\n      if (!edge) {\n        edge = symbolEl.__edge = new graphic.BezierCurve({\n          shape: getEdgeShape(layout, orient, curvature, sourceOldLayout, sourceOldLayout)\n        });\n      }\n\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(layout, orient, curvature, sourceLayout, targetLayout)\n      }, seriesModel);\n    }\n  } else if (edgeShape === 'polyline') {\n    if (layout === 'orthogonal') {\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\n        var children = node.children;\n        var childPoints = [];\n\n        for (var i = 0; i < children.length; i++) {\n          var childLayout = children[i].getLayout();\n          childPoints.push([childLayout.x, childLayout.y]);\n        }\n\n        if (!edge) {\n          edge = symbolEl.__edge = new TreePath({\n            shape: {\n              parentPoint: [targetLayout.x, targetLayout.y],\n              childPoints: [[targetLayout.x, targetLayout.y]],\n              orient: orient,\n              forkPosition: edgeForkPosition\n            }\n          });\n        }\n\n        graphic.updateProps(edge, {\n          shape: {\n            parentPoint: [targetLayout.x, targetLayout.y],\n            childPoints: childPoints\n          }\n        }, seriesModel);\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('The polyline edgeShape can only be used in orthogonal layout');\n      }\n    }\n  }\n\n  if (edge) {\n    edge.useStyle(zrUtil.defaults({\n      strokeNoScale: true,\n      fill: null\n    }, lineStyle));\n    setStatesStylesFromModel(edge, itemModel, 'lineStyle');\n    setDefaultStateProxy(edge);\n    group.add(edge);\n  }\n}\n\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node; // let edgeShape = seriesScope.edgeShape;\n\n  var sourceLayout;\n\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  } // Use same duration and easing with update to have more consistent animation.\n\n\n  var removeAnimationOpt = {\n    duration: seriesModel.get('animationDurationUpdate'),\n    easing: seriesModel.get('animationEasingUpdate')\n  };\n  graphic.removeElement(symbolEl, {\n    x: sourceLayout.x + 1,\n    y: sourceLayout.y + 1\n  }, seriesModel, {\n    cb: function () {\n      group.remove(symbolEl);\n      data.setItemGraphicEl(dataIndex, null);\n    },\n    removeOpt: removeAnimationOpt\n  });\n  symbolEl.fadeOut(null, {\n    fadeLabel: true,\n    animation: removeAnimationOpt\n  });\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceEdge = sourceSymbolEl.__edge; // 1. when expand the sub tree, delete the children node should delete the edge of\n  // the source at the same time. because the polyline edge shape is only owned by the source.\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\n  // the source at the same time. the same reason as above.\n\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\n  var edgeShape = seriesModel.get('edgeShape');\n  var layoutOpt = seriesModel.get('layout');\n  var orient = seriesModel.get('orient');\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n\n  if (edge) {\n    if (edgeShape === 'curve') {\n      graphic.removeElement(edge, {\n        shape: getEdgeShape(layoutOpt, orient, curvature, sourceLayout, sourceLayout),\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    } else if (edgeShape === 'polyline' && seriesModel.get('layout') === 'orthogonal') {\n      graphic.removeElement(edge, {\n        shape: {\n          parentPoint: [sourceLayout.x, sourceLayout.y],\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\n        },\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    }\n  }\n}\n\nfunction getEdgeShape(layoutOpt, orient, curvature, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n\n  if (layoutOpt === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x || 0,\n      y1: radialCoor1.y || 0,\n      x2: radialCoor4.x || 0,\n      y2: radialCoor4.y || 0,\n      cpx1: radialCoor2.x || 0,\n      cpy1: radialCoor2.y || 0,\n      cpx2: radialCoor3.x || 0,\n      cpy2: radialCoor3.y || 0\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * curvature;\n      cpy2 = y2;\n    }\n\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * curvature;\n    }\n  }\n\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\n\nexport default TreeView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Tree data structure\n */\nimport * as zrUtil from 'zrender/lib/core/util';\nimport linkList from './helper/linkList';\nimport List from './List';\nimport createDimensions from './helper/createDimensions';\nimport { convertOptionIdName } from '../util/model';\n\nvar TreeNode =\n/** @class */\nfunction () {\n  function TreeNode(name, hostTree) {\n    this.depth = 0;\n    this.height = 0;\n    /**\n     * Reference to list item.\n     * Do not persistent dataIndex outside,\n     * besause it may be changed by list.\n     * If dataIndex -1,\n     * this node is logical deleted (filtered) in list.\n     */\n\n    this.dataIndex = -1;\n    this.children = [];\n    this.viewChildren = [];\n    this.isExpand = false;\n    this.name = name || '';\n    this.hostTree = hostTree;\n  }\n  /**\n   * The node is removed.\n   */\n\n\n  TreeNode.prototype.isRemoved = function () {\n    return this.dataIndex < 0;\n  };\n\n  TreeNode.prototype.eachNode = function (options, cb, context) {\n    if (typeof options === 'function') {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n\n    options = options || {};\n\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n\n    order === 'postorder' && cb.call(context, this);\n  };\n  /**\n   * Update depth and height of this subtree.\n   */\n\n\n  TreeNode.prototype.updateDepthAndHeight = function (depth) {\n    var height = 0;\n    this.depth = depth;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n\n    this.height = height + 1;\n  };\n\n  TreeNode.prototype.getNodeById = function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n\n      if (res) {\n        return res;\n      }\n    }\n  };\n\n  TreeNode.prototype.contains = function (node) {\n    if (node === this) {\n      return true;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n\n      if (res) {\n        return res;\n      }\n    }\n  };\n  /**\n   * @param includeSelf Default false.\n   * @return order: [root, child, grandchild, ...]\n   */\n\n\n  TreeNode.prototype.getAncestors = function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n\n    ancestors.reverse();\n    return ancestors;\n  };\n\n  TreeNode.prototype.getAncestorsIndices = function () {\n    var indices = [];\n    var currNode = this;\n\n    while (currNode) {\n      indices.push(currNode.dataIndex);\n      currNode = currNode.parentNode;\n    }\n\n    indices.reverse();\n    return indices;\n  };\n\n  TreeNode.prototype.getDescendantIndices = function () {\n    var indices = [];\n    this.eachNode(function (childNode) {\n      indices.push(childNode.dataIndex);\n    });\n    return indices;\n  };\n\n  TreeNode.prototype.getValue = function (dimension) {\n    var data = this.hostTree.data;\n    return data.get(data.getDimension(dimension || 'value'), this.dataIndex);\n  };\n\n  TreeNode.prototype.setLayout = function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  };\n  /**\n   * @return {Object} layout\n   */\n\n\n  TreeNode.prototype.getLayout = function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  }; // @depcrecated\n  // getModel<T = unknown, S extends keyof T = keyof T>(path: S): Model<T[S]>\n\n\n  TreeNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  }; // TODO: TYPE More specific model\n\n\n  TreeNode.prototype.getLevelModel = function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  };\n\n  TreeNode.prototype.setVisual = function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  };\n  /**\n   * Get item visual\n   * FIXME: make return type better\n   */\n\n\n  TreeNode.prototype.getVisual = function (key) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key);\n  };\n\n  TreeNode.prototype.getRawIndex = function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  };\n\n  TreeNode.prototype.getId = function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  };\n  /**\n   * if this is an ancestor of another node\n   *\n   * @param node another node\n   * @return if is ancestor\n   */\n\n\n  TreeNode.prototype.isAncestorOf = function (node) {\n    var parent = node.parentNode;\n\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return false;\n  };\n  /**\n   * if this is an descendant of another node\n   *\n   * @param node another node\n   * @return if is descendant\n   */\n\n\n  TreeNode.prototype.isDescendantOf = function (node) {\n    return node !== this && node.isAncestorOf(this);\n  };\n\n  return TreeNode;\n}();\n\nexport { TreeNode };\n;\n\nvar Tree =\n/** @class */\nfunction () {\n  function Tree(hostModel) {\n    this.type = 'tree';\n    this._nodes = [];\n    this.hostModel = hostModel;\n  }\n\n  Tree.prototype.eachNode = function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  };\n\n  Tree.prototype.getNodeByDataIndex = function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  };\n\n  Tree.prototype.getNodeById = function (name) {\n    return this.root.getNodeById(name);\n  };\n  /**\n   * Update item available by list,\n   * when list has been performed options like 'filterSelf' or 'map'.\n   */\n\n\n  Tree.prototype.update = function () {\n    var data = this.data;\n    var nodes = this._nodes;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  /**\n   * Clear all layouts\n   */\n\n\n  Tree.prototype.clearLayouts = function () {\n    this.data.clearItemLayouts();\n  };\n  /**\n   * data node format:\n   * {\n   *     name: ...\n   *     value: ...\n   *     children: [\n   *         {\n   *             name: ...\n   *             value: ...\n   *             children: ...\n   *         },\n   *         ...\n   *     ]\n   * }\n   */\n\n\n  Tree.createTree = function (dataRoot, hostModel, beforeLink) {\n    var tree = new Tree(hostModel);\n    var listData = [];\n    var dimMax = 1;\n    buildHierarchy(dataRoot);\n\n    function buildHierarchy(dataNode, parentNode) {\n      var value = dataNode.value;\n      dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n      listData.push(dataNode);\n      var node = new TreeNode(convertOptionIdName(dataNode.name, ''), tree);\n      parentNode ? addChild(node, parentNode) : tree.root = node;\n\n      tree._nodes.push(node);\n\n      var children = dataNode.children;\n\n      if (children) {\n        for (var i = 0; i < children.length; i++) {\n          buildHierarchy(children[i], node);\n        }\n      }\n    }\n\n    tree.root.updateDepthAndHeight(0);\n    var dimensionsInfo = createDimensions(listData, {\n      coordDimensions: ['value'],\n      dimensionsCount: dimMax\n    });\n    var list = new List(dimensionsInfo, hostModel);\n    list.initData(listData);\n    beforeLink && beforeLink(list);\n    linkList({\n      mainData: list,\n      struct: tree,\n      structAttr: 'tree'\n    });\n    tree.update();\n    return tree;\n  };\n\n  return Tree;\n}();\n/**\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\n * so this function is not ready and not necessary to be public.\n */\n\n\nfunction addChild(child, node) {\n  var children = node.children;\n\n  if (child.parentNode === node) {\n    return;\n  }\n\n  children.push(child);\n  child.parentNode = node;\n}\n\nexport default Tree;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport Tree from '../../data/Tree';\nimport Model from '../../model/Model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\n\nvar TreeSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreeSeriesModel, _super);\n\n  function TreeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hasSymbolVisual = true; // Do it self.\n\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  /**\n   * Init a tree data structure from data in option series\n   * @param  option  the object used to config echarts view\n   * @return storage initial data\n   */\n\n\n  TreeSeriesModel.prototype.getInitialData = function (option) {\n    //create an virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var leavesModel = new Model(leaves, this, this.ecModel);\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n\n        if (!node.children.length || !node.isExpand) {\n          model.parentModel = leavesModel;\n        }\n\n        return model;\n      });\n    }\n\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex); // Add item.collapsed != null, because users can collapse node original in the series.data.\n\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  };\n  /**\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\n   * @returns {string} orient\n   */\n\n\n  TreeSeriesModel.prototype.getOrient = function () {\n    var orient = this.get('orient');\n\n    if (orient === 'horizontal') {\n      orient = 'LR';\n    } else if (orient === 'vertical') {\n      orient = 'TB';\n    }\n\n    return orient;\n  };\n\n  TreeSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  TreeSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  TreeSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value,\n      noValue: isNaN(value) || value == null\n    });\n  };\n\n  TreeSeriesModel.type = 'series.tree'; // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n\n  TreeSeriesModel.layoutMode = 'box';\n  TreeSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // value can be 'polyline'\n    edgeShape: 'curve',\n    edgeForkPosition: '50%',\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\n    roam: false,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.4,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    orient: 'LR',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      color: '#ccc',\n      width: 1.5,\n      curveness: 0.5\n    },\n    itemStyle: {\n      color: 'lightsteelblue',\n      // borderColor: '#c23531',\n      borderWidth: 1.5\n    },\n    label: {\n      show: true\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 500\n  };\n  return TreeSeriesModel;\n}(SeriesModel);\n\nexport default TreeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Traverse the tree from bottom to top and do something\n */\nfunction eachAfter(root, callback, separation) {\n  var nodes = [root];\n  var next = [];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    next.push(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = 0; i < children.length; i++) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n\n  while (node = next.pop()) {\n    // jshint ignore:line\n    callback(node, separation);\n  }\n}\n/**\n * Traverse the tree from top to bottom and do something\n */\n\n\nfunction eachBefore(root, callback) {\n  var nodes = [root];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    callback(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n}\n\nexport { eachAfter, eachBefore };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { eachAfter, eachBefore } from './traversalHelper';\nimport { init, firstWalk, secondWalk, separation as sep, radialCoordinate, getViewRect } from './layoutHelper';\nexport default function treeLayout(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\n\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left_1 = realRoot;\n    var right_1 = realRoot;\n    var bottom_1 = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n\n      if (x < left_1.getLayout().x) {\n        left_1 = node;\n      }\n\n      if (x > right_1.getLayout().x) {\n        right_1 = node;\n      }\n\n      if (node.depth > bottom_1.depth) {\n        bottom_1 = node;\n      }\n    });\n    var delta = left_1 === right_1 ? 1 : separation(left_1, right_1) / 2;\n    var tx_1 = delta - left_1.getLayout().x;\n    var kx_1 = 0;\n    var ky_1 = 0;\n    var coorX_1 = 0;\n    var coorY_1 = 0;\n\n    if (layout === 'radial') {\n      kx_1 = width / (right_1.getLayout().x + delta + tx_1); // here we use (node.depth - 1), bucause the real root's depth is 1\n\n      ky_1 = height / (bottom_1.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n        coorY_1 = (node.depth - 1) * ky_1;\n        var finalCoor = radialCoordinate(coorX_1, coorY_1);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX_1,\n          rawY: coorY_1\n        }, true);\n      });\n    } else {\n      var orient_1 = seriesModel.getOrient();\n\n      if (orient_1 === 'RL' || orient_1 === 'LR') {\n        ky_1 = height / (right_1.getLayout().x + delta + tx_1);\n        kx_1 = width / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY_1 = (node.getLayout().x + tx_1) * ky_1;\n          coorX_1 = orient_1 === 'LR' ? (node.depth - 1) * kx_1 : width - (node.depth - 1) * kx_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      } else if (orient_1 === 'TB' || orient_1 === 'BT') {\n        kx_1 = width / (right_1.getLayout().x + delta + tx_1);\n        ky_1 = height / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n          coorY_1 = orient_1 === 'TB' ? (node.depth - 1) * ky_1 : height - (node.depth - 1) * ky_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\nexport default function treeVisual(ecModel) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel(); // TODO Optimize\n\n      var style = model.getModel('itemStyle').getItemStyle();\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { updateCenterAndZoom } from '../../action/roamHelper';\nexport function installTreeAction(registers) {\n  registers.registerAction({\n    type: 'treeExpandAndCollapse',\n    event: 'treeExpandAndCollapse',\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var dataIndex = payload.dataIndex;\n      var tree = seriesModel.getData().tree;\n      var node = tree.getNodeByDataIndex(dataIndex);\n      node.isExpand = !node.isExpand;\n    });\n  });\n  registers.registerAction({\n    type: 'treeRoam',\n    event: 'treeRoam',\n    // Here we set 'none' instead of 'update', because roam action\n    // just need to update the transform matrix without having to recalculate\n    // the layout. So don't need to go through the whole update process, such\n    // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.\n    update: 'none'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport TreeView from './TreeView';\nimport TreeSeriesModel from './TreeSeries';\nimport treeLayout from './treeLayout';\nimport treeVisual from './treeVisual';\nimport { installTreeAction } from './treeAction';\nexport function install(registers) {\n  registers.registerChartView(TreeView);\n  registers.registerSeriesModel(TreeSeriesModel);\n  registers.registerLayout(treeLayout);\n  registers.registerVisual(treeVisual);\n  installTreeAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n\n    if (typeof targetNode === 'string') {\n      targetNode = root.getNodeById(targetNode);\n    }\n\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n\n    var targetNodeId = payload.targetNodeId;\n\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n} // Not includes the given node at the last item.\n\nexport function getPathToRoot(node) {\n  var path = [];\n\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n\n  return path.reverse();\n}\nexport function aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n} // From root to the input node (the input node will be included).\n\nexport function wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n\n  treePathInfo.reverse();\n  return treePathInfo;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as helper from '../helper/treeHelper';\n\nvar noop = function () {};\n\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\nexport function installTreemapAction(registers) {\n  for (var i = 0; i < actionTypes.length; i++) {\n    registers.registerAction({\n      type: actionTypes[i],\n      update: 'updateView'\n    }, noop);\n  }\n\n  registers.registerAction({\n    type: 'treemapRootToNode',\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var types = ['treemapZoomToNode', 'treemapRootToNode'];\n      var targetInfo = helper.retrieveTargetInfo(payload, types, model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getDecalFromPalette } from '../../model/mixin/palette';\nexport default function enableAriaDecalForTree(seriesModel) {\n  var data = seriesModel.getData();\n  var tree = data.tree;\n  var decalPaletteScope = {};\n  tree.eachNode(function (node) {\n    // Use decal of level 1 node\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\n    node.setVisual('decal', decal);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SeriesModel from '../../model/Series';\nimport Tree from '../../data/Tree';\nimport Model from '../../model/Model';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\nimport { normalizeToArray } from '../../util/model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree';\n\nvar TreemapSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreemapSeriesModel, _super);\n\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || []; // Used in \"visual priority\" in `treemapVisual.js`.\n    // This way is a little tricky, must satisfy the precondition:\n    //   1. There is no `treeNode.getModel('itemStyle.xxx')` used.\n    //   2. The `Model.prototype.getModel()` will not use any clone-like way.\n\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth]; // If no levelModel, we also need `designatedVisualModel`.\n\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /**\n   * @override\n   * @param {number} dataIndex\n   * @param {boolean} [mutipleSeries=false]\n   */\n\n\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  /**\n   * Add tree path to tooltip param\n   *\n   * @override\n   * @param {number} dataIndex\n   * @return {Object}\n   */\n\n\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n  /**\n   * @public\n   * @param {Object} layoutInfo {\n   *                                x: containerGroup x\n   *                                y: containerGroup y\n   *                                width: containerGroup width\n   *                                height: containerGroup height\n   *                            }\n   */\n\n\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    /**\n     * @readOnly\n     * @type {Object}\n     */\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n  /**\n   * @param  {string} id\n   * @return {number} index\n   */\n\n\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    // A feature is implemented:\n    // index is monotone increasing with the sequence of\n    // input id at the first time.\n    // This feature can make sure that each data item and its\n    // mapped color have the same index between data list and\n    // color list at the beginning, which is useful for user\n    // to adjust data-color mapping.\n\n    /**\n     * @private\n     * @type {Object}\n     */\n    var idIndexMap = this._idIndexMap;\n\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      /**\n       * @private\n       * @type {number}\n       */\n\n      this._idIndexMapCount = 0;\n    }\n\n    var index = idIndexMap.get(id);\n\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n\n    return index;\n  };\n\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    // Disable progressive rendering\n    progressive: 0,\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: '▶',\n    // to align specialized icon. ▷▶❒❐▼✚\n    zoomToNodeRatio: 0.32 * 0.32,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      // right\n      // bottom\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      }\n    },\n    label: {\n      show: true,\n      // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      // formatter: null,\n      color: '#fff',\n      overflow: 'truncate' // align\n      // verticalAlign\n\n    },\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      // formatter: null,\n      // color: '#fff',\n      overflow: 'truncate',\n      // align: null,\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null // If specified, borderColor will be ineffective, and the\n      // border color is evaluated by color of current node and\n      // borderColorSaturation.\n\n    },\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        ellipsis: true,\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    // level[n].color (if necessary).\n    // + Specify color list of each level. level[0].color would be global\n    // color list if not specified. (see method `setDefault`).\n    // + But set as a empty array to forbid fetch color from global palette\n    // when using nodeModel.get('color'), otherwise nodes on deep level\n    // will always has color palette set and are not able to inherit color\n    // from parent node.\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\n    // legend color fetching (see seriesColor.js).\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    // be rendered. Only works when sort is 'asc' or 'desc'.\n    childrenVisibleMin: null,\n    // grandchildren will not show.\n    // Why grandchildren? If not grandchildren but children,\n    // some siblings show children and some not,\n    // the appearance may be mess and not consistent,\n    levels: [] // Each item: {\n    //     visibleMin, itemStyle, visualDimension, label\n    // }\n    // data: {\n    //      value: [],\n    //      children: [],\n    //      link: 'http://xxx.xxx.xxx',\n    //      target: 'blank' or 'self'\n    // }\n\n  };\n  return TreemapSeriesModel;\n}(SeriesModel);\n/**\n * @param {Object} dataNode\n */\n\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n/**\n * set default to level configuration\n */\n\n\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n\n  if (!globalColorList) {\n    return;\n  }\n\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n\n  return levels;\n}\n\nexport default TreemapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport * as layout from '../../util/layout';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\nimport { curry, defaults } from 'zrender/lib/core/util';\nimport { convertOptionIdName } from '../../util/model';\nimport { Z2_EMPHASIS_LIFT } from '../../util/states';\nvar TEXT_PADDING = 8;\nvar ITEM_GAP = 8;\nvar ARRAY_LENGTH = 5;\n\nvar Breadcrumb =\n/** @class */\nfunction () {\n  function Breadcrumb(containerGroup) {\n    this.group = new graphic.Group();\n    containerGroup.add(this.group);\n  }\n\n  Breadcrumb.prototype.render = function (seriesModel, api, targetNode, onSelect) {\n    var model = seriesModel.getModel('breadcrumb');\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n\n    if (!model.get('show') || !targetNode) {\n      return;\n    }\n\n    var normalStyleModel = model.getModel('itemStyle'); // let emphasisStyleModel = model.getModel('emphasis.itemStyle');\n\n    var textStyleModel = normalStyleModel.getModel('textStyle');\n    var layoutParam = {\n      pos: {\n        left: model.get('left'),\n        right: model.get('right'),\n        top: model.get('top'),\n        bottom: model.get('bottom')\n      },\n      box: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      emptyItemWidth: model.get('emptyItemWidth'),\n      totalWidth: 0,\n      renderList: []\n    };\n\n    this._prepare(targetNode, layoutParam, textStyleModel);\n\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, textStyleModel, onSelect);\n\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\n  };\n  /**\n   * Prepare render list and total width\n   * @private\n   */\n\n\n  Breadcrumb.prototype._prepare = function (targetNode, layoutParam, textStyleModel) {\n    for (var node = targetNode; node; node = node.parentNode) {\n      var text = convertOptionIdName(node.getModel().get('name'), '');\n      var textRect = textStyleModel.getTextRect(text);\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\n      layoutParam.renderList.push({\n        node: node,\n        text: text,\n        width: itemWidth\n      });\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Breadcrumb.prototype._renderContent = function (seriesModel, layoutParam, normalStyleModel, textStyleModel, onSelect) {\n    // Start rendering.\n    var lastX = 0;\n    var emptyItemWidth = layoutParam.emptyItemWidth;\n    var height = seriesModel.get(['breadcrumb', 'height']);\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\n    var totalWidth = layoutParam.totalWidth;\n    var renderList = layoutParam.renderList;\n\n    for (var i = renderList.length - 1; i >= 0; i--) {\n      var item = renderList[i];\n      var itemNode = item.node;\n      var itemWidth = item.width;\n      var text = item.text; // Hdie text and shorten width if necessary.\n\n      if (totalWidth > availableSize.width) {\n        totalWidth -= itemWidth - emptyItemWidth;\n        itemWidth = emptyItemWidth;\n        text = null;\n      }\n\n      var el = new graphic.Polygon({\n        shape: {\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\n        },\n        style: defaults(normalStyleModel.getItemStyle(), {\n          lineJoin: 'bevel'\n        }),\n        textContent: new graphic.Text({\n          style: {\n            text: text,\n            fill: textStyleModel.getTextColor(),\n            font: textStyleModel.getFont()\n          }\n        }),\n        textConfig: {\n          position: 'inside'\n        },\n        z2: Z2_EMPHASIS_LIFT * 1e4,\n        onclick: curry(onSelect, itemNode)\n      });\n      el.disableLabelAnimation = true;\n      this.group.add(el);\n      packEventData(el, seriesModel, itemNode);\n      lastX += itemWidth + ITEM_GAP;\n    }\n  };\n\n  Breadcrumb.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  return Breadcrumb;\n}();\n\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\n  !head && points.push([x, y + itemHeight / 2]);\n  return points;\n} // Package custom mouse event.\n\n\nfunction packEventData(el, seriesModel, itemNode) {\n  getECData(el).eventData = {\n    componentType: 'series',\n    componentSubType: 'treemap',\n    componentIndex: seriesModel.componentIndex,\n    seriesIndex: seriesModel.componentIndex,\n    seriesName: seriesModel.name,\n    seriesType: 'treemap',\n    selfType: 'breadcrumb',\n    nodeData: {\n      dataIndex: itemNode && itemNode.dataIndex,\n      name: itemNode && itemNode.name\n    },\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\n  };\n}\n\nexport default Breadcrumb;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Animate multiple elements with a single done-callback.\n *\n * @example\n *  animation\n *      .createWrap()\n *      .add(el1, {x: 10, y: 10})\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\n *      .done(function () { // done })\n *      .start('cubicOut');\n */\nvar AnimationWrap =\n/** @class */\nfunction () {\n  function AnimationWrap() {\n    this._storage = [];\n    this._elExistsMap = {};\n  }\n  /**\n   * Caution: a el can only be added once, otherwise 'done'\n   * might not be called. This method checks this (by el.id),\n   * suppresses adding and returns false when existing el found.\n   *\n   * @return Whether adding succeeded.\n   */\n\n\n  AnimationWrap.prototype.add = function (el, target, duration, delay, easing) {\n    if (this._elExistsMap[el.id]) {\n      return false;\n    }\n\n    this._elExistsMap[el.id] = true;\n\n    this._storage.push({\n      el: el,\n      target: target,\n      duration: duration,\n      delay: delay,\n      easing: easing\n    });\n\n    return true;\n  };\n  /**\n   * Only execute when animation done/aborted.\n   */\n\n\n  AnimationWrap.prototype.finished = function (callback) {\n    this._finishedCallback = callback;\n    return this;\n  };\n  /**\n   * Will stop exist animation firstly.\n   */\n\n\n  AnimationWrap.prototype.start = function () {\n    var _this = this;\n\n    var count = this._storage.length;\n\n    var checkTerminate = function () {\n      count--;\n\n      if (count <= 0) {\n        // Guard.\n        _this._storage.length = 0;\n        _this._elExistsMap = {};\n        _this._finishedCallback && _this._finishedCallback();\n      }\n    };\n\n    for (var i = 0, len = this._storage.length; i < len; i++) {\n      var item = this._storage[i];\n      item.el.animateTo(item.target, {\n        duration: item.duration,\n        delay: item.delay,\n        easing: item.easing,\n        setToFinal: true,\n        done: checkTerminate,\n        aborted: checkTerminate\n      });\n    }\n\n    return this;\n  };\n\n  return AnimationWrap;\n}();\n\nexport function createWrap() {\n  return new AnimationWrap();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, indexOf, curry, extend, normalizeCssArray, isFunction } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { isHighDownDispatcher, setAsHighDownDispatcher, setDefaultStateProxy, enableHoverFocus, Z2_EMPHASIS_LIFT } from '../../util/states';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as helper from '../helper/treeHelper';\nimport Breadcrumb from './Breadcrumb';\nimport RoamController from '../../component/helper/RoamController';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as animationUtil from '../../util/animation';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper';\nimport ChartView from '../../view/Chart';\nimport Displayable from 'zrender/lib/graphic/Displayable';\nimport { makeInner, convertOptionIdName } from '../../util/model';\nimport { windowOpen } from '../../util/format';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = 'label';\nvar PATH_UPPERLABEL_NORMAL = 'upperLabel'; // Should larger than emphasis states lift z\n\nvar Z2_BASE = Z2_EMPHASIS_LIFT * 10; // Should bigger than every z2.\n\nvar Z2_BG = Z2_EMPHASIS_LIFT * 2;\nvar Z2_CONTENT = Z2_EMPHASIS_LIFT * 3;\nvar getStateItemStyle = makeStyleMapper([['fill', 'color'], // `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n]);\n\nvar getItemStyleNormal = function (model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getStateItemStyle(model); // Clear styles set by emphasis.\n\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\n\nvar inner = makeInner();\n\nvar TreemapView =\n/** @class */\nfunction (_super) {\n  __extends(TreemapView, _super);\n\n  function TreemapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapView.type;\n    _this._state = 'ready';\n    _this._storage = createStorage();\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TreemapView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n\n    if (indexOf(models, seriesModel) < 0) {\n      return;\n    }\n\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage; // Mark new root when action is treemapRootToNode.\n\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n\n    !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n\n    this._resetController(api);\n\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  };\n\n  TreemapView.prototype._giveContainerGroup = function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n\n    if (!containerGroup) {\n      // FIXME\n      // 加一层containerGroup是为了clip，但是现在clip功能并没有实现。\n      containerGroup = this._containerGroup = new Group();\n\n      this._initEvents(containerGroup);\n\n      this.group.add(containerGroup);\n    }\n\n    containerGroup.x = layoutInfo.x;\n    containerGroup.y = layoutInfo.y;\n    return containerGroup;\n  };\n\n  TreemapView.prototype._doRender = function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree; // Clear last shape records.\n\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n\n    function doRenderNode(thisNode, oldNode, parentGroup, depth) {\n      return renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth);\n    } // Notice: when thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we can not find all of the old graphic\n    // elements from tree. So we use this stragegy: make element storage, move\n    // from old storage to new storage, clear old storage.\n\n\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0); // Process all removing.\n\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      } // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n          new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(curry(processNode, null)).execute();\n        }\n\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), inner(el).willDelete = true);\n        });\n      });\n      return willDeleteEls;\n    }\n\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true; // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n\n        el.dirty();\n      });\n    }\n  };\n\n  TreemapView.prototype._doAnimation = function (containerGroup, renderResult, seriesModel, reRoot) {\n    if (!seriesModel.get('animation')) {\n      return;\n    }\n\n    var durationOption = seriesModel.get('animationDurationUpdate');\n    var easingOption = seriesModel.get('animationEasing'); // TODO: do not support function until necessary.\n\n    var duration = (isFunction(durationOption) ? 0 : durationOption) || 0;\n    var easing = (isFunction(easingOption) ? null : easingOption) || 'cubicOut';\n    var animationWrap = animationUtil.createWrap(); // Make delete animations.\n\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n\n        var target;\n        var innerStore = inner(parent);\n\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: innerStore.nodeWidth,\n              height: innerStore.nodeHeight\n            },\n            style: {\n              opacity: 0\n            }\n          } // Others.\n          : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n\n          if (!innerStore.willDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = innerStore.nodeWidth / 2;\n            targetY = innerStore.nodeHeight / 2;\n          }\n\n          target = storageName === 'nodeGroup' ? {\n            x: targetX,\n            y: targetY,\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        } // TODO: do not support delay until necessary.\n\n\n        target && animationWrap.add(el, target, duration, 0, easing);\n      });\n    }); // Make other animations\n\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n\n        if (!last) {\n          return;\n        }\n\n        if (el instanceof graphic.Group) {\n          if (last.oldX != null) {\n            target.x = el.x;\n            target.y = el.y;\n            el.x = last.oldX;\n            el.y = last.oldY;\n          }\n        } else {\n          if (last.oldShape) {\n            target.shape = extend({}, el.shape);\n            el.setShape(last.oldShape);\n          }\n\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          } // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n              target.style = {\n                opacity: 1\n              };\n            }\n        }\n\n        animationWrap.add(el, target, duration, 0, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.finished(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  };\n\n  TreemapView.prototype._resetController = function (api) {\n    var controller = this._controller; // Init controller.\n\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  };\n\n  TreemapView.prototype._clearController = function () {\n    var controller = this._controller;\n\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  };\n\n  TreemapView.prototype._onPan = function (e) {\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + e.dx,\n          y: rootLayout.y + e.dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  };\n\n  TreemapView.prototype._onZoom = function (e) {\n    var mouseX = e.originX;\n    var mouseY = e.originY;\n\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      var layoutInfo = this.seriesModel.layoutInfo; // Transform mouse coord from global to containerGroup.\n\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y; // Scale root bounding rect.\n\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [e.scale, e.scale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  };\n\n  TreemapView.prototype._initEvents = function (containerGroup) {\n    var _this = this;\n\n    containerGroup.on('click', function (e) {\n      if (_this._state !== 'ready') {\n        return;\n      }\n\n      var nodeClick = _this.seriesModel.get('nodeClick', true);\n\n      if (!nodeClick) {\n        return;\n      }\n\n      var targetInfo = _this.findTarget(e.offsetX, e.offsetY);\n\n      if (!targetInfo) {\n        return;\n      }\n\n      var node = targetInfo.node;\n\n      if (node.getLayout().isLeafRoot) {\n        _this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          _this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && windowOpen(link, linkTarget);\n        }\n      }\n    }, this);\n  };\n\n  TreemapView.prototype._renderBreadcrumb = function (seriesModel, api, targetInfo) {\n    var _this = this;\n\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot()\n      } // FIXME\n      // better way?\n      // Find breadcrumb tail on center of containerGroup.\n      : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, function (node) {\n      if (_this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? _this._rootToNode({\n          node: node\n        }) : _this._zoomToNode({\n          node: node\n        });\n      }\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  TreemapView.prototype.remove = function () {\n    this._clearController();\n\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  };\n\n  TreemapView.prototype.dispose = function () {\n    this._clearController();\n  };\n\n  TreemapView.prototype._zoomToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n\n  TreemapView.prototype._rootToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  /**\n   * @public\n   * @param {number} x Global coord x.\n   * @param {number} y Global coord y.\n   * @return {Object} info If not found, return undefined;\n   * @return {number} info.node Target node.\n   * @return {number} info.offsetX x refer to target node.\n   * @return {number} info.offsetY y refer to target node.\n   */\n\n\n  TreemapView.prototype.findTarget = function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()]; // If invisible, there might be no element.\n\n\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape; // For performance consideration, dont use 'getBoundingRect'.\n\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  };\n\n  TreemapView.type = 'treemap';\n  return TreemapView;\n}(ChartView);\n/**\n * @inner\n */\n\n\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\n * @inner\n * @return Return undefined means do not travel further.\n */\n\n\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  } // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n\n\n  var thisLayout = thisNode.getLayout();\n  var data = seriesModel.getData();\n  var nodeModel = thisNode.getModel(); // Only for enabling highlight/downplay. Clear firstly.\n  // Because some node will not be rendered.\n\n  data.setItemGraphicEl(thisNode.dataIndex, null);\n\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = nodeModel.getModel('itemStyle');\n  var itemStyleEmphasisModel = nodeModel.getModel(['emphasis', 'itemStyle']);\n  var itemStyleBlurModel = nodeModel.getModel(['blur', 'itemStyle']);\n  var itemStyleSelectModel = nodeModel.getModel(['select', 'itemStyle']);\n  var borderRadius = itemStyleNormalModel.get('borderRadius') || 0; // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n\n  var group = giveGraphic('nodeGroup', Group);\n\n  if (!group) {\n    return;\n  }\n\n  parentGroup.add(group); // x,y are not set when el is above view root.\n\n  group.x = thisLayout.x || 0;\n  group.y = thisLayout.y || 0;\n  group.markRedraw();\n  inner(group).nodeWidth = thisWidth;\n  inner(group).nodeHeight = thisHeight;\n\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  } // Background\n\n\n  var bg = giveGraphic('background', Rect, depth, Z2_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight);\n  var focus = nodeModel.get(['emphasis', 'focus']);\n  var blurScope = nodeModel.get(['emphasis', 'blurScope']);\n  var focusOrIndices = focus === 'ancestor' ? thisNode.getAncestorsIndices() : focus === 'descendant' ? thisNode.getDescendantIndices() : focus; // No children, render content.\n\n  if (isParent) {\n    // Because of the implementation about \"traverse\" in graphic hover style, we\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\n    // hover event from the descendents will be listenered.\n    if (isHighDownDispatcher(group)) {\n      setAsHighDownDispatcher(group, false);\n    }\n\n    if (bg) {\n      setAsHighDownDispatcher(bg, true); // Only for enabling highlight/downplay.\n\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\n      enableHoverFocus(bg, focusOrIndices, blurScope);\n    }\n  } else {\n    var content = giveGraphic('content', Rect, depth, Z2_CONTENT);\n    content && renderContent(group, content);\n\n    if (bg && isHighDownDispatcher(bg)) {\n      setAsHighDownDispatcher(bg, false);\n    }\n\n    setAsHighDownDispatcher(group, true); // Only for enabling highlight/downplay.\n\n    data.setItemGraphicEl(thisNode.dataIndex, group);\n    enableHoverFocus(group, focusOrIndices, blurScope);\n  }\n\n  return group; // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n\n  function renderBackground(group, bg, useUpperLabel) {\n    var ecData = getECData(bg); // For tooltip.\n\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight,\n      r: borderRadius\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(bg);\n    } else {\n      bg.invisible = false;\n      var style = thisNode.getVisual('style');\n      var visualBorderColor = style.stroke;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      emphasisStyle.fill = itemStyleEmphasisModel.get('borderColor');\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      blurStyle.fill = itemStyleBlurModel.get('borderColor');\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      selectStyle.fill = itemStyleSelectModel.get('borderColor');\n\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText( // PENDING: convert ZRColor to ColorString for text.\n        bg, visualBorderColor, style.opacity, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      } // For old bg.\n      else {\n          bg.removeTextContent();\n        }\n\n      bg.setStyle(normalStyle);\n      bg.ensureState('emphasis').style = emphasisStyle;\n      bg.ensureState('blur').style = blurStyle;\n      bg.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(bg);\n    }\n\n    group.add(bg);\n  }\n\n  function renderContent(group, content) {\n    var ecData = getECData(content); // For tooltip.\n\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight,\n      r: borderRadius\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(content);\n    } else {\n      content.invisible = false;\n      var nodeStyle = thisNode.getVisual('style');\n      var visualColor = nodeStyle.fill;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      normalStyle.decal = nodeStyle.decal;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      var selectStyle = getStateItemStyle(itemStyleSelectModel); // PENDING: convert ZRColor to ColorString for text.\n\n      prepareText(content, visualColor, nodeStyle.opacity, null);\n      content.setStyle(normalStyle);\n      content.ensureState('emphasis').style = emphasisStyle;\n      content.ensureState('blur').style = blurStyle;\n      content.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(content);\n    }\n\n    group.add(content);\n  }\n\n  function processInvisible(element) {\n    // Delay invisible setting utill animation finished,\n    // avoid element vanish suddenly before animation.\n    !element.invisible && willInvisibleEls.push(element);\n  }\n\n  function prepareText(rectEl, visualColor, visualOpacity, // Can be null/undefined\n  upperLabelRect) {\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var defaultText = convertOptionIdName(nodeModel.get('name'), null);\n    var isShow = normalLabelModel.getShallow('show');\n    setLabelStyle(rectEl, getLabelStatesModels(nodeModel, upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL), {\n      defaultText: isShow ? defaultText : null,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      labelFetcher: seriesModel,\n      labelDataIndex: thisNode.dataIndex\n    });\n    var textEl = rectEl.getTextContent();\n    var textStyle = textEl.style;\n    var textPadding = normalizeCssArray(textStyle.padding || 0);\n\n    if (upperLabelRect) {\n      rectEl.setTextConfig({\n        layoutRect: upperLabelRect\n      });\n      textEl.disableLabelLayout = true;\n    }\n\n    textEl.beforeUpdate = function () {\n      var width = Math.max((upperLabelRect ? upperLabelRect.width : rectEl.shape.width) - textPadding[1] - textPadding[3], 0);\n      var height = Math.max((upperLabelRect ? upperLabelRect.height : rectEl.shape.height) - textPadding[0] - textPadding[2], 0);\n\n      if (textStyle.width !== width || textStyle.height !== height) {\n        textEl.setStyle({\n          width: width,\n          height: height\n        });\n      }\n    };\n\n    textStyle.truncateMinChar = 2;\n    textStyle.lineOverflow = 'truncate';\n    addDrillDownIcon(textStyle, upperLabelRect, thisLayout);\n    var textEmphasisState = textEl.getState('emphasis');\n    addDrillDownIcon(textEmphasisState ? textEmphasisState.style : null, upperLabelRect, thisLayout);\n  }\n\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\n    var text = style ? style.text : null;\n\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      style.text = iconChar ? iconChar + ' ' + text : text;\n    }\n  }\n\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element);\n    } // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n        element = new Ctor();\n\n        if (element instanceof Displayable) {\n          element.z2 = calculateZ2(depth, z);\n        }\n\n        prepareAnimationWhenNoOld(lasts, element);\n      } // Set to thisStorage\n\n\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n\n  function prepareAnimationWhenHasOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n\n    if (element instanceof Group) {\n      lastCfg.oldX = element.x;\n      lastCfg.oldY = element.y;\n    } else {\n      lastCfg.oldShape = extend({}, element.shape);\n    }\n  } // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n\n\n  function prepareAnimationWhenNoOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n    var isGroup = element instanceof graphic.Group;\n\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0; // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n\n      if (!reRoot && parentOldBg && parentOldBg.oldShape) {\n        parentOldX = parentOldBg.oldShape.width;\n        parentOldY = parentOldBg.oldShape.height;\n      } // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n\n\n      if (isGroup) {\n        lastCfg.oldX = 0;\n        lastCfg.oldY = parentOldY;\n      } else {\n        lastCfg.oldShape = {\n          x: parentOldX,\n          y: parentOldY,\n          width: 0,\n          height: 0\n        };\n      }\n    } // Fade in, user can be aware that these nodes are new.\n\n\n    lastCfg.fadein = !isGroup;\n  }\n} // We can not set all backgroud with the same z, Because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause that lowser background element overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\n\n\nfunction calculateZ2(depth, z2InLevel) {\n  return depth * Z2_BASE + z2InLevel;\n}\n\nexport default TreemapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport VisualMapping from '../../visual/VisualMapping';\nimport { each, extend, isArray } from 'zrender/lib/core/util';\nimport { modifyHSL, modifyAlpha } from 'zrender/lib/tool/color';\nimport { makeInner } from '../../util/model';\nvar ITEM_STYLE_NORMAL = 'itemStyle';\nvar inner = makeInner();\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel) {\n    var tree = seriesModel.getData().tree;\n    var root = tree.root;\n\n    if (root.isRemoved()) {\n      return;\n    }\n\n    travelTree(root, // Visual should calculate from tree root but not view root.\n    {}, seriesModel.getViewRoot().getAncestors(), seriesModel);\n  }\n};\n\nfunction travelTree(node, designatedVisual, viewRootAncestors, seriesModel) {\n  var nodeModel = node.getModel();\n  var nodeLayout = node.getLayout();\n  var data = node.hostTree.data; // Optimize\n\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\n    return;\n  }\n\n  var nodeItemStyleModel = nodeModel.getModel(ITEM_STYLE_NORMAL);\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel);\n  var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style'); // calculate border color\n\n  var borderColor = nodeItemStyleModel.get('borderColor');\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\n  var thisNodeColor;\n\n  if (borderColorSaturation != null) {\n    // For performance, do not always execute 'calculateColor'.\n    thisNodeColor = calculateColor(visuals);\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\n  }\n\n  existsStyle.stroke = borderColor;\n  var viewChildren = node.viewChildren;\n\n  if (!viewChildren || !viewChildren.length) {\n    thisNodeColor = calculateColor(visuals); // Apply visual to this node.\n\n    existsStyle.fill = thisNodeColor;\n  } else {\n    var mapping_1 = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren); // Designate visual to children.\n\n    each(viewChildren, function (child, index) {\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping_1, seriesModel);\n        travelTree(child, childVisual, viewRootAncestors, seriesModel);\n      }\n    });\n  }\n}\n\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel) {\n  var visuals = extend({}, designatedVisual);\n  var designatedVisualItemStyle = seriesModel.designatedVisualItemStyle;\n  each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\n    designatedVisualItemStyle[visualName] = designatedVisual[visualName];\n    var val = nodeItemStyleModel.get(visualName);\n    designatedVisualItemStyle[visualName] = null;\n    val != null && (visuals[visualName] = val);\n  });\n  return visuals;\n}\n\nfunction calculateColor(visuals) {\n  var color = getValueVisualDefine(visuals, 'color');\n\n  if (color) {\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\n\n    if (colorSaturation) {\n      color = modifyHSL(color, null, null, colorSaturation);\n    }\n\n    if (colorAlpha) {\n      color = modifyAlpha(color, colorAlpha);\n    }\n\n    return color;\n  }\n}\n\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\n  return thisNodeColor != null // Can only be string\n  ? modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\n}\n\nfunction getValueVisualDefine(visuals, name) {\n  var value = visuals[name];\n\n  if (value != null && value !== 'none') {\n    return value;\n  }\n}\n\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\n  if (!viewChildren || !viewChildren.length) {\n    return;\n  }\n\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\n\n  if (!rangeVisual) {\n    return;\n  }\n\n  var visualMin = nodeModel.get('visualMin');\n  var visualMax = nodeModel.get('visualMax');\n  var dataExtent = nodeLayout.dataExtent.slice();\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\n  var colorMappingBy = nodeModel.get('colorMappingBy');\n  var opt = {\n    type: rangeVisual.name,\n    dataExtent: dataExtent,\n    visual: rangeVisual.range\n  };\n\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\n    opt.mappingMethod = 'category';\n    opt.loop = true; // categories is ordinal, so do not set opt.categories.\n  } else {\n    opt.mappingMethod = 'linear';\n  }\n\n  var mapping = new VisualMapping(opt);\n  inner(mapping).drColorMappingBy = colorMappingBy;\n  return mapping;\n} // Notice: If we dont have the attribute 'colorRange', but only use\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\n// this problem will be encountered:\n// If a level-1 node dont have children, and its siblings has children,\n// and colorRange is set on level-1, then the node can not be colored.\n// So we separate 'colorRange' and 'color' to different attributes.\n\n\nfunction getRangeVisual(nodeModel, name) {\n  // 'colorRange', 'colorARange', 'colorSRange'.\n  // If not exsits on this node, fetch from levels and series.\n  var range = nodeModel.get(name);\n  return isArray(range) && range.length ? {\n    name: name,\n    range: range\n  } : null;\n}\n\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\n  var childVisuals = extend({}, visuals);\n\n  if (mapping) {\n    // Only support color, colorAlpha, colorSaturation.\n    var mappingType = mapping.type;\n    var colorMappingBy = mappingType === 'color' && inner(mapping).drColorMappingBy;\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\n  }\n\n  return childVisuals;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The treemap layout implementation was originally copied from\n* \"d3.js\" with some modifications made for this project.\n* (See more details in the comment of the method \"squarify\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { parsePercent, MAX_SAFE_INTEGER } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport * as helper from '../helper/treeHelper';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar retrieveValue = zrUtil.retrieve;\nvar each = zrUtil.each;\nvar PATH_BORDER_WIDTH = ['itemStyle', 'borderWidth'];\nvar PATH_GAP_WIDTH = ['itemStyle', 'gapWidth'];\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'show'];\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'height'];\n;\n/**\n * @public\n */\n\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel, ecModel, api, payload) {\n    // Layout result in each node:\n    // {x, y, width, height, area, borderWidth}\n    var ecWidth = api.getWidth();\n    var ecHeight = api.getHeight();\n    var seriesOption = seriesModel.option;\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    var size = seriesOption.size || []; // Compatible with ec2.\n\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight); // Fetch payload info.\n\n    var payloadType = payload && payload.type;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\n    var viewRoot = seriesModel.getViewRoot();\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\n\n    if (payloadType !== 'treemapMove') {\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\n      var sort_1 = seriesOption.sort;\n\n      if (sort_1 && sort_1 !== 'asc' && sort_1 !== 'desc') {\n        // Default to be desc order.\n        sort_1 = 'desc';\n      }\n\n      var options = {\n        squareRatio: seriesOption.squareRatio,\n        sort: sort_1,\n        leafDepth: seriesOption.leafDepth\n      }; // layout should be cleared because using updateView but not update.\n\n      viewRoot.hostTree.clearLayouts(); // TODO\n      // optimize: if out of view clip, do not layout.\n      // But take care that if do not render node out of view clip,\n      // how to calculate start po\n\n      var viewRootLayout_1 = {\n        x: 0,\n        y: 0,\n        width: rootSize[0],\n        height: rootSize[1],\n        area: rootSize[0] * rootSize[1]\n      };\n      viewRoot.setLayout(viewRootLayout_1);\n      squarify(viewRoot, options, false, 0); // Supplement layout.\n\n      viewRootLayout_1 = viewRoot.getLayout();\n      each(viewAbovePath, function (node, index) {\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\n        node.setLayout(zrUtil.extend({\n          dataExtent: [childValue, childValue],\n          borderWidth: 0,\n          upperHeight: 0\n        }, viewRootLayout_1));\n      });\n    }\n\n    var treeRoot = seriesModel.getData().tree.root;\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\n    seriesModel.setLayoutInfo(layoutInfo); // FIXME\n    // 现在没有clip功能，暂时取ec高宽。\n\n    prunning(treeRoot, // Transform to base element coordinate system.\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\n  }\n};\n/**\n * Layout treemap with squarify algorithm.\n * The original presentation of this algorithm\n * was made by Mark Bruls, Kees Huizing, and Jarke J. van Wijk\n * <https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf>.\n * The implementation of this algorithm was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/layout/treemap.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * @protected\n * @param {module:echarts/data/Tree~TreeNode} node\n * @param {Object} options\n * @param {string} options.sort 'asc' or 'desc'\n * @param {number} options.squareRatio\n * @param {boolean} hideChildren\n * @param {number} depth\n */\n\nfunction squarify(node, options, hideChildren, depth) {\n  var width;\n  var height;\n\n  if (node.isRemoved()) {\n    return;\n  }\n\n  var thisLayout = node.getLayout();\n  width = thisLayout.width;\n  height = thisLayout.height; // Considering border and gap\n\n  var nodeModel = node.getModel();\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\n  var layoutOffset = borderWidth - halfGapWidth;\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\n  node.setLayout({\n    borderWidth: borderWidth,\n    upperHeight: upperHeight,\n    upperLabelHeight: upperLabelHeight\n  }, true);\n  width = mathMax(width - 2 * layoutOffset, 0);\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\n  var totalArea = width * height;\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\n\n  if (!viewChildren.length) {\n    return;\n  }\n\n  var rect = {\n    x: layoutOffset,\n    y: layoutOffsetUpper,\n    width: width,\n    height: height\n  };\n  var rowFixedLength = mathMin(width, height);\n  var best = Infinity; // the best row score so far\n\n  var row = [];\n  row.area = 0;\n\n  for (var i = 0, len = viewChildren.length; i < len;) {\n    var child = viewChildren[i];\n    row.push(child);\n    row.area += child.getLayout().area;\n    var score = worst(row, rowFixedLength, options.squareRatio); // continue with this orientation\n\n    if (score <= best) {\n      i++;\n      best = score;\n    } // abort, and try a different orientation\n    else {\n        row.area -= row.pop().getLayout().area;\n        position(row, rowFixedLength, rect, halfGapWidth, false);\n        rowFixedLength = mathMin(rect.width, rect.height);\n        row.length = row.area = 0;\n        best = Infinity;\n      }\n  }\n\n  if (row.length) {\n    position(row, rowFixedLength, rect, halfGapWidth, true);\n  }\n\n  if (!hideChildren) {\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\n\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\n      hideChildren = true;\n    }\n  }\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\n  }\n}\n/**\n * Set area to each child, and calculate data extent for visual coding.\n */\n\n\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\n  var viewChildren = node.children || [];\n  var orderBy = options.sort;\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth; // leafDepth has higher priority.\n\n  if (hideChildren && !overLeafDepth) {\n    return node.viewChildren = [];\n  } // Sort children, order by desc.\n\n\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\n    return !child.isRemoved();\n  });\n  sort(viewChildren, orderBy);\n  var info = statistic(nodeModel, viewChildren, orderBy);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  } // Set area to each child.\n\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    var area = viewChildren[i].getValue() / info.sum * totalArea; // Do not use setLayout({...}, true), because it is needed to clear last layout.\n\n    viewChildren[i].setLayout({\n      area: area\n    });\n  }\n\n  if (overLeafDepth) {\n    viewChildren.length && node.setLayout({\n      isLeafRoot: true\n    }, true);\n    viewChildren.length = 0;\n  }\n\n  node.viewChildren = viewChildren;\n  node.setLayout({\n    dataExtent: info.dataExtent\n  }, true);\n  return viewChildren;\n}\n/**\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\n */\n\n\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\n  // visibleMin is not supported yet when no option.sort.\n  if (!orderBy) {\n    return sum;\n  }\n\n  var visibleMin = nodeModel.get('visibleMin');\n  var len = orderedChildren.length;\n  var deletePoint = len; // Always travel from little value to big value.\n\n  for (var i = len - 1; i >= 0; i--) {\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\n\n    if (value / sum * totalArea < visibleMin) {\n      deletePoint = i;\n      sum -= value;\n    }\n  }\n\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\n  return sum;\n}\n/**\n * Sort\n */\n\n\nfunction sort(viewChildren, orderBy) {\n  if (orderBy) {\n    viewChildren.sort(function (a, b) {\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\n    });\n  }\n\n  return viewChildren;\n}\n/**\n * Statistic\n */\n\n\nfunction statistic(nodeModel, children, orderBy) {\n  // Calculate sum.\n  var sum = 0;\n\n  for (var i = 0, len = children.length; i < len; i++) {\n    sum += children[i].getValue();\n  } // Statistic data extent for latter visual coding.\n  // Notice: data extent should be calculate based on raw children\n  // but not filtered view children, otherwise visual mapping will not\n  // be stable when zoom (where children is filtered by visibleMin).\n\n\n  var dimension = nodeModel.get('visualDimension');\n  var dataExtent; // The same as area dimension.\n\n  if (!children || !children.length) {\n    dataExtent = [NaN, NaN];\n  } else if (dimension === 'value' && orderBy) {\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\n    orderBy === 'asc' && dataExtent.reverse();\n  } // Other dimension.\n  else {\n      dataExtent = [Infinity, -Infinity];\n      each(children, function (child) {\n        var value = child.getValue(dimension);\n        value < dataExtent[0] && (dataExtent[0] = value);\n        value > dataExtent[1] && (dataExtent[1] = value);\n      });\n    }\n\n  return {\n    sum: sum,\n    dataExtent: dataExtent\n  };\n}\n/**\n * Computes the score for the specified row,\n * as the worst aspect ratio.\n */\n\n\nfunction worst(row, rowFixedLength, ratio) {\n  var areaMax = 0;\n  var areaMin = Infinity;\n\n  for (var i = 0, area = void 0, len = row.length; i < len; i++) {\n    area = row[i].getLayout().area;\n\n    if (area) {\n      area < areaMin && (areaMin = area);\n      area > areaMax && (areaMax = area);\n    }\n  }\n\n  var squareArea = row.area * row.area;\n  var f = rowFixedLength * rowFixedLength * ratio;\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\n}\n/**\n * Positions the specified row of nodes. Modifies `rect`.\n */\n\n\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\n  // When rowFixedLength === rect.width,\n  // it is horizontal subdivision,\n  // rowFixedLength is the width of the subdivision,\n  // rowOtherLength is the height of the subdivision,\n  // and nodes will be positioned from left to right.\n  // wh[idx0WhenH] means: when horizontal,\n  //      wh[idx0WhenH] => wh[0] => 'width'.\n  //      xy[idx1WhenH] => xy[1] => 'y'.\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\n  var idx1WhenH = 1 - idx0WhenH;\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  var last = rect[xy[idx0WhenH]];\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\n\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\n  }\n\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\n    var node = row[i];\n    var nodeLayout = {};\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0); // We use Math.max/min to avoid negative width/height when considering gap width.\n\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\n    last += modWH;\n    node.setLayout(nodeLayout, true);\n  }\n\n  rect[xy[idx1WhenH]] += rowOtherLength;\n  rect[wh[idx1WhenH]] -= rowOtherLength;\n} // Return [containerWidth, containerHeight] as default.\n\n\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\n  // If targetInfo.node exists, we zoom to the node,\n  // so estimate whold width and heigth by target node.\n  var currNode = (targetInfo || {}).node;\n  var defaultSize = [containerWidth, containerHeight];\n\n  if (!currNode || currNode === viewRoot) {\n    return defaultSize;\n  }\n\n  var parent;\n  var viewArea = containerWidth * containerHeight;\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\n\n  while (parent = currNode.parentNode) {\n    // jshint ignore:line\n    var sum = 0;\n    var siblings = parent.children;\n\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      sum += siblings[i].getValue();\n    }\n\n    var currNodeValue = currNode.getValue();\n\n    if (currNodeValue === 0) {\n      return defaultSize;\n    }\n\n    area *= sum / currNodeValue; // Considering border, suppose aspect ratio is 1.\n\n    var parentModel = parent.getModel();\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel));\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\n    currNode = parent;\n  }\n\n  area < viewArea && (area = viewArea);\n  var scale = Math.pow(area / viewArea, 0.5);\n  return [containerWidth * scale, containerHeight * scale];\n} // Root postion base on coord of containerGroup\n\n\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\n  if (rootRect) {\n    return {\n      x: rootRect.x,\n      y: rootRect.y\n    };\n  }\n\n  var defaultPosition = {\n    x: 0,\n    y: 0\n  };\n\n  if (!targetInfo) {\n    return defaultPosition;\n  } // If targetInfo is fetched by 'retrieveTargetInfo',\n  // old tree and new tree are the same tree,\n  // so the node still exists and we can visit it.\n\n\n  var targetNode = targetInfo.node;\n  var layout = targetNode.getLayout();\n\n  if (!layout) {\n    return defaultPosition;\n  } // Transform coord from local to container.\n\n\n  var targetCenter = [layout.width / 2, layout.height / 2];\n  var node = targetNode;\n\n  while (node) {\n    var nodeLayout = node.getLayout();\n    targetCenter[0] += nodeLayout.x;\n    targetCenter[1] += nodeLayout.y;\n    node = node.parentNode;\n  }\n\n  return {\n    x: layoutInfo.width / 2 - targetCenter[0],\n    y: layoutInfo.height / 2 - targetCenter[1]\n  };\n} // Mark nodes visible for prunning when visual coding and rendering.\n// Prunning depends on layout and root position, so we have to do it after layout.\n\n\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\n  var nodeLayout = node.getLayout();\n  var nodeInViewAbovePath = viewAbovePath[depth];\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\n\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\n    return;\n  }\n\n  node.setLayout({\n    // isInView means: viewRoot sub tree + viewAbovePath\n    isInView: true,\n    // invisible only means: outside view clip so that the node can not\n    // see but still layout for animation preparation but not render.\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\n    isAboveViewRoot: isAboveViewRoot\n  }, true); // Transform to child coordinate.\n\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\n  each(node.viewChildren || [], function (child) {\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\n  });\n}\n\nfunction getUpperLabelHeight(model) {\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { installTreemapAction } from './treemapAction';\nimport TreemapSeriesModel from './TreemapSeries';\nimport TreemapView from './TreemapView';\nimport treemapVisual from './treemapVisual';\nimport treemapLayout from './treemapLayout';\nexport function install(registers) {\n  registers.registerSeriesModel(TreemapSeriesModel);\n  registers.registerChartView(TreemapView);\n  registers.registerVisual(treemapVisual);\n  registers.registerLayout(treemapLayout);\n  installTreemapAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nvar opacityAccessPath = ['itemStyle', 'opacity'];\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar FunnelPiece =\n/** @class */\nfunction (_super) {\n  __extends(FunnelPiece, _super);\n\n  function FunnelPiece(data, idx) {\n    var _this = _super.call(this) || this;\n\n    var polygon = _this;\n    var labelLine = new graphic.Polyline();\n    var text = new graphic.Text();\n    polygon.setTextContent(text);\n\n    _this.setTextGuideLine(labelLine);\n\n    _this.updateData(data, idx, true);\n\n    return _this;\n  }\n\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\n    var polygon = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var opacity = itemModel.get(opacityAccessPath);\n    opacity = opacity == null ? 1 : opacity; // Update common style\n\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\n    polygon.style.lineJoin = 'round';\n\n    if (firstCreate) {\n      polygon.setShape({\n        points: layout.points\n      });\n      polygon.style.opacity = 0;\n      graphic.initProps(polygon, {\n        style: {\n          opacity: opacity\n        }\n      }, seriesModel, idx);\n    } else {\n      graphic.updateProps(polygon, {\n        style: {\n          opacity: opacity\n        },\n        shape: {\n          points: layout.points\n        }\n      }, seriesModel, idx);\n    }\n\n    setStatesStylesFromModel(polygon, itemModel);\n\n    this._updateLabel(data, idx);\n\n    enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  };\n\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\n    var polygon = this;\n    var labelLine = this.getTextGuideLine();\n    var labelText = polygon.getTextContent();\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var labelLayout = layout.label;\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style.fill;\n    setLabelStyle( // position will not be used in setLabelStyle\n    labelText, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      defaultOpacity: style.opacity,\n      defaultText: data.getName(idx)\n    }, {\n      normal: {\n        align: labelLayout.textAlign,\n        verticalAlign: labelLayout.verticalAlign\n      }\n    });\n    polygon.setTextConfig({\n      local: true,\n      inside: !!labelLayout.inside,\n      insideStroke: visualColor,\n      // insideFill: 'auto',\n      outsideFill: visualColor\n    });\n    var linePoints = labelLayout.linePoints;\n    labelLine.setShape({\n      points: linePoints\n    });\n    polygon.textGuideLineConfig = {\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\n    }; // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    graphic.updateProps(labelText, {\n      style: {\n        x: labelLayout.x,\n        y: labelLayout.y\n      }\n    }, seriesModel, idx);\n    labelText.attr({\n      rotation: labelLayout.rotation,\n      originX: labelLayout.x,\n      originY: labelLayout.y,\n      z2: 10\n    });\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\n      // Default use item visual color\n      stroke: visualColor\n    });\n  };\n\n  return FunnelPiece;\n}(graphic.Polygon);\n\nvar FunnelView =\n/** @class */\nfunction (_super) {\n  __extends(FunnelView, _super);\n\n  function FunnelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelView.type;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piece = oldData.getItemGraphicEl(oldIdx);\n      piece.updateData(data, newIdx);\n      group.add(piece);\n      data.setItemGraphicEl(newIdx, piece);\n    }).remove(function (idx) {\n      var piece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\n    }).execute();\n    this._data = data;\n  };\n\n  FunnelView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  FunnelView.prototype.dispose = function () {};\n\n  FunnelView.type = 'funnel';\n  return FunnelView;\n}(ChartView);\n\nexport default FunnelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport createListSimply from '../helper/createListSimply';\nimport { defaultEmphasis } from '../../util/model';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\n\nvar FunnelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(FunnelSeriesModel, _super);\n\n  function FunnelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelSeriesModel.type;\n    _this.useColorPaletteOnData = true;\n    return _this;\n  }\n\n  FunnelSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this)); // Extend labelLine emphasis\n\n    this._defaultLabelLine(option);\n  };\n\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createListSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  }; // Overwrite\n\n\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n\n    var valueDim = data.mapDimension('value');\n    var sum = data.getSum(valueDim); // Percent is 0 if sum is 0\n\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  };\n\n  FunnelSeriesModel.type = 'series.funnel';\n  FunnelSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // 默认取数据最小最大值\n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    orient: 'vertical',\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      show: true,\n      position: 'outer' // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n\n    },\n    labelLine: {\n      show: true,\n      length: 20,\n      lineStyle: {\n        // color: 各异,\n        width: 1\n      }\n    },\n    itemStyle: {\n      // color: 各异,\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return FunnelSeriesModel;\n}(SeriesModel);\n\nexport default FunnelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout';\nimport { parsePercent, linearMap } from '../../util/number';\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\n\n\n  if (typeof sort === 'function') {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n\n  return indices;\n}\n\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\n\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n\n    if (max == null) {\n      max = dataExtent[1];\n    }\n\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n\n      indices = indices.reverse();\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n\n    labelLayout(data);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport FunnelView from './FunnelView';\nimport FunnelSeriesModel from './FunnelSeries';\nimport funnelLayout from './funnelLayout';\nimport dataFilter from '../../processor/dataFilter';\nexport function install(registers) {\n  registers.registerChartView(FunnelView);\n  registers.registerSeriesModel(FunnelSeriesModel);\n  registers.registerLayout(funnelLayout);\n  registers.registerProcessor(dataFilter('funnel'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport { numericToNumber } from '../../util/number';\nimport { eqNaN } from 'zrender/lib/core/util';\nvar DEFAULT_SMOOTH = 0.3;\n\nvar ParallelView =\n/** @class */\nfunction (_super) {\n  __extends(ParallelView, _super);\n\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelView.type;\n    _this._dataGroup = new graphic.Group();\n    _this._initialized = false;\n    return _this;\n  }\n\n  ParallelView.prototype.init = function () {\n    this.group.add(this._dataGroup);\n  };\n  /**\n   * @override\n   */\n\n\n  ParallelView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var dataGroup = this._dataGroup;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    data.diff(oldData).add(add).update(update).remove(remove).execute();\n\n    function add(newDataIndex) {\n      var line = addEl(data, dataGroup, newDataIndex, dimensions, coordSys);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n\n    function update(newDataIndex, oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      var points = createLinePoints(data, newDataIndex, dimensions, coordSys);\n      data.setItemGraphicEl(newDataIndex, line);\n      graphic.updateProps(line, {\n        shape: {\n          points: points\n        }\n      }, seriesModel, newDataIndex);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n\n    function remove(oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      dataGroup.remove(line);\n    } // First create\n\n\n    if (!this._initialized) {\n      this._initialized = true;\n      var clipPath = createGridClipShape(coordSys, seriesModel, function () {\n        // Callback will be invoked immediately if there is no animation\n        setTimeout(function () {\n          dataGroup.removeClipPath();\n        });\n      });\n      dataGroup.setClipPath(clipPath);\n    }\n\n    this._data = data;\n  };\n\n  ParallelView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._initialized = true;\n    this._data = null;\n\n    this._dataGroup.removeAll();\n  };\n\n  ParallelView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n\n    for (var dataIndex = taskParams.start; dataIndex < taskParams.end; dataIndex++) {\n      var line = addEl(data, this._dataGroup, dataIndex, dimensions, coordSys);\n      line.incremental = true;\n      updateElCommon(line, data, dataIndex, seriesScope);\n    }\n  };\n\n  ParallelView.prototype.remove = function () {\n    this._dataGroup && this._dataGroup.removeAll();\n    this._data = null;\n  };\n\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ChartView);\n\nfunction createGridClipShape(coordSys, seriesModel, cb) {\n  var parallelModel = coordSys.model;\n  var rect = coordSys.getRect();\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    }\n  });\n  var dim = parallelModel.get('layout') === 'horizontal' ? 'width' : 'height';\n  rectEl.setShape(dim, 0);\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width,\n      height: rect.height\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nfunction createLinePoints(data, dataIndex, dimensions, coordSys) {\n  var points = [];\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimName = dimensions[i];\n    var value = data.get(data.mapDimension(dimName), dataIndex);\n\n    if (!isEmptyValue(value, coordSys.getAxis(dimName).type)) {\n      points.push(coordSys.dataToPoint(value, dimName));\n    }\n  }\n\n  return points;\n}\n\nfunction addEl(data, dataGroup, dataIndex, dimensions, coordSys) {\n  var points = createLinePoints(data, dataIndex, dimensions, coordSys);\n  var line = new graphic.Polyline({\n    shape: {\n      points: points\n    },\n    // silent: true,\n    z2: 10\n  });\n  dataGroup.add(line);\n  data.setItemGraphicEl(dataIndex, line);\n  return line;\n}\n\nfunction makeSeriesScope(seriesModel) {\n  var smooth = seriesModel.get('smooth', true);\n  smooth === true && (smooth = DEFAULT_SMOOTH);\n  smooth = numericToNumber(smooth);\n  eqNaN(smooth) && (smooth = 0);\n  return {\n    smooth: smooth\n  };\n}\n\nfunction updateElCommon(el, data, dataIndex, seriesScope) {\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.fill = null;\n  el.setShape('smooth', seriesScope.smooth);\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel, 'lineStyle');\n  enableHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n} // function simpleDiff(oldData, newData, dimensions) {\n//     let oldLen;\n//     if (!oldData\n//         || !oldData.__plProgressive\n//         || (oldLen = oldData.count()) !== newData.count()\n//     ) {\n//         return true;\n//     }\n//     let dimLen = dimensions.length;\n//     for (let i = 0; i < oldLen; i++) {\n//         for (let j = 0; j < dimLen; j++) {\n//             if (oldData.get(dimensions[j], i) !== newData.get(dimensions[j], i)) {\n//                 return true;\n//             }\n//         }\n//     }\n//     return false;\n// }\n// FIXME put in common util?\n\n\nfunction isEmptyValue(val, axisType) {\n  return axisType === 'category' ? val == null : val == null || isNaN(val); // axisType === 'value'\n}\n\nexport default ParallelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, bind } from 'zrender/lib/core/util';\nimport SeriesModel from '../../model/Series';\nimport createListFromArray from '../helper/createListFromArray';\n\nvar ParallelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ParallelSeriesModel, _super);\n\n  function ParallelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  ParallelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: bind(makeDefaultEncode, null, this)\n    });\n  };\n  /**\n   * User can get data raw indices on 'axisAreaSelected' event received.\n   *\n   * @return Raw indices\n   */\n\n\n  ParallelSeriesModel.prototype.getRawIndicesByActiveState = function (activeState) {\n    var coordSys = this.coordinateSystem;\n    var data = this.getData();\n    var indices = [];\n    coordSys.eachActiveState(data, function (theActiveState, dataIndex) {\n      if (activeState === theActiveState) {\n        indices.push(data.getRawIndex(dataIndex));\n      }\n    });\n    return indices;\n  };\n\n  ParallelSeriesModel.type = 'series.parallel';\n  ParallelSeriesModel.dependencies = ['parallel'];\n  ParallelSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'parallel',\n    parallelIndex: 0,\n    label: {\n      show: false\n    },\n    inactiveOpacity: 0.05,\n    activeOpacity: 1,\n    lineStyle: {\n      width: 1,\n      opacity: 0.45,\n      type: 'solid'\n    },\n    emphasis: {\n      label: {\n        show: false\n      }\n    },\n    progressive: 500,\n    smooth: false,\n    animationEasing: 'linear'\n  };\n  return ParallelSeriesModel;\n}(SeriesModel);\n\nfunction makeDefaultEncode(seriesModel) {\n  // The mapping of parallelAxis dimension to data dimension can\n  // be specified in parallelAxis.option.dim. For example, if\n  // parallelAxis.option.dim is 'dim3', it mapping to the third\n  // dimension of data. But `data.encode` has higher priority.\n  // Moreover, parallelModel.dimension should not be regarded as data\n  // dimensions. Consider dimensions = ['dim4', 'dim2', 'dim6'];\n  var parallelModel = seriesModel.ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n\n  if (!parallelModel) {\n    return;\n  }\n\n  var encodeDefine = {};\n  each(parallelModel.dimensions, function (axisDim) {\n    var dataDimIndex = convertDimNameToNumber(axisDim);\n    encodeDefine[axisDim] = dataDimIndex;\n  });\n  return encodeDefine;\n}\n\nfunction convertDimNameToNumber(dimName) {\n  return +dimName.replace('dim', '');\n}\n\nexport default ParallelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar opacityAccessPath = ['lineStyle', 'opacity'];\nvar parallelVisual = {\n  seriesType: 'parallel',\n  reset: function (seriesModel, ecModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var opacityMap = {\n      normal: seriesModel.get(['lineStyle', 'opacity']),\n      active: seriesModel.get('activeOpacity'),\n      inactive: seriesModel.get('inactiveOpacity')\n    };\n    return {\n      progress: function (params, data) {\n        coordSys.eachActiveState(data, function (activeState, dataIndex) {\n          var opacity = opacityMap[activeState];\n\n          if (activeState === 'normal' && data.hasItemOption) {\n            var itemOpacity = data.getItemModel(dataIndex).get(opacityAccessPath, true);\n            itemOpacity != null && (opacity = itemOpacity);\n          }\n\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          existsStyle.opacity = opacity;\n        }, params.start, params.end);\n      }\n    };\n  }\n};\nexport default parallelVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nexport default function parallelPreprocessor(option) {\n  createParallelIfNeeded(option);\n  mergeAxisOptionFromParallel(option);\n}\n/**\n * Create a parallel coordinate if not exists.\n * @inner\n */\n\nfunction createParallelIfNeeded(option) {\n  if (option.parallel) {\n    return;\n  }\n\n  var hasParallelSeries = false;\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'parallel') {\n      hasParallelSeries = true;\n    }\n  });\n\n  if (hasParallelSeries) {\n    option.parallel = [{}];\n  }\n}\n/**\n * Merge aixs definition from parallel option (if exists) to axis option.\n * @inner\n */\n\n\nfunction mergeAxisOptionFromParallel(option) {\n  var axes = modelUtil.normalizeToArray(option.parallelAxis);\n  zrUtil.each(axes, function (axisOption) {\n    if (!zrUtil.isObject(axisOption)) {\n      return;\n    }\n\n    var parallelIndex = axisOption.parallelIndex || 0;\n    var parallelOption = modelUtil.normalizeToArray(option.parallel)[parallelIndex];\n\n    if (parallelOption && parallelOption.parallelAxisDefault) {\n      zrUtil.merge(axisOption, parallelOption.parallelAxisDefault, false);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport { each, bind, extend } from 'zrender/lib/core/util';\nimport { createOrUpdate } from '../../util/throttle';\nvar CLICK_THRESHOLD = 5; // > 4\n\nvar ParallelView =\n/** @class */\nfunction (_super) {\n  __extends(ParallelView, _super);\n\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelView.type;\n    return _this;\n  }\n\n  ParallelView.prototype.render = function (parallelModel, ecModel, api) {\n    this._model = parallelModel;\n    this._api = api;\n\n    if (!this._handlers) {\n      this._handlers = {};\n      each(handlers, function (handler, eventName) {\n        api.getZr().on(eventName, this._handlers[eventName] = bind(handler, this));\n      }, this);\n    }\n\n    createOrUpdate(this, '_throttledDispatchExpand', parallelModel.get('axisExpandRate'), 'fixRate');\n  };\n\n  ParallelView.prototype.dispose = function (ecModel, api) {\n    each(this._handlers, function (handler, eventName) {\n      api.getZr().off(eventName, handler);\n    });\n    this._handlers = null;\n  };\n  /**\n   * @internal\n   * @param {Object} [opt] If null, cancle the last action triggering for debounce.\n   */\n\n\n  ParallelView.prototype._throttledDispatchExpand = function (opt) {\n    this._dispatchExpand(opt);\n  };\n  /**\n   * @internal\n   */\n\n\n  ParallelView.prototype._dispatchExpand = function (opt) {\n    opt && this._api.dispatchAction(extend({\n      type: 'parallelAxisExpand'\n    }, opt));\n  };\n\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ComponentView);\n\nvar handlers = {\n  mousedown: function (e) {\n    if (checkTrigger(this, 'click')) {\n      this._mouseDownPoint = [e.offsetX, e.offsetY];\n    }\n  },\n  mouseup: function (e) {\n    var mouseDownPoint = this._mouseDownPoint;\n\n    if (checkTrigger(this, 'click') && mouseDownPoint) {\n      var point = [e.offsetX, e.offsetY];\n      var dist = Math.pow(mouseDownPoint[0] - point[0], 2) + Math.pow(mouseDownPoint[1] - point[1], 2);\n\n      if (dist > CLICK_THRESHOLD) {\n        return;\n      }\n\n      var result = this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n\n      result.behavior !== 'none' && this._dispatchExpand({\n        axisExpandWindow: result.axisExpandWindow\n      });\n    }\n\n    this._mouseDownPoint = null;\n  },\n  mousemove: function (e) {\n    // Should do nothing when brushing.\n    if (this._mouseDownPoint || !checkTrigger(this, 'mousemove')) {\n      return;\n    }\n\n    var model = this._model;\n    var result = model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n    var behavior = result.behavior;\n    behavior === 'jump' && this._throttledDispatchExpand.debounceNextCall(model.get('axisExpandDebounce'));\n\n    this._throttledDispatchExpand(behavior === 'none' ? null // Cancle the last trigger, in case that mouse slide out of the area quickly.\n    : {\n      axisExpandWindow: result.axisExpandWindow,\n      // Jumping uses animation, and sliding suppresses animation.\n      animation: behavior === 'jump' ? null : {\n        duration: 0 // Disable animation.\n\n      }\n    });\n  }\n};\n\nfunction checkTrigger(view, triggerOn) {\n  var model = view._model;\n  return model.get('axisExpandable') && model.get('axisExpandTriggerOn') === triggerOn;\n}\n\nexport default ParallelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\n\nvar ParallelModel =\n/** @class */\nfunction (_super) {\n  __extends(ParallelModel, _super);\n\n  function ParallelModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelModel.type;\n    return _this;\n  }\n\n  ParallelModel.prototype.init = function () {\n    _super.prototype.init.apply(this, arguments);\n\n    this.mergeOption({});\n  };\n\n  ParallelModel.prototype.mergeOption = function (newOption) {\n    var thisOption = this.option;\n    newOption && zrUtil.merge(thisOption, newOption, true);\n\n    this._initDimensions();\n  };\n  /**\n   * Whether series or axis is in this coordinate system.\n   */\n\n\n  ParallelModel.prototype.contains = function (model, ecModel) {\n    var parallelIndex = model.get('parallelIndex');\n    return parallelIndex != null && ecModel.getComponent('parallel', parallelIndex) === this;\n  };\n\n  ParallelModel.prototype.setAxisExpand = function (opt) {\n    zrUtil.each(['axisExpandable', 'axisExpandCenter', 'axisExpandCount', 'axisExpandWidth', 'axisExpandWindow'], function (name) {\n      if (opt.hasOwnProperty(name)) {\n        // @ts-ignore FIXME: why \"never\" inferred in this.option[name]?\n        this.option[name] = opt[name];\n      }\n    }, this);\n  };\n\n  ParallelModel.prototype._initDimensions = function () {\n    var dimensions = this.dimensions = [];\n    var parallelAxisIndex = this.parallelAxisIndex = [];\n    var axisModels = zrUtil.filter(this.ecModel.queryComponents({\n      mainType: 'parallelAxis'\n    }), function (axisModel) {\n      // Can not use this.contains here, because\n      // initialization has not been completed yet.\n      return (axisModel.get('parallelIndex') || 0) === this.componentIndex;\n    }, this);\n    zrUtil.each(axisModels, function (axisModel) {\n      dimensions.push('dim' + axisModel.get('dim'));\n      parallelAxisIndex.push(axisModel.componentIndex);\n    });\n  };\n\n  ParallelModel.type = 'parallel';\n  ParallelModel.dependencies = ['parallelAxis'];\n  ParallelModel.layoutMode = 'box';\n  ParallelModel.defaultOption = {\n    zlevel: 0,\n    z: 0,\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    layout: 'horizontal',\n    // FIXME\n    // naming?\n    axisExpandable: false,\n    axisExpandCenter: null,\n    axisExpandCount: 0,\n    axisExpandWidth: 50,\n    axisExpandRate: 17,\n    axisExpandDebounce: 50,\n    // [out, in, jumpTarget]. In percentage. If use [null, 0.05], null means full.\n    // Do not doc to user until necessary.\n    axisExpandSlideTriggerArea: [-0.15, 0.05, 0.4],\n    axisExpandTriggerOn: 'click',\n    parallelAxisDefault: null\n  };\n  return ParallelModel;\n}(ComponentModel);\n\nexport default ParallelModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar ParallelAxis =\n/** @class */\nfunction (_super) {\n  __extends(ParallelAxis, _super);\n\n  function ParallelAxis(dim, scale, coordExtent, axisType, axisIndex) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    _this.axisIndex = axisIndex;\n    return _this;\n  }\n\n  ParallelAxis.prototype.isHorizontal = function () {\n    return this.coordinateSystem.getModel().get('layout') !== 'horizontal';\n  };\n\n  return ParallelAxis;\n}(Axis);\n\nexport default ParallelAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Parallel Coordinates\n * <https://en.wikipedia.org/wiki/Parallel_coordinates>\n */\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as layoutUtil from '../../util/layout';\nimport * as axisHelper from '../../coord/axisHelper';\nimport ParallelAxis from './ParallelAxis';\nimport * as graphic from '../../util/graphic';\nimport * as numberUtil from '../../util/number';\nimport sliderMove from '../../component/helper/sliderMove';\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar round = numberUtil.round;\nvar PI = Math.PI;\n\nvar Parallel =\n/** @class */\nfunction () {\n  function Parallel(parallelModel, ecModel, api) {\n    this.type = 'parallel';\n    /**\n     * key: dimension\n     */\n\n    this._axesMap = zrUtil.createHashMap();\n    /**\n     * key: dimension\n     * value: {position: [], rotation, }\n     */\n\n    this._axesLayout = {};\n    this.dimensions = parallelModel.dimensions;\n    this._model = parallelModel;\n\n    this._init(parallelModel, ecModel, api);\n  }\n\n  Parallel.prototype._init = function (parallelModel, ecModel, api) {\n    var dimensions = parallelModel.dimensions;\n    var parallelAxisIndex = parallelModel.parallelAxisIndex;\n    each(dimensions, function (dim, idx) {\n      var axisIndex = parallelAxisIndex[idx];\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n\n      var axis = this._axesMap.set(dim, new ParallelAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisIndex));\n\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Injection\n\n      axisModel.axis = axis;\n      axis.model = axisModel;\n      axis.coordinateSystem = axisModel.coordinateSystem = this;\n    }, this);\n  };\n  /**\n   * Update axis scale after data processed\n   */\n\n\n  Parallel.prototype.update = function (ecModel, api) {\n    this._updateAxesFromSeries(this._model, ecModel);\n  };\n\n  Parallel.prototype.containPoint = function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n\n    var axisBase = layoutInfo.axisBase;\n    var layoutBase = layoutInfo.layoutBase;\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var pAxis = point[1 - pixelDimIndex];\n    var pLayout = point[pixelDimIndex];\n    return pAxis >= axisBase && pAxis <= axisBase + layoutInfo.axisLength && pLayout >= layoutBase && pLayout <= layoutBase + layoutInfo.layoutLength;\n  };\n\n  Parallel.prototype.getModel = function () {\n    return this._model;\n  };\n  /**\n   * Update properties from series\n   */\n\n\n  Parallel.prototype._updateAxesFromSeries = function (parallelModel, ecModel) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (!parallelModel.contains(seriesModel, ecModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      each(this.dimensions, function (dim) {\n        var axis = this._axesMap.get(dim);\n\n        axis.scale.unionExtentFromData(data, data.mapDimension(dim));\n        axisHelper.niceScaleExtent(axis.scale, axis.model);\n      }, this);\n    }, this);\n  };\n  /**\n   * Resize the parallel coordinate system.\n   */\n\n\n  Parallel.prototype.resize = function (parallelModel, api) {\n    this._rect = layoutUtil.getLayoutRect(parallelModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n\n    this._layoutAxes();\n  };\n\n  Parallel.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Parallel.prototype._makeLayoutInfo = function () {\n    var parallelModel = this._model;\n    var rect = this._rect;\n    var xy = ['x', 'y'];\n    var wh = ['width', 'height'];\n    var layout = parallelModel.get('layout');\n    var pixelDimIndex = layout === 'horizontal' ? 0 : 1;\n    var layoutLength = rect[wh[pixelDimIndex]];\n    var layoutExtent = [0, layoutLength];\n    var axisCount = this.dimensions.length;\n    var axisExpandWidth = restrict(parallelModel.get('axisExpandWidth'), layoutExtent);\n    var axisExpandCount = restrict(parallelModel.get('axisExpandCount') || 0, [0, axisCount]);\n    var axisExpandable = parallelModel.get('axisExpandable') && axisCount > 3 && axisCount > axisExpandCount && axisExpandCount > 1 && axisExpandWidth > 0 && layoutLength > 0; // `axisExpandWindow` is According to the coordinates of [0, axisExpandLength],\n    // for sake of consider the case that axisCollapseWidth is 0 (when screen is narrow),\n    // where collapsed axes should be overlapped.\n\n    var axisExpandWindow = parallelModel.get('axisExpandWindow');\n    var winSize;\n\n    if (!axisExpandWindow) {\n      winSize = restrict(axisExpandWidth * (axisExpandCount - 1), layoutExtent);\n      var axisExpandCenter = parallelModel.get('axisExpandCenter') || mathFloor(axisCount / 2);\n      axisExpandWindow = [axisExpandWidth * axisExpandCenter - winSize / 2];\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    } else {\n      winSize = restrict(axisExpandWindow[1] - axisExpandWindow[0], layoutExtent);\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    }\n\n    var axisCollapseWidth = (layoutLength - winSize) / (axisCount - axisExpandCount); // Avoid axisCollapseWidth is too small.\n\n    axisCollapseWidth < 3 && (axisCollapseWidth = 0); // Find the first and last indices > ewin[0] and < ewin[1].\n\n    var winInnerIndices = [mathFloor(round(axisExpandWindow[0] / axisExpandWidth, 1)) + 1, mathCeil(round(axisExpandWindow[1] / axisExpandWidth, 1)) - 1]; // Pos in ec coordinates.\n\n    var axisExpandWindow0Pos = axisCollapseWidth / axisExpandWidth * axisExpandWindow[0];\n    return {\n      layout: layout,\n      pixelDimIndex: pixelDimIndex,\n      layoutBase: rect[xy[pixelDimIndex]],\n      layoutLength: layoutLength,\n      axisBase: rect[xy[1 - pixelDimIndex]],\n      axisLength: rect[wh[1 - pixelDimIndex]],\n      axisExpandable: axisExpandable,\n      axisExpandWidth: axisExpandWidth,\n      axisCollapseWidth: axisCollapseWidth,\n      axisExpandWindow: axisExpandWindow,\n      axisCount: axisCount,\n      winInnerIndices: winInnerIndices,\n      axisExpandWindow0Pos: axisExpandWindow0Pos\n    };\n  };\n\n  Parallel.prototype._layoutAxes = function () {\n    var rect = this._rect;\n    var axes = this._axesMap;\n    var dimensions = this.dimensions;\n\n    var layoutInfo = this._makeLayoutInfo();\n\n    var layout = layoutInfo.layout;\n    axes.each(function (axis) {\n      var axisExtent = [0, layoutInfo.axisLength];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(axisExtent[idx], axisExtent[1 - idx]);\n    });\n    each(dimensions, function (dim, idx) {\n      var posInfo = (layoutInfo.axisExpandable ? layoutAxisWithExpand : layoutAxisWithoutExpand)(idx, layoutInfo);\n      var positionTable = {\n        horizontal: {\n          x: posInfo.position,\n          y: layoutInfo.axisLength\n        },\n        vertical: {\n          x: 0,\n          y: posInfo.position\n        }\n      };\n      var rotationTable = {\n        horizontal: PI / 2,\n        vertical: 0\n      };\n      var position = [positionTable[layout].x + rect.x, positionTable[layout].y + rect.y];\n      var rotation = rotationTable[layout];\n      var transform = matrix.create();\n      matrix.rotate(transform, transform, rotation);\n      matrix.translate(transform, transform, position); // TODO\n      // tick layout info\n      // TODO\n      // update dimensions info based on axis order.\n\n      this._axesLayout[dim] = {\n        position: position,\n        rotation: rotation,\n        transform: transform,\n        axisNameAvailableWidth: posInfo.axisNameAvailableWidth,\n        axisLabelShow: posInfo.axisLabelShow,\n        nameTruncateMaxWidth: posInfo.nameTruncateMaxWidth,\n        tickDirection: 1,\n        labelDirection: 1\n      };\n    }, this);\n  };\n  /**\n   * Get axis by dim.\n   */\n\n\n  Parallel.prototype.getAxis = function (dim) {\n    return this._axesMap.get(dim);\n  };\n  /**\n   * Convert a dim value of a single item of series data to Point.\n   */\n\n\n  Parallel.prototype.dataToPoint = function (value, dim) {\n    return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value), dim);\n  };\n  /**\n   * Travel data for one time, get activeState of each data item.\n   * @param start the start dataIndex that travel from.\n   * @param end the next dataIndex of the last dataIndex will be travel.\n   */\n\n\n  Parallel.prototype.eachActiveState = function (data, callback, start, end) {\n    start == null && (start = 0);\n    end == null && (end = data.count());\n    var axesMap = this._axesMap;\n    var dimensions = this.dimensions;\n    var dataDimensions = [];\n    var axisModels = [];\n    zrUtil.each(dimensions, function (axisDim) {\n      dataDimensions.push(data.mapDimension(axisDim));\n      axisModels.push(axesMap.get(axisDim).model);\n    });\n    var hasActiveSet = this.hasAxisBrushed();\n\n    for (var dataIndex = start; dataIndex < end; dataIndex++) {\n      var activeState = void 0;\n\n      if (!hasActiveSet) {\n        activeState = 'normal';\n      } else {\n        activeState = 'active';\n        var values = data.getValues(dataDimensions, dataIndex);\n\n        for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n          var state = axisModels[j].getActiveState(values[j]);\n\n          if (state === 'inactive') {\n            activeState = 'inactive';\n            break;\n          }\n        }\n      }\n\n      callback(activeState, dataIndex);\n    }\n  };\n  /**\n   * Whether has any activeSet.\n   */\n\n\n  Parallel.prototype.hasAxisBrushed = function () {\n    var dimensions = this.dimensions;\n    var axesMap = this._axesMap;\n    var hasActiveSet = false;\n\n    for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n      if (axesMap.get(dimensions[j]).model.getActiveState() !== 'normal') {\n        hasActiveSet = true;\n      }\n    }\n\n    return hasActiveSet;\n  };\n  /**\n   * Convert coords of each axis to Point.\n   *  Return point. For example: [10, 20]\n   */\n\n\n  Parallel.prototype.axisCoordToPoint = function (coord, dim) {\n    var axisLayout = this._axesLayout[dim];\n    return graphic.applyTransform([coord, 0], axisLayout.transform);\n  };\n  /**\n   * Get axis layout.\n   */\n\n\n  Parallel.prototype.getAxisLayout = function (dim) {\n    return zrUtil.clone(this._axesLayout[dim]);\n  };\n  /**\n   * @return {Object} {axisExpandWindow, delta, behavior: 'jump' | 'slide' | 'none'}.\n   */\n\n\n  Parallel.prototype.getSlidedAxisExpandWindow = function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var axisExpandWindow = layoutInfo.axisExpandWindow.slice();\n    var winSize = axisExpandWindow[1] - axisExpandWindow[0];\n    var extent = [0, layoutInfo.axisExpandWidth * (layoutInfo.axisCount - 1)]; // Out of the area of coordinate system.\n\n    if (!this.containPoint(point)) {\n      return {\n        behavior: 'none',\n        axisExpandWindow: axisExpandWindow\n      };\n    } // Conver the point from global to expand coordinates.\n\n\n    var pointCoord = point[pixelDimIndex] - layoutInfo.layoutBase - layoutInfo.axisExpandWindow0Pos; // For dragging operation convenience, the window should not be\n    // slided when mouse is the center area of the window.\n\n    var delta;\n    var behavior = 'slide';\n    var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n\n    var triggerArea = this._model.get('axisExpandSlideTriggerArea'); // But consider touch device, jump is necessary.\n\n\n    var useJump = triggerArea[0] != null;\n\n    if (axisCollapseWidth) {\n      if (useJump && axisCollapseWidth && pointCoord < winSize * triggerArea[0]) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * triggerArea[2];\n      } else if (useJump && axisCollapseWidth && pointCoord > winSize * (1 - triggerArea[0])) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * (1 - triggerArea[2]);\n      } else {\n        (delta = pointCoord - winSize * triggerArea[1]) >= 0 && (delta = pointCoord - winSize * (1 - triggerArea[1])) <= 0 && (delta = 0);\n      }\n\n      delta *= layoutInfo.axisExpandWidth / axisCollapseWidth;\n      delta ? sliderMove(delta, axisExpandWindow, extent, 'all') // Avoid nonsense triger on mousemove.\n      : behavior = 'none';\n    } // When screen is too narrow, make it visible and slidable, although it is hard to interact.\n    else {\n        var winSize2 = axisExpandWindow[1] - axisExpandWindow[0];\n        var pos = extent[1] * pointCoord / winSize2;\n        axisExpandWindow = [mathMax(0, pos - winSize2 / 2)];\n        axisExpandWindow[1] = mathMin(extent[1], axisExpandWindow[0] + winSize2);\n        axisExpandWindow[0] = axisExpandWindow[1] - winSize2;\n      }\n\n    return {\n      axisExpandWindow: axisExpandWindow,\n      behavior: behavior\n    };\n  };\n\n  return Parallel;\n}();\n\nfunction restrict(len, extent) {\n  return mathMin(mathMax(len, extent[0]), extent[1]);\n}\n\nfunction layoutAxisWithoutExpand(axisIndex, layoutInfo) {\n  var step = layoutInfo.layoutLength / (layoutInfo.axisCount - 1);\n  return {\n    position: step * axisIndex,\n    axisNameAvailableWidth: step,\n    axisLabelShow: true\n  };\n}\n\nfunction layoutAxisWithExpand(axisIndex, layoutInfo) {\n  var layoutLength = layoutInfo.layoutLength;\n  var axisExpandWidth = layoutInfo.axisExpandWidth;\n  var axisCount = layoutInfo.axisCount;\n  var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n  var winInnerIndices = layoutInfo.winInnerIndices;\n  var position;\n  var axisNameAvailableWidth = axisCollapseWidth;\n  var axisLabelShow = false;\n  var nameTruncateMaxWidth;\n\n  if (axisIndex < winInnerIndices[0]) {\n    position = axisIndex * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  } else if (axisIndex <= winInnerIndices[1]) {\n    position = layoutInfo.axisExpandWindow0Pos + axisIndex * axisExpandWidth - layoutInfo.axisExpandWindow[0];\n    axisNameAvailableWidth = axisExpandWidth;\n    axisLabelShow = true;\n  } else {\n    position = layoutLength - (axisCount - 1 - axisIndex) * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  }\n\n  return {\n    position: position,\n    axisNameAvailableWidth: axisNameAvailableWidth,\n    axisLabelShow: axisLabelShow,\n    nameTruncateMaxWidth: nameTruncateMaxWidth\n  };\n}\n\nexport default Parallel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Parallel coordinate system creater.\n */\nimport Parallel from './Parallel';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nfunction createParallelCoordSys(ecModel, api) {\n  var coordSysList = [];\n  ecModel.eachComponent('parallel', function (parallelModel, idx) {\n    var coordSys = new Parallel(parallelModel, ecModel, api);\n    coordSys.name = 'parallel_' + idx;\n    coordSys.resize(parallelModel, api);\n    parallelModel.coordinateSystem = coordSys;\n    coordSys.model = parallelModel;\n    coordSysList.push(coordSys);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'parallel') {\n      var parallelModel = seriesModel.getReferringComponents('parallel', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = parallelModel.coordinateSystem;\n    }\n  });\n  return coordSysList;\n}\n\nvar parallelCoordSysCreator = {\n  create: createParallelCoordSys\n};\nexport default parallelCoordSysCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper';\nimport * as numberUtil from '../../util/number';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\n\nvar ParallelAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(ParallelAxisModel, _super);\n\n  function ParallelAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelAxisModel.type;\n    /**\n     * @readOnly\n     */\n\n    _this.activeIntervals = [];\n    return _this;\n  }\n\n  ParallelAxisModel.prototype.getAreaSelectStyle = function () {\n    return makeStyleMapper([['fill', 'color'], ['lineWidth', 'borderWidth'], ['stroke', 'borderColor'], ['width', 'width'], ['opacity', 'opacity'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n    // So do not transfer decal directly.\n    ])(this.getModel('areaSelectStyle'));\n  };\n  /**\n   * The code of this feature is put on AxisModel but not ParallelAxis,\n   * because axisModel can be alive after echarts updating but instance of\n   * ParallelAxis having been disposed. this._activeInterval should be kept\n   * when action dispatched (i.e. legend click).\n   *\n   * @param intervals `interval.length === 0` means set all active.\n   */\n\n\n  ParallelAxisModel.prototype.setActiveIntervals = function (intervals) {\n    var activeIntervals = this.activeIntervals = zrUtil.clone(intervals); // Normalize\n\n    if (activeIntervals) {\n      for (var i = activeIntervals.length - 1; i >= 0; i--) {\n        numberUtil.asc(activeIntervals[i]);\n      }\n    }\n  };\n  /**\n   * @param value When only attempting detect whether 'no activeIntervals set',\n   *        `value` is not needed to be input.\n   */\n\n\n  ParallelAxisModel.prototype.getActiveState = function (value) {\n    var activeIntervals = this.activeIntervals;\n\n    if (!activeIntervals.length) {\n      return 'normal';\n    }\n\n    if (value == null || isNaN(+value)) {\n      return 'inactive';\n    } // Simple optimization\n\n\n    if (activeIntervals.length === 1) {\n      var interval = activeIntervals[0];\n\n      if (interval[0] <= value && value <= interval[1]) {\n        return 'active';\n      }\n    } else {\n      for (var i = 0, len = activeIntervals.length; i < len; i++) {\n        if (activeIntervals[i][0] <= value && value <= activeIntervals[i][1]) {\n          return 'active';\n        }\n      }\n    }\n\n    return 'inactive';\n  };\n\n  return ParallelAxisModel;\n}(ComponentModel);\n\nzrUtil.mixin(ParallelAxisModel, AxisModelCommonMixin);\nexport default ParallelAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport AxisBuilder from './AxisBuilder';\nimport BrushController from '../helper/BrushController';\nimport * as brushHelper from '../helper/brushHelper';\nimport * as graphic from '../../util/graphic';\nimport ComponentView from '../../view/Component';\nvar elementList = ['axisLine', 'axisTickLabel', 'axisName'];\n\nvar ParallelAxisView =\n/** @class */\nfunction (_super) {\n  __extends(ParallelAxisView, _super);\n\n  function ParallelAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelAxisView.type;\n    return _this;\n  }\n\n  ParallelAxisView.prototype.init = function (ecModel, api) {\n    _super.prototype.init.apply(this, arguments);\n\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this));\n  };\n\n  ParallelAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    if (fromAxisAreaSelect(axisModel, ecModel, payload)) {\n      return;\n    }\n\n    this.axisModel = axisModel;\n    this.api = api;\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var coordSysModel = getCoordSysModel(axisModel, ecModel);\n    var coordSys = coordSysModel.coordinateSystem;\n    var areaSelectStyle = axisModel.getAreaSelectStyle();\n    var areaWidth = areaSelectStyle.width;\n    var dim = axisModel.axis.dim;\n    var axisLayout = coordSys.getAxisLayout(dim);\n    var builderOpt = zrUtil.extend({\n      strokeContainThreshold: areaWidth\n    }, axisLayout);\n    var axisBuilder = new AxisBuilder(axisModel, builderOpt);\n    zrUtil.each(elementList, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    this._refreshBrushController(builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api);\n\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n  }; // /**\n  //  * @override\n  //  */\n  // updateVisual(axisModel, ecModel, api, payload) {\n  //     this._brushController && this._brushController\n  //         .updateCovers(getCoverInfoList(axisModel));\n  // }\n\n\n  ParallelAxisView.prototype._refreshBrushController = function (builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api) {\n    // After filtering, axis may change, select area needs to be update.\n    var extent = axisModel.axis.getExtent();\n    var extentLen = extent[1] - extent[0];\n    var extra = Math.min(30, Math.abs(extentLen) * 0.1); // Arbitrary value.\n    // width/height might be negative, which will be\n    // normalized in BoundingRect.\n\n    var rect = graphic.BoundingRect.create({\n      x: extent[0],\n      y: -areaWidth / 2,\n      width: extentLen,\n      height: areaWidth\n    });\n    rect.x -= extra;\n    rect.width += 2 * extra;\n\n    this._brushController.mount({\n      enableGlobalPan: true,\n      rotation: builderOpt.rotation,\n      x: builderOpt.position[0],\n      y: builderOpt.position[1]\n    }).setPanels([{\n      panelId: 'pl',\n      clipPath: brushHelper.makeRectPanelClipPath(rect),\n      isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, coordSysModel),\n      getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect, 0)\n    }]).enableBrush({\n      brushType: 'lineX',\n      brushStyle: areaSelectStyle,\n      removeOnClick: true\n    }).updateCovers(getCoverInfoList(axisModel));\n  };\n\n  ParallelAxisView.prototype._onBrush = function (eventParam) {\n    var coverInfoList = eventParam.areas; // Do not cache these object, because the mey be changed.\n\n    var axisModel = this.axisModel;\n    var axis = axisModel.axis;\n    var intervals = zrUtil.map(coverInfoList, function (coverInfo) {\n      return [axis.coordToData(coverInfo.range[0], true), axis.coordToData(coverInfo.range[1], true)];\n    }); // If realtime is true, action is not dispatched on drag end, because\n    // the drag end emits the same params with the last drag move event,\n    // and may have some delay when using touch pad.\n\n    if (!axisModel.option.realtime === eventParam.isEnd || eventParam.removeOnClick) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'axisAreaSelect',\n        parallelAxisId: axisModel.id,\n        intervals: intervals\n      });\n    }\n  };\n\n  ParallelAxisView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n\n  ParallelAxisView.type = 'parallelAxis';\n  return ParallelAxisView;\n}(ComponentView);\n\nfunction fromAxisAreaSelect(axisModel, ecModel, payload) {\n  return payload && payload.type === 'axisAreaSelect' && ecModel.findComponents({\n    mainType: 'parallelAxis',\n    query: payload\n  })[0] === axisModel;\n}\n\nfunction getCoverInfoList(axisModel) {\n  var axis = axisModel.axis;\n  return zrUtil.map(axisModel.activeIntervals, function (interval) {\n    return {\n      brushType: 'lineX',\n      panelId: 'pl',\n      range: [axis.dataToCoord(interval[0], true), axis.dataToCoord(interval[1], true)]\n    };\n  });\n}\n\nfunction getCoordSysModel(axisModel, ecModel) {\n  return ecModel.getComponent('parallel', axisModel.get('parallelIndex'));\n}\n\nexport default ParallelAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar actionInfo = {\n  type: 'axisAreaSelect',\n  event: 'axisAreaSelected' // update: 'updateVisual'\n\n};\nexport function installParallelActions(registers) {\n  registers.registerAction(actionInfo, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'parallelAxis',\n      query: payload\n    }, function (parallelAxisModel) {\n      parallelAxisModel.axis.model.setActiveIntervals(payload.intervals);\n    });\n  });\n  /**\n   * @payload\n   */\n\n  registers.registerAction('parallelAxisExpand', function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'parallel',\n      query: payload\n    }, function (parallelModel) {\n      parallelModel.setAxisExpand(payload);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport parallelPreprocessor from '../../coord/parallel/parallelPreprocessor';\nimport ParallelView from './ParallelView';\nimport ParallelModel from '../../coord/parallel/ParallelModel';\nimport parallelCoordSysCreator from '../../coord/parallel/parallelCreator';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport ParallelAxisModel from '../../coord/parallel/AxisModel';\nimport ParallelAxisView from '../axis/ParallelAxisView';\nimport { installParallelActions } from '../axis/parallelAxisAction';\nvar defaultAxisOption = {\n  type: 'value',\n  areaSelectStyle: {\n    width: 20,\n    borderWidth: 1,\n    borderColor: 'rgba(160,197,232)',\n    color: 'rgba(160,197,232)',\n    opacity: 0.3\n  },\n  realtime: true,\n  z: 10\n};\nexport function install(registers) {\n  registers.registerComponentView(ParallelView);\n  registers.registerComponentModel(ParallelModel);\n  registers.registerCoordinateSystem('parallel', parallelCoordSysCreator);\n  registers.registerPreprocessor(parallelPreprocessor);\n  registers.registerComponentModel(ParallelAxisModel);\n  registers.registerComponentView(ParallelAxisView);\n  axisModelCreator(registers, 'parallel', ParallelAxisModel, defaultAxisOption);\n  installParallelActions(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport ParallelView from './ParallelView';\nimport ParallelSeriesModel from './ParallelSeries';\nimport parallelVisual from './parallelVisual';\nimport { install as installParallelComponent } from '../../component/parallel/install';\nexport function install(registers) {\n  use(installParallelComponent);\n  registers.registerChartView(ParallelView);\n  registers.registerSeriesModel(ParallelSeriesModel);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, parallelVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis, enableHoverEmphasis, setStatesStylesFromModel } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\n\nvar SankeyPathShape =\n/** @class */\nfunction () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n\n  return SankeyPathShape;\n}();\n\nvar SankeyPath =\n/** @class */\nfunction (_super) {\n  __extends(SankeyPath, _super);\n\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  };\n\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  return SankeyPath;\n}(graphic.Path);\n\nvar SankeyView =\n/** @class */\nfunction (_super) {\n  __extends(SankeyView, _super);\n\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y; // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          curve.style.decal = edge.node1.getVisual('style').decal;\n          break;\n\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          curve.style.decal = edge.node2.getVisual('style').decal;\n          break;\n\n        case 'gradient':\n          var sourceColor = edge.node1.getVisual('color');\n          var targetColor = edge.node2.getVisual('color');\n\n          if (typeof sourceColor === 'string' && typeof targetColor === 'string') {\n            curve.style.fill = new graphic.LinearGradient(0, 0, 1, 0, [{\n              color: sourceColor,\n              offset: 0\n            }, {\n              color: targetColor,\n              offset: 1\n            }]);\n          }\n\n      }\n\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        return model.getItemStyle();\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      enableHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'));\n      getECData(curve).dataType = 'edge';\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      enableHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  };\n\n  SankeyView.prototype.dispose = function () {};\n\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView); // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default SankeyView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge';\nimport Model from '../../model/Model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\n\nvar SankeySeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SankeySeriesModel, _super);\n\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\n   * Init a graph data structure from data in option series\n   *\n   * @param  {Object} option  the object used to config echarts view\n   * @return {module:echarts/data/List} storage initial data\n   */\n\n\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n    var levels = option.levels;\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var dataItem = this.option.data[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\n   * Return the graphic data structure\n   *\n   * @return graphic data structure\n   */\n\n\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\n   * Get edge data of graphic data structure\n   *\n   * @return data structure of list\n   */\n\n\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    } // dataType === 'node' or empty do not show tooltip by default\n\n\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    } // dataType === 'node'\n    else {\n        var node = this.getGraph().getNodeByIndex(dataIndex);\n        var value = node.getLayout().value;\n        var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n        return createTooltipMarkup('nameValue', {\n          name: name_1 != null ? name_1 + '' : null,\n          value: value,\n          noValue: noValue(value)\n        });\n      }\n  };\n\n  SankeySeriesModel.prototype.optionUpdated = function () {\n    var option = this.option;\n  }; // Override Series.getDataParams()\n\n\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n\n    return params;\n  };\n\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\n\nexport default SankeySeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { groupData } from '../../util/model';\nexport default function sankeyLayout(ecModel, api) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var nodeWidth = seriesModel.get('nodeWidth');\n    var nodeGap = seriesModel.get('nodeGap');\n    var layoutInfo = getViewRect(seriesModel, api);\n    seriesModel.layoutInfo = layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    computeNodeValues(nodes);\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\n      return node.getLayout().value === 0;\n    });\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\n    var orient = seriesModel.get('orient');\n    var nodeAlign = seriesModel.get('nodeAlign');\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign);\n  });\n}\n/**\n * Get the layout position of the whole view\n */\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign) {\n  computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign);\n  computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient);\n  computeEdgeDepths(nodes, orient);\n}\n/**\n * Compute the value of each node by summing the associated edge's value\n */\n\n\nfunction computeNodeValues(nodes) {\n  zrUtil.each(nodes, function (node) {\n    var value1 = sum(node.outEdges, getEdgeValue);\n    var value2 = sum(node.inEdges, getEdgeValue);\n    var nodeRawValue = node.getValue() || 0;\n    var value = Math.max(value1, value2, nodeRawValue);\n    node.setLayout({\n      value: value\n    }, true);\n  });\n}\n/**\n * Compute the x-position for each node.\n *\n * Here we use Kahn algorithm to detect cycle when we traverse\n * the node to computer the initial x position.\n */\n\n\nfunction computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign) {\n  // Used to mark whether the edge is deleted. if it is deleted,\n  // the value is 0, otherwise it is 1.\n  var remainEdges = []; // Storage each node's indegree.\n\n  var indegreeArr = []; //Used to storage the node with indegree is equal to 0.\n\n  var zeroIndegrees = [];\n  var nextTargetNode = [];\n  var x = 0; // let kx = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    remainEdges[i] = 1;\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    indegreeArr[i] = nodes[i].inEdges.length;\n\n    if (indegreeArr[i] === 0) {\n      zeroIndegrees.push(nodes[i]);\n    }\n  }\n\n  var maxNodeDepth = -1; // Traversing nodes using topological sorting to calculate the\n  // horizontal(if orient === 'horizontal') or vertical(if orient === 'vertical')\n  // position of the nodes.\n\n  while (zeroIndegrees.length) {\n    for (var idx = 0; idx < zeroIndegrees.length; idx++) {\n      var node = zeroIndegrees[idx];\n      var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n      var isItemDepth = item.depth != null && item.depth >= 0;\n\n      if (isItemDepth && item.depth > maxNodeDepth) {\n        maxNodeDepth = item.depth;\n      }\n\n      node.setLayout({\n        depth: isItemDepth ? item.depth : x\n      }, true);\n      orient === 'vertical' ? node.setLayout({\n        dy: nodeWidth\n      }, true) : node.setLayout({\n        dx: nodeWidth\n      }, true);\n\n      for (var edgeIdx = 0; edgeIdx < node.outEdges.length; edgeIdx++) {\n        var edge = node.outEdges[edgeIdx];\n        var indexEdge = edges.indexOf(edge);\n        remainEdges[indexEdge] = 0;\n        var targetNode = edge.node2;\n        var nodeIndex = nodes.indexOf(targetNode);\n\n        if (--indegreeArr[nodeIndex] === 0 && nextTargetNode.indexOf(targetNode) < 0) {\n          nextTargetNode.push(targetNode);\n        }\n      }\n    }\n\n    ++x;\n    zeroIndegrees = nextTargetNode;\n    nextTargetNode = [];\n  }\n\n  for (var i = 0; i < remainEdges.length; i++) {\n    if (remainEdges[i] === 1) {\n      throw new Error('Sankey is a DAG, the original data has cycle!');\n    }\n  }\n\n  var maxDepth = maxNodeDepth > x - 1 ? maxNodeDepth : x - 1;\n\n  if (nodeAlign && nodeAlign !== 'left') {\n    adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth);\n  }\n\n  var kx = orient === 'vertical' ? (height - nodeWidth) / maxDepth : (width - nodeWidth) / maxDepth;\n  scaleNodeBreadths(nodes, kx, orient);\n}\n\nfunction isNodeDepth(node) {\n  var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n  return item.depth != null && item.depth >= 0;\n}\n\nfunction adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth) {\n  if (nodeAlign === 'right') {\n    var nextSourceNode = [];\n    var remainNodes = nodes;\n    var nodeHeight = 0;\n\n    while (remainNodes.length) {\n      for (var i = 0; i < remainNodes.length; i++) {\n        var node = remainNodes[i];\n        node.setLayout({\n          skNodeHeight: nodeHeight\n        }, true);\n\n        for (var j = 0; j < node.inEdges.length; j++) {\n          var edge = node.inEdges[j];\n\n          if (nextSourceNode.indexOf(edge.node1) < 0) {\n            nextSourceNode.push(edge.node1);\n          }\n        }\n      }\n\n      remainNodes = nextSourceNode;\n      nextSourceNode = [];\n      ++nodeHeight;\n    }\n\n    zrUtil.each(nodes, function (node) {\n      if (!isNodeDepth(node)) {\n        node.setLayout({\n          depth: Math.max(0, maxDepth - node.getLayout().skNodeHeight)\n        }, true);\n      }\n    });\n  } else if (nodeAlign === 'justify') {\n    moveSinksRight(nodes, maxDepth);\n  }\n}\n/**\n * All the node without outEgdes are assigned maximum x-position and\n *     be aligned in the last column.\n *\n * @param nodes.  node of sankey view.\n * @param maxDepth.  use to assign to node without outEdges as x-position.\n */\n\n\nfunction moveSinksRight(nodes, maxDepth) {\n  zrUtil.each(nodes, function (node) {\n    if (!isNodeDepth(node) && !node.outEdges.length) {\n      node.setLayout({\n        depth: maxDepth\n      }, true);\n    }\n  });\n}\n/**\n * Scale node x-position to the width\n *\n * @param nodes  node of sankey view\n * @param kx   multiple used to scale nodes\n */\n\n\nfunction scaleNodeBreadths(nodes, kx, orient) {\n  zrUtil.each(nodes, function (node) {\n    var nodeDepth = node.getLayout().depth * kx;\n    orient === 'vertical' ? node.setLayout({\n      y: nodeDepth\n    }, true) : node.setLayout({\n      x: nodeDepth\n    }, true);\n  });\n}\n/**\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\n *\n * @param nodes  node of sankey view\n * @param edges  edge of sankey view\n * @param height  the whole height of the area to draw the view\n * @param nodeGap  the vertical distance between two nodes\n *     in the same column.\n * @param iterations  the number of iterations for the algorithm\n */\n\n\nfunction computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient) {\n  var nodesByBreadth = prepareNodesByBreadth(nodes, orient);\n  initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient);\n  resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n\n  for (var alpha = 1; iterations > 0; iterations--) {\n    // 0.99 is a experience parameter, ensure that each iterations of\n    // changes as small as possible.\n    alpha *= 0.99;\n    relaxRightToLeft(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n    relaxLeftToRight(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  }\n}\n\nfunction prepareNodesByBreadth(nodes, orient) {\n  var nodesByBreadth = [];\n  var keyAttr = orient === 'vertical' ? 'y' : 'x';\n  var groupResult = groupData(nodes, function (node) {\n    return node.getLayout()[keyAttr];\n  });\n  groupResult.keys.sort(function (a, b) {\n    return a - b;\n  });\n  zrUtil.each(groupResult.keys, function (key) {\n    nodesByBreadth.push(groupResult.buckets.get(key));\n  });\n  return nodesByBreadth;\n}\n/**\n * Compute the original y-position for each node\n */\n\n\nfunction initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient) {\n  var minKy = Infinity;\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var n = nodes.length;\n    var sum = 0;\n    zrUtil.each(nodes, function (node) {\n      sum += node.getLayout().value;\n    });\n    var ky = orient === 'vertical' ? (width - (n - 1) * nodeGap) / sum : (height - (n - 1) * nodeGap) / sum;\n\n    if (ky < minKy) {\n      minKy = ky;\n    }\n  });\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node, i) {\n      var nodeDy = node.getLayout().value * minKy;\n\n      if (orient === 'vertical') {\n        node.setLayout({\n          x: i\n        }, true);\n        node.setLayout({\n          dx: nodeDy\n        }, true);\n      } else {\n        node.setLayout({\n          y: i\n        }, true);\n        node.setLayout({\n          dy: nodeDy\n        }, true);\n      }\n    });\n  });\n  zrUtil.each(edges, function (edge) {\n    var edgeDy = +edge.getValue() * minKy;\n    edge.setLayout({\n      dy: edgeDy\n    }, true);\n  });\n}\n/**\n * Resolve the collision of initialized depth (y-position)\n */\n\n\nfunction resolveCollisions(nodesByBreadth, nodeGap, height, width, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    nodes.sort(function (a, b) {\n      return a.getLayout()[keyAttr] - b.getLayout()[keyAttr];\n    });\n    var nodeX;\n    var node;\n    var dy;\n    var y0 = 0;\n    var n = nodes.length;\n    var nodeDyAttr = orient === 'vertical' ? 'dx' : 'dy';\n\n    for (var i = 0; i < n; i++) {\n      node = nodes[i];\n      dy = y0 - node.getLayout()[keyAttr];\n\n      if (dy > 0) {\n        nodeX = node.getLayout()[keyAttr] + dy;\n        orient === 'vertical' ? node.setLayout({\n          x: nodeX\n        }, true) : node.setLayout({\n          y: nodeX\n        }, true);\n      }\n\n      y0 = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap;\n    }\n\n    var viewWidth = orient === 'vertical' ? width : height; // If the bottommost node goes outside the bounds, push it back up\n\n    dy = y0 - nodeGap - viewWidth;\n\n    if (dy > 0) {\n      nodeX = node.getLayout()[keyAttr] - dy;\n      orient === 'vertical' ? node.setLayout({\n        x: nodeX\n      }, true) : node.setLayout({\n        y: nodeX\n      }, true);\n      y0 = nodeX;\n\n      for (var i = n - 2; i >= 0; --i) {\n        node = nodes[i];\n        dy = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap - y0;\n\n        if (dy > 0) {\n          nodeX = node.getLayout()[keyAttr] - dy;\n          orient === 'vertical' ? node.setLayout({\n            x: nodeX\n          }, true) : node.setLayout({\n            y: nodeX\n          }, true);\n        }\n\n        y0 = node.getLayout()[keyAttr];\n      }\n    }\n  });\n}\n/**\n * Change the y-position of the nodes, except most the right side nodes\n * @param nodesByBreadth\n * @param alpha  parameter used to adjust the nodes y-position\n */\n\n\nfunction relaxRightToLeft(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.outEdges.length) {\n        var y = sum(node.outEdges, weightedTarget, orient) / sum(node.outEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.outEdges.length;\n          y = len ? sum(node.outEdges, centerTarget, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n\nfunction weightedTarget(edge, orient) {\n  return center(edge.node2, orient) * edge.getValue();\n}\n\nfunction centerTarget(edge, orient) {\n  return center(edge.node2, orient);\n}\n\nfunction weightedSource(edge, orient) {\n  return center(edge.node1, orient) * edge.getValue();\n}\n\nfunction centerSource(edge, orient) {\n  return center(edge.node1, orient);\n}\n\nfunction center(node, orient) {\n  return orient === 'vertical' ? node.getLayout().x + node.getLayout().dx / 2 : node.getLayout().y + node.getLayout().dy / 2;\n}\n\nfunction getEdgeValue(edge) {\n  return edge.getValue();\n}\n\nfunction sum(array, cb, orient) {\n  var sum = 0;\n  var len = array.length;\n  var i = -1;\n\n  while (++i < len) {\n    var value = +cb(array[i], orient);\n\n    if (!isNaN(value)) {\n      sum += value;\n    }\n  }\n\n  return sum;\n}\n/**\n * Change the y-position of the nodes, except most the left side nodes\n */\n\n\nfunction relaxLeftToRight(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.inEdges.length) {\n        var y = sum(node.inEdges, weightedSource, orient) / sum(node.inEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.inEdges.length;\n          y = len ? sum(node.inEdges, centerSource, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n/**\n * Compute the depth(y-position) of each edge\n */\n\n\nfunction computeEdgeDepths(nodes, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodes, function (node) {\n    node.outEdges.sort(function (a, b) {\n      return a.node2.getLayout()[keyAttr] - b.node2.getLayout()[keyAttr];\n    });\n    node.inEdges.sort(function (a, b) {\n      return a.node1.getLayout()[keyAttr] - b.node1.getLayout()[keyAttr];\n    });\n  });\n  zrUtil.each(nodes, function (node) {\n    var sy = 0;\n    var ty = 0;\n    zrUtil.each(node.outEdges, function (edge) {\n      edge.setLayout({\n        sy: sy\n      }, true);\n      sy += edge.getLayout().dy;\n    });\n    zrUtil.each(node.inEdges, function (edge) {\n      edge.setLayout({\n        ty: ty\n      }, true);\n      ty += edge.getLayout().dy;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport VisualMapping from '../../visual/VisualMapping';\nexport default function sankeyVisual(ecModel) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n\n    if (nodes.length) {\n      var minValue_1 = Infinity;\n      var maxValue_1 = -Infinity;\n      zrUtil.each(nodes, function (node) {\n        var nodeValue = node.getLayout().value;\n\n        if (nodeValue < minValue_1) {\n          minValue_1 = nodeValue;\n        }\n\n        if (nodeValue > maxValue_1) {\n          maxValue_1 = nodeValue;\n        }\n      });\n      zrUtil.each(nodes, function (node) {\n        var mapping = new VisualMapping({\n          type: 'color',\n          mappingMethod: 'linear',\n          dataExtent: [minValue_1, maxValue_1],\n          visual: seriesModel.get('color')\n        });\n        var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\n        var customColor = node.getModel().get(['itemStyle', 'color']);\n\n        if (customColor != null) {\n          node.setVisual('color', customColor);\n          node.setVisual('style', {\n            fill: customColor\n          });\n        } else {\n          node.setVisual('color', mapValueToColor);\n          node.setVisual('style', {\n            fill: mapValueToColor\n          });\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SankeyView from './SankeyView';\nimport SankeySeriesModel from './SankeySeries';\nimport sankeyLayout from './sankeyLayout';\nimport sankeyVisual from './sankeyVisual';\nexport function install(registers) {\n  registers.registerChartView(SankeyView);\n  registers.registerSeriesModel(SankeySeriesModel);\n  registers.registerLayout(sankeyLayout);\n  registers.registerVisual(sankeyVisual);\n  registers.registerAction({\n    type: 'dragNode',\n    event: 'dragnode',\n    // here can only use 'update' now, other value is not support in echarts.\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sankey',\n      query: payload\n    }, function (seriesModel) {\n      seriesModel.setNodePosition(payload.dataIndex, [payload.localX, payload.localY]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createListSimply from '../helper/createListSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper';\n\nvar WhiskerBoxCommonMixin =\n/** @class */\nfunction () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // Consider time axis.\n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data; // ??? FIXME make a stage to perform data transfrom.\n    // MUST create a new data, consider setOption({}) again.\n\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice();\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = item.value.slice();\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createListSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n\n  return WhiskerBoxCommonMixin;\n}();\n\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar BoxplotSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BoxplotSeriesModel, _super);\n\n  function BoxplotSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BoxplotSeriesModel.type; // TODO\n    // box width represents group size, so dimension should have 'size'.\n\n    /**\n     * @see <https://en.wikipedia.org/wiki/Box_plot>\n     * The meanings of 'min' and 'max' depend on user,\n     * and echarts do not need to know it.\n     * @readOnly\n     */\n\n    _this.defaultValueDimensions = [{\n      name: 'min',\n      defaultTooltip: true\n    }, {\n      name: 'Q1',\n      defaultTooltip: true\n    }, {\n      name: 'median',\n      defaultTooltip: true\n    }, {\n      name: 'Q3',\n      defaultTooltip: true\n    }, {\n      name: 'max',\n      defaultTooltip: true\n    }];\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  BoxplotSeriesModel.type = 'series.boxplot';\n  BoxplotSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  BoxplotSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    layout: null,\n    boxWidth: [7, 50],\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2,\n        shadowBlur: 5,\n        shadowOffsetX: 1,\n        shadowOffsetY: 1,\n        shadowColor: 'rgba(0,0,0,0.2)'\n      }\n    },\n    animationDuration: 800\n  };\n  return BoxplotSeriesModel;\n}(SeriesModel);\n\nmixin(BoxplotSeriesModel, WhiskerBoxCommonMixin, true);\nexport default BoxplotSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport Path from 'zrender/lib/graphic/Path';\n\nvar BoxplotView =\n/** @class */\nfunction (_super) {\n  __extends(BoxplotView, _super);\n\n  function BoxplotView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BoxplotView.type;\n    return _this;\n  }\n\n  BoxplotView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var group = this.group;\n    var oldData = this._data; // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    var constDim = seriesModel.get('layout') === 'horizontal' ? 1 : 0;\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        var symbolEl = createNormalBox(itemLayout, data, newIdx, constDim, true);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (!symbolEl) {\n        symbolEl = createNormalBox(itemLayout, data, newIdx, constDim);\n      } else {\n        updateNormalBoxData(itemLayout, symbolEl, data, newIdx);\n      }\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  BoxplotView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n    this._data = null;\n    data && data.eachItemGraphicEl(function (el) {\n      el && group.remove(el);\n    });\n  };\n\n  BoxplotView.type = 'boxplot';\n  return BoxplotView;\n}(ChartView);\n\nvar BoxPathShape =\n/** @class */\nfunction () {\n  function BoxPathShape() {}\n\n  return BoxPathShape;\n}();\n\nvar BoxPath =\n/** @class */\nfunction (_super) {\n  __extends(BoxPath, _super);\n\n  function BoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'boxplotBoxPath';\n    return _this;\n  }\n\n  BoxPath.prototype.getDefaultShape = function () {\n    return new BoxPathShape();\n  };\n\n  BoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    var i = 0;\n    ctx.moveTo(ends[i][0], ends[i][1]);\n    i++;\n\n    for (; i < 4; i++) {\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n\n    ctx.closePath();\n\n    for (; i < ends.length; i++) {\n      ctx.moveTo(ends[i][0], ends[i][1]);\n      i++;\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n  };\n\n  return BoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, data, dataIndex, constDim, isInit) {\n  var ends = itemLayout.ends;\n  var el = new BoxPath({\n    shape: {\n      points: isInit ? transInit(ends, constDim, itemLayout) : ends\n    }\n  });\n  updateNormalBoxData(itemLayout, el, data, dataIndex, isInit);\n  return el;\n}\n\nfunction updateNormalBoxData(itemLayout, el, data, dataIndex, isInit) {\n  var seriesModel = data.hostModel;\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps'];\n  updateMethod(el, {\n    shape: {\n      points: itemLayout.ends\n    }\n  }, seriesModel, dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.z2 = 100;\n  var itemModel = data.getItemModel(dataIndex);\n  setStatesStylesFromModel(el, itemModel);\n  enableHoverEmphasis(el, itemModel.get(['emphasis', 'focus']), itemModel.get(['emphasis', 'blurScope']));\n}\n\nfunction transInit(points, dim, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[dim] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nexport default BoxplotView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function boxplotVisual(ecModel, api) {}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { parsePercent } from '../../util/number';\nvar each = zrUtil.each;\nexport default function boxplotLayout(ecModel) {\n  var groupResult = groupSeriesByAxis(ecModel);\n  each(groupResult, function (groupItem) {\n    var seriesModels = groupItem.seriesModels;\n\n    if (!seriesModels.length) {\n      return;\n    }\n\n    calculateBase(groupItem);\n    each(seriesModels, function (seriesModel, idx) {\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\n    });\n  });\n}\n/**\n * Group series by axis.\n */\n\nfunction groupSeriesByAxis(ecModel) {\n  var result = [];\n  var axisList = [];\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\n    var baseAxis = seriesModel.getBaseAxis();\n    var idx = zrUtil.indexOf(axisList, baseAxis);\n\n    if (idx < 0) {\n      idx = axisList.length;\n      axisList[idx] = baseAxis;\n      result[idx] = {\n        axis: baseAxis,\n        seriesModels: []\n      };\n    }\n\n    result[idx].seriesModels.push(seriesModel);\n  });\n  return result;\n}\n/**\n * Calculate offset and box width for each series.\n */\n\n\nfunction calculateBase(groupItem) {\n  var extent;\n  var baseAxis = groupItem.axis;\n  var seriesModels = groupItem.seriesModels;\n  var seriesCount = seriesModels.length;\n  var boxWidthList = groupItem.boxWidthList = [];\n  var boxOffsetList = groupItem.boxOffsetList = [];\n  var boundList = [];\n  var bandWidth;\n\n  if (baseAxis.type === 'category') {\n    bandWidth = baseAxis.getBandWidth();\n  } else {\n    var maxDataCount_1 = 0;\n    each(seriesModels, function (seriesModel) {\n      maxDataCount_1 = Math.max(maxDataCount_1, seriesModel.getData().count());\n    });\n    extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / maxDataCount_1;\n  }\n\n  each(seriesModels, function (seriesModel) {\n    var boxWidthBound = seriesModel.get('boxWidth');\n\n    if (!zrUtil.isArray(boxWidthBound)) {\n      boxWidthBound = [boxWidthBound, boxWidthBound];\n    }\n\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\n  });\n  var availableWidth = bandWidth * 0.8 - 2;\n  var boxGap = availableWidth / seriesCount * 0.3;\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\n  var base = boxWidth / 2 - availableWidth / 2;\n  each(seriesModels, function (seriesModel, idx) {\n    boxOffsetList.push(base);\n    base += boxGap + boxWidth;\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\n  });\n}\n/**\n * Calculate points location for each series.\n */\n\n\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\n  var coordSys = seriesModel.coordinateSystem;\n  var data = seriesModel.getData();\n  var halfWidth = boxWidth / 2;\n  var cDimIdx = seriesModel.get('layout') === 'horizontal' ? 0 : 1;\n  var vDimIdx = 1 - cDimIdx;\n  var coordDims = ['x', 'y'];\n  var cDim = data.mapDimension(coordDims[cDimIdx]);\n  var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n\n  if (cDim == null || vDims.length < 5) {\n    return;\n  }\n\n  for (var dataIndex = 0; dataIndex < data.count(); dataIndex++) {\n    var axisDimVal = data.get(cDim, dataIndex);\n    var median = getPoint(axisDimVal, vDims[2], dataIndex);\n    var end1 = getPoint(axisDimVal, vDims[0], dataIndex);\n    var end2 = getPoint(axisDimVal, vDims[1], dataIndex);\n    var end4 = getPoint(axisDimVal, vDims[3], dataIndex);\n    var end5 = getPoint(axisDimVal, vDims[4], dataIndex);\n    var ends = [];\n    addBodyEnd(ends, end2, false);\n    addBodyEnd(ends, end4, true);\n    ends.push(end1, end2, end5, end4);\n    layEndLine(ends, end1);\n    layEndLine(ends, end5);\n    layEndLine(ends, median);\n    data.setItemLayout(dataIndex, {\n      initBaseline: median[vDimIdx],\n      ends: ends\n    });\n  }\n\n  function getPoint(axisDimVal, dim, dataIndex) {\n    var val = data.get(dim, dataIndex);\n    var p = [];\n    p[cDimIdx] = axisDimVal;\n    p[vDimIdx] = val;\n    var point;\n\n    if (isNaN(axisDimVal) || isNaN(val)) {\n      point = [NaN, NaN];\n    } else {\n      point = coordSys.dataToPoint(p);\n      point[cDimIdx] += offset;\n    }\n\n    return point;\n  }\n\n  function addBodyEnd(ends, point, start) {\n    var point1 = point.slice();\n    var point2 = point.slice();\n    point1[cDimIdx] += halfWidth;\n    point2[cDimIdx] -= halfWidth;\n    start ? ends.push(point1, point2) : ends.push(point2, point1);\n  }\n\n  function layEndLine(ends, endCenter) {\n    var from = endCenter.slice();\n    var to = endCenter.slice();\n    from[cDimIdx] -= halfWidth;\n    to[cDimIdx] += halfWidth;\n    ends.push(from, to);\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { quantile, asc } from '../../util/number';\nimport { isFunction, isString } from 'zrender/lib/core/util';\n/**\n * See:\n *  <https://en.wikipedia.org/wiki/Box_plot#cite_note-frigge_hoaglin_iglewicz-2>\n *  <http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/boxplot.stats.html>\n *\n * Helper method for preparing data.\n *\n * @param rawData like\n *        [\n *            [12,232,443], (raw data set for the first box)\n *            [3843,5545,1232], (raw data set for the second box)\n *            ...\n *        ]\n * @param opt.boundIQR=1.5 Data less than min bound is outlier.\n *      default 1.5, means Q1 - 1.5 * (Q3 - Q1).\n *      If 'none'/0 passed, min bound will not be used.\n */\n\nexport default function prepareBoxplotData(rawData, opt) {\n  opt = opt || {};\n  var boxData = [];\n  var outliers = [];\n  var boundIQR = opt.boundIQR;\n  var useExtreme = boundIQR === 'none' || boundIQR === 0;\n\n  for (var i = 0; i < rawData.length; i++) {\n    var ascList = asc(rawData[i].slice());\n    var Q1 = quantile(ascList, 0.25);\n    var Q2 = quantile(ascList, 0.5);\n    var Q3 = quantile(ascList, 0.75);\n    var min = ascList[0];\n    var max = ascList[ascList.length - 1];\n    var bound = (boundIQR == null ? 1.5 : boundIQR) * (Q3 - Q1);\n    var low = useExtreme ? min : Math.max(min, Q1 - bound);\n    var high = useExtreme ? max : Math.min(max, Q3 + bound);\n    var itemNameFormatter = opt.itemNameFormatter;\n    var itemName = isFunction(itemNameFormatter) ? itemNameFormatter({\n      value: i\n    }) : isString(itemNameFormatter) ? itemNameFormatter.replace('{value}', i + '') : i + '';\n    boxData.push([itemName, low, Q1, Q2, Q3, high]);\n\n    for (var j = 0; j < ascList.length; j++) {\n      var dataItem = ascList[j];\n\n      if (dataItem < low || dataItem > high) {\n        var outlier = [itemName, dataItem];\n        outliers.push(outlier);\n      }\n    }\n  }\n\n  return {\n    boxData: boxData,\n    outliers: outliers\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareBoxplotData from './prepareBoxplotData';\nimport { throwError, makePrintable } from '../../util/log';\nimport { SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types';\nexport var boxplotTransform = {\n  type: 'echarts:boxplot',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n\n    if (upstream.sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('source data is not applicable for this boxplot transform. Expect number[][].');\n      }\n\n      throwError(errMsg);\n    }\n\n    var result = prepareBoxplotData(upstream.getRawData(), params.config);\n    return [{\n      dimensions: ['ItemName', 'Low', 'Q1', 'Q2', 'Q3', 'High'],\n      data: result.boxData\n    }, {\n      data: result.outliers\n    }];\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoxplotSeriesModel from './BoxplotSeries';\nimport BoxplotView from './BoxplotView';\nimport boxplotVisual from './boxplotVisual';\nimport boxplotLayout from './boxplotLayout';\nimport { boxplotTransform } from './boxplotTransform';\nexport function install(registers) {\n  registers.registerSeriesModel(BoxplotSeriesModel);\n  registers.registerChartView(BoxplotView);\n  registers.registerVisual(boxplotVisual);\n  registers.registerLayout(boxplotLayout);\n  registers.registerTransform(boxplotTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel } from '../../util/states';\nimport Path from 'zrender/lib/graphic/Path';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nvar SKIP_PROPS = ['color', 'borderColor'];\n\nvar CandlestickView =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickView, _super);\n\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n\n    this._updateDrawMode(seriesModel);\n\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n      }\n\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, true);\n  };\n\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\n\nvar NormalBoxPathShape =\n/** @class */\nfunction () {\n  function NormalBoxPathShape() {}\n\n  return NormalBoxPathShape;\n}();\n\nvar NormalBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(NormalBoxPath, _super);\n\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n\n  return NormalBoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\n\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n\n  return clipped;\n}\n\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\n\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nvar LargeBoxPathShape =\n/** @class */\nfunction () {\n  function LargeBoxPathShape() {}\n\n  return LargeBoxPathShape;\n}();\n\nvar LargeBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeBoxPath, _super);\n\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n\n  return LargeBoxPath;\n}(Path);\n\nfunction createLarge(seriesModel, group, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1\n  });\n  group.add(elN);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n}\n\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']); // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\n\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar CandlestickSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickSeriesModel, _super);\n\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n\n\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\n\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { extend } from 'zrender/lib/core/util';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n\n    function getBorderColor(sign, model) {\n      return model.get(sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    }\n\n    var data = seriesModel.getData(); // Only visible series has each data be visual encoded\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport { subPixelOptimize } from '../../util/graphic';\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { parsePercent } from '../../util/number';\nimport { retrieve2 } from 'zrender/lib/core/util';\nvar LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDim = data.mapDimension(coordDims[cDimIdx]);\n    var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n    var openDim = vDims[0];\n    var closeDim = vDims[1];\n    var lowestDim = vDims[2];\n    var highestDim = vDims[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n\n    if (cDim == null || vDims.length < 4) {\n      return;\n    }\n\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n\n    function normalProgress(params, data) {\n      var dataIndex;\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = data.get(cDim, dataIndex);\n        var openVal = data.get(openDim, dataIndex);\n        var closeVal = data.get(closeDim, dataIndex);\n        var lowestVal = data.get(lowestDim, dataIndex);\n        var highestVal = data.get(highestDim, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        data.setItemLayout(dataIndex, {\n          sign: getSign(data, dataIndex, openVal, closeVal, closeDim),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = new LargeArr(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = data.get(cDim, dataIndex);\n        var openVal = data.get(openDim, dataIndex);\n        var closeVal = data.get(closeDim, dataIndex);\n        var lowestVal = data.get(lowestDim, dataIndex);\n        var highestVal = data.get(highestDim, dataIndex);\n\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n\n        points[offset++] = getSign(data, dataIndex, openVal, closeVal, closeDim);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n\nfunction getSign(data, dataIndex, openVal, closeVal, closeDim) {\n  var sign;\n\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = dataIndex > 0 // If close === open, compare with close of last record\n    ? data.get(closeDim, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\n    1;\n  }\n\n  return sign;\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView';\nimport CandlestickSeriesModel from './CandlestickSeries';\nimport preprocessor from './preprocessor';\nimport candlestickVisual from './candlestickVisual';\nimport candlestickLayout from './candlestickLayout';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Provide effect for line\n */\n\nimport * as graphic from '../../util/graphic';\nimport Line from './Line';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { createSymbol } from '../../util/symbol';\nimport * as vec2 from 'zrender/lib/core/vector';\nimport * as curveUtil from 'zrender/lib/core/curve';\n\nvar EffectLine =\n/** @class */\nfunction (_super) {\n  __extends(EffectLine, _super);\n\n  function EffectLine(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this.add(_this.createLine(lineData, idx, seriesScope));\n\n    _this._updateEffectSymbol(lineData, idx);\n\n    return _this;\n  }\n\n  EffectLine.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Line(lineData, idx, seriesScope);\n  };\n\n  EffectLine.prototype._updateEffectSymbol = function (lineData, idx) {\n    var itemModel = lineData.getItemModel(idx);\n    var effectModel = itemModel.getModel('effect');\n    var size = effectModel.get('symbolSize');\n    var symbolType = effectModel.get('symbol');\n\n    if (!zrUtil.isArray(size)) {\n      size = [size, size];\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var color = effectModel.get('color') || lineStyle && lineStyle.stroke;\n    var symbol = this.childAt(1);\n\n    if (this._symbolType !== symbolType) {\n      // Remove previous\n      this.remove(symbol);\n      symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\n      symbol.z2 = 100;\n      symbol.culling = true;\n      this.add(symbol);\n    } // Symbol may be removed if loop is false\n\n\n    if (!symbol) {\n      return;\n    } // Shadow color is same with color in default\n\n\n    symbol.setStyle('shadowColor', color);\n    symbol.setStyle(effectModel.getItemStyle(['color']));\n    symbol.scaleX = size[0];\n    symbol.scaleY = size[1];\n    symbol.setColor(color);\n    this._symbolType = symbolType;\n    this._symbolScale = size;\n\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n\n  EffectLine.prototype._updateEffectAnimation = function (lineData, effectModel, idx) {\n    var symbol = this.childAt(1);\n\n    if (!symbol) {\n      return;\n    }\n\n    var self = this;\n    var points = lineData.getItemLayout(idx);\n    var period = effectModel.get('period') * 1000;\n    var loop = effectModel.get('loop');\n    var constantSpeed = effectModel.get('constantSpeed');\n    var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\n      return idx / lineData.count() * period / 3;\n    }); // Ignore when updating\n\n    symbol.ignore = true;\n\n    this._updateAnimationPoints(symbol, points);\n\n    if (constantSpeed > 0) {\n      period = this._getLineLength(symbol) / constantSpeed * 1000;\n    }\n\n    if (period !== this._period || loop !== this._loop) {\n      symbol.stopAnimation();\n\n      if (period > 0) {\n        var delayNum = void 0;\n\n        if (typeof delayExpr === 'function') {\n          delayNum = delayExpr(idx);\n        } else {\n          delayNum = delayExpr;\n        }\n\n        if (symbol.__t > 0) {\n          delayNum = -period * symbol.__t;\n        }\n\n        symbol.__t = 0;\n        var animator = symbol.animate('', loop).when(period, {\n          __t: 1\n        }).delay(delayNum).during(function () {\n          self._updateSymbolPosition(symbol);\n        });\n\n        if (!loop) {\n          animator.done(function () {\n            self.remove(symbol);\n          });\n        }\n\n        animator.start();\n      }\n    }\n\n    this._period = period;\n    this._loop = loop;\n  };\n\n  EffectLine.prototype._getLineLength = function (symbol) {\n    // Not so accurate\n    return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\n  };\n\n  EffectLine.prototype._updateAnimationPoints = function (symbol, points) {\n    symbol.__p1 = points[0];\n    symbol.__p2 = points[1];\n    symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\n  };\n\n  EffectLine.prototype.updateData = function (lineData, idx, seriesScope) {\n    this.childAt(0).updateData(lineData, idx, seriesScope);\n\n    this._updateEffectSymbol(lineData, idx);\n  };\n\n  EffectLine.prototype._updateSymbolPosition = function (symbol) {\n    var p1 = symbol.__p1;\n    var p2 = symbol.__p2;\n    var cp1 = symbol.__cp1;\n    var t = symbol.__t;\n    var pos = [symbol.x, symbol.y];\n    var lastPos = pos.slice();\n    var quadraticAt = curveUtil.quadraticAt;\n    var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\n    pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\n    pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t); // Tangent\n\n    var tx = quadraticDerivativeAt(p1[0], cp1[0], p2[0], t);\n    var ty = quadraticDerivativeAt(p1[1], cp1[1], p2[1], t);\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2; // enable continuity trail for 'line', 'rect', 'roundRect' symbolType\n\n    if (this._symbolType === 'line' || this._symbolType === 'rect' || this._symbolType === 'roundRect') {\n      if (symbol.__lastT !== undefined && symbol.__lastT < symbol.__t) {\n        symbol.scaleY = vec2.dist(lastPos, pos) * 1.05; // make sure the last segment render within endPoint\n\n        if (t === 1) {\n          pos[0] = lastPos[0] + (pos[0] - lastPos[0]) / 2;\n          pos[1] = lastPos[1] + (pos[1] - lastPos[1]) / 2;\n        }\n      } else if (symbol.__lastT === 1) {\n        // After first loop, symbol.__t does NOT start with 0, so connect p1 to pos directly.\n        symbol.scaleY = 2 * vec2.dist(p1, pos);\n      } else {\n        symbol.scaleY = this._symbolScale[1];\n      }\n    }\n\n    symbol.__lastT = symbol.__t;\n    symbol.ignore = false;\n    symbol.x = pos[0];\n    symbol.y = pos[1];\n  };\n\n  EffectLine.prototype.updateLayout = function (lineData, idx) {\n    this.childAt(0).updateLayout(lineData, idx);\n    var effectModel = lineData.getItemModel(idx).getModel('effect');\n\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n\n  return EffectLine;\n}(graphic.Group);\n\nexport default EffectLine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis } from '../../util/states';\n\nvar Polyline =\n/** @class */\nfunction (_super) {\n  __extends(Polyline, _super);\n\n  function Polyline(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createPolyline(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Polyline.prototype._createPolyline = function (lineData, idx, seriesScope) {\n    // let seriesModel = lineData.hostModel;\n    var points = lineData.getItemLayout(idx);\n    var line = new graphic.Polyline({\n      shape: {\n        points: points\n      }\n    });\n    this.add(line);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Polyline.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childAt(0);\n    var target = {\n      shape: {\n        points: lineData.getItemLayout(idx)\n      }\n    };\n    graphic.updateProps(line, target, seriesModel, idx);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Polyline.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var line = this.childAt(0);\n    var itemModel = lineData.getItemModel(idx);\n    var hoverLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n\n    if (!seriesScope || lineData.hasItemOption) {\n      hoverLineStyle = itemModel.getModel(['emphasis', 'lineStyle']).getLineStyle();\n    }\n\n    line.useStyle(lineData.getItemVisual(idx, 'style'));\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    var lineEmphasisState = line.ensureState('emphasis');\n    lineEmphasisState.style = hoverLineStyle;\n    enableHoverEmphasis(this);\n  };\n\n  ;\n\n  Polyline.prototype.updateLayout = function (lineData, idx) {\n    var polyline = this.childAt(0);\n    polyline.setShape('points', lineData.getItemLayout(idx));\n  };\n\n  ;\n  return Polyline;\n}(graphic.Group);\n\nexport default Polyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Polyline from './Polyline';\nimport EffectLine from './EffectLine';\nimport * as vec2 from 'zrender/lib/core/vector';\n\nvar EffectPolyline =\n/** @class */\nfunction (_super) {\n  __extends(EffectPolyline, _super);\n\n  function EffectPolyline() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._lastFrame = 0;\n    _this._lastFramePercent = 0;\n    return _this;\n  } // Override\n\n\n  EffectPolyline.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Polyline(lineData, idx, seriesScope);\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._updateAnimationPoints = function (symbol, points) {\n    this._points = points;\n    var accLenArr = [0];\n    var len = 0;\n\n    for (var i = 1; i < points.length; i++) {\n      var p1 = points[i - 1];\n      var p2 = points[i];\n      len += vec2.dist(p1, p2);\n      accLenArr.push(len);\n    }\n\n    if (len === 0) {\n      this._length = 0;\n      return;\n    }\n\n    for (var i = 0; i < accLenArr.length; i++) {\n      accLenArr[i] /= len;\n    }\n\n    this._offsets = accLenArr;\n    this._length = len;\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._getLineLength = function () {\n    return this._length;\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._updateSymbolPosition = function (symbol) {\n    var t = symbol.__t;\n    var points = this._points;\n    var offsets = this._offsets;\n    var len = points.length;\n\n    if (!offsets) {\n      // Has length 0\n      return;\n    }\n\n    var lastFrame = this._lastFrame;\n    var frame;\n\n    if (t < this._lastFramePercent) {\n      // Start from the next frame\n      // PENDING start from lastFrame ?\n      var start = Math.min(lastFrame + 1, len - 1);\n\n      for (frame = start; frame >= 0; frame--) {\n        if (offsets[frame] <= t) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n\n      frame = Math.min(frame, len - 2);\n    } else {\n      for (frame = lastFrame; frame < len; frame++) {\n        if (offsets[frame] > t) {\n          break;\n        }\n      }\n\n      frame = Math.min(frame - 1, len - 2);\n    }\n\n    var p = (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]);\n    var p0 = points[frame];\n    var p1 = points[frame + 1];\n    symbol.x = p0[0] * (1 - p) + p * p1[0];\n    symbol.y = p0[1] * (1 - p) + p * p1[1];\n    var tx = p1[0] - p0[0];\n    var ty = p1[1] - p0[1];\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    this._lastFrame = frame;\n    this._lastFramePercent = t;\n    symbol.ignore = false;\n  };\n\n  ;\n  return EffectPolyline;\n}(EffectLine);\n\nexport default EffectPolyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO Batch by color\n\nimport * as graphic from '../../util/graphic';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable';\nimport * as lineContain from 'zrender/lib/contain/line';\nimport * as quadraticContain from 'zrender/lib/contain/quadratic';\nimport { getECData } from '../../util/innerStore';\n\nvar LargeLinesPathShape =\n/** @class */\nfunction () {\n  function LargeLinesPathShape() {\n    this.polyline = false;\n    this.curveness = 0;\n    this.segs = [];\n  }\n\n  return LargeLinesPathShape;\n}();\n\nvar LargeLinesPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeLinesPath, _super);\n\n  function LargeLinesPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  LargeLinesPath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  LargeLinesPath.prototype.getDefaultShape = function () {\n    return new LargeLinesPathShape();\n  };\n\n  LargeLinesPath.prototype.buildPath = function (ctx, shape) {\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n\n    if (shape.polyline) {\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n\n        if (count > 0) {\n          ctx.moveTo(segs[i++], segs[i++]);\n\n          for (var k = 1; k < count; k++) {\n            ctx.lineTo(segs[i++], segs[i++]);\n          }\n        }\n      }\n    } else {\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        ctx.moveTo(x0, y0);\n\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          ctx.quadraticCurveTo(x2, y2, x1, y1);\n        } else {\n          ctx.lineTo(x1, y1);\n        }\n      }\n    }\n  };\n\n  LargeLinesPath.prototype.findDataIndex = function (x, y) {\n    var shape = this.shape;\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var lineWidth = this.style.lineWidth;\n\n    if (shape.polyline) {\n      var dataIndex = 0;\n\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n\n        if (count > 0) {\n          var x0 = segs[i++];\n          var y0 = segs[i++];\n\n          for (var k = 1; k < count; k++) {\n            var x1 = segs[i++];\n            var y1 = segs[i++];\n\n            if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n              return dataIndex;\n            }\n          }\n        }\n\n        dataIndex++;\n      }\n    } else {\n      var dataIndex = 0;\n\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n\n          if (quadraticContain.containStroke(x0, y0, x2, y2, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        } else {\n          if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        }\n\n        dataIndex++;\n      }\n    }\n\n    return -1;\n  };\n\n  return LargeLinesPath;\n}(graphic.Path);\n\nvar LargeLineDraw =\n/** @class */\nfunction () {\n  function LargeLineDraw() {\n    this.group = new graphic.Group();\n  }\n\n  LargeLineDraw.prototype.isPersistent = function () {\n    return !this._incremental;\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  LargeLineDraw.prototype.updateData = function (data) {\n    this.group.removeAll();\n    var lineEl = new LargeLinesPath({\n      rectHover: true,\n      cursor: 'default'\n    });\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n\n    this._setCommon(lineEl, data); // Add back\n\n\n    this.group.add(lineEl);\n    this._incremental = null;\n  };\n\n  ;\n  /**\n   * @override\n   */\n\n  LargeLineDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n\n    this._clearIncremental();\n\n    if (data.count() > 5e5) {\n      if (!this._incremental) {\n        this._incremental = new IncrementalDisplayable({\n          silent: true\n        });\n      }\n\n      this.group.add(this._incremental);\n    } else {\n      this._incremental = null;\n    }\n  };\n\n  ;\n  /**\n   * @override\n   */\n\n  LargeLineDraw.prototype.incrementalUpdate = function (taskParams, data) {\n    var lineEl = new LargeLinesPath();\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n\n    this._setCommon(lineEl, data, !!this._incremental);\n\n    if (!this._incremental) {\n      lineEl.rectHover = true;\n      lineEl.cursor = 'default';\n      lineEl.__startIndex = taskParams.start;\n      this.group.add(lineEl);\n    } else {\n      this._incremental.addDisplayable(lineEl, true);\n    }\n  };\n\n  ;\n  /**\n   * @override\n   */\n\n  LargeLineDraw.prototype.remove = function () {\n    this._clearIncremental();\n\n    this._incremental = null;\n    this.group.removeAll();\n  };\n\n  ;\n\n  LargeLineDraw.prototype._setCommon = function (lineEl, data, isIncremental) {\n    var hostModel = data.hostModel;\n    lineEl.setShape({\n      polyline: hostModel.get('polyline'),\n      curveness: hostModel.get(['lineStyle', 'curveness'])\n    });\n    lineEl.useStyle(hostModel.getModel('lineStyle').getLineStyle());\n    lineEl.style.strokeNoScale = true;\n    var style = data.getVisual('style');\n\n    if (style && style.stroke) {\n      lineEl.setStyle('stroke', style.stroke);\n    }\n\n    lineEl.setStyle('fill', null);\n\n    if (!isIncremental) {\n      var ecData_1 = getECData(lineEl); // Enable tooltip\n      // PENDING May have performance issue when path is extremely large\n\n      ecData_1.seriesIndex = hostModel.seriesIndex;\n      lineEl.on('mousemove', function (e) {\n        ecData_1.dataIndex = null;\n        var dataIndex = lineEl.findDataIndex(e.offsetX, e.offsetY);\n\n        if (dataIndex > 0) {\n          // Provide dataIndex for tooltip\n          ecData_1.dataIndex = dataIndex + lineEl.__startIndex;\n        }\n      });\n    }\n  };\n\n  ;\n\n  LargeLineDraw.prototype._clearIncremental = function () {\n    var incremental = this._incremental;\n\n    if (incremental) {\n      incremental.clearDisplaybles();\n    }\n  };\n\n  ;\n  return LargeLineDraw;\n}();\n\nexport default LargeLineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport createRenderPlanner from '../helper/createRenderPlanner';\nvar linesLayout = {\n  seriesType: 'lines',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var isPolyline = seriesModel.get('polyline');\n    var isLarge = seriesModel.pipelineContext.large;\n    return {\n      progress: function (params, lineData) {\n        var lineCoords = [];\n\n        if (isLarge) {\n          var points = void 0;\n          var segCount = params.end - params.start;\n\n          if (isPolyline) {\n            var totalCoordsCount = 0;\n\n            for (var i = params.start; i < params.end; i++) {\n              totalCoordsCount += seriesModel.getLineCoordsCount(i);\n            }\n\n            points = new Float32Array(segCount + totalCoordsCount * 2);\n          } else {\n            points = new Float32Array(segCount * 4);\n          }\n\n          var offset = 0;\n          var pt = [];\n\n          for (var i = params.start; i < params.end; i++) {\n            var len = seriesModel.getLineCoords(i, lineCoords);\n\n            if (isPolyline) {\n              points[offset++] = len;\n            }\n\n            for (var k = 0; k < len; k++) {\n              pt = coordSys.dataToPoint(lineCoords[k], false, pt);\n              points[offset++] = pt[0];\n              points[offset++] = pt[1];\n            }\n          }\n\n          lineData.setLayout('linesPoints', points);\n        } else {\n          for (var i = params.start; i < params.end; i++) {\n            var itemModel = lineData.getItemModel(i);\n            var len = seriesModel.getLineCoords(i, lineCoords);\n            var pts = [];\n\n            if (isPolyline) {\n              for (var j = 0; j < len; j++) {\n                pts.push(coordSys.dataToPoint(lineCoords[j]));\n              }\n            } else {\n              pts[0] = coordSys.dataToPoint(lineCoords[0]);\n              pts[1] = coordSys.dataToPoint(lineCoords[1]);\n              var curveness = itemModel.get(['lineStyle', 'curveness']);\n\n              if (+curveness) {\n                pts[2] = [(pts[0][0] + pts[1][0]) / 2 - (pts[0][1] - pts[1][1]) * curveness, (pts[0][1] + pts[1][1]) / 2 - (pts[1][0] - pts[0][0]) * curveness];\n              }\n            }\n\n            lineData.setItemLayout(i, pts);\n          }\n        }\n      }\n    };\n  }\n};\nexport default linesLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LineDraw from '../helper/LineDraw';\nimport EffectLine from '../helper/EffectLine';\nimport Line from '../helper/Line';\nimport Polyline from '../helper/Polyline';\nimport EffectPolyline from '../helper/EffectPolyline';\nimport LargeLineDraw from '../helper/LargeLineDraw';\nimport linesLayout from './linesLayout';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nimport ChartView from '../../view/Chart';\n\nvar LinesView =\n/** @class */\nfunction (_super) {\n  __extends(LinesView, _super);\n\n  function LinesView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesView.type;\n    return _this;\n  }\n\n  LinesView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n\n    var zlevel = seriesModel.get('zlevel');\n    var trailLength = seriesModel.get(['effect', 'trailLength']);\n    var zr = api.getZr(); // Avoid the drag cause ghost shadow\n    // FIXME Better way ?\n    // SVG doesn't support\n\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg) {\n      zr.painter.getLayer(zlevel).clear(true);\n    } // Config layer with motion blur\n\n\n    if (this._lastZlevel != null && !isSvg) {\n      zr.configLayer(this._lastZlevel, {\n        motionBlur: false\n      });\n    }\n\n    if (this._showEffect(seriesModel) && trailLength) {\n      if (process.env.NODE_ENV !== 'production') {\n        var notInIndividual_1 = false;\n        ecModel.eachSeries(function (otherSeriesModel) {\n          if (otherSeriesModel !== seriesModel && otherSeriesModel.get('zlevel') === zlevel) {\n            notInIndividual_1 = true;\n          }\n        });\n        notInIndividual_1 && console.warn('Lines with trail effect should have an individual zlevel');\n      }\n\n      if (!isSvg) {\n        zr.configLayer(zlevel, {\n          motionBlur: true,\n          lastFrameAlpha: Math.max(Math.min(trailLength / 10 + 0.9, 1), 0)\n        });\n      }\n    }\n\n    lineDraw.updateData(data);\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n\n    this._lastZlevel = zlevel;\n    this._finished = true;\n  };\n\n  LinesView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n\n    lineDraw.incrementalPrepareUpdate(data);\n\n    this._clearLayer(api);\n\n    this._finished = false;\n  };\n\n  LinesView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._lineDraw.incrementalUpdate(taskParams, seriesModel.getData());\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  LinesView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var pipelineContext = seriesModel.pipelineContext;\n\n    if (!this._finished || pipelineContext.large || pipelineContext.progressiveRender) {\n      // TODO Don't have to do update in large mode. Only do it when there are millions of data.\n      return {\n        update: true\n      };\n    } else {\n      // TODO Use same logic with ScatterView.\n      // Manually update layout\n      var res = linesLayout.reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      } // Not in large mode\n\n\n      this._lineDraw.updateLayout();\n\n      this._clearLayer(api);\n    }\n  };\n\n  LinesView.prototype._updateLineDraw = function (data, seriesModel) {\n    var lineDraw = this._lineDraw;\n\n    var hasEffect = this._showEffect(seriesModel);\n\n    var isPolyline = !!seriesModel.get('polyline');\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (hasEffect && isLargeDraw) {\n        console.warn('Large lines not support effect');\n      }\n    }\n\n    if (!lineDraw || hasEffect !== this._hasEffet || isPolyline !== this._isPolyline || isLargeDraw !== this._isLargeDraw) {\n      if (lineDraw) {\n        lineDraw.remove();\n      }\n\n      lineDraw = this._lineDraw = isLargeDraw ? new LargeLineDraw() : new LineDraw(isPolyline ? hasEffect ? EffectPolyline : Polyline : hasEffect ? EffectLine : Line);\n      this._hasEffet = hasEffect;\n      this._isPolyline = isPolyline;\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(lineDraw.group);\n    return lineDraw;\n  };\n\n  LinesView.prototype._showEffect = function (seriesModel) {\n    return !!seriesModel.get(['effect', 'show']);\n  };\n\n  LinesView.prototype._clearLayer = function (api) {\n    // Not use motion when dragging or zooming\n    var zr = api.getZr();\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg && this._lastZlevel != null) {\n      zr.painter.getLayer(this._lastZlevel).clear(true);\n    }\n  };\n\n  LinesView.prototype.remove = function (ecModel, api) {\n    this._lineDraw && this._lineDraw.remove();\n    this._lineDraw = null; // Clear motion when lineDraw is removed\n\n    this._clearLayer(api);\n  };\n\n  LinesView.type = 'lines';\n  return LinesView;\n}(ChartView);\n\nexport default LinesView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint32Array, Float64Array, Float32Array */\n\nimport SeriesModel from '../../model/Series';\nimport List from '../../data/List';\nimport { concatArray, mergeAll, map } from 'zrender/lib/core/util';\nimport CoordinateSystem from '../../core/CoordinateSystem';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\n\nfunction compatEc2(seriesOpt) {\n  var data = seriesOpt.data;\n\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\n    }\n\n    seriesOpt.data = map(data, function (itemOpt) {\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\n      var target = {\n        coords: coords\n      };\n\n      if (itemOpt[0].name) {\n        target.fromName = itemOpt[0].name;\n      }\n\n      if (itemOpt[1].name) {\n        target.toName = itemOpt[1].name;\n      }\n\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\n    });\n  }\n}\n\nvar LinesSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LinesSeriesModel, _super);\n\n  function LinesSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  LinesSeriesModel.prototype.init = function (option) {\n    // The input data may be null/undefined.\n    option.data = option.data || []; // Not using preprocessor because mergeOption may not have series.type\n\n    compatEc2(option);\n\n    var result = this._processFlatCoordsArray(option.data);\n\n    this._flatCoords = result.flatCoords;\n    this._flatCoordsOffset = result.flatCoordsOffset;\n\n    if (result.flatCoords) {\n      option.data = new Float32Array(result.count);\n    }\n\n    _super.prototype.init.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.mergeOption = function (option) {\n    compatEc2(option);\n\n    if (option.data) {\n      // Only update when have option data to merge.\n      var result = this._processFlatCoordsArray(option.data);\n\n      this._flatCoords = result.flatCoords;\n      this._flatCoordsOffset = result.flatCoordsOffset;\n\n      if (result.flatCoords) {\n        option.data = new Float32Array(result.count);\n      }\n    }\n\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.appendData = function (params) {\n    var result = this._processFlatCoordsArray(params.data);\n\n    if (result.flatCoords) {\n      if (!this._flatCoords) {\n        this._flatCoords = result.flatCoords;\n        this._flatCoordsOffset = result.flatCoordsOffset;\n      } else {\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\n      }\n\n      params.data = new Float32Array(result.count);\n    }\n\n    this.getRawData().appendData(params.data);\n  };\n\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\n    var itemModel = this.getData().getItemModel(idx);\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\n      }\n    }\n\n    return coords;\n  };\n\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\n    if (this._flatCoordsOffset) {\n      return this._flatCoordsOffset[idx * 2 + 1];\n    } else {\n      return this._getCoordsFromItemModel(idx).length;\n    }\n  };\n\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\n    if (this._flatCoordsOffset) {\n      var offset = this._flatCoordsOffset[idx * 2];\n      var len = this._flatCoordsOffset[idx * 2 + 1];\n\n      for (var i = 0; i < len; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = this._flatCoords[offset + i * 2];\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\n      }\n\n      return len;\n    } else {\n      var coords = this._getCoordsFromItemModel(idx);\n\n      for (var i = 0; i < coords.length; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = coords[i][0];\n        out[i][1] = coords[i][1];\n      }\n\n      return coords.length;\n    }\n  };\n\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\n    var startOffset = 0;\n\n    if (this._flatCoords) {\n      startOffset = this._flatCoords.length;\n    } // Stored as a typed array. In format\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\n\n\n    if (typeof data[0] === 'number') {\n      var len = data.length; // Store offset and len of each segment\n\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\n      var coordsStorage = new Float64Arr(len);\n      var coordsCursor = 0;\n      var offsetCursor = 0;\n      var dataCount = 0;\n\n      for (var i = 0; i < len;) {\n        dataCount++;\n        var count = data[i++]; // Offset\n\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset; // Len\n\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\n\n        for (var k = 0; k < count; k++) {\n          var x = data[i++];\n          var y = data[i++];\n          coordsStorage[coordsCursor++] = x;\n          coordsStorage[coordsCursor++] = y;\n\n          if (i > len) {\n            if (process.env.NODE_ENV !== 'production') {\n              throw new Error('Invalid data format.');\n            }\n          }\n        }\n      }\n\n      return {\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\n        flatCoords: coordsStorage,\n        count: dataCount\n      };\n    }\n\n    return {\n      flatCoordsOffset: null,\n      flatCoords: null,\n      count: data.length\n    };\n  };\n\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\n\n      if (!CoordSys) {\n        throw new Error('Unkown coordinate system ' + option.coordinateSystem);\n      }\n    }\n\n    var lineData = new List(['value'], this);\n    lineData.hasItemOption = false;\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\n      // dataItem is simply coords\n      if (dataItem instanceof Array) {\n        return NaN;\n      } else {\n        lineData.hasItemOption = true;\n        var value = dataItem.value;\n\n        if (value != null) {\n          return value instanceof Array ? value[dimIndex] : value;\n        }\n      }\n    });\n    return lineData;\n  };\n\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var itemModel = data.getItemModel(dataIndex);\n    var name = itemModel.get('name');\n\n    if (name) {\n      return name;\n    }\n\n    var fromName = itemModel.get('fromName');\n    var toName = itemModel.get('toName');\n    var nameArr = [];\n    fromName != null && nameArr.push(fromName);\n    toName != null && nameArr.push(toName);\n    return createTooltipMarkup('nameValue', {\n      name: nameArr.join(' > ')\n    });\n  };\n\n  LinesSeriesModel.prototype.preventIncremental = function () {\n    return !!this.get(['effect', 'show']);\n  };\n\n  LinesSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      return this.option.large ? 1e4 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  LinesSeriesModel.type = 'series.lines';\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\n  LinesSeriesModel.defaultOption = {\n    coordinateSystem: 'geo',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Cartesian coordinate system\n    xAxisIndex: 0,\n    yAxisIndex: 0,\n    symbol: ['none', 'none'],\n    symbolSize: [10, 10],\n    // Geo coordinate system\n    geoIndex: 0,\n    effect: {\n      show: false,\n      period: 4,\n      constantSpeed: 0,\n      symbol: 'circle',\n      symbolSize: 3,\n      loop: true,\n      trailLength: 0.2\n    },\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    polyline: false,\n    clip: true,\n    label: {\n      show: false,\n      position: 'end' // distance: 5,\n      // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n\n    },\n    lineStyle: {\n      opacity: 0.5\n    }\n  };\n  return LinesSeriesModel;\n}(SeriesModel);\n\nexport default LinesSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nvar linesVisual = {\n  seriesType: 'lines',\n  reset: function (seriesModel) {\n    var symbolType = normalize(seriesModel.get('symbol'));\n    var symbolSize = normalize(seriesModel.get('symbolSize'));\n    var data = seriesModel.getData();\n    data.setVisual('fromSymbol', symbolType && symbolType[0]);\n    data.setVisual('toSymbol', symbolType && symbolType[1]);\n    data.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    data.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      symbolType[0] && data.setItemVisual(idx, 'fromSymbol', symbolType[0]);\n      symbolType[1] && data.setItemVisual(idx, 'toSymbol', symbolType[1]);\n      symbolSize[0] && data.setItemVisual(idx, 'fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && data.setItemVisual(idx, 'toSymbolSize', symbolSize[1]);\n    }\n\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport default linesVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LinesView from './LinesView';\nimport LinesSeriesModel from './LinesSeries';\nimport linesLayout from './linesLayout';\nimport linesVisual from './linesVisual';\nexport function install(registers) {\n  registers.registerChartView(LinesView);\n  registers.registerSeriesModel(LinesSeriesModel);\n  registers.registerLayout(linesLayout);\n  registers.registerVisual(linesVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createSymbol } from '../../util/symbol';\nimport { parsePercent, isNumeric } from '../../util/number';\nimport ChartView from '../../view/Chart';\nimport { getDefaultLabel } from '../helper/labelHelper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\nimport { getECData } from '../../util/innerStore';\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth']; // index: +isHorizontal\n\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\n\nvar PictorialBarView =\n/** @class */\nfunction (_super) {\n  __extends(PictorialBarView, _super);\n\n  function PictorialBarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PictorialBarView.type;\n    return _this;\n  }\n\n  PictorialBarView.prototype.render = function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var coordSysRect = cartesian.master.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - +isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta; // Add back\n\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    this._data = data;\n    return this.group;\n  };\n\n  PictorialBarView.prototype.remove = function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, getECData(bar).dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  };\n\n  PictorialBarView.type = 'pictorialBar';\n  return PictorialBarView;\n}(ChartView); // Set or calculate default value about symbol, and calculate layout info.\n\n\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    style: data.getItemVisual(dataIndex, 'style'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverScale: isAnimationEnabled && itemModel.get(['emphasis', 'scale']),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = itemModel.get('symbolOffset');\n\n  if (zrUtil.isArray(symbolOffset)) {\n    symbolOffset = [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])];\n  }\n\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n} // bar length can be negative.\n\n\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n\n  outputSymbolMeta.boundingLength = boundingLength;\n\n  if (symbolRepeat) {\n    outputSymbolMeta.repeatCutLength = layout[valueDim.wh];\n  }\n\n  outputSymbolMeta.pxSign = boundingLength > 0 ? 1 : boundingLength < 0 ? -1 : 0;\n}\n\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n} // Support ['100%', '100%']\n\n\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n  var parsedSymbolSize;\n\n  if (zrUtil.isArray(symbolSize)) {\n    parsedSymbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      // will parse to number below\n      parsedSymbolSize = ['100%', '100%'];\n    } else {\n      parsedSymbolSize = [symbolSize, symbolSize];\n    }\n  } // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n\n\n  parsedSymbolSize[categoryDim.index] = parsePercent(parsedSymbolSize[categoryDim.index], categorySize);\n  parsedSymbolSize[valueDim.index] = parsePercent(parsedSymbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  outputSymbolMeta.symbolSize = parsedSymbolSize; // If x or y is less than zero, show reversed shape.\n\n  var symbolScale = outputSymbolMeta.symbolScale = [parsedSymbolSize[0] / symbolPatternSize, parsedSymbolSize[1] / symbolPatternSize]; // Follow convention, 'right' and 'top' is the normal scale.\n\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\n\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, outputSymbolMeta) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scaleX: symbolScale[0],\n      scaleY: symbolScale[1],\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n\n  outputSymbolMeta.valueLineWidth = valueLineWidth;\n}\n\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, outputSymbolMeta) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = outputSymbolMeta.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength; // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n\n    var symbolMarginNumeric = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMarginNumeric * 2, 0); // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n\n    var endFix = hasEndGap ? 0 : symbolMarginNumeric * 2; // Both final repeatTimes and final symbolMarginNumeric area calculated based on\n    // boundingLength.\n\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin); // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMarginNumeric = mDiff / 2 / (hasEndGap ? repeatTimes : repeatTimes - 1);\n    uLenWithMargin = unitLength + symbolMarginNumeric * 2;\n    endFix = hasEndGap ? 0 : symbolMarginNumeric * 2; // Update repeatTimes when not all symbol will be shown.\n\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    outputSymbolMeta.repeatTimes = repeatTimes;\n    outputSymbolMeta.symbolMargin = symbolMarginNumeric;\n  }\n\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = outputSymbolMeta.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n\n  var bundlePosition = outputSymbolMeta.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = outputSymbolMeta.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = outputSymbolMeta.clipShape = {}; // Consider that symbol may be overflow layout rect.\n\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\n\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol( // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\n\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scaleX: 0,\n        scaleY: 0\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    } // updateHoverAnimation(path, symbolMeta);\n\n\n    index++;\n  });\n\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      x: target.x,\n      y: target.y,\n      scaleX: 0,\n      scaleY: 0\n    }, {\n      scaleX: target.scaleX,\n      scaleY: target.scaleY,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate);\n  }\n\n  function makeTarget(index) {\n    var position = pathPosition.slice(); // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      x: position[0],\n      y: position[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    };\n  }\n}\n\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: 0,\n      scaleY: 0,\n      rotation: symbolMeta.rotation\n    }, {\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1]\n    }, symbolMeta, isUpdate);\n  } else {\n    updateAttr(mainPath, null, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n} // bar rect is used for label.\n\n\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\n\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n\n      bar.__pictorialBundle.setClipPath(clipPath);\n\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\n\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\n\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\n\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\n\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group(); // bundle is used for location and clip.\n\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.x = symbolMeta.bundlePosition[0];\n  bundle.y = symbolMeta.bundlePosition[1];\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\n\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    x: symbolMeta.bundlePosition[0],\n    y: symbolMeta.bundlePosition[1]\n  }, animationModel, dataIndex);\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\n\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && labelRect.removeTextContent();\n  var pathes = [];\n  eachPath(bar, function (path) {\n    pathes.push(path);\n  });\n  bar.__pictorialMainPath && pathes.push(bar.__pictorialMainPath); // I do not find proper remove animation for clip yet.\n\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(pathes, function (path) {\n    graphic.removeElement(path, {\n      scaleX: 0,\n      scaleY: 0\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\n\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\n\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\n\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs); // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\n\nfunction updateCommon(bar, opt, symbolMeta) {\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel; // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var emphasisModel = itemModel.getModel('emphasis');\n  var emphasisStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n  var blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n  var selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var hoverScale = emphasisModel.get('scale');\n  eachPath(bar, function (path) {\n    if (path instanceof ZRImage) {\n      var pathStyle = path.style;\n      path.useStyle(zrUtil.extend({\n        // TODO other properties like dx, dy ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolMeta.style));\n    } else {\n      path.useStyle(symbolMeta.style);\n    }\n\n    var emphasisState = path.ensureState('emphasis');\n    emphasisState.style = emphasisStyle;\n\n    if (hoverScale) {\n      // NOTE: Must after scale is set after updateAttr\n      emphasisState.scaleX = path.scaleX * 1.1;\n      emphasisState.scaleY = path.scaleY * 1.1;\n    }\n\n    path.ensureState('blur').style = blurStyle;\n    path.ensureState('select').style = selectStyle;\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  setLabelStyle(barRect, getLabelStatesModels(itemModel), {\n    labelFetcher: opt.seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(opt.seriesModel.getData(), dataIndex),\n    inheritColor: symbolMeta.style.fill,\n    defaultOpacity: symbolMeta.style.opacity,\n    defaultOutsidePosition: barPositionOutside\n  });\n  enableHoverEmphasis(bar, focus, blurScope);\n}\n\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times); // Escapse accurate error\n\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\n\nexport default PictorialBarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar PictorialBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PictorialBarSeriesModel, _super);\n\n  function PictorialBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PictorialBarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    _this.defaultSymbol = 'roundRect';\n    return _this;\n  }\n\n  PictorialBarSeriesModel.prototype.getInitialData = function (option) {\n    // Disable stack.\n    option.stack = null;\n    return _super.prototype.getInitialData.apply(this, arguments);\n  };\n\n  PictorialBarSeriesModel.type = 'series.pictorialBar';\n  PictorialBarSeriesModel.dependencies = ['grid'];\n  PictorialBarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    symbol: 'circle',\n    symbolSize: null,\n    symbolRotate: null,\n    symbolPosition: null,\n    symbolOffset: null,\n    symbolMargin: null,\n    symbolRepeat: false,\n    symbolRepeatDirection: 'end',\n    symbolClip: false,\n    symbolBoundingData: null,\n    symbolPatternSize: 400,\n    barGap: '-100%',\n    // z can be set in data item, which is z2 actually.\n    // Disable progressive\n    progressive: 0,\n    emphasis: {\n      // By default pictorialBar do not hover scale. Hover scale is not suitable\n      // for the case that both has foreground and background.\n      scale: false\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  });\n  return PictorialBarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default PictorialBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PictorialBarView from './PictorialBarView';\nimport PictorialBarSeriesModel from './PictorialBarSeries';\nimport { layout } from '../../layout/barGrid';\nimport { curry } from 'zrender/lib/core/util';\nexport function install(registers) {\n  registers.registerChartView(PictorialBarView);\n  registers.registerSeriesModel(PictorialBarSeriesModel);\n  registers.registerLayout(curry(layout, 'pictorialBar'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { ECPolygon } from '../line/poly';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { bind } from 'zrender/lib/core/util';\nimport DataDiffer from '../../data/DataDiffer';\nimport ChartView from '../../view/Chart';\n\nvar ThemeRiverView =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverView, _super);\n\n  function ThemeRiverView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverView.type;\n    _this._layers = [];\n    return _this;\n  }\n\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var self = this;\n    var group = this.group;\n    var layersSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.x = 0;\n    group.y = rect.y + boundaryGap[0];\n\n    function keyGetter(item) {\n      return item.name;\n    }\n\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\n    var newLayersGroups = [];\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = self._layers;\n\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n\n      var points0 = [];\n      var points1 = [];\n      var style;\n      var indices = layersSeries[idx].indices;\n      var j = 0;\n\n      for (; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push(x, y0);\n        points1.push(x, y0 + y);\n        style = data.getItemVisual(indices[j], 'style');\n      }\n\n      var polygon;\n      var textLayout = data.getItemLayout(indices[0]);\n      var labelModel = seriesModel.getModel('label');\n      var margin = labelModel.get('margin');\n      var emphasisModel = seriesModel.getModel('emphasis');\n\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new ECPolygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        layerGroup.add(polygon);\n        group.add(layerGroup);\n\n        if (seriesModel.isAnimationEnabled()) {\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n            polygon.removeClipPath();\n          }));\n        }\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n      }\n\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\n        labelDataIndex: indices[j - 1],\n        defaultText: data.getName(indices[j - 1]),\n        inheritColor: style.fill\n      }, {\n        normal: {\n          verticalAlign: 'middle' // align: 'right'\n\n        }\n      });\n      polygon.setTextConfig({\n        position: null,\n        local: true\n      });\n      var labelEl = polygon.getTextContent(); // TODO More label position options.\n\n      if (labelEl) {\n        labelEl.x = textLayout.x - margin;\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\n      }\n\n      polygon.useStyle(style);\n      data.setItemGraphicEl(idx, polygon);\n      setStatesStylesFromModel(polygon, seriesModel);\n      enableHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n    }\n\n    this._layersSeries = layersSeries;\n    this._layers = newLayersGroups;\n  };\n\n  ThemeRiverView.type = 'themeRiver';\n  return ThemeRiverView;\n}(ChartView);\n\n; // add animation to the view\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      x: rect.x - 50,\n      width: rect.width + 100,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default ThemeRiverView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createDimensions from '../../data/helper/createDimensions';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport List from '../../data/List';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { groupData, SINGLE_REFERRING } from '../../util/model';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nvar DATA_NAME_INDEX = 2;\n\nvar ThemeRiverSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverSeriesModel, _super);\n\n  function ThemeRiverSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverSeriesModel.type;\n    _this.useColorPaletteOnData = true;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ThemeRiverSeriesModel.prototype.init = function (option) {\n    // eslint-disable-next-line\n    _super.prototype.init.apply(this, arguments); // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  /**\n   * If there is no value of a certain point in the time for some event,set it value to 0.\n   *\n   * @param {Array} data  initial data in the option\n   * @return {Array}\n   */\n\n\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\n    var rawDataLength = data.length;\n    /**\n     * Make sure every layer data get the same keys.\n     * The value index tells which layer has visited.\n     * {\n     *  2014/01/01: -1\n     * }\n     */\n\n    var timeValueKeys = {}; // grouped data by name\n\n    var groupResult = groupData(data, function (item) {\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\n        timeValueKeys[item[0] + ''] = -1;\n      }\n\n      return item[2];\n    });\n    var layerData = [];\n    groupResult.buckets.each(function (items, key) {\n      layerData.push({\n        name: key,\n        dataList: items\n      });\n    });\n    var layerNum = layerData.length;\n\n    for (var k = 0; k < layerNum; ++k) {\n      var name_1 = layerData[k].name;\n\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\n        var timeValue = layerData[k].dataList[j][0] + '';\n        timeValueKeys[timeValue] = k;\n      }\n\n      for (var timeValue in timeValueKeys) {\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\n          timeValueKeys[timeValue] = k;\n          data[rawDataLength] = [timeValue, 0, name_1];\n          rawDataLength++;\n        }\n      }\n    }\n\n    return data;\n  };\n  /**\n   * @override\n   * @param  option  the initial option that user gived\n   * @param  ecModel  the model object for themeRiver option\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    var axisType = singleAxisModel.get('type'); // filter the data item with the value of label is undefined\n\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    }); // ??? TODO design a stage to transfer data for themeRiver and lines?\n\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n\n    var dimensionsInfo = createDimensions(data, {\n      coordDimensions: ['single'],\n      dimensionsDefine: [{\n        name: 'time',\n        type: getDimensionTypeByAxis(axisType)\n      }, {\n        name: 'value',\n        type: 'float'\n      }, {\n        name: 'name',\n        type: 'ordinal'\n      }],\n      encodeDefine: {\n        single: 0,\n        value: 1,\n        itemName: 2\n      }\n    });\n    var list = new List(dimensionsInfo, this);\n    list.initData(data);\n    return list;\n  };\n  /**\n   * The raw data is divided into multiple layers and each layer\n   *     has same name.\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    }\n\n    var timeDim = data.mapDimension('single'); // data group by name\n\n    var groupResult = groupData(indexArr, function (index) {\n      return data.get('name', index);\n    });\n    var layerSeries = [];\n    groupResult.buckets.each(function (items, key) {\n      items.sort(function (index1, index2) {\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\n      });\n      layerSeries.push({\n        name: key,\n        indices: items\n      });\n    });\n    return layerSeries;\n  };\n  /**\n   * Get data indices for show tooltip content\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n\n      indices.push(nearestIdx);\n    }\n\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  };\n\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var name = data.getName(dataIndex);\n    var value = data.get(data.mapDimension('value'), dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\n  ThemeRiverSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      margin: 4,\n      show: true,\n      position: 'left',\n      fontSize: 11\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return ThemeRiverSeriesModel;\n}(SeriesModel);\n\nexport default ThemeRiverSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as numberUtil from '../../util/number';\nexport default function themeRiverLayout(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {}; // use the axis boundingRect for view\n\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, width);\n    }\n\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\n * The layout information about themeriver\n *\n * @param data  data in the series\n * @param seriesModel  the model object of themeRiver series\n * @param height  value used to compute every series height\n */\n\nfunction doThemeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n\n  var coordSys = seriesModel.coordinateSystem; // the data in each layer are organized into a series.\n\n  var layerSeries = seriesModel.getLayerSeries(); // the points in each layer.\n\n  var timeDim = data.mapDimension('single');\n  var valueDim = data.mapDimension('value');\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\n      pt[1] = data.get(valueDim, idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max; // set layout information for each item.\n\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\n * Compute the baseLine of the rawdata\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\n *\n * @param  data  the points in each layer\n */\n\n\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n\n  for (var i = 0; i < pointNum; ++i) {\n    var temp = 0;\n\n    for (var j = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n\n    if (temp > max) {\n      max = temp;\n    }\n\n    sums.push(temp);\n  }\n\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n\n  max = 0;\n\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n\n    if (sum > max) {\n      max = sum;\n    }\n  }\n\n  return {\n    y0: y0,\n    max: max\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport ThemeRiverView from './ThemeRiverView';\nimport ThemeRiverSeriesModel from './ThemeRiverSeries';\nimport themeRiverLayout from './themeRiverLayout';\nimport dataFilter from '../../processor/dataFilter';\nexport function install(registers) {\n  registers.registerChartView(ThemeRiverView);\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\n  registers.registerLayout(themeRiverLayout);\n  registers.registerProcessor(dataFilter('themeRiver'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, SPECIAL_STATES, DISPLAY_STATES } from '../../util/states';\nimport { createTextStyle } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\nimport { getSectorCornerRadius } from '../helper/pieHelper';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal';\nvar DEFAULT_SECTOR_Z = 2;\nvar DEFAULT_TEXT_Z = 4;\n/**\n * Sunburstce of Sunburst including Sector, Label, LabelLine\n */\n\nvar SunburstPiece =\n/** @class */\nfunction (_super) {\n  __extends(SunburstPiece, _super);\n\n  function SunburstPiece(node, seriesModel, ecModel, api) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = DEFAULT_SECTOR_Z;\n    _this.textConfig = {\n      inside: true\n    };\n    getECData(_this).seriesIndex = seriesModel.seriesIndex;\n    var text = new graphic.Text({\n      z2: DEFAULT_TEXT_Z,\n      silent: node.getModel().get(['label', 'silent'])\n    });\n\n    _this.setTextContent(text);\n\n    _this.updateData(true, node, seriesModel, ecModel, api);\n\n    return _this;\n  }\n\n  SunburstPiece.prototype.updateData = function (firstCreate, node, // state: 'emphasis' | 'normal' | 'highlight' | 'downplay',\n  seriesModel, ecModel, api) {\n    this.node = node;\n    node.piece = this;\n    seriesModel = seriesModel || this._seriesModel;\n    ecModel = ecModel || this._ecModel;\n    var sector = this;\n    getECData(sector).dataIndex = node.dataIndex;\n    var itemModel = node.getModel();\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = node.getLayout();\n    var sectorShape = zrUtil.extend({}, layout);\n    sectorShape.label = null;\n    var normalStyle = node.getVisual('style');\n    normalStyle.lineJoin = 'bevel';\n    var decal = node.getVisual('decal');\n\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape);\n    zrUtil.extend(sectorShape, cornerRadius);\n    zrUtil.each(SPECIAL_STATES, function (stateName) {\n      var state = sector.ensureState(stateName);\n      var itemStyleModel = itemModel.getModel([stateName, 'itemStyle']);\n      state.style = itemStyleModel.getItemStyle(); // border radius\n\n      var cornerRadius = getSectorCornerRadius(itemStyleModel, sectorShape);\n\n      if (cornerRadius) {\n        state.shape = cornerRadius;\n      }\n    });\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      sector.shape.r = layout.r0;\n      graphic.updateProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, node.dataIndex);\n    } else {\n      // Disable animation for gradient since no interpolation method\n      // is supported for gradient\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel);\n    }\n\n    sector.useStyle(normalStyle);\n\n    this._updateLabel(seriesModel);\n\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._seriesModel = seriesModel || this._seriesModel;\n    this._ecModel = ecModel || this._ecModel;\n    var focus = emphasisModel.get('focus');\n    var focusOrIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : focus;\n    enableHoverEmphasis(this, focusOrIndices, emphasisModel.get('blurScope'));\n  };\n\n  SunburstPiece.prototype._updateLabel = function (seriesModel) {\n    var _this = this;\n\n    var itemModel = this.node.getModel();\n    var normalLabelModel = itemModel.getModel('label');\n    var layout = this.node.getLayout();\n    var angle = layout.endAngle - layout.startAngle;\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var sector = this;\n    var label = sector.getTextContent();\n    var dataIndex = this.node.dataIndex;\n    var labelMinAngle = normalLabelModel.get('minAngle') / 180 * Math.PI;\n    var isNormalShown = normalLabelModel.get('show') && !(labelMinAngle != null && Math.abs(angle) < labelMinAngle);\n    label.ignore = !isNormalShown; // TODO use setLabelStyle\n\n    zrUtil.each(DISPLAY_STATES, function (stateName) {\n      var labelStateModel = stateName === 'normal' ? itemModel.getModel('label') : itemModel.getModel([stateName, 'label']);\n      var isNormal = stateName === 'normal';\n      var state = isNormal ? label : label.ensureState(stateName);\n      var text = seriesModel.getFormattedLabel(dataIndex, stateName);\n\n      if (isNormal) {\n        text = text || _this.node.name;\n      }\n\n      state.style = createTextStyle(labelStateModel, {}, null, stateName !== 'normal', true);\n\n      if (text) {\n        state.style.text = text;\n      } // Not displaying text when angle is too small\n\n\n      var isShown = labelStateModel.get('show');\n\n      if (isShown != null && !isNormal) {\n        state.ignore = !isShown;\n      }\n\n      var labelPosition = getLabelAttr(labelStateModel, 'position');\n      var sectorState = isNormal ? sector : sector.states[stateName];\n      var labelColor = sectorState.style.fill;\n      sectorState.textConfig = {\n        outsideFill: labelStateModel.get('color') === 'inherit' ? labelColor : null,\n        inside: labelPosition !== 'outside'\n      };\n      var r;\n      var labelPadding = getLabelAttr(labelStateModel, 'distance') || 0;\n      var textAlign = getLabelAttr(labelStateModel, 'align');\n\n      if (labelPosition === 'outside') {\n        r = layout.r + labelPadding;\n        textAlign = midAngle > Math.PI / 2 ? 'right' : 'left';\n      } else {\n        if (!textAlign || textAlign === 'center') {\n          r = (layout.r + layout.r0) / 2;\n          textAlign = 'center';\n        } else if (textAlign === 'left') {\n          r = layout.r0 + labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'right';\n          }\n        } else if (textAlign === 'right') {\n          r = layout.r - labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'left';\n          }\n        }\n      }\n\n      state.style.align = textAlign;\n      state.style.verticalAlign = getLabelAttr(labelStateModel, 'verticalAlign') || 'middle';\n      state.x = r * dx + layout.cx;\n      state.y = r * dy + layout.cy;\n      var rotateType = getLabelAttr(labelStateModel, 'rotate');\n      var rotate = 0;\n\n      if (rotateType === 'radial') {\n        rotate = -midAngle;\n\n        if (rotate < -Math.PI / 2) {\n          rotate += Math.PI;\n        }\n      } else if (rotateType === 'tangential') {\n        rotate = Math.PI / 2 - midAngle;\n\n        if (rotate > Math.PI / 2) {\n          rotate -= Math.PI;\n        } else if (rotate < -Math.PI / 2) {\n          rotate += Math.PI;\n        }\n      } else if (typeof rotateType === 'number') {\n        rotate = rotateType * Math.PI / 180;\n      }\n\n      state.rotation = rotate;\n    });\n\n    function getLabelAttr(model, name) {\n      var stateAttr = model.get(name);\n\n      if (stateAttr == null) {\n        return normalLabelModel.get(name);\n      }\n\n      return stateAttr;\n    }\n\n    label.dirtyStyle();\n  };\n\n  return SunburstPiece;\n}(graphic.Sector);\n\nexport default SunburstPiece;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\nimport { deprecateReplaceLog } from '../../util/log';\nimport { retrieveTargetInfo, aboveViewRoot } from '../helper/treeHelper';\nexport var ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\nexport function installSunburstAction(registers) {\n  registers.registerAction({\n    type: ROOT_TO_NODE_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var targetInfo = retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n  registers.registerAction({\n    type: HIGHLIGHT_ACTION,\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    // Clone\n    payload = extend({}, payload);\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleHighlight);\n\n    function handleHighlight(model) {\n      var targetInfo = retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\n\n      if (targetInfo) {\n        payload.dataIndex = targetInfo.node.dataIndex;\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('highlight', 'sunburstHighlight');\n    } // Fast forward action\n\n\n    api.dispatchAction(extend(payload, {\n      type: 'highlight'\n    }));\n  });\n  registers.registerAction({\n    type: UNHIGHLIGHT_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel, api) {\n    payload = extend({}, payload);\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('downplay', 'sunburstUnhighlight');\n    }\n\n    api.dispatchAction(extend(payload, {\n      type: 'downplay'\n    }));\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport SunburstPiece from './SunburstPiece';\nimport DataDiffer from '../../data/DataDiffer';\nimport { ROOT_TO_NODE_ACTION } from './sunburstAction';\nimport { windowOpen } from '../../util/format';\n\nvar SunburstView =\n/** @class */\nfunction (_super) {\n  __extends(SunburstView, _super);\n\n  function SunburstView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstView.type;\n    return _this;\n  }\n\n  SunburstView.prototype.render = function (seriesModel, ecModel, api, // @ts-ignore\n  payload) {\n    var self = this;\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var data = seriesModel.getData();\n    var virtualRoot = data.tree.root;\n    var newRoot = seriesModel.getViewRoot();\n    var group = this.group;\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\n    var newChildren = [];\n    newRoot.eachNode(function (node) {\n      newChildren.push(node);\n    });\n    var oldChildren = this._oldChildren || [];\n    dualTravel(newChildren, oldChildren);\n    renderRollUp(virtualRoot, newRoot);\n\n    this._initEvents();\n\n    this._oldChildren = newChildren;\n\n    function dualTravel(newChildren, oldChildren) {\n      if (newChildren.length === 0 && oldChildren.length === 0) {\n        return;\n      }\n\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n\n      function getKey(node) {\n        return node.getId();\n      }\n\n      function processNode(newIdx, oldIdx) {\n        var newNode = newIdx == null ? null : newChildren[newIdx];\n        var oldNode = oldIdx == null ? null : oldChildren[oldIdx];\n        doRenderNode(newNode, oldNode);\n      }\n    }\n\n    function doRenderNode(newNode, oldNode) {\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\n        // Not render data with value 0\n        newNode = null;\n      }\n\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\n        if (oldNode && oldNode.piece) {\n          if (newNode) {\n            // Update\n            oldNode.piece.updateData(false, newNode, seriesModel, ecModel, api); // For tooltip\n\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\n          } else {\n            // Remove\n            removeNode(oldNode);\n          }\n        } else if (newNode) {\n          // Add\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel, api);\n          group.add(piece); // For tooltip\n\n          data.setItemGraphicEl(newNode.dataIndex, piece);\n        }\n      }\n    }\n\n    function removeNode(node) {\n      if (!node) {\n        return;\n      }\n\n      if (node.piece) {\n        group.remove(node.piece);\n        node.piece = null;\n      }\n    }\n\n    function renderRollUp(virtualRoot, viewRoot) {\n      if (viewRoot.depth > 0) {\n        // Render\n        if (self.virtualPiece) {\n          // Update\n          self.virtualPiece.updateData(false, virtualRoot, seriesModel, ecModel, api);\n        } else {\n          // Add\n          self.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel, api);\n          group.add(self.virtualPiece);\n        } // TODO event scope\n\n\n        viewRoot.piece.off('click');\n        self.virtualPiece.on('click', function (e) {\n          self._rootToNode(viewRoot.parentNode);\n        });\n      } else if (self.virtualPiece) {\n        // Remove\n        group.remove(self.virtualPiece);\n        self.virtualPiece = null;\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  SunburstView.prototype._initEvents = function () {\n    var _this = this;\n\n    this.group.off('click');\n    this.group.on('click', function (e) {\n      var targetFound = false;\n\n      var viewRoot = _this.seriesModel.getViewRoot();\n\n      viewRoot.eachNode(function (node) {\n        if (!targetFound && node.piece && node.piece === e.target) {\n          var nodeClick = node.getModel().get('nodeClick');\n\n          if (nodeClick === 'rootToNode') {\n            _this._rootToNode(node);\n          } else if (nodeClick === 'link') {\n            var itemModel = node.getModel();\n            var link = itemModel.get('link');\n\n            if (link) {\n              var linkTarget = itemModel.get('target', true) || '_blank';\n              windowOpen(link, linkTarget);\n            }\n          }\n\n          targetFound = true;\n        }\n      });\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  SunburstView.prototype._rootToNode = function (node) {\n    if (node !== this.seriesModel.getViewRoot()) {\n      this.api.dispatchAction({\n        type: ROOT_TO_NODE_ACTION,\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        targetNode: node\n      });\n    }\n  };\n  /**\n   * @implement\n   */\n\n\n  SunburstView.prototype.containPoint = function (point, seriesModel) {\n    var treeRoot = seriesModel.getData();\n    var itemLayout = treeRoot.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  SunburstView.type = 'sunburst';\n  return SunburstView;\n}(ChartView);\n\nexport default SunburstView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SeriesModel from '../../model/Series';\nimport Tree from '../../data/Tree';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\nimport Model from '../../model/Model';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree';\n\nvar SunburstSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SunburstSeriesModel, _super);\n\n  function SunburstSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstSeriesModel.type;\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n\n  SunburstSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levelModels = zrUtil.map(option.levels || [], function (levelDefine) {\n      return new Model(levelDefine, this, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        levelModel && (model.parentModel = levelModel);\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  SunburstSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /*\n   * @override\n   */\n\n\n  SunburstSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n\n  SunburstSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  SunburstSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  SunburstSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  SunburstSeriesModel.type = 'series.sunburst';\n  SunburstSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // 'rootToNode', 'link', or false\n    nodeClick: 'rootToNode',\n    renderLabelForZeroData: false,\n    label: {\n      // could be: 'radial', 'tangential', or 'none'\n      rotate: 'radial',\n      show: true,\n      opacity: 1,\n      // 'left' is for inner side of inside, and 'right' is for outter\n      // side for inside\n      align: 'center',\n      position: 'inside',\n      distance: 5,\n      silent: true\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderColor: 'white',\n      borderType: 'solid',\n      shadowBlur: 0,\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    emphasis: {\n      focus: 'descendant'\n    },\n    blur: {\n      itemStyle: {\n        opacity: 0.2\n      },\n      label: {\n        opacity: 0.1\n      }\n    },\n    // Animation type canbe expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    data: [],\n    levels: [],\n\n    /**\n     * Sort order.\n     *\n     * Valid values: 'desc', 'asc', null, or callback function.\n     * 'desc' and 'asc' for descend and ascendant order;\n     * null for not sorting;\n     * example of callback function:\n     * function(nodeA, nodeB) {\n     *     return nodeA.getValue() - nodeB.getValue();\n     * }\n     */\n    sort: 'desc'\n  };\n  return SunburstSeriesModel;\n}(SeriesModel);\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value; // TODO First value of array must be a number\n\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n\nexport default SunburstSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent } from '../../util/number';\nimport * as zrUtil from 'zrender/lib/core/util'; // let PI2 = Math.PI * 2;\n\nvar RADIAN = Math.PI / 180;\nexport default function sunburstLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var virtualRoot = seriesModel.getData().tree.root;\n    var treeRoot = seriesModel.getViewRoot();\n    var rootDepth = treeRoot.depth;\n    var sort = seriesModel.get('sort');\n\n    if (sort != null) {\n      initChildren(treeRoot, sort);\n    }\n\n    var validDataCount = 0;\n    zrUtil.each(treeRoot.children, function (child) {\n      !isNaN(child.getValue()) && validDataCount++;\n    });\n    var sum = treeRoot.getValue(); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var renderRollupNode = treeRoot.depth > 0;\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\n    var rPerLevel = (r - r0) / (levels || 1);\n    var clockwise = seriesModel.get('clockwise');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // In the case some sector angle is smaller than minAngle\n    // let restAngle = PI2;\n    // let valueSumLargerThanMinAngle = 0;\n\n    var dir = clockwise ? 1 : -1;\n    /**\n     * Render a tree\n     * @return increased angle\n     */\n\n    var renderNode = function (node, startAngle) {\n      if (!node) {\n        return;\n      }\n\n      var endAngle = startAngle; // Render self\n\n      if (node !== virtualRoot) {\n        // Tree node is virtual, so it doesn't need to be drawn\n        var value = node.getValue();\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n\n        if (angle < minAngle) {\n          angle = minAngle; // restAngle -= minAngle;\n        } // else {\n        //     valueSumLargerThanMinAngle += value;\n        // }\n\n\n        endAngle = startAngle + dir * angle;\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\n        var rStart = r0 + rPerLevel * depth;\n        var rEnd = r0 + rPerLevel * (depth + 1);\n        var itemModel = node.getModel(); // @ts-ignore. TODO this is not provided to developer yet. Rename it.\n\n        if (itemModel.get('r0') != null) {\n          // @ts-ignore\n          rStart = parsePercent(itemModel.get('r0'), size / 2);\n        } // @ts-ignore\n\n\n        if (itemModel.get('r') != null) {\n          // @ts-ignore\n          rEnd = parsePercent(itemModel.get('r'), size / 2);\n        }\n\n        node.setLayout({\n          angle: angle,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: rStart,\n          r: rEnd\n        });\n      } // Render children\n\n\n      if (node.children && node.children.length) {\n        // currentAngle = startAngle;\n        var siblingAngle_1 = 0;\n        zrUtil.each(node.children, function (node) {\n          siblingAngle_1 += renderNode(node, startAngle + siblingAngle_1);\n        });\n      }\n\n      return endAngle - startAngle;\n    }; // Virtual root node for roll up\n\n\n    if (renderRollupNode) {\n      var rStart = r0;\n      var rEnd = r0 + rPerLevel;\n      var angle = Math.PI * 2;\n      virtualRoot.setLayout({\n        angle: angle,\n        startAngle: startAngle,\n        endAngle: startAngle + angle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: rStart,\n        r: rEnd\n      });\n    }\n\n    renderNode(treeRoot, startAngle);\n  });\n}\n/**\n * Init node children by order and update visual\n */\n\nfunction initChildren(node, sortOrder) {\n  var children = node.children || [];\n  node.children = sort(children, sortOrder); // Init children recursively\n\n  if (children.length) {\n    zrUtil.each(node.children, function (child) {\n      initChildren(child, sortOrder);\n    });\n  }\n}\n/**\n * Sort children nodes\n *\n * @param {TreeNode[]}               children children of node to be sorted\n * @param {string | function | null} sort sort method\n *                                   See SunburstSeries.js for details.\n */\n\n\nfunction sort(children, sortOrder) {\n  if (typeof sortOrder === 'function') {\n    var sortTargets = zrUtil.map(children, function (child, idx) {\n      var value = child.getValue();\n      return {\n        params: {\n          depth: child.depth,\n          height: child.height,\n          dataIndex: child.dataIndex,\n          getValue: function () {\n            return value;\n          }\n        },\n        index: idx\n      };\n    });\n    sortTargets.sort(function (a, b) {\n      return sortOrder(a.params, b.params);\n    });\n    return zrUtil.map(sortTargets, function (target) {\n      return children[target.index];\n    });\n  } else {\n    var isAsc_1 = sortOrder === 'asc';\n    return children.sort(function (a, b) {\n      var diff = (a.getValue() - b.getValue()) * (isAsc_1 ? 1 : -1);\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc_1 ? -1 : 1) : diff;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\nimport { lift } from 'zrender/lib/tool/color';\nexport default function sunburstVisual(ecModel) {\n  var paletteScope = {}; // Default color strategy\n\n  function pickColor(node, seriesModel, treeHeight) {\n    // Choose color from palette based on the first level.\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var color = seriesModel.getColorFromPalette(current.name || current.dataIndex + '', paletteScope);\n\n    if (node.depth > 1 && typeof color === 'string') {\n      // Lighter on the deeper level.\n      color = lift(color, (node.depth - 1) / (treeHeight - 1) * 0.5);\n    }\n\n    return color;\n  }\n\n  ecModel.eachSeriesByType('sunburst', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      var style = model.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        style.fill = pickColor(node, seriesModel, tree.root.height);\n      }\n\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SunburstView from './SunburstView';\nimport SunburstSeriesModel from './SunburstSeries';\nimport sunburstLayout from './sunburstLayout';\nimport sunburstVisual from './sunburstVisual';\nimport dataFilter from '../../processor/dataFilter';\nimport { curry } from 'zrender/lib/core/util';\nimport { installSunburstAction } from './sunburstAction';\nexport function install(registers) {\n  registers.registerChartView(SunburstView);\n  registers.registerSeriesModel(SunburstSeriesModel);\n  registers.registerLayout(curry(sunburstLayout, 'sunburst'));\n  registers.registerProcessor(curry(dataFilter, 'sunburst'));\n  registers.registerVisual(sunburstVisual);\n  installSunburstAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport function layout(axisModel, opt) {\n  opt = opt || {};\n  var single = axisModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var axisPosition = axis.position;\n  var orient = axis.orient;\n  var rect = single.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var positionMap = {\n    horizontal: {\n      top: rectBound[2],\n      bottom: rectBound[3]\n    },\n    vertical: {\n      left: rectBound[0],\n      right: rectBound[1]\n    }\n  };\n  layout.position = [orient === 'vertical' ? positionMap.vertical[axisPosition] : rectBound[0], orient === 'horizontal' ? positionMap.horizontal[axisPosition] : rectBound[3]];\n  var r = {\n    horizontal: 0,\n    vertical: 1\n  };\n  layout.rotation = Math.PI / 2 * r[orient];\n  var directionMap = {\n    top: -1,\n    bottom: 1,\n    right: 1,\n    left: -1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = directionMap[axisPosition];\n\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n\n  var labelRotation = opt.rotate;\n  labelRotation == null && (labelRotation = axisModel.get(['axisLabel', 'rotate']));\n  layout.labelRotation = axisPosition === 'top' ? -labelRotation : labelRotation;\n  layout.z2 = 1;\n  return layout;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport AxisBuilder from './AxisBuilder';\nimport * as graphic from '../../util/graphic';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper';\nimport AxisView from './AxisView';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine'];\n\nvar SingleAxisView =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisView, _super);\n\n  function SingleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleAxisView.type;\n    _this.axisPointerClass = 'SingleAxisPointer';\n    return _this;\n  }\n\n  SingleAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    var layout = singleAxisHelper.layout(axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    group.add(this._axisGroup);\n    group.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this.group, this._axisGroup, axisModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  SingleAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  SingleAxisView.type = 'singleAxis';\n  return SingleAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (axisView, group, axisGroup, axisModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var gridRect = axisModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var splitLines = [];\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n\n    for (var i = 0; i < ticksCoords.length; ++i) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Line({\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        silent: true\n      }));\n    }\n\n    var lineStyle = lineStyleModel.getLineStyle(['color']);\n\n    for (var i = 0; i < splitLines.length; ++i) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  splitArea: function (axisView, group, axisGroup, axisModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, axisModel);\n  }\n};\nexport default SingleAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar SingleAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisModel, _super);\n\n  function SingleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleAxisModel.type;\n    return _this;\n  }\n\n  SingleAxisModel.prototype.getCoordSysModel = function () {\n    return this;\n  };\n\n  SingleAxisModel.type = 'singleAxis';\n  SingleAxisModel.layoutMode = 'box';\n  SingleAxisModel.defaultOption = {\n    left: '5%',\n    top: '5%',\n    right: '5%',\n    bottom: '5%',\n    type: 'value',\n    position: 'bottom',\n    orient: 'horizontal',\n    axisLine: {\n      show: true,\n      lineStyle: {\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // Single coordinate system and single axis is the,\n    // which is used as the parent tooltip model.\n    // same model, so we set default tooltip show as true.\n    tooltip: {\n      show: true\n    },\n    axisTick: {\n      show: true,\n      length: 6,\n      lineStyle: {\n        width: 1\n      }\n    },\n    axisLabel: {\n      show: true,\n      interval: 'auto'\n    },\n    splitLine: {\n      show: true,\n      lineStyle: {\n        type: 'dashed',\n        opacity: 0.2\n      }\n    }\n  };\n  return SingleAxisModel;\n}(ComponentModel);\n\nmixin(SingleAxisModel, AxisModelCommonMixin.prototype);\nexport default SingleAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar SingleAxis =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxis, _super);\n\n  function SingleAxis(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  /**\n   * Judge the orient of the axis.\n   */\n\n\n  SingleAxis.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n\n  SingleAxis.prototype.pointToData = function (point, clamp) {\n    return this.coordinateSystem.pointToData(point)[0];\n  };\n\n  return SingleAxis;\n}(Axis);\n\nexport default SingleAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Single coordinates system.\n */\nimport SingleAxis from './SingleAxis';\nimport * as axisHelper from '../axisHelper';\nimport { getLayoutRect } from '../../util/layout';\nimport { each } from 'zrender/lib/core/util';\n/**\n * Create a single coordinates system.\n */\n\nvar Single =\n/** @class */\nfunction () {\n  function Single(axisModel, ecModel, api) {\n    this.type = 'single';\n    this.dimension = 'single';\n    /**\n     * Add it just for draw tooltip.\n     */\n\n    this.dimensions = ['single'];\n    this.axisPointerEnabled = true;\n    this.model = axisModel;\n\n    this._init(axisModel, ecModel, api);\n  }\n  /**\n   * Initialize single coordinate system.\n   */\n\n\n  Single.prototype._init = function (axisModel, ecModel, api) {\n    var dim = this.dimension;\n    var axis = new SingleAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisModel.get('position'));\n    var isCategory = axis.type === 'category';\n    axis.onBand = isCategory && axisModel.get('boundaryGap');\n    axis.inverse = axisModel.get('inverse');\n    axis.orient = axisModel.get('orient');\n    axisModel.axis = axis;\n    axis.model = axisModel;\n    axis.coordinateSystem = this;\n    this._axis = axis;\n  };\n  /**\n   * Update axis scale after data processed\n   */\n\n\n  Single.prototype.update = function (ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.coordinateSystem === this) {\n        var data_1 = seriesModel.getData();\n        each(data_1.mapDimensionsAll(this.dimension), function (dim) {\n          this._axis.scale.unionExtentFromData(data_1, dim);\n        }, this);\n        axisHelper.niceScaleExtent(this._axis.scale, this._axis.model);\n      }\n    }, this);\n  };\n  /**\n   * Resize the single coordinate system.\n   */\n\n\n  Single.prototype.resize = function (axisModel, api) {\n    this._rect = getLayoutRect({\n      left: axisModel.get('left'),\n      top: axisModel.get('top'),\n      right: axisModel.get('right'),\n      bottom: axisModel.get('bottom'),\n      width: axisModel.get('width'),\n      height: axisModel.get('height')\n    }, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n\n    this._adjustAxis();\n  };\n\n  Single.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Single.prototype._adjustAxis = function () {\n    var rect = this._rect;\n    var axis = this._axis;\n    var isHorizontal = axis.isHorizontal();\n    var extent = isHorizontal ? [0, rect.width] : [0, rect.height];\n    var idx = axis.reverse ? 1 : 0;\n    axis.setExtent(extent[idx], extent[1 - idx]);\n\n    this._updateAxisTransform(axis, isHorizontal ? rect.x : rect.y);\n  };\n\n  Single.prototype._updateAxisTransform = function (axis, coordBase) {\n    var axisExtent = axis.getExtent();\n    var extentSum = axisExtent[0] + axisExtent[1];\n    var isHorizontal = axis.isHorizontal();\n    axis.toGlobalCoord = isHorizontal ? function (coord) {\n      return coord + coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n    axis.toLocalCoord = isHorizontal ? function (coord) {\n      return coord - coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n  };\n  /**\n   * Get axis.\n   */\n\n\n  Single.prototype.getAxis = function () {\n    return this._axis;\n  };\n  /**\n   * Get axis, add it just for draw tooltip.\n   */\n\n\n  Single.prototype.getBaseAxis = function () {\n    return this._axis;\n  };\n\n  Single.prototype.getAxes = function () {\n    return [this._axis];\n  };\n\n  Single.prototype.getTooltipAxes = function () {\n    return {\n      baseAxes: [this.getAxis()],\n      // Empty otherAxes\n      otherAxes: []\n    };\n  };\n  /**\n   * If contain point.\n   */\n\n\n  Single.prototype.containPoint = function (point) {\n    var rect = this.getRect();\n    var axis = this.getAxis();\n    var orient = axis.orient;\n\n    if (orient === 'horizontal') {\n      return axis.contain(axis.toLocalCoord(point[0])) && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n    } else {\n      return axis.contain(axis.toLocalCoord(point[1])) && point[0] >= rect.y && point[0] <= rect.y + rect.height;\n    }\n  };\n\n  Single.prototype.pointToData = function (point) {\n    var axis = this.getAxis();\n    return [axis.coordToData(axis.toLocalCoord(point[axis.orient === 'horizontal' ? 0 : 1]))];\n  };\n  /**\n   * Convert the series data to concrete point.\n   * Can be [val] | val\n   */\n\n\n  Single.prototype.dataToPoint = function (val) {\n    var axis = this.getAxis();\n    var rect = this.getRect();\n    var pt = [];\n    var idx = axis.orient === 'horizontal' ? 0 : 1;\n\n    if (val instanceof Array) {\n      val = val[0];\n    }\n\n    pt[idx] = axis.toGlobalCoord(axis.dataToCoord(+val));\n    pt[1 - idx] = idx === 0 ? rect.y + rect.height / 2 : rect.x + rect.width / 2;\n    return pt;\n  };\n\n  Single.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n\n  Single.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n\n  return Single;\n}();\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var singleModel = finder.singleAxisModel;\n  return singleModel && singleModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\n\nexport default Single;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Single coordinate system creator.\n */\nimport Single from './Single';\nimport { SINGLE_REFERRING } from '../../util/model';\n/**\n * Create single coordinate system and inject it into seriesModel.\n */\n\nfunction create(ecModel, api) {\n  var singles = [];\n  ecModel.eachComponent('singleAxis', function (axisModel, idx) {\n    var single = new Single(axisModel, ecModel, api);\n    single.name = 'single_' + idx;\n    single.resize(axisModel, api);\n    axisModel.coordinateSystem = single;\n    singles.push(single);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'singleAxis') {\n      var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = singleAxisModel && singleAxisModel.coordinateSystem;\n    }\n  });\n  return singles;\n}\n\nvar singleCreator = {\n  create: create,\n  dimensions: Single.prototype.dimensions\n};\nexport default singleCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer';\nimport * as viewHelper from './viewHelper';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper';\nvar XY = ['x', 'y'];\nvar WH = ['width', 'height'];\n\nvar SingleAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisPointer, _super);\n\n  function SingleAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n\n\n  SingleAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var otherExtent = getGlobalExtent(coordSys, 1 - getPointDimIndex(axis));\n    var pixelValue = coordSys.dataToPoint(value)[0];\n    var axisPointerType = axisPointerModel.get('type');\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = singleAxisHelper.layout(axisModel);\n    viewHelper.buildCartesianSingleLabelElOption( // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n\n\n  SingleAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = singleAxisHelper.layout(axisModel, {\n      labelInside: false\n    }); // @ts-ignore\n\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var position = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: position[0],\n      y: position[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n\n\n  SingleAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var dimIndex = getPointDimIndex(axis);\n    var axisExtent = getGlobalExtent(coordSys, dimIndex);\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var otherExtent = getGlobalExtent(coordSys, 1 - dimIndex);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: {\n        verticalAlign: 'middle'\n      }\n    };\n  };\n\n  return SingleAxisPointer;\n}(BaseAxisPointer);\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getPointDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = axis.getBandWidth();\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getPointDimIndex(axis))\n    };\n  }\n};\n\nfunction getPointDimIndex(axis) {\n  return axis.isHorizontal() ? 0 : 1;\n}\n\nfunction getGlobalExtent(coordSys, dimIndex) {\n  var rect = coordSys.getRect();\n  return [rect[XY[dimIndex]], rect[XY[dimIndex]] + rect[WH[dimIndex]]];\n}\n\nexport default SingleAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension';\nimport ComponentView from '../../view/Component';\nimport SingleAxisView from '../axis/SingleAxisView';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport SingleAxisModel from '../../coord/single/AxisModel';\nimport singleCreator from '../../coord/single/singleCreator';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport AxisView from '../axis/AxisView';\nimport SingleAxisPointer from '../axisPointer/SingleAxisPointer';\n\nvar SingleView =\n/** @class */\nfunction (_super) {\n  __extends(SingleView, _super);\n\n  function SingleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleView.type;\n    return _this;\n  }\n\n  SingleView.type = 'single';\n  return SingleView;\n}(ComponentView);\n\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('SingleAxisPointer', SingleAxisPointer);\n  registers.registerComponentView(SingleView); // Axis\n\n  registers.registerComponentView(SingleAxisView);\n  registers.registerComponentModel(SingleAxisModel);\n  axisModelCreator(registers, 'single', SingleAxisModel, SingleAxisModel.defaultOption);\n  registers.registerCoordinateSystem('single', singleCreator);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nimport * as graphicUtil from '../../util/graphic';\nimport * as layoutUtil from '../../util/layout';\nimport { parsePercent } from '../../util/number';\nimport ComponentModel from '../../model/Component';\nimport ComponentView from '../../view/Component';\nimport { getECData } from '../../util/innerStore';\nimport { isEC4CompatibleStyle, convertFromEC4CompatibleStyle } from '../../util/styleCompat';\nvar TRANSFORM_PROPS = {\n  x: 1,\n  y: 1,\n  scaleX: 1,\n  scaleY: 1,\n  originX: 1,\n  originY: 1,\n  rotation: 1\n};\n;\nvar inner = modelUtil.makeInner();\nvar _nonShapeGraphicElements = {\n  // Reserved but not supported in graphic component.\n  path: null,\n  compoundPath: null,\n  // Supported in graphic component.\n  group: graphicUtil.Group,\n  image: graphicUtil.Image,\n  text: graphicUtil.Text\n}; // ------------------------\n// Preprocessor\n// ------------------------\n\nvar preprocessor = function (option) {\n  var graphicOption = option.graphic; // Convert\n  // {graphic: [{left: 10, type: 'circle'}, ...]}\n  // or\n  // {graphic: {left: 10, type: 'circle'}}\n  // to\n  // {graphic: [{elements: [{left: 10, type: 'circle'}, ...]}]}\n\n  if (zrUtil.isArray(graphicOption)) {\n    if (!graphicOption[0] || !graphicOption[0].elements) {\n      option.graphic = [{\n        elements: graphicOption\n      }];\n    } else {\n      // Only one graphic instance can be instantiated. (We dont\n      // want that too many views are created in echarts._viewMap)\n      option.graphic = [option.graphic[0]];\n    }\n  } else if (graphicOption && !graphicOption.elements) {\n    option.graphic = [{\n      elements: [graphicOption]\n    }];\n  }\n};\n\n;\n\nvar GraphicComponentModel =\n/** @class */\nfunction (_super) {\n  __extends(GraphicComponentModel, _super);\n\n  function GraphicComponentModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphicComponentModel.type;\n    _this.preventAutoZ = true;\n    return _this;\n  }\n\n  GraphicComponentModel.prototype.mergeOption = function (option, ecModel) {\n    // Prevent default merge to elements\n    var elements = this.option.elements;\n    this.option.elements = null;\n\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    this.option.elements = elements;\n  };\n\n  GraphicComponentModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    var newList = (isInit ? thisOption : newOption).elements;\n    var existList = thisOption.elements = isInit ? [] : thisOption.elements;\n    var flattenedList = [];\n\n    this._flatten(newList, flattenedList, null);\n\n    var mappingResult = modelUtil.mappingToExists(existList, flattenedList, 'normalMerge'); // Clear elOptionsToUpdate\n\n    var elOptionsToUpdate = this._elOptionsToUpdate = [];\n    zrUtil.each(mappingResult, function (resultItem, index) {\n      var newElOption = resultItem.newOption;\n\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(zrUtil.isObject(newElOption) || resultItem.existing, 'Empty graphic option definition');\n      }\n\n      if (!newElOption) {\n        return;\n      }\n\n      elOptionsToUpdate.push(newElOption);\n      setKeyInfoToNewElOption(resultItem, newElOption);\n      mergeNewElOptionToExist(existList, index, newElOption);\n      setLayoutInfoToExist(existList[index], newElOption);\n    }, this); // Clean\n\n    for (var i = existList.length - 1; i >= 0; i--) {\n      if (existList[i] == null) {\n        existList.splice(i, 1);\n      } else {\n        // $action should be volatile, otherwise option gotten from\n        // `getOption` will contain unexpected $action.\n        delete existList[i].$action;\n      }\n    }\n  };\n  /**\n   * Convert\n   * [{\n   *  type: 'group',\n   *  id: 'xx',\n   *  children: [{type: 'circle'}, {type: 'polygon'}]\n   * }]\n   * to\n   * [\n   *  {type: 'group', id: 'xx'},\n   *  {type: 'circle', parentId: 'xx'},\n   *  {type: 'polygon', parentId: 'xx'}\n   * ]\n   */\n\n\n  GraphicComponentModel.prototype._flatten = function (optionList, result, parentOption) {\n    zrUtil.each(optionList, function (option) {\n      if (!option) {\n        return;\n      }\n\n      if (parentOption) {\n        option.parentOption = parentOption;\n      }\n\n      result.push(option);\n      var children = option.children;\n\n      if (option.type === 'group' && children) {\n        this._flatten(children, result, option);\n      } // Deleting for JSON output, and for not affecting group creation.\n\n\n      delete option.children;\n    }, this);\n  }; // FIXME\n  // Pass to view using payload? setOption has a payload?\n\n\n  GraphicComponentModel.prototype.useElOptionsToUpdate = function () {\n    var els = this._elOptionsToUpdate; // Clear to avoid render duplicately when zooming.\n\n    this._elOptionsToUpdate = null;\n    return els;\n  };\n\n  GraphicComponentModel.type = 'graphic';\n  GraphicComponentModel.defaultOption = {\n    elements: [] // parentId: null\n\n  };\n  return GraphicComponentModel;\n}(ComponentModel); // ------------------------\n// View\n// ------------------------\n\n\nvar GraphicComponentView =\n/** @class */\nfunction (_super) {\n  __extends(GraphicComponentView, _super);\n\n  function GraphicComponentView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphicComponentView.type;\n    return _this;\n  }\n\n  GraphicComponentView.prototype.init = function () {\n    this._elMap = zrUtil.createHashMap();\n  };\n\n  GraphicComponentView.prototype.render = function (graphicModel, ecModel, api) {\n    // Having leveraged between use cases and algorithm complexity, a very\n    // simple layout mechanism is used:\n    // The size(width/height) can be determined by itself or its parent (not\n    // implemented yet), but can not by its children. (Top-down travel)\n    // The location(x/y) can be determined by the bounding rect of itself\n    // (can including its descendants or not) and the size of its parent.\n    // (Bottom-up travel)\n    // When `chart.clear()` or `chart.setOption({...}, true)` with the same id,\n    // view will be reused.\n    if (graphicModel !== this._lastGraphicModel) {\n      this._clear();\n    }\n\n    this._lastGraphicModel = graphicModel;\n\n    this._updateElements(graphicModel);\n\n    this._relocate(graphicModel, api);\n  };\n  /**\n   * Update graphic elements.\n   */\n\n\n  GraphicComponentView.prototype._updateElements = function (graphicModel) {\n    var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\n\n    if (!elOptionsToUpdate) {\n      return;\n    }\n\n    var elMap = this._elMap;\n    var rootGroup = this.group; // Top-down tranverse to assign graphic settings to each elements.\n\n    zrUtil.each(elOptionsToUpdate, function (elOption) {\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var elExisting = id != null ? elMap.get(id) : null;\n      var parentId = modelUtil.convertOptionIdName(elOption.parentId, null);\n      var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\n      var elType = elOption.type;\n      var elOptionStyle = elOption.style;\n\n      if (elType === 'text' && elOptionStyle) {\n        // In top/bottom mode, textVerticalAlign should not be used, which cause\n        // inaccurately locating.\n        if (elOption.hv && elOption.hv[1]) {\n          elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = elOptionStyle.verticalAlign = elOptionStyle.align = null;\n        }\n      }\n\n      var textContentOption = elOption.textContent;\n      var textConfig = elOption.textConfig;\n\n      if (elOptionStyle && isEC4CompatibleStyle(elOptionStyle, elType, !!textConfig, !!textContentOption)) {\n        var convertResult = convertFromEC4CompatibleStyle(elOptionStyle, elType, true);\n\n        if (!textConfig && convertResult.textConfig) {\n          textConfig = elOption.textConfig = convertResult.textConfig;\n        }\n\n        if (!textContentOption && convertResult.textContent) {\n          textContentOption = convertResult.textContent;\n        }\n      } // Remove unnecessary props to avoid potential problems.\n\n\n      var elOptionCleaned = getCleanedElOption(elOption); // For simple, do not support parent change, otherwise reorder is needed.\n\n      if (process.env.NODE_ENV !== 'production') {\n        elExisting && zrUtil.assert(targetElParent === elExisting.parent, 'Changing parent is not supported.');\n      }\n\n      var $action = elOption.$action || 'merge';\n\n      if ($action === 'merge') {\n        elExisting ? elExisting.attr(elOptionCleaned) : createEl(id, targetElParent, elOptionCleaned, elMap);\n      } else if ($action === 'replace') {\n        removeEl(elExisting, elMap);\n        createEl(id, targetElParent, elOptionCleaned, elMap);\n      } else if ($action === 'remove') {\n        removeEl(elExisting, elMap);\n      }\n\n      var el = elMap.get(id);\n\n      if (el && textContentOption) {\n        if ($action === 'merge') {\n          var textContentExisting = el.getTextContent();\n          textContentExisting ? textContentExisting.attr(textContentOption) : el.setTextContent(new graphicUtil.Text(textContentOption));\n        } else if ($action === 'replace') {\n          el.setTextContent(new graphicUtil.Text(textContentOption));\n        }\n      }\n\n      if (el) {\n        var elInner = inner(el);\n        elInner.__ecGraphicWidthOption = elOption.width;\n        elInner.__ecGraphicHeightOption = elOption.height;\n        setEventData(el, graphicModel, elOption);\n        graphicUtil.setTooltipConfig({\n          el: el,\n          componentModel: graphicModel,\n          itemName: el.name,\n          itemTooltipOption: elOption.tooltip\n        });\n      }\n    });\n  };\n  /**\n   * Locate graphic elements.\n   */\n\n\n  GraphicComponentView.prototype._relocate = function (graphicModel, api) {\n    var elOptions = graphicModel.option.elements;\n    var rootGroup = this.group;\n    var elMap = this._elMap;\n    var apiWidth = api.getWidth();\n    var apiHeight = api.getHeight(); // Top-down to calculate percentage width/height of group\n\n    for (var i = 0; i < elOptions.length; i++) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n\n      if (!el || !el.isGroup) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var isParentRoot = parentEl === rootGroup; // Like 'position:absolut' in css, default 0.\n\n      var elInner = inner(el);\n      var parentElInner = inner(parentEl);\n      elInner.__ecGraphicWidth = parsePercent(elInner.__ecGraphicWidthOption, isParentRoot ? apiWidth : parentElInner.__ecGraphicWidth) || 0;\n      elInner.__ecGraphicHeight = parsePercent(elInner.__ecGraphicHeightOption, isParentRoot ? apiHeight : parentElInner.__ecGraphicHeight) || 0;\n    } // Bottom-up tranvese all elements (consider ec resize) to locate elements.\n\n\n    for (var i = elOptions.length - 1; i >= 0; i--) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n\n      if (!el) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var parentElInner = inner(parentEl);\n      var containerInfo = parentEl === rootGroup ? {\n        width: apiWidth,\n        height: apiHeight\n      } : {\n        width: parentElInner.__ecGraphicWidth,\n        height: parentElInner.__ecGraphicHeight\n      }; // PENDING\n      // Currently, when `bounding: 'all'`, the union bounding rect of the group\n      // does not include the rect of [0, 0, group.width, group.height], which\n      // is probably weird for users. Should we make a break change for it?\n\n      layoutUtil.positionElement(el, elOption, containerInfo, null, {\n        hv: elOption.hv,\n        boundingMode: elOption.bounding\n      });\n    }\n  };\n  /**\n   * Clear all elements.\n   */\n\n\n  GraphicComponentView.prototype._clear = function () {\n    var elMap = this._elMap;\n    elMap.each(function (el) {\n      removeEl(el, elMap);\n    });\n    this._elMap = zrUtil.createHashMap();\n  };\n\n  GraphicComponentView.prototype.dispose = function () {\n    this._clear();\n  };\n\n  GraphicComponentView.type = 'graphic';\n  return GraphicComponentView;\n}(ComponentView);\n\nfunction createEl(id, targetElParent, elOption, elMap) {\n  var graphicType = elOption.type;\n\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(graphicType, 'graphic type MUST be set');\n  }\n\n  var Clz = zrUtil.hasOwn(_nonShapeGraphicElements, graphicType) // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  ? _nonShapeGraphicElements[graphicType] : graphicUtil.getShapeClass(graphicType);\n\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(Clz, 'graphic type can not be found');\n  }\n\n  var el = new Clz(elOption);\n  targetElParent.add(el);\n  elMap.set(id, el);\n  inner(el).__ecGraphicId = id;\n}\n\nfunction removeEl(elExisting, elMap) {\n  var existElParent = elExisting && elExisting.parent;\n\n  if (existElParent) {\n    elExisting.type === 'group' && elExisting.traverse(function (el) {\n      removeEl(el, elMap);\n    });\n    elMap.removeKey(inner(elExisting).__ecGraphicId);\n    existElParent.remove(elExisting);\n  }\n} // Remove unnecessary props to avoid potential problems.\n\n\nfunction getCleanedElOption(elOption) {\n  elOption = zrUtil.extend({}, elOption);\n  zrUtil.each(['id', 'parentId', '$action', 'hv', 'bounding', 'textContent'].concat(layoutUtil.LOCATION_PARAMS), function (name) {\n    delete elOption[name];\n  });\n  return elOption;\n}\n\nfunction isSetLoc(obj, props) {\n  var isSet;\n  zrUtil.each(props, function (prop) {\n    obj[prop] != null && obj[prop] !== 'auto' && (isSet = true);\n  });\n  return isSet;\n}\n\nfunction setKeyInfoToNewElOption(resultItem, newElOption) {\n  var existElOption = resultItem.existing; // Set id and type after id assigned.\n\n  newElOption.id = resultItem.keyInfo.id;\n  !newElOption.type && existElOption && (newElOption.type = existElOption.type); // Set parent id if not specified\n\n  if (newElOption.parentId == null) {\n    var newElParentOption = newElOption.parentOption;\n\n    if (newElParentOption) {\n      newElOption.parentId = newElParentOption.id;\n    } else if (existElOption) {\n      newElOption.parentId = existElOption.parentId;\n    }\n  } // Clear\n\n\n  newElOption.parentOption = null;\n}\n\nfunction mergeNewElOptionToExist(existList, index, newElOption) {\n  // Update existing options, for `getOption` feature.\n  var newElOptCopy = zrUtil.extend({}, newElOption);\n  var existElOption = existList[index];\n  var $action = newElOption.$action || 'merge';\n\n  if ($action === 'merge') {\n    if (existElOption) {\n      if (process.env.NODE_ENV !== 'production') {\n        var newType = newElOption.type;\n        zrUtil.assert(!newType || existElOption.type === newType, 'Please set $action: \"replace\" to change `type`');\n      } // We can ensure that newElOptCopy and existElOption are not\n      // the same object, so `merge` will not change newElOptCopy.\n\n\n      zrUtil.merge(existElOption, newElOptCopy, true); // Rigid body, use ignoreSize.\n\n      layoutUtil.mergeLayoutParam(existElOption, newElOptCopy, {\n        ignoreSize: true\n      }); // Will be used in render.\n\n      layoutUtil.copyLayoutParams(newElOption, existElOption);\n    } else {\n      existList[index] = newElOptCopy;\n    }\n  } else if ($action === 'replace') {\n    existList[index] = newElOptCopy;\n  } else if ($action === 'remove') {\n    // null will be cleaned later.\n    existElOption && (existList[index] = null);\n  }\n}\n\nfunction setLayoutInfoToExist(existItem, newElOption) {\n  if (!existItem) {\n    return;\n  }\n\n  existItem.hv = newElOption.hv = [// Rigid body, dont care `width`.\n  isSetLoc(newElOption, ['left', 'right']), // Rigid body, dont care `height`.\n  isSetLoc(newElOption, ['top', 'bottom'])]; // Give default group size. Otherwise layout error may occur.\n\n  if (existItem.type === 'group') {\n    var existingGroupOpt = existItem;\n    var newGroupOpt = newElOption;\n    existingGroupOpt.width == null && (existingGroupOpt.width = newGroupOpt.width = 0);\n    existingGroupOpt.height == null && (existingGroupOpt.height = newGroupOpt.height = 0);\n  }\n}\n\nfunction setEventData(el, graphicModel, elOption) {\n  var eventData = getECData(el).eventData; // Simple optimize for large amount of elements that no need event.\n\n  if (!el.silent && !el.ignore && !eventData) {\n    eventData = getECData(el).eventData = {\n      componentType: 'graphic',\n      componentIndex: graphicModel.componentIndex,\n      name: el.name\n    };\n  } // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n\n\n  if (eventData) {\n    eventData.info = elOption.info;\n  }\n}\n\nexport function install(registers) {\n  registers.registerComponentModel(GraphicComponentModel);\n  registers.registerComponentView(GraphicComponentView);\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { normalizeToArray } from '../../util/model';\nvar DEFAULT_TOOLBOX_BTNS = ['rect', 'polygon', 'keep', 'clear'];\nexport default function brushPreprocessor(option, isNew) {\n  var brushComponents = normalizeToArray(option ? option.brush : []);\n\n  if (!brushComponents.length) {\n    return;\n  }\n\n  var brushComponentSpecifiedBtns = [];\n  zrUtil.each(brushComponents, function (brushOpt) {\n    var tbs = brushOpt.hasOwnProperty('toolbox') ? brushOpt.toolbox : [];\n\n    if (tbs instanceof Array) {\n      brushComponentSpecifiedBtns = brushComponentSpecifiedBtns.concat(tbs);\n    }\n  });\n  var toolbox = option && option.toolbox;\n\n  if (zrUtil.isArray(toolbox)) {\n    toolbox = toolbox[0];\n  }\n\n  if (!toolbox) {\n    toolbox = {\n      feature: {}\n    };\n    option.toolbox = [toolbox];\n  }\n\n  var toolboxFeature = toolbox.feature || (toolbox.feature = {});\n  var toolboxBrush = toolboxFeature.brush || (toolboxFeature.brush = {});\n  var brushTypes = toolboxBrush.type || (toolboxBrush.type = []);\n  brushTypes.push.apply(brushTypes, brushComponentSpecifiedBtns);\n  removeDuplicate(brushTypes);\n\n  if (isNew && !brushTypes.length) {\n    brushTypes.push.apply(brushTypes, DEFAULT_TOOLBOX_BTNS);\n  }\n}\n\nfunction removeDuplicate(arr) {\n  var map = {};\n  zrUtil.each(arr, function (val) {\n    map[val] = 1;\n  });\n  arr.length = 0;\n  zrUtil.each(map, function (flag, val) {\n    arr.push(val);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as polygonContain from 'zrender/lib/contain/polygon';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { linePolygonIntersect } from '../../util/graphic';\nexport function makeBrushCommonSelectorForSeries(area) {\n  var brushType = area.brushType; // Do not use function binding or curry for performance.\n\n  var selectors = {\n    point: function (itemLayout) {\n      return selector[brushType].point(itemLayout, selectors, area);\n    },\n    rect: function (itemLayout) {\n      return selector[brushType].rect(itemLayout, selectors, area);\n    }\n  };\n  return selectors;\n}\nvar selector = {\n  lineX: getLineSelectors(0),\n  lineY: getLineSelectors(1),\n  rect: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.intersect(itemLayout);\n    }\n  },\n  polygon: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]) && polygonContain.contain(area.range, itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      var points = area.range;\n\n      if (!itemLayout || points.length <= 1) {\n        return false;\n      }\n\n      var x = itemLayout.x;\n      var y = itemLayout.y;\n      var width = itemLayout.width;\n      var height = itemLayout.height;\n      var p = points[0];\n\n      if (polygonContain.contain(points, x, y) || polygonContain.contain(points, x + width, y) || polygonContain.contain(points, x, y + height) || polygonContain.contain(points, x + width, y + height) || BoundingRect.create(itemLayout).contain(p[0], p[1]) || linePolygonIntersect(x, y, x + width, y, points) || linePolygonIntersect(x, y, x, y + height, points) || linePolygonIntersect(x + width, y, x + width, y + height, points) || linePolygonIntersect(x, y + height, x + width, y + height, points)) {\n        return true;\n      }\n    }\n  }\n};\n\nfunction getLineSelectors(xyIndex) {\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  return {\n    point: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var p = itemLayout[xyIndex];\n        return inLineRange(p, range);\n      }\n    },\n    rect: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var layoutRange = [itemLayout[xy[xyIndex]], itemLayout[xy[xyIndex]] + itemLayout[wh[xyIndex]]];\n        layoutRange[1] < layoutRange[0] && layoutRange.reverse();\n        return inLineRange(layoutRange[0], range) || inLineRange(layoutRange[1], range) || inLineRange(range[0], layoutRange) || inLineRange(range[1], layoutRange);\n      }\n    }\n  };\n}\n\nfunction inLineRange(p, range) {\n  return range[0] <= p && p <= range[1];\n}\n\nexport default selector;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport * as visualSolution from '../../visual/visualSolution';\nimport { makeBrushCommonSelectorForSeries } from './selector';\nimport * as throttleUtil from '../../util/throttle';\nimport BrushTargetManager from '../helper/BrushTargetManager';\nvar STATE_LIST = ['inBrush', 'outOfBrush'];\nvar DISPATCH_METHOD = '__ecBrushSelect';\nvar DISPATCH_FLAG = '__ecInBrushSelectEvent';\n;\nexport function layoutCovers(ecModel) {\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    var brushTargetManager = brushModel.brushTargetManager = new BrushTargetManager(brushModel.option, ecModel);\n    brushTargetManager.setInputRanges(brushModel.areas, ecModel);\n  });\n}\n/**\n * Register the visual encoding if this modules required.\n */\n\nexport default function brushVisual(ecModel, api, payload) {\n  var brushSelected = [];\n  var throttleType;\n  var throttleDelay;\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    payload && payload.type === 'takeGlobalCursor' && brushModel.setBrushOption(payload.key === 'brush' ? payload.brushOption : {\n      brushType: false\n    });\n  });\n  layoutCovers(ecModel);\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel, brushIndex) {\n    var thisBrushSelected = {\n      brushId: brushModel.id,\n      brushIndex: brushIndex,\n      brushName: brushModel.name,\n      areas: zrUtil.clone(brushModel.areas),\n      selected: []\n    }; // Every brush component exists in event params, convenient\n    // for user to find by index.\n\n    brushSelected.push(thisBrushSelected);\n    var brushOption = brushModel.option;\n    var brushLink = brushOption.brushLink;\n    var linkedSeriesMap = [];\n    var selectedDataIndexForLink = [];\n    var rangeInfoBySeries = [];\n    var hasBrushExists = false;\n\n    if (!brushIndex) {\n      // Only the first throttle setting works.\n      throttleType = brushOption.throttleType;\n      throttleDelay = brushOption.throttleDelay;\n    } // Add boundingRect and selectors to range.\n\n\n    var areas = zrUtil.map(brushModel.areas, function (area) {\n      var builder = boundingRectBuilders[area.brushType];\n      var selectableArea = zrUtil.defaults({\n        boundingRect: builder ? builder(area) : void 0\n      }, area);\n      selectableArea.selectors = makeBrushCommonSelectorForSeries(selectableArea);\n      return selectableArea;\n    });\n    var visualMappings = visualSolution.createVisualMappings(brushModel.option, STATE_LIST, function (mappingOption) {\n      mappingOption.mappingMethod = 'fixed';\n    });\n    zrUtil.isArray(brushLink) && zrUtil.each(brushLink, function (seriesIndex) {\n      linkedSeriesMap[seriesIndex] = 1;\n    });\n\n    function linkOthers(seriesIndex) {\n      return brushLink === 'all' || !!linkedSeriesMap[seriesIndex];\n    } // If no supported brush or no brush on the series,\n    // all visuals should be in original state.\n\n\n    function brushed(rangeInfoList) {\n      return !!rangeInfoList.length;\n    }\n    /**\n     * Logic for each series: (If the logic has to be modified one day, do it carefully!)\n     *\n     * ( brushed ┬ && ┬hasBrushExist ┬ && linkOthers  ) => StepA: ┬record, ┬ StepB: ┬visualByRecord.\n     *   !brushed┘    ├hasBrushExist ┤                            └nothing,┘        ├visualByRecord.\n     *                └!hasBrushExist┘                                              └nothing.\n     * ( !brushed  && ┬hasBrushExist ┬ && linkOthers  ) => StepA:  nothing,  StepB: ┬visualByRecord.\n     *                └!hasBrushExist┘                                              └nothing.\n     * ( brushed ┬ &&                     !linkOthers ) => StepA:  nothing,  StepB: ┬visualByCheck.\n     *   !brushed┘                                                                  └nothing.\n     * ( !brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB:  nothing.\n     */\n    // Step A\n\n\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var rangeInfoList = rangeInfoBySeries[seriesIndex] = [];\n      seriesModel.subType === 'parallel' ? stepAParallel(seriesModel, seriesIndex) : stepAOthers(seriesModel, seriesIndex, rangeInfoList);\n    });\n\n    function stepAParallel(seriesModel, seriesIndex) {\n      var coordSys = seriesModel.coordinateSystem;\n      hasBrushExists = hasBrushExists || coordSys.hasAxisBrushed();\n      linkOthers(seriesIndex) && coordSys.eachActiveState(seriesModel.getData(), function (activeState, dataIndex) {\n        activeState === 'active' && (selectedDataIndexForLink[dataIndex] = 1);\n      });\n    }\n\n    function stepAOthers(seriesModel, seriesIndex, rangeInfoList) {\n      if (!seriesModel.brushSelector || brushModelNotControll(brushModel, seriesIndex)) {\n        return;\n      }\n\n      zrUtil.each(areas, function (area) {\n        if (brushModel.brushTargetManager.controlSeries(area, seriesModel, ecModel)) {\n          rangeInfoList.push(area);\n        }\n\n        hasBrushExists = hasBrushExists || brushed(rangeInfoList);\n      });\n\n      if (linkOthers(seriesIndex) && brushed(rangeInfoList)) {\n        var data_1 = seriesModel.getData();\n        data_1.each(function (dataIndex) {\n          if (checkInRange(seriesModel, rangeInfoList, data_1, dataIndex)) {\n            selectedDataIndexForLink[dataIndex] = 1;\n          }\n        });\n      }\n    } // Step B\n\n\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var seriesBrushSelected = {\n        seriesId: seriesModel.id,\n        seriesIndex: seriesIndex,\n        seriesName: seriesModel.name,\n        dataIndex: []\n      }; // Every series exists in event params, convenient\n      // for user to find series by seriesIndex.\n\n      thisBrushSelected.selected.push(seriesBrushSelected);\n      var rangeInfoList = rangeInfoBySeries[seriesIndex];\n      var data = seriesModel.getData();\n      var getValueState = linkOthers(seriesIndex) ? function (dataIndex) {\n        return selectedDataIndexForLink[dataIndex] ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      } : function (dataIndex) {\n        return checkInRange(seriesModel, rangeInfoList, data, dataIndex) ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      }; // If no supported brush or no brush, all visuals are in original state.\n\n      (linkOthers(seriesIndex) ? hasBrushExists : brushed(rangeInfoList)) && visualSolution.applyVisual(STATE_LIST, visualMappings, data, getValueState);\n    });\n  });\n  dispatchAction(api, throttleType, throttleDelay, brushSelected, payload);\n}\n;\n\nfunction dispatchAction(api, throttleType, throttleDelay, brushSelected, payload) {\n  // This event will not be triggered when `setOpion`, otherwise dead lock may\n  // triggered when do `setOption` in event listener, which we do not find\n  // satisfactory way to solve yet. Some considered resolutions:\n  // (a) Diff with prevoius selected data ant only trigger event when changed.\n  // But store previous data and diff precisely (i.e., not only by dataIndex, but\n  // also detect value changes in selected data) might bring complexity or fragility.\n  // (b) Use spectial param like `silent` to suppress event triggering.\n  // But such kind of volatile param may be weird in `setOption`.\n  if (!payload) {\n    return;\n  }\n\n  var zr = api.getZr();\n\n  if (zr[DISPATCH_FLAG]) {\n    return;\n  }\n\n  if (!zr[DISPATCH_METHOD]) {\n    zr[DISPATCH_METHOD] = doDispatch;\n  }\n\n  var fn = throttleUtil.createOrUpdate(zr, DISPATCH_METHOD, throttleDelay, throttleType);\n  fn(api, brushSelected);\n}\n\nfunction doDispatch(api, brushSelected) {\n  if (!api.isDisposed()) {\n    var zr = api.getZr();\n    zr[DISPATCH_FLAG] = true;\n    api.dispatchAction({\n      type: 'brushSelect',\n      batch: brushSelected\n    });\n    zr[DISPATCH_FLAG] = false;\n  }\n}\n\nfunction checkInRange(seriesModel, rangeInfoList, data, dataIndex) {\n  for (var i = 0, len = rangeInfoList.length; i < len; i++) {\n    var area = rangeInfoList[i];\n\n    if (seriesModel.brushSelector(dataIndex, data, area.selectors, area)) {\n      return true;\n    }\n  }\n}\n\nfunction brushModelNotControll(brushModel, seriesIndex) {\n  var seriesIndices = brushModel.option.seriesIndex;\n  return seriesIndices != null && seriesIndices !== 'all' && (zrUtil.isArray(seriesIndices) ? zrUtil.indexOf(seriesIndices, seriesIndex) < 0 : seriesIndex !== seriesIndices);\n}\n\nvar boundingRectBuilders = {\n  rect: function (area) {\n    return getBoundingRectFromMinMax(area.range);\n  },\n  polygon: function (area) {\n    var minMax;\n    var range = area.range;\n\n    for (var i = 0, len = range.length; i < len; i++) {\n      minMax = minMax || [[Infinity, -Infinity], [Infinity, -Infinity]];\n      var rg = range[i];\n      rg[0] < minMax[0][0] && (minMax[0][0] = rg[0]);\n      rg[0] > minMax[0][1] && (minMax[0][1] = rg[0]);\n      rg[1] < minMax[1][0] && (minMax[1][0] = rg[1]);\n      rg[1] > minMax[1][1] && (minMax[1][1] = rg[1]);\n    }\n\n    return minMax && getBoundingRectFromMinMax(minMax);\n  }\n};\n\nfunction getBoundingRectFromMinMax(minMax) {\n  return new BoundingRect(minMax[0][0], minMax[1][0], minMax[0][1] - minMax[0][0], minMax[1][1] - minMax[1][0]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../helper/BrushController';\nimport { layoutCovers } from './visualEncoding';\nimport ComponentView from '../../view/Component';\n\nvar BrushView =\n/** @class */\nfunction (_super) {\n  __extends(BrushView, _super);\n\n  function BrushView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BrushView.type;\n    return _this;\n  }\n\n  BrushView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n    this.model;\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  };\n\n  BrushView.prototype.render = function (brushModel, ecModel, api, payload) {\n    this.model = brushModel;\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateTransform = function (brushModel, ecModel, api, payload) {\n    // PENDING: `updateTransform` is a little tricky, whose layout need\n    // to be calculate mandatorily and other stages will not be performed.\n    // Take care the correctness of the logic. See #11754 .\n    layoutCovers(ecModel);\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateVisual = function (brushModel, ecModel, api, payload) {\n    this.updateTransform(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateView = function (brushModel, ecModel, api, payload) {\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype._updateController = function (brushModel, ecModel, api, payload) {\n    // Do not update controller when drawing.\n    (!payload || payload.$from !== brushModel.id) && this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());\n  }; // updateLayout: updateController,\n  // updateVisual: updateController,\n\n\n  BrushView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n\n  BrushView.prototype._onBrush = function (eventParam) {\n    var modelId = this.model.id;\n    var areas = this.model.brushTargetManager.setOutputRanges(eventParam.areas, this.ecModel); // Action is not dispatched on drag end, because the drag end\n    // emits the same params with the last drag move event, and\n    // may have some delay when using touch pad, which makes\n    // animation not smooth (when using debounce).\n\n    (!eventParam.isEnd || eventParam.removeOnClick) && this.api.dispatchAction({\n      type: 'brush',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n    eventParam.isEnd && this.api.dispatchAction({\n      type: 'brushEnd',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n  };\n\n  BrushView.type = 'brush';\n  return BrushView;\n}(ComponentView);\n\nexport default BrushView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as visualSolution from '../../visual/visualSolution';\nimport Model from '../../model/Model';\nimport ComponentModel from '../../model/Component';\nvar DEFAULT_OUT_OF_BRUSH_COLOR = '#ddd';\n\nvar BrushModel =\n/** @class */\nfunction (_super) {\n  __extends(BrushModel, _super);\n\n  function BrushModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BrushModel.type;\n    /**\n     * @readOnly\n     */\n\n    _this.areas = [];\n    /**\n     * Current brush painting area settings.\n     * @readOnly\n     */\n\n    _this.brushOption = {};\n    return _this;\n  }\n\n  BrushModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, ['inBrush', 'outOfBrush']);\n    var inBrush = thisOption.inBrush = thisOption.inBrush || {}; // Always give default visual, consider setOption at the second time.\n\n    thisOption.outOfBrush = thisOption.outOfBrush || {\n      color: DEFAULT_OUT_OF_BRUSH_COLOR\n    };\n\n    if (!inBrush.hasOwnProperty('liftZ')) {\n      // Bigger than the highlight z lift, otherwise it will\n      // be effected by the highlight z when brush.\n      inBrush.liftZ = 5;\n    }\n  };\n  /**\n   * If `areas` is null/undefined, range state remain.\n   */\n\n\n  BrushModel.prototype.setAreas = function (areas) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(zrUtil.isArray(areas));\n      zrUtil.each(areas, function (area) {\n        zrUtil.assert(area.brushType, 'Illegal areas');\n      });\n    } // If areas is null/undefined, range state remain.\n    // This helps user to dispatchAction({type: 'brush'}) with no areas\n    // set but just want to get the current brush select info from a `brush` event.\n\n\n    if (!areas) {\n      return;\n    }\n\n    this.areas = zrUtil.map(areas, function (area) {\n      return generateBrushOption(this.option, area);\n    }, this);\n  };\n  /**\n   * Set the current painting brush option.\n   */\n\n\n  BrushModel.prototype.setBrushOption = function (brushOption) {\n    this.brushOption = generateBrushOption(this.option, brushOption);\n    this.brushType = this.brushOption.brushType;\n  };\n\n  BrushModel.type = 'brush';\n  BrushModel.dependencies = ['geo', 'grid', 'xAxis', 'yAxis', 'parallel', 'series'];\n  BrushModel.defaultOption = {\n    seriesIndex: 'all',\n    brushType: 'rect',\n    brushMode: 'single',\n    transformable: true,\n    brushStyle: {\n      borderWidth: 1,\n      color: 'rgba(210,219,238,0.3)',\n      borderColor: '#D2DBEE'\n    },\n    throttleType: 'fixRate',\n    throttleDelay: 0,\n    removeOnClick: true,\n    z: 10000\n  };\n  return BrushModel;\n}(ComponentModel);\n\nfunction generateBrushOption(option, brushOption) {\n  return zrUtil.merge({\n    brushType: option.brushType,\n    brushMode: option.brushMode,\n    transformable: option.transformable,\n    brushStyle: new Model(option.brushStyle).getItemStyle(),\n    removeOnClick: option.removeOnClick,\n    z: option.z\n  }, brushOption, true);\n}\n\nexport default BrushModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nvar ICON_TYPES = ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'];\n\nvar BrushFeature =\n/** @class */\nfunction (_super) {\n  __extends(BrushFeature, _super);\n\n  function BrushFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BrushFeature.prototype.render = function (featureModel, ecModel, api) {\n    var brushType;\n    var brushMode;\n    var isBrushed;\n    ecModel.eachComponent({\n      mainType: 'brush'\n    }, function (brushModel) {\n      brushType = brushModel.brushType;\n      brushMode = brushModel.brushOption.brushMode || 'single';\n      isBrushed = isBrushed || !!brushModel.areas.length;\n    });\n    this._brushType = brushType;\n    this._brushMode = brushMode;\n    zrUtil.each(featureModel.get('type', true), function (type) {\n      featureModel.setIconStatus(type, (type === 'keep' ? brushMode === 'multiple' : type === 'clear' ? isBrushed : type === brushType) ? 'emphasis' : 'normal');\n    });\n  };\n\n  BrushFeature.prototype.updateView = function (featureModel, ecModel, api) {\n    this.render(featureModel, ecModel, api);\n  };\n\n  BrushFeature.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon', true);\n    var icons = {};\n    zrUtil.each(model.get('type', true), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  ;\n\n  BrushFeature.prototype.onclick = function (ecModel, api, type) {\n    var brushType = this._brushType;\n    var brushMode = this._brushMode;\n\n    if (type === 'clear') {\n      // Trigger parallel action firstly\n      api.dispatchAction({\n        type: 'axisAreaSelect',\n        intervals: []\n      });\n      api.dispatchAction({\n        type: 'brush',\n        command: 'clear',\n        // Clear all areas of all brush components.\n        areas: []\n      });\n    } else {\n      api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'brush',\n        brushOption: {\n          brushType: type === 'keep' ? brushType : brushType === type ? false : type,\n          brushMode: type === 'keep' ? brushMode === 'multiple' ? 'single' : 'multiple' : brushMode\n        }\n      });\n    }\n  };\n\n  ;\n\n  BrushFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: ICON_TYPES.slice(),\n      icon: {\n        /* eslint-disable */\n        rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',\n        polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',\n        lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',\n        lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',\n        keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',\n        clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' // jshint ignore:line\n\n        /* eslint-enable */\n\n      },\n      // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`\n      title: ecModel.getLocale(['toolbox', 'brush', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return BrushFeature;\n}(ToolboxFeature);\n\nexport default BrushFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport brushPreprocessor from './preprocessor';\nimport BrushView from './BrushView';\nimport BrushModel from './BrushModel';\nimport brushVisual from './visualEncoding'; // TODO\n\nimport BrushFeature from '../toolbox/feature/Brush';\nimport { registerFeature } from '../toolbox/featureManager';\nexport function install(registers) {\n  registers.registerComponentView(BrushView);\n  registers.registerComponentModel(BrushModel);\n  registers.registerPreprocessor(brushPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, brushVisual);\n  registers.registerAction({\n    type: 'brush',\n    event: 'brush',\n    update: 'updateVisual'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'brush',\n      query: payload\n    }, function (brushModel) {\n      brushModel.setAreas(payload.areas);\n    });\n  });\n  /**\n   * payload: {\n   *      brushComponents: [\n   *          {\n   *              brushId,\n   *              brushIndex,\n   *              brushName,\n   *              series: [\n   *                  {\n   *                      seriesId,\n   *                      seriesIndex,\n   *                      seriesName,\n   *                      rawIndices: [21, 34, ...]\n   *                  },\n   *                  ...\n   *              ]\n   *          },\n   *          ...\n   *      ]\n   * }\n   */\n\n  registers.registerAction({\n    type: 'brushSelect',\n    event: 'brushSelected',\n    update: 'none'\n  }, function () {});\n  registers.registerAction({\n    type: 'brushEnd',\n    event: 'brushEnd',\n    update: 'none'\n  }, function () {});\n  registerFeature('brush', BrushFeature);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\nexport default function checkMarkerInSeries(seriesOpts, markerType) {\n  if (!seriesOpts) {\n    return false;\n  }\n\n  var seriesOptArr = isArray(seriesOpts) ? seriesOpts : [seriesOpts];\n\n  for (var idx = 0; idx < seriesOptArr.length; idx++) {\n    if (seriesOptArr[idx] && seriesOptArr[idx][markerType]) {\n      return true;\n    }\n  }\n\n  return false;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat';\nimport ComponentModel from '../../model/Component';\nimport { makeInner, defaultEmphasis } from '../../util/model';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup';\n\nfunction fillLabel(opt) {\n  defaultEmphasis(opt, 'label', ['show']);\n} // { [componentType]: MarkerModel }\n\n\nvar inner = makeInner();\n\nvar MarkerModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkerModel, _super);\n\n  function MarkerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerModel.type;\n    /**\n     * If marker model is created by self from series\n     */\n\n    _this.createdBySelf = false;\n    return _this;\n  }\n  /**\n   * @overrite\n   */\n\n\n  MarkerModel.prototype.init = function (option, parentModel, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.type === 'marker') {\n        throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\n      }\n    }\n\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._mergeOption(option, ecModel, false, true);\n  };\n\n  MarkerModel.prototype.isAnimationEnabled = function () {\n    if (env.node) {\n      return false;\n    }\n\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  };\n  /**\n   * @overrite\n   */\n\n\n  MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\n    this._mergeOption(newOpt, ecModel, false, false);\n  };\n\n  MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\n    var componentType = this.mainType;\n\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        // mainType can be markPoint, markLine, markArea\n        var markerOpt = seriesModel.get(this.mainType, true);\n        var markerModel = inner(seriesModel)[componentType];\n\n        if (!markerOpt || !markerOpt.data) {\n          inner(seriesModel)[componentType] = null;\n          return;\n        }\n\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel); // markerModel = new ImplementedMarkerModel(\n          //     markerOpt, this, ecModel\n          // );\n\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel._mergeOption(markerOpt, ecModel, true);\n        }\n\n        inner(seriesModel)[componentType] = markerModel;\n      }, this);\n    }\n  };\n\n  MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var itemName = data.getName(dataIndex);\n    return createTooltipMarkup('section', {\n      header: this.name,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: itemName,\n        value: value,\n        noName: !itemName,\n        noValue: value == null\n      })]\n    });\n  };\n\n  MarkerModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  MarkerModel.prototype.setData = function (data) {\n    this._data = data;\n  };\n\n  MarkerModel.getMarkerModelFromSeries = function (seriesModel, // Support three types of markers. Strict check.\n  componentType) {\n    return inner(seriesModel)[componentType];\n  };\n\n  MarkerModel.type = 'marker';\n  MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\n  return MarkerModel;\n}(ComponentModel);\n\nzrUtil.mixin(MarkerModel, DataFormatMixin.prototype);\nexport default MarkerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkPointModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkPointModel, _super);\n\n  function MarkPointModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkPointModel.type;\n    return _this;\n  }\n\n  MarkPointModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkPointModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkPointModel.type = 'markPoint';\n  MarkPointModel.defaultOption = {\n    zlevel: 0,\n    z: 5,\n    symbol: 'pin',\n    symbolSize: 50,\n    //symbolRotate: 0,\n    //symbolOffset: [0, 0]\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'inside'\n    },\n    itemStyle: {\n      borderWidth: 2\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return MarkPointModel;\n}(MarkerModel);\n\nexport default MarkPointModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as numberUtil from '../../util/number';\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper';\nimport { indexOf, curry, clone, isArray } from 'zrender/lib/core/util';\n\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\n\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n} // Make it simple, do not visit all stacked value to count precision.\n// function getPrecision(data, valueAxisDim, dataIndex) {\n//     let precision = -1;\n//     let stackedDim = data.mapDimension(valueAxisDim);\n//     do {\n//         precision = Math.max(\n//             numberUtil.getPrecision(data.get(stackedDim, dataIndex)),\n//             precision\n//         );\n//         let stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n//         if (stackedOnSeries) {\n//             let byValue = data.get(data.getCalculationInfo('stackedByDimension'), dataIndex);\n//             data = stackedOnSeries.getData();\n//             dataIndex = data.indexOf(data.getCalculationInfo('stackedByDimension'), byValue);\n//             stackedDim = data.getCalculationInfo('stackedDimension');\n//         }\n//         else {\n//             data = null;\n//         }\n//     } while (data);\n//     return precision;\n// }\n\n\nfunction markerTypeCalculatorWithExtent(markerType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var stacked = isDimensionStacked(data, targetDataDim\n  /*, otherDataDim*/\n  );\n  var calcDataDim = stacked ? data.getCalculationInfo('stackResultDimension') : targetDataDim;\n  var value = numCalculate(data, calcDataDim, markerType);\n  var dataIndex = data.indicesOfNearest(calcDataDim, value)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\n  coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\n  var coordArrValue = data.get(targetDataDim, dataIndex); // Make it simple, do not visit all stacked value to count precision.\n\n  var precision = numberUtil.getPrecision(data.get(targetDataDim, dataIndex));\n  precision = Math.min(precision, 20);\n\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n\n  return [coordArr, coordArrValue];\n} // TODO Specified percent\n\n\nvar markerTypeCalculator = {\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n  average: curry(markerTypeCalculatorWithExtent, 'average'),\n  median: curry(markerTypeCalculatorWithExtent, 'median')\n};\n/**\n * Transform markPoint data item to format used in List by do the following\n * 1. Calculate statistic like `max`, `min`, `average`\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\n * @param  {module:echarts/model/Series} seriesModel\n * @param  {module:echarts/coord/*} [coordSys]\n * @param  {Object} item\n * @return {Object}\n */\n\nexport function dataTransform(seriesModel, item) {\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem; // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n\n  if (item && !hasXAndY(item) && !isArray(item.coord) && coordSys) {\n    var dims = coordSys.dimensions;\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel); // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n\n    item = clone(item);\n\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      var coordInfo = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\n      item.coord = coordInfo[0]; // Force to use the value of calculated value.\n      // let item use the value without stack.\n\n      item.value = coordInfo[1];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      var coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis]; // Each coord support max, min, average\n\n      for (var i = 0; i < 2; i++) {\n        if (markerTypeCalculator[coord[i]]) {\n          coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\n        }\n      }\n\n      item.coord = coord;\n    }\n  }\n\n  return item;\n}\nexport function getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n    ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\n  }\n\n  return ret;\n}\n\nfunction dataDimToCoordDim(seriesModel, dataDim) {\n  var data = seriesModel.getData();\n  var dimensions = data.dimensions;\n  dataDim = data.getDimension(dataDim);\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimItem = data.getDimensionInfo(dimensions[i]);\n\n    if (dimItem.name === dataDim) {\n      return dimItem.coordDim;\n    }\n  }\n}\n/**\n * Filter data which is out of coordinateSystem range\n * [dataFilter description]\n */\n\n\nexport function dataFilter( // Currently only polar and cartesian has containData.\ncoordSys, item) {\n  // Alwalys return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\nexport function dimValueGetter(item, dimName, dataIndex, dimIndex) {\n  // x, y, radius, angle\n  if (dimIndex < 2) {\n    return item.coord && item.coord[dimIndex];\n  }\n\n  return item.value;\n}\nexport function numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum_1 = 0;\n    var count_1 = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum_1 += val;\n        count_1++;\n      }\n    });\n    return sum_1 / count_1;\n  } else if (type === 'median') {\n    return data.getMedian(valueDataDim);\n  } else {\n    // max & min\n    return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport { createHashMap, each } from 'zrender/lib/core/util';\nimport MarkerModel from './MarkerModel';\nimport { makeInner } from '../../util/model';\nimport { enterBlur } from '../../util/states';\nvar inner = makeInner();\n\nvar MarkerView =\n/** @class */\nfunction (_super) {\n  __extends(MarkerView, _super);\n\n  function MarkerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerView.type;\n    return _this;\n  }\n\n  MarkerView.prototype.init = function () {\n    this.markerGroupMap = createHashMap();\n  };\n\n  MarkerView.prototype.render = function (markerModel, ecModel, api) {\n    var _this = this;\n\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      inner(item).keep = false;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\n    });\n    markerGroupMap.each(function (item) {\n      !inner(item).keep && _this.group.remove(item.group);\n    });\n  };\n\n  MarkerView.prototype.markKeep = function (drawGroup) {\n    inner(drawGroup).keep = true;\n  };\n\n  MarkerView.prototype.blurSeries = function (seriesModelList) {\n    var _this = this;\n\n    each(seriesModelList, function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n\n      if (markerModel) {\n        var data = markerModel.getData();\n        data.eachItemGraphicEl(function (el) {\n          if (el) {\n            enterBlur(el);\n          }\n        });\n      }\n    });\n  };\n\n  MarkerView.type = 'marker';\n  return MarkerView;\n}(ComponentView);\n\nexport default MarkerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../../chart/helper/SymbolDraw';\nimport * as numberUtil from '../../util/number';\nimport List from '../../data/List';\nimport * as markerHelper from './markerHelper';\nimport MarkerView from './MarkerView';\nimport MarkerModel from './MarkerModel';\nimport { isFunction, map, defaults, filter, curry } from 'zrender/lib/core/util';\nimport { getECData } from '../../util/innerStore';\nimport { getVisualFromData } from '../../visual/helper';\n\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    } // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n        // Use the getMarkerPoisition\n        point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n      } else if (coordSys) {\n        var x = mpData.get(coordSys.dimensions[0], idx);\n        var y = mpData.get(coordSys.dimensions[1], idx);\n        point = coordSys.dataToPoint([x, y]);\n      } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n\n    mpData.setItemLayout(idx, point);\n  });\n}\n\nvar MarkPointView =\n/** @class */\nfunction (_super) {\n  __extends(MarkPointView, _super);\n\n  function MarkPointView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkPointView.type;\n    return _this;\n  }\n\n  MarkPointView.prototype.updateTransform = function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markPoint');\n\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n\n  MarkPointView.prototype.renderSeries = function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createList(coordSys, seriesModel, mpModel); // FIXME\n\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbol = itemModel.getShallow('symbol');\n      var symbolSize = itemModel.getShallow('symbolSize');\n      var symbolRotate = itemModel.getShallow('symbolRotate');\n\n      if (isFunction(symbol) || isFunction(symbolSize) || isFunction(symbolRotate)) {\n        var rawIdx = mpModel.getRawValue(idx);\n        var dataParams = mpModel.getDataParams(idx);\n\n        if (isFunction(symbol)) {\n          symbol = symbol(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolSize)) {\n          // FIXME 这里不兼容 ECharts 2.x，2.x 貌似参数是整个数据？\n          symbolSize = symbolSize(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolRotate)) {\n          symbolRotate = symbolRotate(rawIdx, dataParams);\n        }\n      }\n\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n\n      if (!style.fill) {\n        style.fill = color;\n      }\n\n      mpData.setItemVisual(idx, {\n        symbol: symbol,\n        symbolSize: symbolSize,\n        symbolRotate: symbolRotate,\n        style: style\n      });\n    }); // TODO Text are wrong\n\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group); // Set host model for tooltip\n    // FIXME\n\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mpModel;\n      });\n    });\n    this.markKeep(symbolDraw);\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkPointView.type = 'markPoint';\n  return MarkPointView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return defaults({\n        name: coordDim\n      }, info);\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var mpData = new List(coordDimsInfos, mpModel);\n  var dataOpt = map(mpModel.get('data'), curry(markerHelper.dataTransform, seriesModel));\n\n  if (coordSys) {\n    dataOpt = filter(dataOpt, curry(markerHelper.dataFilter, coordSys));\n  }\n\n  mpData.initData(dataOpt, null, coordSys ? markerHelper.dimValueGetter : function (item) {\n    return item.value;\n  });\n  return mpData;\n}\n\nexport default MarkPointView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries';\nimport MarkPointModel from './MarkPointModel';\nimport MarkPointView from './MarkPointView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkPointModel);\n  registers.registerComponentView(MarkPointView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markPoint')) {\n      // Make sure markPoint component is enabled\n      opt.markPoint = opt.markPoint || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkLineModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkLineModel, _super);\n\n  function MarkLineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkLineModel.type;\n    return _this;\n  }\n\n  MarkLineModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkLineModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkLineModel.type = 'markLine';\n  MarkLineModel.defaultOption = {\n    zlevel: 0,\n    z: 5,\n    symbol: ['circle', 'arrow'],\n    symbolSize: [8, 16],\n    //symbolRotate: 0,\n    symbolOffset: 0,\n    precision: 2,\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'end',\n      distance: 5\n    },\n    lineStyle: {\n      type: 'dashed'\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        width: 3\n      }\n    },\n    animationEasing: 'linear'\n  };\n  return MarkLineModel;\n}(MarkerModel);\n\nexport default MarkLineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport List from '../../data/List';\nimport * as numberUtil from '../../util/number';\nimport * as markerHelper from './markerHelper';\nimport LineDraw from '../../chart/helper/LineDraw';\nimport MarkerView from './MarkerView';\nimport { getStackedDimension } from '../../data/helper/dataStackHelper';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { getECData } from '../../util/innerStore';\nimport MarkerModel from './MarkerModel';\nimport { isArray, retrieve, retrieve2, clone, extend, logError, merge, map, defaults, curry, filter } from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nimport { getVisualFromData } from '../../visual/helper';\nvar inner = makeInner();\n\nvar markLineTransform = function (seriesModel, coordSys, mlModel, item) {\n  var data = seriesModel.getData();\n  var itemArray;\n\n  if (!isArray(item)) {\n    // Special type markLine like 'min', 'max', 'average', 'median'\n    var mlType = item.type;\n\n    if (mlType === 'min' || mlType === 'max' || mlType === 'average' || mlType === 'median' // In case\n    // data: [{\n    //   yAxis: 10\n    // }]\n    || item.xAxis != null || item.yAxis != null) {\n      var valueAxis = void 0;\n      var value = void 0;\n\n      if (item.yAxis != null || item.xAxis != null) {\n        valueAxis = coordSys.getAxis(item.yAxis != null ? 'y' : 'x');\n        value = retrieve(item.yAxis, item.xAxis);\n      } else {\n        var axisInfo = markerHelper.getAxisInfo(item, data, coordSys, seriesModel);\n        valueAxis = axisInfo.valueAxis;\n        var valueDataDim = getStackedDimension(data, axisInfo.valueDataDim);\n        value = markerHelper.numCalculate(data, valueDataDim, mlType);\n      }\n\n      var valueIndex = valueAxis.dim === 'x' ? 0 : 1;\n      var baseIndex = 1 - valueIndex; // Normized to 2d data with start and end point\n\n      var mlFrom = clone(item);\n      var mlTo = {\n        coord: []\n      };\n      mlFrom.type = null;\n      mlFrom.coord = [];\n      mlFrom.coord[baseIndex] = -Infinity;\n      mlTo.coord[baseIndex] = Infinity;\n      var precision = mlModel.get('precision');\n\n      if (precision >= 0 && typeof value === 'number') {\n        value = +value.toFixed(Math.min(precision, 20));\n      }\n\n      mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\n      itemArray = [mlFrom, mlTo, {\n        type: mlType,\n        valueIndex: item.valueIndex,\n        // Force to use the value of calculated value.\n        value: value\n      }];\n    } else {\n      // Invalid data\n      if (process.env.NODE_ENV !== 'production') {\n        logError('Invalid markLine data.');\n      }\n\n      itemArray = [];\n    }\n  } else {\n    itemArray = item;\n  }\n\n  var normalizedItem = [markerHelper.dataTransform(seriesModel, itemArray[0]), markerHelper.dataTransform(seriesModel, itemArray[1]), extend({}, itemArray[2])]; // Avoid line data type is extended by from(to) data type\n\n  normalizedItem[2].type = normalizedItem[2].type || null; // Merge from option and to option into line option\n\n  merge(normalizedItem[2], normalizedItem[0]);\n  merge(normalizedItem[2], normalizedItem[1]);\n  return normalizedItem;\n};\n\nfunction isInifinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markLine has one dim\n\n\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  var dimName = coordSys.dimensions[dimIndex];\n  return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex]) && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\n}\n\nfunction markLineFilter(coordSys, item) {\n  if (coordSys.type === 'cartesian2d') {\n    var fromCoord = item[0].coord;\n    var toCoord = item[1].coord; // In case\n    // {\n    //  markLine: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, item[0]) && markerHelper.dataFilter(coordSys, item[1]);\n}\n\nfunction updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\n    } else {\n      var dims = coordSys.dimensions;\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    } // Expand line to the edge of grid if value on one axis is Inifnity\n    // In case\n    //  markLine: {\n    //    data: [{\n    //      yAxis: 2\n    //      // or\n    //      type: 'average'\n    //    }]\n    //  }\n\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var dims = coordSys.dimensions;\n\n      if (isInifinity(data.get(dims[0], idx))) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\n      } else if (isInifinity(data.get(dims[1], idx))) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  data.setItemLayout(idx, point);\n}\n\nvar MarkLineView =\n/** @class */\nfunction (_super) {\n  __extends(MarkLineView, _super);\n\n  function MarkLineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkLineView.type;\n    return _this;\n  }\n\n  MarkLineView.prototype.updateTransform = function (markLineModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mlModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markLine');\n\n      if (mlModel) {\n        var mlData_1 = mlModel.getData();\n        var fromData_1 = inner(mlModel).from;\n        var toData_1 = inner(mlModel).to; // Update visual and layout of from symbol and to symbol\n\n        fromData_1.each(function (idx) {\n          updateSingleMarkerEndLayout(fromData_1, idx, true, seriesModel, api);\n          updateSingleMarkerEndLayout(toData_1, idx, false, seriesModel, api);\n        }); // Update layout of line\n\n        mlData_1.each(function (idx) {\n          mlData_1.setItemLayout(idx, [fromData_1.getItemLayout(idx), toData_1.getItemLayout(idx)]);\n        });\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n\n  MarkLineView.prototype.renderSeries = function (seriesModel, mlModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var lineDrawMap = this.markerGroupMap;\n    var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw());\n    this.group.add(lineDraw.group);\n    var mlData = createList(coordSys, seriesModel, mlModel);\n    var fromData = mlData.from;\n    var toData = mlData.to;\n    var lineData = mlData.line;\n    inner(mlModel).from = fromData;\n    inner(mlModel).to = toData; // Line data for tooltip and formatter\n\n    mlModel.setData(lineData);\n    var symbolType = mlModel.get('symbol');\n    var symbolSize = mlModel.get('symbolSize');\n    var symbolRotate = mlModel.get('symbolRotate');\n    var symbolOffset = mlModel.get('symbolOffset');\n\n    if (!isArray(symbolType)) {\n      symbolType = [symbolType, symbolType];\n    }\n\n    if (!isArray(symbolSize)) {\n      symbolSize = [symbolSize, symbolSize];\n    }\n\n    if (!isArray(symbolRotate)) {\n      symbolRotate = [symbolRotate, symbolRotate];\n    }\n\n    if (!isArray(symbolOffset)) {\n      symbolOffset = [symbolOffset, symbolOffset];\n    } // Update visual and layout of from symbol and to symbol\n\n\n    mlData.from.each(function (idx) {\n      updateDataVisualAndLayout(fromData, idx, true);\n      updateDataVisualAndLayout(toData, idx, false);\n    }); // Update visual and layout of line\n\n    lineData.each(function (idx) {\n      var lineStyle = lineData.getItemModel(idx).getModel('lineStyle').getLineStyle(); // lineData.setItemVisual(idx, {\n      //     color: lineColor || fromData.getItemVisual(idx, 'color')\n      // });\n\n      lineData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n\n      if (lineStyle.stroke == null) {\n        lineStyle.stroke = fromData.getItemVisual(idx, 'style').fill;\n      }\n\n      lineData.setItemVisual(idx, {\n        fromSymbolKeepAspect: fromData.getItemVisual(idx, 'symbolKeepAspect'),\n        fromSymbolOffset: fromData.getItemVisual(idx, 'symbolOffset'),\n        fromSymbolRotate: fromData.getItemVisual(idx, 'symbolRotate'),\n        fromSymbolSize: fromData.getItemVisual(idx, 'symbolSize'),\n        fromSymbol: fromData.getItemVisual(idx, 'symbol'),\n        toSymbolKeepAspect: toData.getItemVisual(idx, 'symbolKeepAspect'),\n        toSymbolOffset: toData.getItemVisual(idx, 'symbolOffset'),\n        toSymbolRotate: toData.getItemVisual(idx, 'symbolRotate'),\n        toSymbolSize: toData.getItemVisual(idx, 'symbolSize'),\n        toSymbol: toData.getItemVisual(idx, 'symbol'),\n        style: lineStyle\n      });\n    });\n    lineDraw.updateData(lineData); // Set host model for tooltip\n    // FIXME\n\n    mlData.line.eachItemGraphicEl(function (el, idx) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mlModel;\n      });\n    });\n\n    function updateDataVisualAndLayout(data, idx, isFrom) {\n      var itemModel = data.getItemModel(idx);\n      updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (style.fill == null) {\n        style.fill = getVisualFromData(seriesData, 'color');\n      }\n\n      data.setItemVisual(idx, {\n        symbolKeepAspect: itemModel.get('symbolKeepAspect'),\n        // `0` should be considered as a valid value, so use `retrieve2` instead of `||`\n        symbolOffset: retrieve2(itemModel.get('symbolOffset'), symbolOffset[isFrom ? 0 : 1]),\n        symbolRotate: retrieve2(itemModel.get('symbolRotate', true), symbolRotate[isFrom ? 0 : 1]),\n        symbolSize: retrieve2(itemModel.get('symbolSize'), symbolSize[isFrom ? 0 : 1]),\n        symbol: retrieve2(itemModel.get('symbol', true), symbolType[isFrom ? 0 : 1]),\n        style: style\n      });\n    }\n\n    this.markKeep(lineDraw);\n    lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkLineView.type = 'markLine';\n  return MarkLineView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, mlModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return defaults({\n        name: coordDim\n      }, info);\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var fromData = new List(coordDimsInfos, mlModel);\n  var toData = new List(coordDimsInfos, mlModel); // No dimensions\n\n  var lineData = new List([], mlModel);\n  var optData = map(mlModel.get('data'), curry(markLineTransform, seriesModel, coordSys, mlModel));\n\n  if (coordSys) {\n    optData = filter(optData, curry(markLineFilter, coordSys));\n  }\n\n  var dimValueGetter = coordSys ? markerHelper.dimValueGetter : function (item) {\n    return item.value;\n  };\n  fromData.initData(map(optData, function (item) {\n    return item[0];\n  }), null, dimValueGetter);\n  toData.initData(map(optData, function (item) {\n    return item[1];\n  }), null, dimValueGetter);\n  lineData.initData(map(optData, function (item) {\n    return item[2];\n  }));\n  lineData.hasItemOption = true;\n  return {\n    from: fromData,\n    to: toData,\n    line: lineData\n  };\n}\n\nexport default MarkLineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries';\nimport MarkLineModel from './MarkLineModel';\nimport MarkLineView from './MarkLineView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkLineModel);\n  registers.registerComponentView(MarkLineView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markLine')) {\n      // Make sure markLine component is enabled\n      opt.markLine = opt.markLine || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkAreaModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkAreaModel, _super);\n\n  function MarkAreaModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkAreaModel.type;\n    return _this;\n  }\n\n  MarkAreaModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkAreaModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkAreaModel.type = 'markArea';\n  MarkAreaModel.defaultOption = {\n    zlevel: 0,\n    // PENDING\n    z: 1,\n    tooltip: {\n      trigger: 'item'\n    },\n    // markArea should fixed on the coordinate system\n    animation: false,\n    label: {\n      show: true,\n      position: 'top'\n    },\n    itemStyle: {\n      // color and borderColor default to use color from series\n      // color: 'auto'\n      // borderColor: 'auto'\n      borderWidth: 0\n    },\n    emphasis: {\n      label: {\n        show: true,\n        position: 'top'\n      }\n    }\n  };\n  return MarkAreaModel;\n}(MarkerModel);\n\nexport default MarkAreaModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO Optimize on polar\n\nimport * as colorUtil from 'zrender/lib/tool/color';\nimport List from '../../data/List';\nimport * as numberUtil from '../../util/number';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, setStatesStylesFromModel } from '../../util/states';\nimport * as markerHelper from './markerHelper';\nimport MarkerView from './MarkerView';\nimport { retrieve, mergeAll, map, defaults, curry, filter } from 'zrender/lib/core/util';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport MarkerModel from './MarkerModel';\nimport { makeInner } from '../../util/model';\nimport { getVisualFromData } from '../../visual/helper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\nvar inner = makeInner();\n\nvar markAreaTransform = function (seriesModel, coordSys, maModel, item) {\n  var lt = markerHelper.dataTransform(seriesModel, item[0]);\n  var rb = markerHelper.dataTransform(seriesModel, item[1]); // FIXME make sure lt is less than rb\n\n  var ltCoord = lt.coord;\n  var rbCoord = rb.coord;\n  ltCoord[0] = retrieve(ltCoord[0], -Infinity);\n  ltCoord[1] = retrieve(ltCoord[1], -Infinity);\n  rbCoord[0] = retrieve(rbCoord[0], Infinity);\n  rbCoord[1] = retrieve(rbCoord[1], Infinity); // Merge option into one\n\n  var result = mergeAll([{}, lt, rb]);\n  result.coord = [lt.coord, rb.coord];\n  result.x0 = lt.x;\n  result.y0 = lt.y;\n  result.x1 = rb.x;\n  result.y1 = rb.y;\n  return result;\n};\n\nfunction isInifinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markArea has one dim\n\n\nfunction ifMarkAreaHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex]);\n}\n\nfunction markAreaFilter(coordSys, item) {\n  var fromCoord = item.coord[0];\n  var toCoord = item.coord[1];\n\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    // In case\n    // {\n    //  markArea: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkAreaHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkAreaHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, {\n    coord: fromCoord,\n    x: item.x0,\n    y: item.y0\n  }) || markerHelper.dataFilter(coordSys, {\n    coord: toCoord,\n    x: item.x1,\n    y: item.y1\n  });\n} // dims can be ['x0', 'y0'], ['x1', 'y1'], ['x0', 'y1'], ['x1', 'y0']\n\n\nfunction getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get(dims[0]), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get(dims[1]), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(data.getValues(dims, idx));\n    } else {\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      var pt = [x, y];\n      coordSys.clampData && coordSys.clampData(pt, pt);\n      point = coordSys.dataToPoint(pt, true);\n    }\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n\n      if (isInifinity(x)) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\n      } else if (isInifinity(y)) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  return point;\n}\n\nvar dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\n\nvar MarkAreaView =\n/** @class */\nfunction (_super) {\n  __extends(MarkAreaView, _super);\n\n  function MarkAreaView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkAreaView.type;\n    return _this;\n  }\n\n  MarkAreaView.prototype.updateTransform = function (markAreaModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var maModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markArea');\n\n      if (maModel) {\n        var areaData_1 = maModel.getData();\n        areaData_1.each(function (idx) {\n          var points = map(dimPermutations, function (dim) {\n            return getSingleMarkerEndPoint(areaData_1, idx, dim, seriesModel, api);\n          }); // Layout\n\n          areaData_1.setItemLayout(idx, points);\n          var el = areaData_1.getItemGraphicEl(idx);\n          el.setShape('points', points);\n        });\n      }\n    }, this);\n  };\n\n  MarkAreaView.prototype.renderSeries = function (seriesModel, maModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var areaGroupMap = this.markerGroupMap;\n    var polygonGroup = areaGroupMap.get(seriesId) || areaGroupMap.set(seriesId, {\n      group: new graphic.Group()\n    });\n    this.group.add(polygonGroup.group);\n    this.markKeep(polygonGroup);\n    var areaData = createList(coordSys, seriesModel, maModel); // Line data for tooltip and formatter\n\n    maModel.setData(areaData); // Update visual and layout of line\n\n    areaData.each(function (idx) {\n      // Layout\n      var points = map(dimPermutations, function (dim) {\n        return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n      });\n      var xAxisScale = coordSys.getAxis('x').scale;\n      var yAxisScale = coordSys.getAxis('y').scale;\n      var xAxisExtent = xAxisScale.getExtent();\n      var yAxisExtent = yAxisScale.getExtent();\n      var xPointExtent = [xAxisScale.parse(areaData.get('x0', idx)), xAxisScale.parse(areaData.get('x1', idx))];\n      var yPointExtent = [yAxisScale.parse(areaData.get('y0', idx)), yAxisScale.parse(areaData.get('y1', idx))];\n      numberUtil.asc(xPointExtent);\n      numberUtil.asc(yPointExtent);\n      var overlapped = !(xAxisExtent[0] > xPointExtent[1] || xAxisExtent[1] < xPointExtent[0] || yAxisExtent[0] > yPointExtent[1] || yAxisExtent[1] < yPointExtent[0]); // If none of the area is inside coordSys, allClipped is set to be true\n      // in layout so that label will not be displayed. See #12591\n\n      var allClipped = !overlapped;\n      areaData.setItemLayout(idx, {\n        points: points,\n        allClipped: allClipped\n      });\n      var style = areaData.getItemModel(idx).getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n\n      if (!style.fill) {\n        style.fill = color;\n\n        if (typeof style.fill === 'string') {\n          style.fill = colorUtil.modifyAlpha(style.fill, 0.4);\n        }\n      }\n\n      if (!style.stroke) {\n        style.stroke = color;\n      } // Visual\n\n\n      areaData.setItemVisual(idx, 'style', style);\n    });\n    areaData.diff(inner(polygonGroup).data).add(function (idx) {\n      var layout = areaData.getItemLayout(idx);\n\n      if (!layout.allClipped) {\n        var polygon = new graphic.Polygon({\n          shape: {\n            points: layout.points\n          }\n        });\n        areaData.setItemGraphicEl(idx, polygon);\n        polygonGroup.group.add(polygon);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(oldIdx);\n      var layout = areaData.getItemLayout(newIdx);\n\n      if (!layout.allClipped) {\n        if (polygon) {\n          graphic.updateProps(polygon, {\n            shape: {\n              points: layout.points\n            }\n          }, maModel, newIdx);\n        } else {\n          polygon = new graphic.Polygon({\n            shape: {\n              points: layout.points\n            }\n          });\n        }\n\n        areaData.setItemGraphicEl(newIdx, polygon);\n        polygonGroup.group.add(polygon);\n      } else if (polygon) {\n        polygonGroup.group.remove(polygon);\n      }\n    }).remove(function (idx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(idx);\n      polygonGroup.group.remove(polygon);\n    }).execute();\n    areaData.eachItemGraphicEl(function (polygon, idx) {\n      var itemModel = areaData.getItemModel(idx);\n      var style = areaData.getItemVisual(idx, 'style');\n      polygon.useStyle(areaData.getItemVisual(idx, 'style'));\n      setLabelStyle(polygon, getLabelStatesModels(itemModel), {\n        labelFetcher: maModel,\n        labelDataIndex: idx,\n        defaultText: areaData.getName(idx) || '',\n        inheritColor: typeof style.fill === 'string' ? colorUtil.modifyAlpha(style.fill, 1) : '#000'\n      });\n      setStatesStylesFromModel(polygon, itemModel);\n      enableHoverEmphasis(polygon);\n      getECData(polygon).dataModel = maModel;\n    });\n    inner(polygonGroup).data = areaData;\n    polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkAreaView.type = 'markArea';\n  return MarkAreaView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, maModel) {\n  var coordDimsInfos;\n  var areaData;\n  var dims = ['x0', 'y0', 'x1', 'y1'];\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var data = seriesModel.getData();\n      var info = data.getDimensionInfo(data.mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return defaults({\n        name: coordDim\n      }, info);\n    });\n    areaData = new List(map(dims, function (dim, idx) {\n      return {\n        name: dim,\n        type: coordDimsInfos[idx % 2].type\n      };\n    }), maModel);\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n    areaData = new List(coordDimsInfos, maModel);\n  }\n\n  var optData = map(maModel.get('data'), curry(markAreaTransform, seriesModel, coordSys, maModel));\n\n  if (coordSys) {\n    optData = filter(optData, curry(markAreaFilter, coordSys));\n  }\n\n  var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\n    // TODO should convert to ParsedValue?\n    return item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\n  } : function (item) {\n    return item.value;\n  };\n  areaData.initData(optData, null, dimValueGetter);\n  areaData.hasItemOption = true;\n  return areaData;\n}\n\nexport default MarkAreaView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport checkMarkerInSeries from './checkMarkerInSeries';\nimport MarkAreaModel from './MarkAreaModel';\nimport MarkAreaView from './MarkAreaView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkAreaModel);\n  registers.registerComponentView(MarkAreaView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markArea')) {\n      // Make sure markArea component is enabled\n      opt.markArea = opt.markArea || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar InsideZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(InsideZoomModel, _super);\n\n  function InsideZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = InsideZoomModel.type;\n    return _this;\n  }\n\n  InsideZoomModel.type = 'dataZoom.inside';\n  InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    disabled: false,\n    zoomLock: false,\n    zoomOnMouseWheel: true,\n    moveOnMouseMove: true,\n    moveOnMouseWheel: false,\n    preventDefaultMouseMove: true\n  });\n  return InsideZoomModel;\n}(DataZoomModel);\n\nexport default InsideZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nimport RoamController from '../../component/helper/RoamController';\nimport * as throttleUtil from '../../util/throttle';\nimport { makeInner } from '../../util/model';\nimport { each, curry, createHashMap } from 'zrender/lib/core/util';\nimport { collectReferCoordSysModelInfo } from './helper';\nvar inner = makeInner();\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\n\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\n\nfunction createCoordSysRecord(api, coordSysModel) {\n  // These init props will never change after record created.\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  }; // Must not do anything depends on coordSysRecord outside the event handler here,\n  // because coordSysRecord not completed yet.\n\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n        // moveOnMouseWheel, ...) enabled.\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n/**\n * This action will be throttled.\n */\n\n\nfunction dispatchAction(api, batch) {\n  api.dispatchAction({\n    type: 'dataZoom',\n    animation: {\n      easing: 'cubicOut',\n      duration: 100\n    },\n    batch: batch\n  });\n}\n\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n/**\n * Merge roamController settings when multiple dataZooms share one roamController.\n */\n\n\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType; // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n  // as string, it is probably revert to reserved word by compress tool. See #7411.\n\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    } // Prevent default move event by default. If one false, do not prevent. Otherwise\n    // users may be confused why it does not work when multiple insideZooms exist.\n\n\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      // RoamController will enable all of these functionalities,\n      // and the final behavior is determined by its event listener\n      // provided by each inside zoom.\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}\n\nexport function installDataZoomRoamProcessor(registers) {\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n    var apiInner = inner(api);\n    var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n    coordSysRecordMap.each(function (coordSysRecord) {\n      // `coordSysRecordMap` always exists (becuase it hold the `roam controller`, which should\n      // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n      coordSysRecord.dataZoomInfoMap = null;\n    });\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'inside'\n    }, function (dataZoomModel) {\n      var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n      each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n        var coordSysUid = dzCoordSysInfo.model.uid;\n        var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap()); // Notice these props might be changed each time for a single dataZoomModel.\n\n        dataZoomInfoMap.set(dataZoomModel.uid, {\n          dzReferCoordSysInfo: dzCoordSysInfo,\n          model: dataZoomModel,\n          getRange: null\n        });\n      });\n    }); // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n    // (2) Clear coord sys if not refered by any dataZoom.\n\n    coordSysRecordMap.each(function (coordSysRecord) {\n      var controller = coordSysRecord.controller;\n      var firstDzInfo;\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n      if (dataZoomInfoMap) {\n        var firstDzKey = dataZoomInfoMap.keys()[0];\n\n        if (firstDzKey != null) {\n          firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n        }\n      }\n\n      if (!firstDzInfo) {\n        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        return;\n      }\n\n      var controllerParams = mergeControllerParams(dataZoomInfoMap);\n      controller.enable(controllerParams.controlType, controllerParams.opt);\n      controller.setPointerChecker(coordSysRecord.containsPoint);\n      throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\nimport sliderMove from '../helper/sliderMove';\nimport * as roams from './roams';\nimport { bind } from 'zrender/lib/core/util';\n\nvar InsideZoomView =\n/** @class */\nfunction (_super) {\n  __extends(InsideZoomView, _super);\n\n  function InsideZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'dataZoom.inside';\n    return _this;\n  }\n\n  InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n    _super.prototype.render.apply(this, arguments);\n\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n\n      return;\n    } // Hence the `throttle` util ensures to preserve command order,\n    // here simply updating range all the time will not cause missing\n    // any of the the roam change.\n\n\n    this.range = dataZoomModel.getPercentRange(); // Reset controllers.\n\n    roams.setViewInfoToCoordSysRecord(api, dataZoomModel, {\n      pan: bind(getRangeHandlers.pan, this),\n      zoom: bind(getRangeHandlers.zoom, this),\n      scrollMove: bind(getRangeHandlers.scrollMove, this)\n    });\n  };\n\n  InsideZoomView.prototype.dispose = function () {\n    this._clear();\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  InsideZoomView.prototype._clear = function () {\n    roams.disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n    this.range = null;\n  };\n\n  InsideZoomView.type = 'dataZoom.inside';\n  return InsideZoomView;\n}(DataZoomView);\n\nvar getRangeHandlers = {\n  zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice(); // Calculate transform by the first axis.\n\n    var axisModel = coordSysInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    var scale = Math.max(1 / e.scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint; // Restrict range.\n\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    this.range = range;\n\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  },\n  pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n  }),\n  scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n  })\n};\n\nfunction makeMover(getPercentDelta) {\n  return function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice(); // Calculate transform by the first axis.\n\n    var axisModel = coordSysInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    this.range = range;\n\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  };\n}\n\nvar getDirectionInfo = {\n  grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordSysInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0]; // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1]; // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  }\n};\nexport default InsideZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport InsideZoomModel from './InsideZoomModel';\nimport InsideZoomView from './InsideZoomView';\nimport { installDataZoomRoamProcessor } from './roams';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  installCommon(registers);\n  registers.registerComponentModel(InsideZoomModel);\n  registers.registerComponentView(InsideZoomView);\n  installDataZoomRoamProcessor(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar SliderZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderZoomModel, _super);\n\n  function SliderZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderZoomModel.type;\n    return _this;\n  }\n\n  SliderZoomModel.type = 'dataZoom.slider';\n  SliderZoomModel.layoutMode = 'box';\n  SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    show: true,\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    top: 'ph',\n    width: 'ph',\n    height: 'ph',\n    left: null,\n    bottom: null,\n    borderColor: '#d2dbee',\n    borderRadius: 3,\n    backgroundColor: 'rgba(47,69,84,0)',\n    // dataBackgroundColor: '#ddd',\n    dataBackground: {\n      lineStyle: {\n        color: '#d2dbee',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#d2dbee',\n        opacity: 0.2\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#8fb0f7',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#8fb0f7',\n        opacity: 0.2\n      }\n    },\n    // Color of selected window.\n    fillerColor: 'rgba(135,175,274,0.2)',\n    handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: '#fff',\n      borderColor: '#ACB8D1'\n    },\n    moveHandleSize: 7,\n    moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n    moveHandleStyle: {\n      color: '#D2DBEE',\n      opacity: 0.7\n    },\n    showDetail: true,\n    showDataShadow: 'auto',\n    realtime: true,\n    zoomLock: false,\n    textStyle: {\n      color: '#6E7079'\n    },\n    brushSelect: true,\n    brushStyle: {\n      color: 'rgba(135,175,274,0.15)'\n    },\n    emphasis: {\n      handleStyle: {\n        borderColor: '#8FB0F7'\n      },\n      moveHandleStyle: {\n        color: '#8FB0F7'\n      }\n    }\n  });\n  return SliderZoomModel;\n}(DataZoomModel);\n\nexport default SliderZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, isFunction, isString, indexOf } from 'zrender/lib/core/util';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as graphic from '../../util/graphic';\nimport * as throttle from '../../util/throttle';\nimport DataZoomView from './DataZoomView';\nimport { linearMap, asc, parsePercent } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport sliderMove from '../helper/sliderMove';\nimport { getAxisMainType, collectReferCoordSysModelInfo } from './helper';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createSymbol, symbolBuildProxies } from '../../util/symbol';\nimport { deprecateLog } from '../../util/log';\nimport { createTextStyle } from \"../../label/labelStyle\";\nvar Rect = graphic.Rect; // Constants\n\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar DEFAULT_MOVE_HANDLE_SIZE = 7;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar REALTIME_ANIMATION_CONFIG = {\n  easing: 'cubicOut',\n  duration: 100\n};\n\nvar SliderZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SliderZoomView, _super);\n\n  function SliderZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderZoomView.type;\n    _this._displayables = {};\n    return _this;\n  }\n\n  SliderZoomView.prototype.init = function (ecModel, api) {\n    this.api = api; // A unique handler for each dataZoom component\n\n    this._onBrush = bind(this._onBrush, this);\n    this._onBrushEnd = bind(this._onBrushEnd, this);\n  };\n\n  SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    _super.prototype.render.apply(this, arguments);\n\n    throttle.createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.getOrient();\n\n    if (dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n\n      this.group.removeAll();\n      return;\n    } // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n\n    this._updateView();\n  };\n\n  SliderZoomView.prototype.dispose = function () {\n    this._clear();\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  SliderZoomView.prototype._clear = function () {\n    throttle.clear(this, '_dispatchZoomAction');\n    var zr = this.api.getZr();\n    zr.off('mousemove', this._onBrush);\n    zr.off('mouseup', this._onBrushEnd);\n  };\n\n  SliderZoomView.prototype._buildView = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    this._brushing = false;\n    this._displayables.brushRect = null;\n\n    this._resetLocation();\n\n    this._resetInterval();\n\n    var barGroup = this._displayables.sliderGroup = new graphic.Group();\n\n    this._renderBackground();\n\n    this._renderHandle();\n\n    this._renderDataShadow();\n\n    thisGroup.add(barGroup);\n\n    this._positionGroup();\n  };\n\n  SliderZoomView.prototype._resetLocation = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var showMoveHandle = dataZoomModel.get('brushSelect');\n    var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0; // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n\n    var coordRect = this._findCoordRect();\n\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }; // Default align by coordinate system rect.\n\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    }; // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n    each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  };\n\n  SliderZoomView.prototype._positionGroup = function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient; // Just use the first axis to determine mapping.\n\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var sliderGroup = this._displayables.sliderGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n    sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: 1\n    } : orient === HORIZONTAL && inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: -1\n    } : orient === VERTICAL && !inverse ? {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: 1,\n      rotation: Math.PI / 2\n    } // Dont use Math.PI, considering shadow direction.\n    : {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: -1,\n      rotation: Math.PI / 2\n    }); // Position barGroup\n\n    var rect = thisGroup.getBoundingRect([sliderGroup]);\n    thisGroup.x = location.x - rect.x;\n    thisGroup.y = location.y - rect.y;\n    thisGroup.markRedraw();\n  };\n\n  SliderZoomView.prototype._getViewExtent = function () {\n    return [0, this._size[0]];\n  };\n\n  SliderZoomView.prototype._renderBackground = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.sliderGroup;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    })); // Click panel, over shadow, below handles.\n\n    var clickPanel = new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: bind(this._onClickPanel, this)\n    });\n    var zr = this.api.getZr();\n\n    if (brushSelect) {\n      clickPanel.on('mousedown', this._onBrushStart, this);\n      clickPanel.cursor = 'crosshair';\n      zr.on('mousemove', this._onBrush);\n      zr.on('mouseup', this._onBrushEnd);\n    } else {\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    }\n\n    barGroup.add(clickPanel);\n  };\n\n  SliderZoomView.prototype._renderDataShadow = function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n    this._displayables.dataShadowSegs = [];\n\n    if (!info) {\n      return;\n    }\n\n    var size = this._size;\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n\n    if (otherDim == null) {\n      return;\n    }\n\n    var otherDataExtent = data.getDataExtent(otherDim); // Nice extent.\n\n    var otherOffset = (otherDataExtent[1] - otherDataExtent[0]) * 0.3;\n    otherDataExtent = [otherDataExtent[0] - otherOffset, otherDataExtent[1] + otherOffset];\n    var otherShadowExtent = [0, size[1]];\n    var thisShadowExtent = [0, size[0]];\n    var areaPoints = [[size[0], 0], [0, 0]];\n    var linePoints = [];\n    var step = thisShadowExtent[1] / (data.count() - 1);\n    var thisCoord = 0; // Optimize for large data shadow\n\n    var stride = Math.round(data.count() / size[0]);\n    var lastIsEmpty;\n    data.each([otherDim], function (value, index) {\n      if (stride > 0 && index % stride) {\n        thisCoord += step;\n        return;\n      } // FIXME\n      // Should consider axis.min/axis.max when drawing dataShadow.\n      // FIXME\n      // 应该使用统一的空判断？还是在list里进行空判断？\n\n\n      var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n      var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent, otherShadowExtent, true); // Attempt to draw data shadow precisely when there are empty value.\n\n      if (isEmpty && !lastIsEmpty && index) {\n        areaPoints.push([areaPoints[areaPoints.length - 1][0], 0]);\n        linePoints.push([linePoints[linePoints.length - 1][0], 0]);\n      } else if (!isEmpty && lastIsEmpty) {\n        areaPoints.push([thisCoord, 0]);\n        linePoints.push([thisCoord, 0]);\n      }\n\n      areaPoints.push([thisCoord, otherCoord]);\n      linePoints.push([thisCoord, otherCoord]);\n      thisCoord += step;\n      lastIsEmpty = isEmpty;\n    });\n    var dataZoomModel = this.dataZoomModel;\n\n    function createDataShadowGroup(isSelectedArea) {\n      var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n      var group = new graphic.Group();\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: areaPoints\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('areaStyle').getAreaStyle(),\n        silent: true,\n        z2: -20\n      });\n      var polyline = new graphic.Polyline({\n        shape: {\n          points: linePoints\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('lineStyle').getLineStyle(),\n        silent: true,\n        z2: -19\n      });\n      group.add(polygon);\n      group.add(polyline);\n      return group;\n    } // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n\n    for (var i = 0; i < 3; i++) {\n      var group = createDataShadowGroup(i === 1);\n\n      this._displayables.sliderGroup.add(group);\n\n      this._displayables.dataShadowSegs.push(group);\n    }\n  };\n\n  SliderZoomView.prototype._prepareDataShadowInfo = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n\n    if (showDataShadow === false) {\n      return;\n    } // Find a representative series.\n\n\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n      each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n\n        if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n\n        var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n        var otherDim = getOtherDim(axisDim);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: axisDim,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  };\n\n  SliderZoomView.prototype._renderHandle = function () {\n    var thisGroup = this.group;\n    var displayables = this._displayables;\n    var handles = displayables.handles = [null, null];\n    var handleLabels = displayables.handleLabels = [null, null];\n    var sliderGroup = this._displayables.sliderGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var borderRadius = dataZoomModel.get('borderRadius') || 0;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    var filler = displayables.filler = new Rect({\n      silent: brushSelect,\n      style: {\n        fill: dataZoomModel.get('fillerColor')\n      },\n      textConfig: {\n        position: 'inside'\n      }\n    });\n    sliderGroup.add(filler); // Frame border.\n\n    sliderGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1],\n        r: borderRadius\n      },\n      style: {\n        stroke: dataZoomModel.get('dataBackgroundColor') // deprecated option\n        || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    })); // Left and right handle to resize\n\n    each([0, 1], function (handleIndex) {\n      var iconStr = dataZoomModel.get('handleIcon');\n\n      if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n        // Compatitable with the old icon parsers. Which can use a path string without path://\n        iconStr = 'path://' + iconStr;\n\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n        }\n      }\n\n      var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n      path.attr({\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false),\n        z2: 5\n      });\n      var bRect = path.getBoundingRect();\n      var handleSize = dataZoomModel.get('handleSize');\n      this._handleHeight = parsePercent(handleSize, this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      path.style.strokeNoScale = true;\n      path.rectHover = true;\n      path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n      enableHoverEmphasis(path);\n      var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n      // Compatitable with previous version\n\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n\n      sliderGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.getModel('textStyle');\n      thisGroup.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: true,\n        style: createTextStyle(textStyleModel, {\n          x: 0,\n          y: 0,\n          text: '',\n          verticalAlign: 'middle',\n          align: 'center',\n          fill: textStyleModel.getTextColor(),\n          font: textStyleModel.getFont()\n        }),\n        z2: 10\n      }));\n    }, this); // Handle to move. Only visible when brushSelect is set true.\n\n    var actualMoveZone = filler;\n\n    if (brushSelect) {\n      var moveHandleHeight = parsePercent(dataZoomModel.get('moveHandleSize'), size[1]);\n      var moveHandle_1 = displayables.moveHandle = new graphic.Rect({\n        style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n        silent: true,\n        shape: {\n          r: [0, 0, 2, 2],\n          y: size[1] - 0.5,\n          height: moveHandleHeight\n        }\n      });\n      var iconSize = moveHandleHeight * 0.8;\n      var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n      moveHandleIcon.silent = true;\n      moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n      moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n      var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n      actualMoveZone = displayables.moveZone = new graphic.Rect({\n        invisible: true,\n        shape: {\n          y: size[1] - moveZoneExpandSize,\n          height: moveHandleHeight + moveZoneExpandSize\n        }\n      });\n      actualMoveZone.on('mouseover', function () {\n        api.enterEmphasis(moveHandle_1);\n      }).on('mouseout', function () {\n        api.leaveEmphasis(moveHandle_1);\n      });\n      sliderGroup.add(moveHandle_1);\n      sliderGroup.add(moveHandleIcon);\n      sliderGroup.add(actualMoveZone);\n    }\n\n    actualMoveZone.attr({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false)\n    });\n  };\n\n  SliderZoomView.prototype._resetInterval = function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n\n    var viewExtent = this._getViewExtent();\n\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  };\n\n  SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n\n    var viewExtend = this._getViewExtent();\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  };\n\n  SliderZoomView.prototype._updateView = function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scaleX: handleHeight / 2,\n        scaleY: handleHeight / 2,\n        // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n        // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n        x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n        y: size[1] / 2 - handleHeight / 2\n      });\n    }, this); // Filler\n\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n    var viewExtent = {\n      x: handleInterval[0],\n      width: handleInterval[1] - handleInterval[0]\n    }; // Move handle\n\n    if (displaybles.moveHandle) {\n      displaybles.moveHandle.setShape(viewExtent);\n      displaybles.moveZone.setShape(viewExtent); // Force update path on the invisible object\n\n      displaybles.moveZone.getBoundingRect();\n      displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n    } // update clip path of shadow.\n\n\n    var dataShadowSegs = displaybles.dataShadowSegs;\n    var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n\n    for (var i = 0; i < dataShadowSegs.length; i++) {\n      var segGroup = dataShadowSegs[i];\n      var clipPath = segGroup.getClipPath();\n\n      if (!clipPath) {\n        clipPath = new graphic.Rect();\n        segGroup.setClipPath(clipPath);\n      }\n\n      clipPath.setShape({\n        x: segIntervals[i],\n        y: 0,\n        width: segIntervals[i + 1] - segIntervals[i],\n        height: size[1]\n      });\n    }\n\n    this._updateDataInfo(nonRealtime);\n  };\n\n  SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', '']; // FIXME\n    // date型，支持formatter，autoformatter（ec2 date.getAutoFormatter）\n\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        align: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  };\n\n  SliderZoomView.prototype._formatLabel = function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n\n    var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n      value: Math.round(value)\n    }) // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  };\n  /**\n   * @param showOrHide true: show, false: hide\n   */\n\n\n  SliderZoomView.prototype._showDataInfo = function (showOrHide) {\n    // Always show when drgging.\n    showOrHide = this._dragging || showOrHide;\n    var displayables = this._displayables;\n    var handleLabels = displayables.handleLabels;\n    handleLabels[0].attr('invisible', !showOrHide);\n    handleLabels[1].attr('invisible', !showOrHide); // Highlight move handle\n\n    displayables.moveHandle && this.api[showOrHide ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n  };\n\n  SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n    this._dragging = true; // For mobile device, prevent screen slider on the button.\n\n    eventTool.stop(event.event); // Transform dx, dy to bar coordination.\n\n    var barTransform = this._displayables.sliderGroup.getLocalTransform();\n\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n\n    var realtime = this.dataZoomModel.get('realtime');\n\n    this._updateView(!realtime); // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n\n\n    changed && realtime && this._dispatchZoomAction(true);\n  };\n\n  SliderZoomView.prototype._onDragEnd = function () {\n    this._dragging = false;\n\n    this._showDataInfo(false); // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n\n\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onClickPanel = function (e) {\n    var size = this._size;\n\n    var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n    var changed = this._updateInterval('all', localPoint[0] - center);\n\n    this._updateView();\n\n    changed && this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onBrushStart = function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    this._brushStart = new graphic.Point(x, y);\n    this._brushing = true;\n    this._brushStartTime = +new Date(); // this._updateBrushRect(x, y);\n  };\n\n  SliderZoomView.prototype._onBrushEnd = function (e) {\n    if (!this._brushing) {\n      return;\n    }\n\n    var brushRect = this._displayables.brushRect;\n    this._brushing = false;\n\n    if (!brushRect) {\n      return;\n    }\n\n    brushRect.attr('ignore', true);\n    var brushShape = brushRect.shape;\n    var brushEndTime = +new Date(); // console.log(brushEndTime - this._brushStartTime);\n\n    if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n      // Will treat it as a click\n      return;\n    }\n\n    var viewExtend = this._getViewExtent();\n\n    var percentExtent = [0, 100];\n    this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n    this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n\n    this._updateView();\n\n    this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onBrush = function (e) {\n    if (this._brushing) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n\n      this._updateBrushRect(e.offsetX, e.offsetY);\n    }\n  };\n\n  SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n    var displayables = this._displayables;\n    var dataZoomModel = this.dataZoomModel;\n    var brushRect = displayables.brushRect;\n\n    if (!brushRect) {\n      brushRect = displayables.brushRect = new Rect({\n        silent: true,\n        style: dataZoomModel.getModel('brushStyle').getItemStyle()\n      });\n      displayables.sliderGroup.add(brushRect);\n    }\n\n    brushRect.attr('ignore', false);\n    var brushStart = this._brushStart;\n    var sliderGroup = this._displayables.sliderGroup;\n    var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n    var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n    var size = this._size;\n    endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n    brushRect.setShape({\n      x: startPoint[0],\n      y: 0,\n      width: endPoint[0] - startPoint[0],\n      height: size[1]\n    });\n  };\n  /**\n   * This action will be throttled.\n   */\n\n\n  SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n      start: range[0],\n      end: range[1]\n    });\n  };\n\n  SliderZoomView.prototype._findCoordRect = function () {\n    // Find the grid coresponding to the first axis referred by dataZoom.\n    var rect;\n    var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n\n    if (!rect && coordSysInfoList.length) {\n      var coordSys = coordSysInfoList[0].model.coordinateSystem;\n      rect = coordSys.getRect && coordSys.getRect();\n    }\n\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n\n    return rect;\n  };\n\n  SliderZoomView.type = 'dataZoom.slider';\n  return SliderZoomView;\n}(DataZoomView);\n\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // 这个逻辑和getOtherAxis里一致，但是写在这里是否不好\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nexport default SliderZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SliderZoomModel from './SliderZoomModel';\nimport SliderZoomView from './SliderZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SliderZoomModel);\n  registers.registerComponentView(SliderZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomInside } from './installDataZoomInside';\nimport { install as installDataZoomSlider } from './installDataZoomSlider';\nexport function install(registers) {\n  use(installDataZoomInside);\n  use(installDataZoomSlider); // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { retrieveRawValue } from '../data/helper/dataProvider';\nimport { makeInner } from '../util/model';\nimport { getDecalFromPalette } from '../model/mixin/palette';\nvar DEFAULT_OPTION = {\n  label: {\n    enabled: true\n  },\n  decal: {\n    show: false\n  }\n};\nvar inner = makeInner();\nvar decalPaletteScope = {};\nexport default function ariaVisual(ecModel, api) {\n  var ariaModel = ecModel.getModel('aria'); // See \"area enabled\" detection code in `GlobalModel.ts`.\n\n  if (!ariaModel.get('enabled')) {\n    return;\n  }\n\n  var defaultOption = zrUtil.clone(DEFAULT_OPTION);\n  zrUtil.merge(defaultOption.label, ecModel.getLocaleModel().get('aria'), false);\n  zrUtil.merge(ariaModel.option, defaultOption, false);\n  setDecal();\n  setLabel();\n\n  function setDecal() {\n    var decalModel = ariaModel.getModel('decal');\n    var useDecal = decalModel.get('show');\n\n    if (useDecal) {\n      // Each type of series use one scope.\n      // Pie and funnel are using diferrent scopes\n      var paletteScopeGroupByType_1 = zrUtil.createHashMap();\n      ecModel.eachSeries(function (seriesModel) {\n        if (!seriesModel.useColorPaletteOnData) {\n          return;\n        }\n\n        var decalScope = paletteScopeGroupByType_1.get(seriesModel.type);\n\n        if (!decalScope) {\n          decalScope = {};\n          paletteScopeGroupByType_1.set(seriesModel.type, decalScope);\n        }\n\n        inner(seriesModel).scope = decalScope;\n      });\n      ecModel.eachRawSeries(function (seriesModel) {\n        if (ecModel.isSeriesFiltered(seriesModel)) {\n          return;\n        }\n\n        if (typeof seriesModel.enableAriaDecal === 'function') {\n          // Let series define how to use decal palette on data\n          seriesModel.enableAriaDecal();\n          return;\n        }\n\n        var data = seriesModel.getData();\n\n        if (seriesModel.useColorPaletteOnData) {\n          var dataAll_1 = seriesModel.getRawData();\n          var idxMap_1 = {};\n          var decalScope_1 = inner(seriesModel).scope;\n          data.each(function (idx) {\n            var rawIdx = data.getRawIndex(idx);\n            idxMap_1[rawIdx] = idx;\n          });\n          var dataCount_1 = dataAll_1.count();\n          dataAll_1.each(function (rawIdx) {\n            var idx = idxMap_1[rawIdx];\n            var name = dataAll_1.getName(rawIdx) || rawIdx + '';\n            var paletteDecal = getDecalFromPalette(seriesModel.ecModel, name, decalScope_1, dataCount_1);\n            var specifiedDecal = data.getItemVisual(idx, 'decal');\n            data.setItemVisual(idx, 'decal', mergeDecal(specifiedDecal, paletteDecal));\n          });\n        } else {\n          var paletteDecal = getDecalFromPalette(seriesModel.ecModel, seriesModel.name, decalPaletteScope, ecModel.getSeriesCount());\n          var specifiedDecal = data.getVisual('decal');\n          data.setVisual('decal', mergeDecal(specifiedDecal, paletteDecal));\n        }\n\n        function mergeDecal(specifiedDecal, paletteDecal) {\n          // Merge decal from palette to decal from itemStyle.\n          // User do not need to specify all of the decal props.\n          var resultDecal = specifiedDecal ? zrUtil.extend(zrUtil.extend({}, paletteDecal), specifiedDecal) : paletteDecal;\n          resultDecal.dirty = true;\n          return resultDecal;\n        }\n      });\n    }\n  }\n\n  function setLabel() {\n    var labelLocale = ecModel.getLocaleModel().get('aria');\n    var labelModel = ariaModel.getModel('label');\n    labelModel.option = zrUtil.defaults(labelModel.option, labelLocale);\n\n    if (!labelModel.get('enabled')) {\n      return;\n    }\n\n    var dom = api.getZr().dom;\n\n    if (labelModel.get('description')) {\n      dom.setAttribute('aria-label', labelModel.get('description'));\n      return;\n    }\n\n    var seriesCnt = ecModel.getSeriesCount();\n    var maxDataCnt = labelModel.get(['data', 'maxCount']) || 10;\n    var maxSeriesCnt = labelModel.get(['series', 'maxCount']) || 10;\n    var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n    var ariaLabel;\n\n    if (seriesCnt < 1) {\n      // No series, no aria label\n      return;\n    } else {\n      var title = getTitle();\n\n      if (title) {\n        var withTitle = labelModel.get(['general', 'withTitle']);\n        ariaLabel = replace(withTitle, {\n          title: title\n        });\n      } else {\n        ariaLabel = labelModel.get(['general', 'withoutTitle']);\n      }\n\n      var seriesLabels_1 = [];\n      var prefix = seriesCnt > 1 ? labelModel.get(['series', 'multiple', 'prefix']) : labelModel.get(['series', 'single', 'prefix']);\n      ariaLabel += replace(prefix, {\n        seriesCount: seriesCnt\n      });\n      ecModel.eachSeries(function (seriesModel, idx) {\n        if (idx < displaySeriesCnt) {\n          var seriesLabel = void 0;\n          var seriesName = seriesModel.get('name');\n          var withName = seriesName ? 'withName' : 'withoutName';\n          seriesLabel = seriesCnt > 1 ? labelModel.get(['series', 'multiple', withName]) : labelModel.get(['series', 'single', withName]);\n          seriesLabel = replace(seriesLabel, {\n            seriesId: seriesModel.seriesIndex,\n            seriesName: seriesModel.get('name'),\n            seriesType: getSeriesTypeName(seriesModel.subType)\n          });\n          var data = seriesModel.getData();\n\n          if (data.count() > maxDataCnt) {\n            // Show part of data\n            var partialLabel = labelModel.get(['data', 'partialData']);\n            seriesLabel += replace(partialLabel, {\n              displayCnt: maxDataCnt\n            });\n          } else {\n            seriesLabel += labelModel.get(['data', 'allData']);\n          }\n\n          var dataLabels = [];\n\n          for (var i = 0; i < data.count(); i++) {\n            if (i < maxDataCnt) {\n              var name_1 = data.getName(i);\n              var value = retrieveRawValue(data, i);\n              var dataLabel = labelModel.get(['data', name_1 ? 'withName' : 'withoutName']);\n              dataLabels.push(replace(dataLabel, {\n                name: name_1,\n                value: value\n              }));\n            }\n          }\n\n          var middleSeparator_1 = labelModel.get(['data', 'separator', 'middle']);\n          var endSeparator_1 = labelModel.get(['data', 'separator', 'end']);\n          seriesLabel += dataLabels.join(middleSeparator_1) + endSeparator_1;\n          seriesLabels_1.push(seriesLabel);\n        }\n      });\n      var separatorModel = labelModel.getModel(['series', 'multiple', 'separator']);\n      var middleSeparator = separatorModel.get('middle');\n      var endSeparator = separatorModel.get('end');\n      ariaLabel += seriesLabels_1.join(middleSeparator) + endSeparator;\n      dom.setAttribute('aria-label', ariaLabel);\n    }\n  }\n\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n\n  function getTitle() {\n    var title = ecModel.get('title');\n\n    if (title && title.length) {\n      title = title[0];\n    }\n\n    return title && title.text;\n  }\n\n  function getSeriesTypeName(type) {\n    return ecModel.getLocaleModel().get(['series', 'typeNames'])[type] || '自定义图';\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function ariaPreprocessor(option) {\n  if (!option || !option.aria) {\n    return;\n  }\n\n  var aria = option.aria; // aria.show is deprecated and should use aria.enabled instead\n\n  if (aria.show != null) {\n    aria.enabled = aria.show;\n  }\n\n  aria.label = aria.label || {}; // move description, general, series, data to be under aria.label\n\n  zrUtil.each(['description', 'general', 'series', 'data'], function (name) {\n    if (aria[name] != null) {\n      aria.label[name] = aria[name];\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ariaVisual from '../../visual/aria';\nimport ariaPreprocessor from './preprocessor';\nexport function install(registers) {\n  registers.registerPreprocessor(ariaPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.ARIA, ariaVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { keys, isArray, map, isObject, isString, isRegExp, isArrayLike, hasOwn } from 'zrender/lib/core/util';\nimport { throwError, makePrintable } from './log';\nimport { getRawValueParser, createFilterComparator } from '../data/helper/dataValueHelper';\n;\nvar RELATIONAL_EXPRESSION_OP_ALIAS_MAP = {\n  value: 'eq',\n  // PENDING: not good for literal semantic?\n  '<': 'lt',\n  '<=': 'lte',\n  '>': 'gt',\n  '>=': 'gte',\n  '=': 'eq',\n  '!=': 'ne',\n  '<>': 'ne' // Might mileading for sake of the different between '==' and '===',\n  // So dont support them.\n  // '==': 'eq',\n  // '===': 'seq',\n  // '!==': 'sne'\n  // PENDING: Whether support some common alias \"ge\", \"le\", \"neq\"?\n  // ge: 'gte',\n  // le: 'lte',\n  // neq: 'ne',\n\n};\n\nvar RegExpEvaluator =\n/** @class */\nfunction () {\n  function RegExpEvaluator(rVal) {\n    // Support condVal: RegExp | string\n    var condValue = this._condVal = isString(rVal) ? new RegExp(rVal) : isRegExp(rVal) ? rVal : null;\n\n    if (condValue == null) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal regexp', rVal, 'in');\n      }\n\n      throwError(errMsg);\n    }\n  }\n\n  RegExpEvaluator.prototype.evaluate = function (lVal) {\n    var type = typeof lVal;\n    return type === 'string' ? this._condVal.test(lVal) : type === 'number' ? this._condVal.test(lVal + '') : false;\n  };\n\n  return RegExpEvaluator;\n}();\n\nvar ConstConditionInternal =\n/** @class */\nfunction () {\n  function ConstConditionInternal() {}\n\n  ConstConditionInternal.prototype.evaluate = function () {\n    return this.value;\n  };\n\n  return ConstConditionInternal;\n}();\n\nvar AndConditionInternal =\n/** @class */\nfunction () {\n  function AndConditionInternal() {}\n\n  AndConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (!children[i].evaluate()) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return AndConditionInternal;\n}();\n\nvar OrConditionInternal =\n/** @class */\nfunction () {\n  function OrConditionInternal() {}\n\n  OrConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (children[i].evaluate()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  return OrConditionInternal;\n}();\n\nvar NotConditionInternal =\n/** @class */\nfunction () {\n  function NotConditionInternal() {}\n\n  NotConditionInternal.prototype.evaluate = function () {\n    return !this.child.evaluate();\n  };\n\n  return NotConditionInternal;\n}();\n\nvar RelationalConditionInternal =\n/** @class */\nfunction () {\n  function RelationalConditionInternal() {}\n\n  RelationalConditionInternal.prototype.evaluate = function () {\n    var needParse = !!this.valueParser; // Call getValue with no `this`.\n\n    var getValue = this.getValue;\n    var tarValRaw = getValue(this.valueGetterParam);\n    var tarValParsed = needParse ? this.valueParser(tarValRaw) : null; // Relational cond follow \"and\" logic internally.\n\n    for (var i = 0; i < this.subCondList.length; i++) {\n      if (!this.subCondList[i].evaluate(needParse ? tarValParsed : tarValRaw)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return RelationalConditionInternal;\n}();\n\nfunction parseOption(exprOption, getters) {\n  if (exprOption === true || exprOption === false) {\n    var cond = new ConstConditionInternal();\n    cond.value = exprOption;\n    return cond;\n  }\n\n  var errMsg = '';\n\n  if (!isObjectNotArray(exprOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Illegal config. Expect a plain object but actually', exprOption);\n    }\n\n    throwError(errMsg);\n  }\n\n  if (exprOption.and) {\n    return parseAndOrOption('and', exprOption, getters);\n  } else if (exprOption.or) {\n    return parseAndOrOption('or', exprOption, getters);\n  } else if (exprOption.not) {\n    return parseNotOption(exprOption, getters);\n  }\n\n  return parseRelationalOption(exprOption, getters);\n}\n\nfunction parseAndOrOption(op, exprOption, getters) {\n  var subOptionArr = exprOption[op];\n  var errMsg = '';\n\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"and\"/\"or\" condition should only be `' + op + ': [...]` and must not be empty array.', 'Illegal condition:', exprOption);\n  }\n\n  if (!isArray(subOptionArr)) {\n    throwError(errMsg);\n  }\n\n  if (!subOptionArr.length) {\n    throwError(errMsg);\n  }\n\n  var cond = op === 'and' ? new AndConditionInternal() : new OrConditionInternal();\n  cond.children = map(subOptionArr, function (subOption) {\n    return parseOption(subOption, getters);\n  });\n\n  if (!cond.children.length) {\n    throwError(errMsg);\n  }\n\n  return cond;\n}\n\nfunction parseNotOption(exprOption, getters) {\n  var subOption = exprOption.not;\n  var errMsg = '';\n\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"not\" condition should only be `not: {}`.', 'Illegal condition:', exprOption);\n  }\n\n  if (!isObjectNotArray(subOption)) {\n    throwError(errMsg);\n  }\n\n  var cond = new NotConditionInternal();\n  cond.child = parseOption(subOption, getters);\n\n  if (!cond.child) {\n    throwError(errMsg);\n  }\n\n  return cond;\n}\n\nfunction parseRelationalOption(exprOption, getters) {\n  var errMsg = '';\n  var valueGetterParam = getters.prepareGetValue(exprOption);\n  var subCondList = [];\n  var exprKeys = keys(exprOption);\n  var parserName = exprOption.parser;\n  var valueParser = parserName ? getRawValueParser(parserName) : null;\n\n  for (var i = 0; i < exprKeys.length; i++) {\n    var keyRaw = exprKeys[i];\n\n    if (keyRaw === 'parser' || getters.valueGetterAttrMap.get(keyRaw)) {\n      continue;\n    }\n\n    var op = hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP, keyRaw) ? RELATIONAL_EXPRESSION_OP_ALIAS_MAP[keyRaw] : keyRaw;\n    var condValueRaw = exprOption[keyRaw];\n    var condValueParsed = valueParser ? valueParser(condValueRaw) : condValueRaw;\n    var evaluator = createFilterComparator(op, condValueParsed) || op === 'reg' && new RegExpEvaluator(condValueParsed);\n\n    if (!evaluator) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal relational operation: \"' + keyRaw + '\" in condition:', exprOption);\n      }\n\n      throwError(errMsg);\n    }\n\n    subCondList.push(evaluator);\n  }\n\n  if (!subCondList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Relational condition must have at least one operator.', 'Illegal condition:', exprOption);\n    } // No relational operator always disabled in case of dangers result.\n\n\n    throwError(errMsg);\n  }\n\n  var cond = new RelationalConditionInternal();\n  cond.valueGetterParam = valueGetterParam;\n  cond.valueParser = valueParser;\n  cond.getValue = getters.getValue;\n  cond.subCondList = subCondList;\n  return cond;\n}\n\nfunction isObjectNotArray(val) {\n  return isObject(val) && !isArrayLike(val);\n}\n\nvar ConditionalExpressionParsed =\n/** @class */\nfunction () {\n  function ConditionalExpressionParsed(exprOption, getters) {\n    this._cond = parseOption(exprOption, getters);\n  }\n\n  ConditionalExpressionParsed.prototype.evaluate = function () {\n    return this._cond.evaluate();\n  };\n\n  return ConditionalExpressionParsed;\n}();\n\n;\nexport function parseConditionalExpression(exprOption, getters) {\n  return new ConditionalExpressionParsed(exprOption, getters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseConditionalExpression } from '../../util/conditionalExpression';\nimport { hasOwn, createHashMap } from 'zrender/lib/core/util';\nimport { makePrintable, throwError } from '../../util/log';\nexport var filterTransform = {\n  type: 'echarts:filter',\n  // PEDING: enhance to filter by index rather than create new data\n  transform: function (params) {\n    // [Caveat] Fail-Fast:\n    // Do not return the whole dataset unless user config indicate it explicitly.\n    // For example, if no condition specified by mistake, return an empty result\n    // is better than return the entire raw soruce for user to find the mistake.\n    var upstream = params.upstream;\n    var rawItem;\n    var condition = parseConditionalExpression(params.config, {\n      valueGetterAttrMap: createHashMap({\n        dimension: true\n      }),\n      prepareGetValue: function (exprOption) {\n        var errMsg = '';\n        var dimLoose = exprOption.dimension;\n\n        if (!hasOwn(exprOption, 'dimension')) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Relation condition must has prop \"dimension\" specified.', 'Illegal condition:', exprOption);\n          }\n\n          throwError(errMsg);\n        }\n\n        var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n        if (!dimInfo) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal condition:', exprOption, '.\\n');\n          }\n\n          throwError(errMsg);\n        }\n\n        return {\n          dimIdx: dimInfo.index\n        };\n      },\n      getValue: function (param) {\n        return upstream.retrieveValueFromItem(rawItem, param.dimIdx);\n      }\n    });\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      rawItem = upstream.getRawDataItem(i);\n\n      if (condition.evaluate()) {\n        resultData.push(rawItem);\n      }\n    }\n\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types';\nimport { makePrintable, throwError } from '../../util/log';\nimport { each } from 'zrender/lib/core/util';\nimport { normalizeToArray } from '../../util/model';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper';\nvar sampleLog = '';\n\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\n\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function (params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = ''; // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n\n    var orderExprList = normalizeToArray(config);\n\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n\n      throwError(errMsg);\n    }\n\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n\n        throwError(errMsg_1);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n\n        throwError(errMsg_2);\n      }\n\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      var parser = parserName ? getRawValueParser(parserName) : null;\n\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    }); // TODO: support it?\n\n    var sourceFormat = upstream.sourceFormat;\n\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n\n      throwError(errMsg);\n    } // Other upstream format are all array.\n\n\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n\n        var result = orderDef.comparator.evaluate(val0, val1);\n\n        if (result !== 0) {\n          return result;\n        }\n      }\n\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { filterTransform } from './filterTransform';\nimport { sortTransform } from './sortTransform';\nexport function install(registers) {\n  registers.registerTransform(filterTransform);\n  registers.registerTransform(sortTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from './lib/extension';\nexport * from './lib/export/core'; // ----------------------------------------------\n// All of the modules that are allowed to be\n// imported are listed below.\n//\n// Users MUST NOT import other modules that are\n// not included in this list.\n// ----------------------------------------------\n\nimport { SVGRenderer, CanvasRenderer } from './lib/export/renderers';\nimport { LineChart, BarChart, PieChart, ScatterChart, RadarChart, MapChart, TreeChart, TreemapChart, GraphChart, GaugeChart, FunnelChart, ParallelChart, SankeyChart, BoxplotChart, CandlestickChart, EffectScatterChart, LinesChart, HeatmapChart, PictorialBarChart, ThemeRiverChart, SunburstChart, CustomChart } from './lib/export/charts';\nimport { GridComponent, PolarComponent, GeoComponent, SingleAxisComponent, ParallelComponent, CalendarComponent, GraphicComponent, ToolboxComponent, TooltipComponent, AxisPointerComponent, BrushComponent, TitleComponent, TimelineComponent, MarkPointComponent, MarkLineComponent, MarkAreaComponent, LegendComponent, DataZoomComponent, DataZoomInsideComponent, DataZoomSliderComponent, VisualMapComponent, VisualMapContinuousComponent, VisualMapPiecewiseComponent, AriaComponent, DatasetComponent, TransformComponent } from './lib/export/components'; // -----------------\n// Render engines\n// -----------------\n// Render via Canvas.\n// echarts.init(dom, null, { renderer: 'canvas' })\n\nuse([CanvasRenderer]); // Render via SVG.\n// echarts.init(dom, null, { renderer: 'svg' })\n\nuse([SVGRenderer]); // ----------------\n// Charts (series)\n// ----------------\n// All of the series types, for example:\n// chart.setOption({\n//     series: [{\n//         type: 'line' // or 'bar', 'pie', ...\n//     }]\n// });\n\nuse([LineChart, BarChart, PieChart, ScatterChart, RadarChart, MapChart, TreeChart, TreemapChart, GraphChart, GaugeChart, FunnelChart, ParallelChart, SankeyChart, BoxplotChart, CandlestickChart, EffectScatterChart, LinesChart, HeatmapChart, PictorialBarChart, ThemeRiverChart, SunburstChart, CustomChart]); // -------------------\n// Coordinate systems\n// -------------------\n// All of the axis modules have been included in the\n// coordinate system module below, do not need to\n// make extra import.\n// `cartesian` coordinate system. For some historical\n// reasons, it is named as grid, for example:\n// chart.setOption({\n//     grid: {...},\n//     xAxis: {...},\n//     yAxis: {...},\n//     series: [{...}]\n// });\n\nuse(GridComponent); // `polar` coordinate system, for example:\n// chart.setOption({\n//     polar: {...},\n//     radiusAxis: {...},\n//     angleAxis: {...},\n//     series: [{\n//         coordinateSystem: 'polar'\n//     }]\n// });\n\nuse(PolarComponent); // `geo` coordinate system, for example:\n// chart.setOption({\n//     geo: {...},\n//     series: [{\n//         coordinateSystem: 'geo'\n//     }]\n// });\n\nuse(GeoComponent); // `singleAxis` coordinate system (notice, it is a coordinate system\n// with only one axis, work for chart like theme river), for example:\n// chart.setOption({\n//     singleAxis: {...}\n//     series: [{type: 'themeRiver', ...}]\n// });\n\nuse(SingleAxisComponent); // `parallel` coordinate system, only work for parallel series, for example:\n// chart.setOption({\n//     parallel: {...},\n//     parallelAxis: [{...}, ...],\n//     series: [{\n//         type: 'parallel'\n//     }]\n// });\n\nuse(ParallelComponent); // `calendar` coordinate system. for example,\n// chart.setOptionp({\n//     calendar: {...},\n//     series: [{\n//         coordinateSystem: 'calendar'\n//     }]\n// );\n\nuse(CalendarComponent); // ------------------\n// Other components\n// ------------------\n// `graphic` component, for example:\n// chart.setOption({\n//     graphic: {...}\n// });\n\nuse(GraphicComponent); // `toolbox` component, for example:\n// chart.setOption({\n//     toolbox: {...}\n// });\n\nuse(ToolboxComponent); // `tooltip` component, for example:\n// chart.setOption({\n//     tooltip: {...}\n// });\n\nuse(TooltipComponent); // `axisPointer` component, for example:\n// chart.setOption({\n//     tooltip: {axisPointer: {...}, ...}\n// });\n// Or\n// chart.setOption({\n//     axisPointer: {...}\n// });\n\nuse(AxisPointerComponent); // `brush` component, for example:\n// chart.setOption({\n//     brush: {...}\n// });\n// Or\n// chart.setOption({\n//     tooltip: {feature: {brush: {...}}\n// })\n\nuse(BrushComponent); // `title` component, for example:\n// chart.setOption({\n//     title: {...}\n// });\n\nuse(TitleComponent); // `timeline` component, for example:\n// chart.setOption({\n//     timeline: {...}\n// });\n\nuse(TimelineComponent); // `markPoint` component, for example:\n// chart.setOption({\n//     series: [{markPoint: {...}}]\n// });\n\nuse(MarkPointComponent); // `markLine` component, for example:\n// chart.setOption({\n//     series: [{markLine: {...}}]\n// });\n\nuse(MarkLineComponent); // `markArea` component, for example:\n// chart.setOption({\n//     series: [{markArea: {...}}]\n// });\n\nuse(MarkAreaComponent); // `legend` component not scrollable. for example:\n// chart.setOption({\n//     legend: {...}\n// });\n\nuse(LegendComponent); // `dataZoom` component including both `dataZoomInside` and `dataZoomSlider`.\n\nuse(DataZoomComponent); // `dataZoom` component providing drag, pinch, wheel behaviors\n// inside coodinate system, for example:\n// chart.setOption({\n//     dataZoom: {type: 'inside'}\n// });\n\nuse(DataZoomInsideComponent); // `dataZoom` component providing a slider bar, for example:\n// chart.setOption({\n//     dataZoom: {type: 'slider'}\n// });\n\nuse(DataZoomSliderComponent); // `visualMap` component including both `visualMapContinuous` and `visualMapPiecewise`.\n\nuse(VisualMapComponent); // `visualMap` component providing continuous bar, for example:\n// chart.setOption({\n//     visualMap: {type: 'continuous'}\n// });\n\nuse(VisualMapContinuousComponent); // `visualMap` component providing pieces bar, for example:\n// chart.setOption({\n//     visualMap: {type: 'piecewise'}\n// });\n\nuse(VisualMapPiecewiseComponent); // `aria` component providing aria, for example:\n// chart.setOption({\n//     aria: {...}\n// });\n\nuse(AriaComponent); // dataset transform\n// chart.setOption({\n//     dataset: {\n//          transform: []\n//     }\n// });\n\nuse(TransformComponent);\nuse(DatasetComponent);","import { render } from \"./index.vue?vue&type=template&id=08526227&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=08526227&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-08526227\"\n\nexport default script"],"sourceRoot":""}